var e=Object.create,t=Object.defineProperty,n=Object.getOwnPropertyDescriptor,r=Object.getOwnPropertyNames,i=Object.getPrototypeOf,a=Object.prototype.hasOwnProperty,o=(e,t)=>()=>(e&&(t=e(e=0)),t),s=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),c=e=>{let n={};for(var r in e)t(n,r,{get:e[r],enumerable:!0});return n},l=(e,i,o,s)=>{if(i&&typeof i==`object`||typeof i==`function`)for(var c=r(i),l=0,u=c.length,d;l<u;l++)d=c[l],!a.call(e,d)&&d!==o&&t(e,d,{get:(e=>i[e]).bind(null,d),enumerable:!(s=n(i,d))||s.enumerable});return e},u=(n,r,a)=>(a=n==null?{}:e(i(n)),l(r||!n||!n.__esModule?t(a,`default`,{value:n,enumerable:!0}):a,n)),d=e=>l(t({},`__esModule`,{value:!0}),e);(function(){let e=document.createElement(`link`).relList;if(e&&e.supports&&e.supports(`modulepreload`))return;for(let e of document.querySelectorAll(`link[rel="modulepreload"]`))n(e);new MutationObserver(e=>{for(let t of e){if(t.type!==`childList`)continue;for(let e of t.addedNodes)e.tagName===`LINK`&&e.rel===`modulepreload`&&n(e)}}).observe(document,{childList:!0,subtree:!0});function t(e){let t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),e.crossOrigin===`use-credentials`?t.credentials=`include`:e.crossOrigin===`anonymous`?t.credentials=`omit`:t.credentials=`same-origin`,t}function n(e){if(e.ep)return;e.ep=!0;let n=t(e);fetch(e.href,n)}})();var f=s((exports=>{var t=Symbol.for(`react.transitional.element`),n=Symbol.for(`react.portal`),r=Symbol.for(`react.fragment`),i=Symbol.for(`react.strict_mode`),a=Symbol.for(`react.profiler`),o=Symbol.for(`react.consumer`),s=Symbol.for(`react.context`),c=Symbol.for(`react.forward_ref`),l=Symbol.for(`react.suspense`),u=Symbol.for(`react.memo`),d=Symbol.for(`react.lazy`),f=Symbol.for(`react.activity`),p=Symbol.iterator;function m(e){return typeof e!=`object`||!e?null:(e=p&&e[p]||e[`@@iterator`],typeof e==`function`?e:null)}var h={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},g=Object.assign,_={};function v(e,t,n){this.props=e,this.context=t,this.refs=_,this.updater=n||h}v.prototype.isReactComponent={},v.prototype.setState=function(e,t){if(typeof e!=`object`&&typeof e!=`function`&&e!=null)throw Error(`takes an object of state variables to update or a function which returns an object of state variables.`);this.updater.enqueueSetState(this,e,t,`setState`)},v.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,`forceUpdate`)};function y(){}y.prototype=v.prototype;function b(e,t,n){this.props=e,this.context=t,this.refs=_,this.updater=n||h}var x=b.prototype=new y;x.constructor=b,g(x,v.prototype),x.isPureReactComponent=!0;var S=Array.isArray;function C(){}var w={H:null,A:null,T:null,S:null},T=Object.prototype.hasOwnProperty;function E(e,n,r){var i=r.ref;return{$$typeof:t,type:e,key:n,ref:i===void 0?null:i,props:r}}function D(e,t){return E(e.type,t,e.props)}function O(e){return typeof e==`object`&&!!e&&e.$$typeof===t}function k(e){var t={"=":`=0`,":":`=2`};return`$`+e.replace(/[=:]/g,function(e){return t[e]})}var A=/\/+/g;function j(e,t){return typeof e==`object`&&e&&e.key!=null?k(``+e.key):t.toString(36)}function ee(e){switch(e.status){case`fulfilled`:return e.value;case`rejected`:throw e.reason;default:switch(typeof e.status==`string`?e.then(C,C):(e.status=`pending`,e.then(function(t){e.status===`pending`&&(e.status=`fulfilled`,e.value=t)},function(t){e.status===`pending`&&(e.status=`rejected`,e.reason=t)})),e.status){case`fulfilled`:return e.value;case`rejected`:throw e.reason}}throw e}function te(e,r,i,a,o){var s=typeof e;(s===`undefined`||s===`boolean`)&&(e=null);var c=!1;if(e===null)c=!0;else switch(s){case`bigint`:case`string`:case`number`:c=!0;break;case`object`:switch(e.$$typeof){case t:case n:c=!0;break;case d:return c=e._init,te(c(e._payload),r,i,a,o)}}if(c)return o=o(e),c=a===``?`.`+j(e,0):a,S(o)?(i=``,c!=null&&(i=c.replace(A,`$&/`)+`/`),te(o,r,i,``,function(e){return e})):o!=null&&(O(o)&&(o=D(o,i+(o.key==null||e&&e.key===o.key?``:(``+o.key).replace(A,`$&/`)+`/`)+c)),r.push(o)),1;c=0;var l=a===``?`.`:a+`:`;if(S(e))for(var u=0;u<e.length;u++)a=e[u],s=l+j(a,u),c+=te(a,r,i,s,o);else if(u=m(e),typeof u==`function`)for(e=u.call(e),u=0;!(a=e.next()).done;)a=a.value,s=l+j(a,u++),c+=te(a,r,i,s,o);else if(s===`object`){if(typeof e.then==`function`)return te(ee(e),r,i,a,o);throw r=String(e),Error(`Objects are not valid as a React child (found: `+(r===`[object Object]`?`object with keys {`+Object.keys(e).join(`, `)+`}`:r)+`). If you meant to render a collection of children, use an array instead.`)}return c}function ne(e,t,n){if(e==null)return e;var r=[],i=0;return te(e,r,``,``,function(e){return t.call(n,e,i++)}),r}function M(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(t){(e._status===0||e._status===-1)&&(e._status=1,e._result=t)},function(t){(e._status===0||e._status===-1)&&(e._status=2,e._result=t)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var N=typeof reportError==`function`?reportError:function(e){if(typeof window==`object`&&typeof window.ErrorEvent==`function`){var t=new window.ErrorEvent(`error`,{bubbles:!0,cancelable:!0,message:typeof e==`object`&&e&&typeof e.message==`string`?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process==`object`&&typeof process.emit==`function`){process.emit(`uncaughtException`,e);return}console.error(e)},P={map:ne,forEach:function(e,t,n){ne(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return ne(e,function(){t++}),t},toArray:function(e){return ne(e,function(e){return e})||[]},only:function(e){if(!O(e))throw Error(`React.Children.only expected to receive a single React element child.`);return e}};exports.Activity=f,exports.Children=P,exports.Component=v,exports.Fragment=r,exports.Profiler=a,exports.PureComponent=b,exports.StrictMode=i,exports.Suspense=l,exports.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=w,exports.__COMPILER_RUNTIME={__proto__:null,c:function(e){return w.H.useMemoCache(e)}},exports.cache=function(e){return function(){return e.apply(null,arguments)}},exports.cacheSignal=function(){return null},exports.cloneElement=function(e,t,n){if(e==null)throw Error(`The argument must be a React element, but you passed `+e+`.`);var r=g({},e.props),i=e.key;if(t!=null)for(a in t.key!==void 0&&(i=``+t.key),t)!T.call(t,a)||a===`key`||a===`__self`||a===`__source`||a===`ref`&&t.ref===void 0||(r[a]=t[a]);var a=arguments.length-2;if(a===1)r.children=n;else if(1<a){for(var o=Array(a),s=0;s<a;s++)o[s]=arguments[s+2];r.children=o}return E(e.type,i,r)},exports.createContext=function(e){return e={$$typeof:s,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null},e.Provider=e,e.Consumer={$$typeof:o,_context:e},e},exports.createElement=function(e,t,n){var r,i={},a=null;if(t!=null)for(r in t.key!==void 0&&(a=``+t.key),t)T.call(t,r)&&r!==`key`&&r!==`__self`&&r!==`__source`&&(i[r]=t[r]);var o=arguments.length-2;if(o===1)i.children=n;else if(1<o){for(var s=Array(o),c=0;c<o;c++)s[c]=arguments[c+2];i.children=s}if(e&&e.defaultProps)for(r in o=e.defaultProps,o)i[r]===void 0&&(i[r]=o[r]);return E(e,a,i)},exports.createRef=function(){return{current:null}},exports.forwardRef=function(e){return{$$typeof:c,render:e}},exports.isValidElement=O,exports.lazy=function(e){return{$$typeof:d,_payload:{_status:-1,_result:e},_init:M}},exports.memo=function(e,t){return{$$typeof:u,type:e,compare:t===void 0?null:t}},exports.startTransition=function(e){var t=w.T,n={};w.T=n;try{var r=e(),i=w.S;i!==null&&i(n,r),typeof r==`object`&&r&&typeof r.then==`function`&&r.then(C,N)}catch(e){N(e)}finally{t!==null&&n.types!==null&&(t.types=n.types),w.T=t}},exports.unstable_useCacheRefresh=function(){return w.H.useCacheRefresh()},exports.use=function(e){return w.H.use(e)},exports.useActionState=function(e,t,n){return w.H.useActionState(e,t,n)},exports.useCallback=function(e,t){return w.H.useCallback(e,t)},exports.useContext=function(e){return w.H.useContext(e)},exports.useDebugValue=function(){},exports.useDeferredValue=function(e,t){return w.H.useDeferredValue(e,t)},exports.useEffect=function(e,t){return w.H.useEffect(e,t)},exports.useEffectEvent=function(e){return w.H.useEffectEvent(e)},exports.useId=function(){return w.H.useId()},exports.useImperativeHandle=function(e,t,n){return w.H.useImperativeHandle(e,t,n)},exports.useInsertionEffect=function(e,t){return w.H.useInsertionEffect(e,t)},exports.useLayoutEffect=function(e,t){return w.H.useLayoutEffect(e,t)},exports.useMemo=function(e,t){return w.H.useMemo(e,t)},exports.useOptimistic=function(e,t){return w.H.useOptimistic(e,t)},exports.useReducer=function(e,t,n){return w.H.useReducer(e,t,n)},exports.useRef=function(e){return w.H.useRef(e)},exports.useState=function(e){return w.H.useState(e)},exports.useSyncExternalStore=function(e,t,n){return w.H.useSyncExternalStore(e,t,n)},exports.useTransition=function(){return w.H.useTransition()},exports.version=`19.2.0`})),p=s(((exports,t)=>{t.exports=f()})),m=s((exports=>{function t(e,t){var n=e.length;e.push(t);a:for(;0<n;){var r=n-1>>>1,a=e[r];if(0<i(a,t))e[r]=t,e[n]=a,n=r;else break a}}function n(e){return e.length===0?null:e[0]}function r(e){if(e.length===0)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;a:for(var r=0,a=e.length,o=a>>>1;r<o;){var s=2*(r+1)-1,c=e[s],l=s+1,u=e[l];if(0>i(c,n))l<a&&0>i(u,c)?(e[r]=u,e[l]=n,r=l):(e[r]=c,e[s]=n,r=s);else if(l<a&&0>i(u,n))e[r]=u,e[l]=n,r=l;else break a}}return t}function i(e,t){var n=e.sortIndex-t.sortIndex;return n===0?e.id-t.id:n}if(exports.unstable_now=void 0,typeof performance==`object`&&typeof performance.now==`function`){var a=performance;exports.unstable_now=function(){return a.now()}}else{var o=Date,s=o.now();exports.unstable_now=function(){return o.now()-s}}var c=[],l=[],u=1,d=null,f=3,p=!1,m=!1,h=!1,g=!1,_=typeof setTimeout==`function`?setTimeout:null,v=typeof clearTimeout==`function`?clearTimeout:null,y=typeof setImmediate<`u`?setImmediate:null;function b(e){for(var i=n(l);i!==null;){if(i.callback===null)r(l);else if(i.startTime<=e)r(l),i.sortIndex=i.expirationTime,t(c,i);else break;i=n(l)}}function x(e){if(h=!1,b(e),!m)if(n(c)!==null)m=!0,S||(S=!0,O());else{var t=n(l);t!==null&&j(x,t.startTime-e)}}var S=!1,C=-1,w=5,T=-1;function E(){return g?!0:!(exports.unstable_now()-T<w)}function D(){if(g=!1,S){var t=exports.unstable_now();T=t;var i=!0;try{a:{m=!1,h&&(h=!1,v(C),C=-1),p=!0;var a=f;try{b:{for(b(t),d=n(c);d!==null&&!(d.expirationTime>t&&E());){var o=d.callback;if(typeof o==`function`){d.callback=null,f=d.priorityLevel;var s=o(d.expirationTime<=t);if(t=exports.unstable_now(),typeof s==`function`){d.callback=s,b(t),i=!0;break b}d===n(c)&&r(c),b(t)}else r(c);d=n(c)}if(d!==null)i=!0;else{var u=n(l);u!==null&&j(x,u.startTime-t),i=!1}}break a}finally{d=null,f=a,p=!1}i=void 0}}finally{i?O():S=!1}}}var O;if(typeof y==`function`)O=function(){y(D)};else if(typeof MessageChannel<`u`){var k=new MessageChannel,A=k.port2;k.port1.onmessage=D,O=function(){A.postMessage(null)}}else O=function(){_(D,0)};function j(t,n){C=_(function(){t(exports.unstable_now())},n)}exports.unstable_IdlePriority=5,exports.unstable_ImmediatePriority=1,exports.unstable_LowPriority=4,exports.unstable_NormalPriority=3,exports.unstable_Profiling=null,exports.unstable_UserBlockingPriority=2,exports.unstable_cancelCallback=function(e){e.callback=null},exports.unstable_forceFrameRate=function(e){0>e||125<e?console.error(`forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported`):w=0<e?Math.floor(1e3/e):5},exports.unstable_getCurrentPriorityLevel=function(){return f},exports.unstable_next=function(e){switch(f){case 1:case 2:case 3:var t=3;break;default:t=f}var n=f;f=t;try{return e()}finally{f=n}},exports.unstable_requestPaint=function(){g=!0},exports.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=f;f=e;try{return t()}finally{f=n}},exports.unstable_scheduleCallback=function(r,i,a){var o=exports.unstable_now();switch(typeof a==`object`&&a?(a=a.delay,a=typeof a==`number`&&0<a?o+a:o):a=o,r){case 1:var s=-1;break;case 2:s=250;break;case 5:s=1073741823;break;case 4:s=1e4;break;default:s=5e3}return s=a+s,r={id:u++,callback:i,priorityLevel:r,startTime:a,expirationTime:s,sortIndex:-1},a>o?(r.sortIndex=a,t(l,r),n(c)===null&&r===n(l)&&(h?(v(C),C=-1):h=!0,j(x,a-o))):(r.sortIndex=s,t(c,r),m||p||(m=!0,S||(S=!0,O()))),r},exports.unstable_shouldYield=E,exports.unstable_wrapCallback=function(e){var t=f;return function(){var n=f;f=t;try{return e.apply(this,arguments)}finally{f=n}}}})),h=s(((exports,t)=>{t.exports=m()})),g=s((exports=>{var t=p();function n(e){var t=`https://react.dev/errors/`+e;if(1<arguments.length){t+=`?args[]=`+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+=`&args[]=`+encodeURIComponent(arguments[n])}return`Minified React error #`+e+`; visit `+t+` for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`}function r(){}var i={d:{f:r,r:function(){throw Error(n(522))},D:r,C:r,L:r,m:r,X:r,S:r,M:r},p:0,findDOMNode:null},a=Symbol.for(`react.portal`);function o(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:r==null?null:``+r,children:e,containerInfo:t,implementation:n}}var s=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function c(e,t){if(e===`font`)return``;if(typeof t==`string`)return t===`use-credentials`?t:``}exports.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,exports.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)throw Error(n(299));return o(e,t,null,r)},exports.flushSync=function(e){var t=s.T,n=i.p;try{if(s.T=null,i.p=2,e)return e()}finally{s.T=t,i.p=n,i.d.f()}},exports.preconnect=function(e,t){typeof e==`string`&&(t?(t=t.crossOrigin,t=typeof t==`string`?t===`use-credentials`?t:``:void 0):t=null,i.d.C(e,t))},exports.prefetchDNS=function(e){typeof e==`string`&&i.d.D(e)},exports.preinit=function(e,t){if(typeof e==`string`&&t&&typeof t.as==`string`){var n=t.as,r=c(n,t.crossOrigin),a=typeof t.integrity==`string`?t.integrity:void 0,o=typeof t.fetchPriority==`string`?t.fetchPriority:void 0;n===`style`?i.d.S(e,typeof t.precedence==`string`?t.precedence:void 0,{crossOrigin:r,integrity:a,fetchPriority:o}):n===`script`&&i.d.X(e,{crossOrigin:r,integrity:a,fetchPriority:o,nonce:typeof t.nonce==`string`?t.nonce:void 0})}},exports.preinitModule=function(e,t){if(typeof e==`string`)if(typeof t==`object`&&t){if(t.as==null||t.as===`script`){var n=c(t.as,t.crossOrigin);i.d.M(e,{crossOrigin:n,integrity:typeof t.integrity==`string`?t.integrity:void 0,nonce:typeof t.nonce==`string`?t.nonce:void 0})}}else t??i.d.M(e)},exports.preload=function(e,t){if(typeof e==`string`&&typeof t==`object`&&t&&typeof t.as==`string`){var n=t.as,r=c(n,t.crossOrigin);i.d.L(e,n,{crossOrigin:r,integrity:typeof t.integrity==`string`?t.integrity:void 0,nonce:typeof t.nonce==`string`?t.nonce:void 0,type:typeof t.type==`string`?t.type:void 0,fetchPriority:typeof t.fetchPriority==`string`?t.fetchPriority:void 0,referrerPolicy:typeof t.referrerPolicy==`string`?t.referrerPolicy:void 0,imageSrcSet:typeof t.imageSrcSet==`string`?t.imageSrcSet:void 0,imageSizes:typeof t.imageSizes==`string`?t.imageSizes:void 0,media:typeof t.media==`string`?t.media:void 0})}},exports.preloadModule=function(e,t){if(typeof e==`string`)if(t){var n=c(t.as,t.crossOrigin);i.d.m(e,{as:typeof t.as==`string`&&t.as!==`script`?t.as:void 0,crossOrigin:n,integrity:typeof t.integrity==`string`?t.integrity:void 0})}else i.d.m(e)},exports.requestFormReset=function(e){i.d.r(e)},exports.unstable_batchedUpdates=function(e,t){return e(t)},exports.useFormState=function(e,t,n){return s.H.useFormState(e,t,n)},exports.useFormStatus=function(){return s.H.useHostTransitionStatus()},exports.version=`19.2.0`})),_=s(((exports,t)=>{function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>`u`||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!=`function`))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}n(),t.exports=g()})),v=s((exports=>{var t=h(),n=p(),r=_();function i(e){var t=`https://react.dev/errors/`+e;if(1<arguments.length){t+=`?args[]=`+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+=`&args[]=`+encodeURIComponent(arguments[n])}return`Minified React error #`+e+`; visit `+t+` for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`}function a(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function o(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function s(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function c(e){if(e.tag===31){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function l(e){if(o(e)!==e)throw Error(i(188))}function u(e){var t=e.alternate;if(!t){if(t=o(e),t===null)throw Error(i(188));return t===e?e:null}for(var n=e,r=t;;){var a=n.return;if(a===null)break;var s=a.alternate;if(s===null){if(r=a.return,r!==null){n=r;continue}break}if(a.child===s.child){for(s=a.child;s;){if(s===n)return l(a),e;if(s===r)return l(a),t;s=s.sibling}throw Error(i(188))}if(n.return!==r.return)n=a,r=s;else{for(var c=!1,u=a.child;u;){if(u===n){c=!0,n=a,r=s;break}if(u===r){c=!0,r=a,n=s;break}u=u.sibling}if(!c){for(u=s.child;u;){if(u===n){c=!0,n=s,r=a;break}if(u===r){c=!0,r=s,n=a;break}u=u.sibling}if(!c)throw Error(i(189))}}if(n.alternate!==r)throw Error(i(190))}if(n.tag!==3)throw Error(i(188));return n.stateNode.current===n?e:t}function d(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e;for(e=e.child;e!==null;){if(t=d(e),t!==null)return t;e=e.sibling}return null}var f=Object.assign,m=Symbol.for(`react.element`),g=Symbol.for(`react.transitional.element`),v=Symbol.for(`react.portal`),y=Symbol.for(`react.fragment`),b=Symbol.for(`react.strict_mode`),x=Symbol.for(`react.profiler`),S=Symbol.for(`react.consumer`),C=Symbol.for(`react.context`),w=Symbol.for(`react.forward_ref`),T=Symbol.for(`react.suspense`),E=Symbol.for(`react.suspense_list`),D=Symbol.for(`react.memo`),O=Symbol.for(`react.lazy`),k=Symbol.for(`react.activity`),A=Symbol.for(`react.memo_cache_sentinel`),j=Symbol.iterator;function ee(e){return typeof e!=`object`||!e?null:(e=j&&e[j]||e[`@@iterator`],typeof e==`function`?e:null)}var te=Symbol.for(`react.client.reference`);function ne(e){if(e==null)return null;if(typeof e==`function`)return e.$$typeof===te?null:e.displayName||e.name||null;if(typeof e==`string`)return e;switch(e){case y:return`Fragment`;case x:return`Profiler`;case b:return`StrictMode`;case T:return`Suspense`;case E:return`SuspenseList`;case k:return`Activity`}if(typeof e==`object`)switch(e.$$typeof){case v:return`Portal`;case C:return e.displayName||`Context`;case S:return(e._context.displayName||`Context`)+`.Consumer`;case w:var t=e.render;return e=e.displayName,e||=(e=t.displayName||t.name||``,e===``?`ForwardRef`:`ForwardRef(`+e+`)`),e;case D:return t=e.displayName||null,t===null?ne(e.type)||`Memo`:t;case O:t=e._payload,e=e._init;try{return ne(e(t))}catch{}}return null}var M=Array.isArray,N=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,P=r.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,re={pending:!1,data:null,method:null,action:null},ie=[],ae=-1;function oe(e){return{current:e}}function se(e){0>ae||(e.current=ie[ae],ie[ae]=null,ae--)}function F(e,t){ae++,ie[ae]=e.current,e.current=t}var ce=oe(null),le=oe(null),ue=oe(null),de=oe(null);function fe(e,t){switch(F(ue,t),F(le,e),F(ce,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?nf(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)t=nf(t),e=rf(t,e);else switch(e){case`svg`:e=1;break;case`math`:e=2;break;default:e=0}}se(ce),F(ce,e)}function pe(){se(ce),se(le),se(ue)}function me(e){e.memoizedState!==null&&F(de,e);var t=ce.current,n=rf(t,e.type);t!==n&&(F(le,e),F(ce,n))}function he(e){le.current===e&&(se(ce),se(le)),de.current===e&&(se(de),mp._currentValue=re)}var ge,_e;function ve(e){if(ge===void 0)try{throw Error()}catch(e){var t=e.stack.trim().match(/\n( *(at )?)/);ge=t&&t[1]||``,_e=-1<e.stack.indexOf(`
    at`)?` (<anonymous>)`:-1<e.stack.indexOf(`@`)?`@unknown:0:0`:``}return`
`+ge+e+_e}var ye=!1;function be(e,t){if(!e||ye)return``;ye=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var r={DetermineComponentFrameRoot:function(){try{if(t){var n=function(){throw Error()};if(Object.defineProperty(n.prototype,`props`,{set:function(){throw Error()}}),typeof Reflect==`object`&&Reflect.construct){try{Reflect.construct(n,[])}catch(e){var r=e}Reflect.construct(e,[],n)}else{try{n.call()}catch(e){r=e}e.call(n.prototype)}}else{try{throw Error()}catch(e){r=e}(n=e())&&typeof n.catch==`function`&&n.catch(function(){})}}catch(e){if(e&&r&&typeof e.stack==`string`)return[e.stack,r.stack]}return[null,null]}};r.DetermineComponentFrameRoot.displayName=`DetermineComponentFrameRoot`;var i=Object.getOwnPropertyDescriptor(r.DetermineComponentFrameRoot,`name`);i&&i.configurable&&Object.defineProperty(r.DetermineComponentFrameRoot,`name`,{value:`DetermineComponentFrameRoot`});var a=r.DetermineComponentFrameRoot(),o=a[0],s=a[1];if(o&&s){var c=o.split(`
`),l=s.split(`
`);for(i=r=0;r<c.length&&!c[r].includes(`DetermineComponentFrameRoot`);)r++;for(;i<l.length&&!l[i].includes(`DetermineComponentFrameRoot`);)i++;if(r===c.length||i===l.length)for(r=c.length-1,i=l.length-1;1<=r&&0<=i&&c[r]!==l[i];)i--;for(;1<=r&&0<=i;r--,i--)if(c[r]!==l[i]){if(r!==1||i!==1)do if(r--,i--,0>i||c[r]!==l[i]){var u=`
`+c[r].replace(` at new `,` at `);return e.displayName&&u.includes(`<anonymous>`)&&(u=u.replace(`<anonymous>`,e.displayName)),u}while(1<=r&&0<=i);break}}}finally{ye=!1,Error.prepareStackTrace=n}return(n=e?e.displayName||e.name:``)?ve(n):``}function xe(e,t){switch(e.tag){case 26:case 27:case 5:return ve(e.type);case 16:return ve(`Lazy`);case 13:return e.child!==t&&t!==null?ve(`Suspense Fallback`):ve(`Suspense`);case 19:return ve(`SuspenseList`);case 0:case 15:return be(e.type,!1);case 11:return be(e.type.render,!1);case 1:return be(e.type,!0);case 31:return ve(`Activity`);default:return``}}function Se(e){try{var t=``,n=null;do t+=xe(e,n),n=e,e=e.return;while(e);return t}catch(e){return`
Error generating stack: `+e.message+`
`+e.stack}}var Ce=Object.prototype.hasOwnProperty,we=t.unstable_scheduleCallback,Te=t.unstable_cancelCallback,Ee=t.unstable_shouldYield,De=t.unstable_requestPaint,Oe=t.unstable_now,ke=t.unstable_getCurrentPriorityLevel,Ae=t.unstable_ImmediatePriority,je=t.unstable_UserBlockingPriority,Me=t.unstable_NormalPriority,Ne=t.unstable_LowPriority,Pe=t.unstable_IdlePriority,Fe=t.log,Ie=t.unstable_setDisableYieldValue,Le=null,Re=null;function ze(e){if(typeof Fe==`function`&&Ie(e),Re&&typeof Re.setStrictMode==`function`)try{Re.setStrictMode(Le,e)}catch{}}var Be=Math.clz32?Math.clz32:Ue,Ve=Math.log,He=Math.LN2;function Ue(e){return e>>>=0,e===0?32:31-(Ve(e)/He|0)|0}var We=256,Ge=262144,Ke=4194304;function qe(e){var t=e&42;if(t!==0)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function Je(e,t,n){var r=e.pendingLanes;if(r===0)return 0;var i=0,a=e.suspendedLanes,o=e.pingedLanes;e=e.warmLanes;var s=r&134217727;return s===0?(s=r&~a,s===0?o===0?n||(n=r&~e,n!==0&&(i=qe(n))):i=qe(o):i=qe(s)):(r=s&~a,r===0?(o&=s,o===0?n||(n=s&~e,n!==0&&(i=qe(n))):i=qe(o)):i=qe(r)),i===0?0:t!==0&&t!==i&&(t&a)===0&&(a=i&-i,n=t&-t,a>=n||a===32&&n&4194048)?t:i}function Ye(e,t){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)===0}function Xe(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ze(){var e=Ke;return Ke<<=1,!(Ke&62914560)&&(Ke=4194304),e}function Qe(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function $e(e,t){e.pendingLanes|=t,t!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function et(e,t,n,r,i,a){var o=e.pendingLanes;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=n,e.entangledLanes&=n,e.errorRecoveryDisabledLanes&=n,e.shellSuspendCounter=0;var s=e.entanglements,c=e.expirationTimes,l=e.hiddenUpdates;for(n=o&~n;0<n;){var u=31-Be(n),d=1<<u;s[u]=0,c[u]=-1;var f=l[u];if(f!==null)for(l[u]=null,u=0;u<f.length;u++){var p=f[u];p!==null&&(p.lane&=-536870913)}n&=~d}r!==0&&tt(e,r,0),a!==0&&i===0&&e.tag!==0&&(e.suspendedLanes|=a&~(o&~t))}function tt(e,t,n){e.pendingLanes|=t,e.suspendedLanes&=~t;var r=31-Be(t);e.entangledLanes|=t,e.entanglements[r]=e.entanglements[r]|1073741824|n&261930}function nt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-Be(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}function rt(e,t){var n=t&-t;return n=n&42?1:it(n),(n&(e.suspendedLanes|t))===0?n:0}function it(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function at(e){return e&=-e,2<e?8<e?e&134217727?32:268435456:8:2}function ot(){var e=P.p;return e===0?(e=window.event,e===void 0?32:Ap(e.type)):e}function st(e,t){var n=P.p;try{return P.p=e,t()}finally{P.p=n}}var ct=Math.random().toString(36).slice(2),lt=`__reactFiber$`+ct,ut=`__reactProps$`+ct,dt=`__reactContainer$`+ct,ft=`__reactEvents$`+ct,pt=`__reactListeners$`+ct,mt=`__reactHandles$`+ct,ht=`__reactResources$`+ct,gt=`__reactMarker$`+ct;function _t(e){delete e[lt],delete e[ut],delete e[ft],delete e[pt],delete e[mt]}function vt(e){var t=e[lt];if(t)return t;for(var n=e.parentNode;n;){if(t=n[dt]||n[lt]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=Df(e);e!==null;){if(n=e[lt])return n;e=Df(e)}return t}e=n,n=e.parentNode}return null}function yt(e){if(e=e[lt]||e[dt]){var t=e.tag;if(t===5||t===6||t===13||t===31||t===26||t===27||t===3)return e}return null}function bt(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e.stateNode;throw Error(i(33))}function I(e){var t=e[ht];return t||=e[ht]={hoistableStyles:new Map,hoistableScripts:new Map},t}function xt(e){e[gt]=!0}var St=new Set,Ct={};function wt(e,t){Tt(e,t),Tt(e+`Capture`,t)}function Tt(e,t){for(Ct[e]=t,e=0;e<t.length;e++)St.add(t[e])}var Et=RegExp(`^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$`),Dt={},Ot={};function kt(e){return Ce.call(Ot,e)?!0:Ce.call(Dt,e)?!1:Et.test(e)?Ot[e]=!0:(Dt[e]=!0,!1)}function At(e,t,n){if(kt(t))if(n===null)e.removeAttribute(t);else{switch(typeof n){case`undefined`:case`function`:case`symbol`:e.removeAttribute(t);return;case`boolean`:var r=t.toLowerCase().slice(0,5);if(r!==`data-`&&r!==`aria-`){e.removeAttribute(t);return}}e.setAttribute(t,``+n)}}function jt(e,t,n){if(n===null)e.removeAttribute(t);else{switch(typeof n){case`undefined`:case`function`:case`symbol`:case`boolean`:e.removeAttribute(t);return}e.setAttribute(t,``+n)}}function Mt(e,t,n,r){if(r===null)e.removeAttribute(n);else{switch(typeof r){case`undefined`:case`function`:case`symbol`:case`boolean`:e.removeAttribute(n);return}e.setAttributeNS(t,n,``+r)}}function Nt(e){switch(typeof e){case`bigint`:case`boolean`:case`number`:case`string`:case`undefined`:return e;case`object`:return e;default:return``}}function Pt(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()===`input`&&(t===`checkbox`||t===`radio`)}function Ft(e,t,n){var r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t);if(!e.hasOwnProperty(t)&&r!==void 0&&typeof r.get==`function`&&typeof r.set==`function`){var i=r.get,a=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){n=``+e,a.call(this,e)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(e){n=``+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function It(e){if(!e._valueTracker){var t=Pt(e)?`checked`:`value`;e._valueTracker=Ft(e,t,``+e[t])}}function Lt(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r=``;return e&&(r=Pt(e)?e.checked?`true`:`false`:e.value),e=r,e===n?!1:(t.setValue(e),!0)}function Rt(e){if(e||=typeof document<`u`?document:void 0,e===void 0)return null;try{return e.activeElement||e.body}catch{return e.body}}var zt=/[\n"\\]/g;function Bt(e){return e.replace(zt,function(e){return`\\`+e.charCodeAt(0).toString(16)+` `})}function Vt(e,t,n,r,i,a,o,s){e.name=``,o!=null&&typeof o!=`function`&&typeof o!=`symbol`&&typeof o!=`boolean`?e.type=o:e.removeAttribute(`type`),t==null?o!==`submit`&&o!==`reset`||e.removeAttribute(`value`):o===`number`?(t===0&&e.value===``||e.value!=t)&&(e.value=``+Nt(t)):e.value!==``+Nt(t)&&(e.value=``+Nt(t)),t==null?n==null?r!=null&&e.removeAttribute(`value`):Ut(e,o,Nt(n)):Ut(e,o,Nt(t)),i==null&&a!=null&&(e.defaultChecked=!!a),i!=null&&(e.checked=i&&typeof i!=`function`&&typeof i!=`symbol`),s!=null&&typeof s!=`function`&&typeof s!=`symbol`&&typeof s!=`boolean`?e.name=``+Nt(s):e.removeAttribute(`name`)}function Ht(e,t,n,r,i,a,o,s){if(a!=null&&typeof a!=`function`&&typeof a!=`symbol`&&typeof a!=`boolean`&&(e.type=a),t!=null||n!=null){if(!(a!==`submit`&&a!==`reset`||t!=null)){It(e);return}n=n==null?``:``+Nt(n),t=t==null?n:``+Nt(t),s||t===e.value||(e.value=t),e.defaultValue=t}r??=i,r=typeof r!=`function`&&typeof r!=`symbol`&&!!r,e.checked=s?e.checked:!!r,e.defaultChecked=!!r,o!=null&&typeof o!=`function`&&typeof o!=`symbol`&&typeof o!=`boolean`&&(e.name=o),It(e)}function Ut(e,t,n){t===`number`&&Rt(e.ownerDocument)===e||e.defaultValue===``+n||(e.defaultValue=``+n)}function Wt(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t[`$`+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty(`$`+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=``+Nt(n),t=null,i=0;i<e.length;i++){if(e[i].value===n){e[i].selected=!0,r&&(e[i].defaultSelected=!0);return}t!==null||e[i].disabled||(t=e[i])}t!==null&&(t.selected=!0)}}function Gt(e,t,n){if(t!=null&&(t=``+Nt(t),t!==e.value&&(e.value=t),n==null)){e.defaultValue!==t&&(e.defaultValue=t);return}e.defaultValue=n==null?``:``+Nt(n)}function Kt(e,t,n,r){if(t==null){if(r!=null){if(n!=null)throw Error(i(92));if(M(r)){if(1<r.length)throw Error(i(93));r=r[0]}n=r}n??=``,t=n}n=Nt(t),e.defaultValue=n,r=e.textContent,r===n&&r!==``&&r!==null&&(e.value=r),It(e)}function qt(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var Jt=new Set(`animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp`.split(` `));function Yt(e,t,n){var r=t.indexOf(`--`)===0;n==null||typeof n==`boolean`||n===``?r?e.setProperty(t,``):t===`float`?e.cssFloat=``:e[t]=``:r?e.setProperty(t,n):typeof n!=`number`||n===0||Jt.has(t)?t===`float`?e.cssFloat=n:e[t]=(``+n).trim():e[t]=n+`px`}function Xt(e,t,n){if(t!=null&&typeof t!=`object`)throw Error(i(62));if(e=e.style,n!=null){for(var r in n)!n.hasOwnProperty(r)||t!=null&&t.hasOwnProperty(r)||(r.indexOf(`--`)===0?e.setProperty(r,``):r===`float`?e.cssFloat=``:e[r]=``);for(var a in t)r=t[a],t.hasOwnProperty(a)&&n[a]!==r&&Yt(e,a,r)}else for(var o in t)t.hasOwnProperty(o)&&Yt(e,o,t[o])}function Zt(e){if(e.indexOf(`-`)===-1)return!1;switch(e){case`annotation-xml`:case`color-profile`:case`font-face`:case`font-face-src`:case`font-face-uri`:case`font-face-format`:case`font-face-name`:case`missing-glyph`:return!1;default:return!0}}var Qt=new Map([[`acceptCharset`,`accept-charset`],[`htmlFor`,`for`],[`httpEquiv`,`http-equiv`],[`crossOrigin`,`crossorigin`],[`accentHeight`,`accent-height`],[`alignmentBaseline`,`alignment-baseline`],[`arabicForm`,`arabic-form`],[`baselineShift`,`baseline-shift`],[`capHeight`,`cap-height`],[`clipPath`,`clip-path`],[`clipRule`,`clip-rule`],[`colorInterpolation`,`color-interpolation`],[`colorInterpolationFilters`,`color-interpolation-filters`],[`colorProfile`,`color-profile`],[`colorRendering`,`color-rendering`],[`dominantBaseline`,`dominant-baseline`],[`enableBackground`,`enable-background`],[`fillOpacity`,`fill-opacity`],[`fillRule`,`fill-rule`],[`floodColor`,`flood-color`],[`floodOpacity`,`flood-opacity`],[`fontFamily`,`font-family`],[`fontSize`,`font-size`],[`fontSizeAdjust`,`font-size-adjust`],[`fontStretch`,`font-stretch`],[`fontStyle`,`font-style`],[`fontVariant`,`font-variant`],[`fontWeight`,`font-weight`],[`glyphName`,`glyph-name`],[`glyphOrientationHorizontal`,`glyph-orientation-horizontal`],[`glyphOrientationVertical`,`glyph-orientation-vertical`],[`horizAdvX`,`horiz-adv-x`],[`horizOriginX`,`horiz-origin-x`],[`imageRendering`,`image-rendering`],[`letterSpacing`,`letter-spacing`],[`lightingColor`,`lighting-color`],[`markerEnd`,`marker-end`],[`markerMid`,`marker-mid`],[`markerStart`,`marker-start`],[`overlinePosition`,`overline-position`],[`overlineThickness`,`overline-thickness`],[`paintOrder`,`paint-order`],[`panose-1`,`panose-1`],[`pointerEvents`,`pointer-events`],[`renderingIntent`,`rendering-intent`],[`shapeRendering`,`shape-rendering`],[`stopColor`,`stop-color`],[`stopOpacity`,`stop-opacity`],[`strikethroughPosition`,`strikethrough-position`],[`strikethroughThickness`,`strikethrough-thickness`],[`strokeDasharray`,`stroke-dasharray`],[`strokeDashoffset`,`stroke-dashoffset`],[`strokeLinecap`,`stroke-linecap`],[`strokeLinejoin`,`stroke-linejoin`],[`strokeMiterlimit`,`stroke-miterlimit`],[`strokeOpacity`,`stroke-opacity`],[`strokeWidth`,`stroke-width`],[`textAnchor`,`text-anchor`],[`textDecoration`,`text-decoration`],[`textRendering`,`text-rendering`],[`transformOrigin`,`transform-origin`],[`underlinePosition`,`underline-position`],[`underlineThickness`,`underline-thickness`],[`unicodeBidi`,`unicode-bidi`],[`unicodeRange`,`unicode-range`],[`unitsPerEm`,`units-per-em`],[`vAlphabetic`,`v-alphabetic`],[`vHanging`,`v-hanging`],[`vIdeographic`,`v-ideographic`],[`vMathematical`,`v-mathematical`],[`vectorEffect`,`vector-effect`],[`vertAdvY`,`vert-adv-y`],[`vertOriginX`,`vert-origin-x`],[`vertOriginY`,`vert-origin-y`],[`wordSpacing`,`word-spacing`],[`writingMode`,`writing-mode`],[`xmlnsXlink`,`xmlns:xlink`],[`xHeight`,`x-height`]]),$t=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function en(e){return $t.test(``+e)?`javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')`:e}function tn(){}var nn=null;function rn(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var an=null,on=null;function sn(e){var t=yt(e);if(t&&(e=t.stateNode)){var n=e[ut]||null;a:switch(e=t.stateNode,t.type){case`input`:if(Vt(e,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),t=n.name,n.type===`radio`&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll(`input[name="`+Bt(``+t)+`"][type="radio"]`),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var a=r[ut]||null;if(!a)throw Error(i(90));Vt(r,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name)}}for(t=0;t<n.length;t++)r=n[t],r.form===e.form&&Lt(r)}break a;case`textarea`:Gt(e,n.value,n.defaultValue);break a;case`select`:t=n.value,t!=null&&Wt(e,!!n.multiple,t,!1)}}}var cn=!1;function L(e,t,n){if(cn)return e(t,n);cn=!0;try{return e(t)}finally{if(cn=!1,(an!==null||on!==null)&&(Mu(),an&&(t=an,e=on,on=an=null,sn(t),e)))for(t=0;t<e.length;t++)sn(e[t])}}function ln(e,t){var n=e.stateNode;if(n===null)return null;var r=n[ut]||null;if(r===null)return null;n=r[t];a:switch(t){case`onClick`:case`onClickCapture`:case`onDoubleClick`:case`onDoubleClickCapture`:case`onMouseDown`:case`onMouseDownCapture`:case`onMouseMove`:case`onMouseMoveCapture`:case`onMouseUp`:case`onMouseUpCapture`:case`onMouseEnter`:(r=!r.disabled)||(e=e.type,r=!(e===`button`||e===`input`||e===`select`||e===`textarea`)),e=!r;break a;default:e=!1}if(e)return null;if(n&&typeof n!=`function`)throw Error(i(231,t,typeof n));return n}var un=!(typeof window>`u`||window.document===void 0||window.document.createElement===void 0),dn=!1;if(un)try{var fn={};Object.defineProperty(fn,`passive`,{get:function(){dn=!0}}),window.addEventListener(`test`,fn,fn),window.removeEventListener(`test`,fn,fn)}catch{dn=!1}var pn=null,mn=null,hn=null;function gn(){if(hn)return hn;var e,t=mn,n=t.length,r,i=`value`in pn?pn.value:pn.textContent,a=i.length;for(e=0;e<n&&t[e]===i[e];e++);var o=n-e;for(r=1;r<=o&&t[n-r]===i[a-r];r++);return hn=i.slice(e,1<r?1-r:void 0)}function _n(e){var t=e.keyCode;return`charCode`in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function vn(){return!0}function yn(){return!1}function bn(e){function t(t,n,r,i,a){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=a,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(i.defaultPrevented==null?!1===i.returnValue:i.defaultPrevented)?vn:yn,this.isPropagationStopped=yn,this}return f(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():typeof e.returnValue!=`unknown`&&(e.returnValue=!1),this.isDefaultPrevented=vn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():typeof e.cancelBubble!=`unknown`&&(e.cancelBubble=!0),this.isPropagationStopped=vn)},persist:function(){},isPersistent:vn}),t}var xn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Sn=bn(xn),Cn=f({},xn,{view:0,detail:0}),wn=bn(Cn),Tn,En,Dn,On=f({},Cn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Wn,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return`movementX`in e?e.movementX:(e!==Dn&&(Dn&&e.type===`mousemove`?(Tn=e.screenX-Dn.screenX,En=e.screenY-Dn.screenY):En=Tn=0,Dn=e),Tn)},movementY:function(e){return`movementY`in e?e.movementY:En}}),kn=bn(On),An=f({},On,{dataTransfer:0}),jn=bn(An),Mn=f({},Cn,{relatedTarget:0}),Nn=bn(Mn),Pn=f({},xn,{animationName:0,elapsedTime:0,pseudoElement:0}),Fn=bn(Pn),In=f({},xn,{clipboardData:function(e){return`clipboardData`in e?e.clipboardData:window.clipboardData}}),Ln=bn(In),Rn=f({},xn,{data:0}),zn=bn(Rn),Bn={Esc:`Escape`,Spacebar:` `,Left:`ArrowLeft`,Up:`ArrowUp`,Right:`ArrowRight`,Down:`ArrowDown`,Del:`Delete`,Win:`OS`,Menu:`ContextMenu`,Apps:`ContextMenu`,Scroll:`ScrollLock`,MozPrintableKey:`Unidentified`},Vn={8:`Backspace`,9:`Tab`,12:`Clear`,13:`Enter`,16:`Shift`,17:`Control`,18:`Alt`,19:`Pause`,20:`CapsLock`,27:`Escape`,32:` `,33:`PageUp`,34:`PageDown`,35:`End`,36:`Home`,37:`ArrowLeft`,38:`ArrowUp`,39:`ArrowRight`,40:`ArrowDown`,45:`Insert`,46:`Delete`,112:`F1`,113:`F2`,114:`F3`,115:`F4`,116:`F5`,117:`F6`,118:`F7`,119:`F8`,120:`F9`,121:`F10`,122:`F11`,123:`F12`,144:`NumLock`,145:`ScrollLock`,224:`Meta`},Hn={Alt:`altKey`,Control:`ctrlKey`,Meta:`metaKey`,Shift:`shiftKey`};function Un(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Hn[e])?!!t[e]:!1}function Wn(){return Un}var Gn=f({},Cn,{key:function(e){if(e.key){var t=Bn[e.key]||e.key;if(t!==`Unidentified`)return t}return e.type===`keypress`?(e=_n(e),e===13?`Enter`:String.fromCharCode(e)):e.type===`keydown`||e.type===`keyup`?Vn[e.keyCode]||`Unidentified`:``},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Wn,charCode:function(e){return e.type===`keypress`?_n(e):0},keyCode:function(e){return e.type===`keydown`||e.type===`keyup`?e.keyCode:0},which:function(e){return e.type===`keypress`?_n(e):e.type===`keydown`||e.type===`keyup`?e.keyCode:0}}),Kn=bn(Gn),qn=f({},On,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Jn=bn(qn),Yn=f({},Cn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Wn}),Xn=bn(Yn),Zn=f({},xn,{propertyName:0,elapsedTime:0,pseudoElement:0}),Qn=bn(Zn),$n=f({},On,{deltaX:function(e){return`deltaX`in e?e.deltaX:`wheelDeltaX`in e?-e.wheelDeltaX:0},deltaY:function(e){return`deltaY`in e?e.deltaY:`wheelDeltaY`in e?-e.wheelDeltaY:`wheelDelta`in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),er=bn($n),tr=f({},xn,{newState:0,oldState:0}),nr=bn(tr),rr=[9,13,27,32],ir=un&&`CompositionEvent`in window,ar=null;un&&`documentMode`in document&&(ar=document.documentMode);var or=un&&`TextEvent`in window&&!ar,sr=un&&(!ir||ar&&8<ar&&11>=ar),cr=` `,lr=!1;function ur(e,t){switch(e){case`keyup`:return rr.indexOf(t.keyCode)!==-1;case`keydown`:return t.keyCode!==229;case`keypress`:case`mousedown`:case`focusout`:return!0;default:return!1}}function dr(e){return e=e.detail,typeof e==`object`&&`data`in e?e.data:null}var fr=!1;function pr(e,t){switch(e){case`compositionend`:return dr(t);case`keypress`:return t.which===32?(lr=!0,cr):null;case`textInput`:return e=t.data,e===cr&&lr?null:e;default:return null}}function mr(e,t){if(fr)return e===`compositionend`||!ir&&ur(e,t)?(e=gn(),hn=mn=pn=null,fr=!1,e):null;switch(e){case`paste`:return null;case`keypress`:if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case`compositionend`:return sr&&t.locale!==`ko`?null:t.data;default:return null}}var hr={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function gr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t===`input`?!!hr[e.type]:t===`textarea`}function _r(e,t,n,r){an?on?on.push(r):on=[r]:an=r,t=Bd(t,`onChange`),0<t.length&&(n=new Sn(`onChange`,`change`,null,n,r),e.push({event:n,listeners:t}))}var vr=null,yr=null;function br(e){Nd(e,0)}function xr(e){var t=bt(e);if(Lt(t))return e}function Sr(e,t){if(e===`change`)return t}var Cr=!1;if(un){var wr;if(un){var Tr=`oninput`in document;if(!Tr){var Er=document.createElement(`div`);Er.setAttribute(`oninput`,`return;`),Tr=typeof Er.oninput==`function`}wr=Tr}else wr=!1;Cr=wr&&(!document.documentMode||9<document.documentMode)}function Dr(){vr&&(vr.detachEvent(`onpropertychange`,Or),yr=vr=null)}function Or(e){if(e.propertyName===`value`&&xr(yr)){var t=[];_r(t,yr,e,rn(e)),L(br,t)}}function kr(e,t,n){e===`focusin`?(Dr(),vr=t,yr=n,vr.attachEvent(`onpropertychange`,Or)):e===`focusout`&&Dr()}function Ar(e){if(e===`selectionchange`||e===`keyup`||e===`keydown`)return xr(yr)}function jr(e,t){if(e===`click`)return xr(t)}function Mr(e,t){if(e===`input`||e===`change`)return xr(t)}function Nr(e,t){return e===t&&(e!==0||1/e==1/t)||e!==e&&t!==t}var Pr=typeof Object.is==`function`?Object.is:Nr;function Fr(e,t){if(Pr(e,t))return!0;if(typeof e!=`object`||!e||typeof t!=`object`||!t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!Ce.call(t,i)||!Pr(e[i],t[i]))return!1}return!0}function Ir(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Lr(e,t){var n=Ir(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}a:{for(;n;){if(n.nextSibling){n=n.nextSibling;break a}n=n.parentNode}n=void 0}n=Ir(n)}}function Rr(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Rr(e,t.parentNode):`contains`in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function zr(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var t=Rt(e.document);t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href==`string`}catch{n=!1}if(n)e=t.contentWindow;else break;t=Rt(e.document)}return t}function Br(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t===`input`&&(e.type===`text`||e.type===`search`||e.type===`tel`||e.type===`url`||e.type===`password`)||t===`textarea`||e.contentEditable===`true`)}var Vr=un&&`documentMode`in document&&11>=document.documentMode,Hr=null,Ur=null,Wr=null,Gr=!1;function Kr(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Gr||Hr==null||Hr!==Rt(r)||(r=Hr,`selectionStart`in r&&Br(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Wr&&Fr(Wr,r)||(Wr=r,r=Bd(Ur,`onSelect`),0<r.length&&(t=new Sn(`onSelect`,`select`,null,t,n),e.push({event:t,listeners:r}),t.target=Hr)))}function qr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n[`Webkit`+e]=`webkit`+t,n[`Moz`+e]=`moz`+t,n}var Jr={animationend:qr(`Animation`,`AnimationEnd`),animationiteration:qr(`Animation`,`AnimationIteration`),animationstart:qr(`Animation`,`AnimationStart`),transitionrun:qr(`Transition`,`TransitionRun`),transitionstart:qr(`Transition`,`TransitionStart`),transitioncancel:qr(`Transition`,`TransitionCancel`),transitionend:qr(`Transition`,`TransitionEnd`)},Yr={},Xr={};un&&(Xr=document.createElement(`div`).style,`AnimationEvent`in window||(delete Jr.animationend.animation,delete Jr.animationiteration.animation,delete Jr.animationstart.animation),`TransitionEvent`in window||delete Jr.transitionend.transition);function Zr(e){if(Yr[e])return Yr[e];if(!Jr[e])return e;var t=Jr[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in Xr)return Yr[e]=t[n];return e}var Qr=Zr(`animationend`),$r=Zr(`animationiteration`),ei=Zr(`animationstart`),ti=Zr(`transitionrun`),ni=Zr(`transitionstart`),ri=Zr(`transitioncancel`),ii=Zr(`transitionend`),ai=new Map,oi=`abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel`.split(` `);oi.push(`scrollEnd`);function si(e,t){ai.set(e,t),wt(t,[e])}var ci=typeof reportError==`function`?reportError:function(e){if(typeof window==`object`&&typeof window.ErrorEvent==`function`){var t=new window.ErrorEvent(`error`,{bubbles:!0,cancelable:!0,message:typeof e==`object`&&e&&typeof e.message==`string`?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process==`object`&&typeof process.emit==`function`){process.emit(`uncaughtException`,e);return}console.error(e)},li=[],ui=0,di=0;function fi(){for(var e=ui,t=di=ui=0;t<e;){var n=li[t];li[t++]=null;var r=li[t];li[t++]=null;var i=li[t];li[t++]=null;var a=li[t];if(li[t++]=null,r!==null&&i!==null){var o=r.pending;o===null?i.next=i:(i.next=o.next,o.next=i),r.pending=i}a!==0&&gi(n,i,a)}}function pi(e,t,n,r){li[ui++]=e,li[ui++]=t,li[ui++]=n,li[ui++]=r,di|=r,e.lanes|=r,e=e.alternate,e!==null&&(e.lanes|=r)}function mi(e,t,n,r){return pi(e,t,n,r),_i(e)}function hi(e,t){return pi(e,null,null,t),_i(e)}function gi(e,t,n){e.lanes|=n;var r=e.alternate;r!==null&&(r.lanes|=n);for(var i=!1,a=e.return;a!==null;)a.childLanes|=n,r=a.alternate,r!==null&&(r.childLanes|=n),a.tag===22&&(e=a.stateNode,e===null||e._visibility&1||(i=!0)),e=a,a=a.return;return e.tag===3?(a=e.stateNode,i&&t!==null&&(i=31-Be(n),e=a.hiddenUpdates,r=e[i],r===null?e[i]=[t]:r.push(t),t.lane=n|536870912),a):null}function _i(e){if(50<Cu)throw Cu=0,wu=null,Error(i(185));for(var t=e.return;t!==null;)e=t,t=e.return;return e.tag===3?e.stateNode:null}var vi={};function yi(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function bi(e,t,n,r){return new yi(e,t,n,r)}function xi(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Si(e,t){var n=e.alternate;return n===null?(n=bi(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&65011712,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n.refCleanup=e.refCleanup,n}function Ci(e,t){e.flags&=65011714;var n=e.alternate;return n===null?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=n.childLanes,e.lanes=n.lanes,e.child=n.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=n.memoizedProps,e.memoizedState=n.memoizedState,e.updateQueue=n.updateQueue,e.type=n.type,t=n.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function wi(e,t,n,r,a,o){var s=0;if(r=e,typeof e==`function`)xi(e)&&(s=1);else if(typeof e==`string`)s=ap(e,n,ce.current)?26:e===`html`||e===`head`||e===`body`?27:5;else a:switch(e){case k:return e=bi(31,n,t,a),e.elementType=k,e.lanes=o,e;case y:return Ti(n.children,a,o,t);case b:s=8,a|=24;break;case x:return e=bi(12,n,t,a|2),e.elementType=x,e.lanes=o,e;case T:return e=bi(13,n,t,a),e.elementType=T,e.lanes=o,e;case E:return e=bi(19,n,t,a),e.elementType=E,e.lanes=o,e;default:if(typeof e==`object`&&e)switch(e.$$typeof){case C:s=10;break a;case S:s=9;break a;case w:s=11;break a;case D:s=14;break a;case O:s=16,r=null;break a}s=29,n=Error(i(130,e===null?`null`:typeof e,``)),r=null}return t=bi(s,n,t,a),t.elementType=e,t.type=r,t.lanes=o,t}function Ti(e,t,n,r){return e=bi(7,e,r,t),e.lanes=n,e}function Ei(e,t,n){return e=bi(6,e,null,t),e.lanes=n,e}function Di(e){var t=bi(18,null,null,0);return t.stateNode=e,t}function Oi(e,t,n){return t=bi(4,e.children===null?[]:e.children,e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var ki=new WeakMap;function Ai(e,t){if(typeof e==`object`&&e){var n=ki.get(e);return n===void 0?(t={value:e,source:t,stack:Se(t)},ki.set(e,t),t):n}return{value:e,source:t,stack:Se(t)}}var ji=[],Mi=0,Ni=null,Pi=0,Fi=[],R=0,Ii=null,Li=1,Ri=``;function zi(e,t){ji[Mi++]=Pi,ji[Mi++]=Ni,Ni=e,Pi=t}function Bi(e,t,n){Fi[R++]=Li,Fi[R++]=Ri,Fi[R++]=Ii,Ii=e;var r=Li;e=Ri;var i=32-Be(r)-1;r&=~(1<<i),n+=1;var a=32-Be(t)+i;if(30<a){var o=i-i%5;a=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Li=1<<32-Be(t)+i|n<<i|r,Ri=a+e}else Li=1<<a|n<<i|r,Ri=e}function Vi(e){e.return!==null&&(zi(e,1),Bi(e,1,0))}function Hi(e){for(;e===Ni;)Ni=ji[--Mi],ji[Mi]=null,Pi=ji[--Mi],ji[Mi]=null;for(;e===Ii;)Ii=Fi[--R],Fi[R]=null,Ri=Fi[--R],Fi[R]=null,Li=Fi[--R],Fi[R]=null}function Ui(e,t){Fi[R++]=Li,Fi[R++]=Ri,Fi[R++]=Ii,Li=t.id,Ri=t.overflow,Ii=e}var Wi=null,Gi=null,z=!1,Ki=null,qi=!1,Ji=Error(i(519));function Yi(e){var t=Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?`text`:`HTML`,``));throw ta(Ai(t,e)),Ji}function Xi(e){var t=e.stateNode,n=e.type,r=e.memoizedProps;switch(t[lt]=e,t[ut]=r,n){case`dialog`:$(`cancel`,t),$(`close`,t);break;case`iframe`:case`object`:case`embed`:$(`load`,t);break;case`video`:case`audio`:for(n=0;n<jd.length;n++)$(jd[n],t);break;case`source`:$(`error`,t);break;case`img`:case`image`:case`link`:$(`error`,t),$(`load`,t);break;case`details`:$(`toggle`,t);break;case`input`:$(`invalid`,t),Ht(t,r.value,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name,!0);break;case`select`:$(`invalid`,t);break;case`textarea`:$(`invalid`,t),Kt(t,r.value,r.defaultValue,r.children)}n=r.children,typeof n!=`string`&&typeof n!=`number`&&typeof n!=`bigint`||t.textContent===``+n||!0===r.suppressHydrationWarning||Kd(t.textContent,n)?(r.popover!=null&&($(`beforetoggle`,t),$(`toggle`,t)),r.onScroll!=null&&$(`scroll`,t),r.onScrollEnd!=null&&$(`scrollend`,t),r.onClick!=null&&(t.onclick=tn),t=!0):t=!1,t||Yi(e,!0)}function Zi(e){for(Wi=e.return;Wi;)switch(Wi.tag){case 5:case 31:case 13:qi=!1;return;case 27:case 3:qi=!0;return;default:Wi=Wi.return}}function Qi(e){if(e!==Wi)return!1;if(!z)return Zi(e),z=!0,!1;var t=e.tag,n;if((n=t!==3&&t!==27)&&((n=t===5)&&(n=e.type,n=!(n!==`form`&&n!==`button`)||af(e.type,e.memoizedProps)),n=!n),n&&Gi&&Yi(e),Zi(e),t===13){if(e=e.memoizedState,e=e===null?null:e.dehydrated,!e)throw Error(i(317));Gi=Ef(e)}else if(t===31){if(e=e.memoizedState,e=e===null?null:e.dehydrated,!e)throw Error(i(317));Gi=Ef(e)}else t===27?(t=Gi,mf(e.type)?(e=Tf,Tf=null,Gi=e):Gi=t):Gi=Wi?wf(e.stateNode.nextSibling):null;return!0}function $i(){Gi=Wi=null,z=!1}function ea(){var e=Ki;return e!==null&&(lu===null?lu=e:lu.push.apply(lu,e),Ki=null),e}function ta(e){Ki===null?Ki=[e]:Ki.push(e)}var na=oe(null),ra=null,ia=null;function aa(e,t,n){F(na,t._currentValue),t._currentValue=n}function oa(e){e._currentValue=na.current,se(na)}function sa(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)===t?r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t):(e.childLanes|=t,r!==null&&(r.childLanes|=t)),e===n)break;e=e.return}}function ca(e,t,n,r){var a=e.child;for(a!==null&&(a.return=e);a!==null;){var o=a.dependencies;if(o!==null){var s=a.child;o=o.firstContext;a:for(;o!==null;){var c=o;o=a;for(var l=0;l<t.length;l++)if(c.context===t[l]){o.lanes|=n,c=o.alternate,c!==null&&(c.lanes|=n),sa(o.return,n,e),r||(s=null);break a}o=c.next}}else if(a.tag===18){if(s=a.return,s===null)throw Error(i(341));s.lanes|=n,o=s.alternate,o!==null&&(o.lanes|=n),sa(s,n,e),s=null}else s=a.child;if(s!==null)s.return=a;else for(s=a;s!==null;){if(s===e){s=null;break}if(a=s.sibling,a!==null){a.return=s.return,s=a;break}s=s.return}a=s}}function la(e,t,n,r){e=null;for(var a=t,o=!1;a!==null;){if(!o){if(a.flags&524288)o=!0;else if(a.flags&262144)break}if(a.tag===10){var s=a.alternate;if(s===null)throw Error(i(387));if(s=s.memoizedProps,s!==null){var c=a.type;Pr(a.pendingProps.value,s.value)||(e===null?e=[c]:e.push(c))}}else if(a===de.current){if(s=a.alternate,s===null)throw Error(i(387));s.memoizedState.memoizedState!==a.memoizedState.memoizedState&&(e===null?e=[mp]:e.push(mp))}a=a.return}e!==null&&ca(t,e,n,r),t.flags|=262144}function ua(e){for(e=e.firstContext;e!==null;){if(!Pr(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function da(e){ra=e,ia=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function fa(e){return ma(ra,e)}function pa(e,t){return ra===null&&da(e),ma(e,t)}function ma(e,t){var n=t._currentValue;if(t={context:t,memoizedValue:n,next:null},ia===null){if(e===null)throw Error(i(308));ia=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else ia=ia.next=t;return n}var ha=typeof AbortController<`u`?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(t,n){e.push(n)}};this.abort=function(){t.aborted=!0,e.forEach(function(e){return e()})}},ga=t.unstable_scheduleCallback,_a=t.unstable_NormalPriority,va={$$typeof:C,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function ya(){return{controller:new ha,data:new Map,refCount:0}}function ba(e){e.refCount--,e.refCount===0&&ga(_a,function(){e.controller.abort()})}var xa=null,Sa=0,Ca=0,wa=null;function Ta(e,t){if(xa===null){var n=xa=[];Sa=0,Ca=Cd(),wa={status:`pending`,value:void 0,then:function(e){n.push(e)}}}return Sa++,t.then(Ea,Ea),t}function Ea(){if(--Sa===0&&xa!==null){wa!==null&&(wa.status=`fulfilled`);var e=xa;xa=null,Ca=0,wa=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function Da(e,t){var n=[],r={status:`pending`,value:null,reason:null,then:function(e){n.push(e)}};return e.then(function(){r.status=`fulfilled`,r.value=t;for(var e=0;e<n.length;e++)(0,n[e])(t)},function(e){for(r.status=`rejected`,r.reason=e,e=0;e<n.length;e++)(0,n[e])(void 0)}),r}var Oa=N.S;N.S=function(e,t){fu=Oe(),typeof t==`object`&&t&&typeof t.then==`function`&&Ta(e,t),Oa!==null&&Oa(e,t)};var ka=oe(null);function Aa(){var e=ka.current;return e===null?Xl.pooledCache:e}function B(e,t){t===null?F(ka,ka.current):F(ka,t.pool)}function ja(){var e=Aa();return e===null?null:{parent:va._currentValue,pool:e}}var Ma=Error(i(460)),Na=Error(i(474)),Pa=Error(i(542)),Fa={then:function(){}};function Ia(e){return e=e.status,e===`fulfilled`||e===`rejected`}function La(e,t,n){switch(n=e[n],n===void 0?e.push(t):n!==t&&(t.then(tn,tn),t=n),t.status){case`fulfilled`:return t.value;case`rejected`:throw e=t.reason,Va(e),e;default:if(typeof t.status==`string`)t.then(tn,tn);else{if(e=Xl,e!==null&&100<e.shellSuspendCounter)throw Error(i(482));e=t,e.status=`pending`,e.then(function(e){if(t.status===`pending`){var n=t;n.status=`fulfilled`,n.value=e}},function(e){if(t.status===`pending`){var n=t;n.status=`rejected`,n.reason=e}})}switch(t.status){case`fulfilled`:return t.value;case`rejected`:throw e=t.reason,Va(e),e}throw za=t,Ma}}function Ra(e){try{var t=e._init;return t(e._payload)}catch(e){throw typeof e==`object`&&e&&typeof e.then==`function`?(za=e,Ma):e}}var za=null;function Ba(){if(za===null)throw Error(i(459));var e=za;return za=null,e}function Va(e){if(e===Ma||e===Pa)throw Error(i(483))}var Ha=null,Ua=0;function Wa(e){var t=Ua;return Ua+=1,Ha===null&&(Ha=[]),La(Ha,e,t)}function Ga(e,t){t=t.props.ref,e.ref=t===void 0?null:t}function Ka(e,t){throw t.$$typeof===m?Error(i(525)):(e=Object.prototype.toString.call(t),Error(i(31,e===`[object Object]`?`object with keys {`+Object.keys(t).join(`, `)+`}`:e)))}function qa(e){function t(t,n){if(e){var r=t.deletions;r===null?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;r!==null;)t(n,r),r=r.sibling;return null}function r(e){for(var t=new Map;e!==null;)e.key===null?t.set(e.index,e):t.set(e.key,e),e=e.sibling;return t}function a(e,t){return e=Si(e,t),e.index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?(r=t.alternate,r===null?(t.flags|=67108866,n):(r=r.index,r<n?(t.flags|=67108866,n):r)):(t.flags|=1048576,n)}function s(t){return e&&t.alternate===null&&(t.flags|=67108866),t}function c(e,t,n,r){return t===null||t.tag!==6?(t=Ei(n,e.mode,r),t.return=e,t):(t=a(t,n),t.return=e,t)}function l(e,t,n,r){var i=n.type;return i===y?d(e,t,n.props.children,r,n.key):t!==null&&(t.elementType===i||typeof i==`object`&&i&&i.$$typeof===O&&Ra(i)===t.type)?(t=a(t,n.props),Ga(t,n),t.return=e,t):(t=wi(n.type,n.key,n.props,null,e.mode,r),Ga(t,n),t.return=e,t)}function u(e,t,n,r){return t===null||t.tag!==4||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?(t=Oi(n,e.mode,r),t.return=e,t):(t=a(t,n.children||[]),t.return=e,t)}function d(e,t,n,r,i){return t===null||t.tag!==7?(t=Ti(n,e.mode,r,i),t.return=e,t):(t=a(t,n),t.return=e,t)}function f(e,t,n){if(typeof t==`string`&&t!==``||typeof t==`number`||typeof t==`bigint`)return t=Ei(``+t,e.mode,n),t.return=e,t;if(typeof t==`object`&&t){switch(t.$$typeof){case g:return n=wi(t.type,t.key,t.props,null,e.mode,n),Ga(n,t),n.return=e,n;case v:return t=Oi(t,e.mode,n),t.return=e,t;case O:return t=Ra(t),f(e,t,n)}if(M(t)||ee(t))return t=Ti(t,e.mode,n,null),t.return=e,t;if(typeof t.then==`function`)return f(e,Wa(t),n);if(t.$$typeof===C)return f(e,pa(e,t),n);Ka(e,t)}return null}function p(e,t,n,r){var i=t===null?null:t.key;if(typeof n==`string`&&n!==``||typeof n==`number`||typeof n==`bigint`)return i===null?c(e,t,``+n,r):null;if(typeof n==`object`&&n){switch(n.$$typeof){case g:return n.key===i?l(e,t,n,r):null;case v:return n.key===i?u(e,t,n,r):null;case O:return n=Ra(n),p(e,t,n,r)}if(M(n)||ee(n))return i===null?d(e,t,n,r,null):null;if(typeof n.then==`function`)return p(e,t,Wa(n),r);if(n.$$typeof===C)return p(e,t,pa(e,n),r);Ka(e,n)}return null}function m(e,t,n,r,i){if(typeof r==`string`&&r!==``||typeof r==`number`||typeof r==`bigint`)return e=e.get(n)||null,c(t,e,``+r,i);if(typeof r==`object`&&r){switch(r.$$typeof){case g:return e=e.get(r.key===null?n:r.key)||null,l(t,e,r,i);case v:return e=e.get(r.key===null?n:r.key)||null,u(t,e,r,i);case O:return r=Ra(r),m(e,t,n,r,i)}if(M(r)||ee(r))return e=e.get(n)||null,d(t,e,r,i,null);if(typeof r.then==`function`)return m(e,t,n,Wa(r),i);if(r.$$typeof===C)return m(e,t,n,pa(t,r),i);Ka(t,r)}return null}function h(i,a,s,c){for(var l=null,u=null,d=a,h=a=0,g=null;d!==null&&h<s.length;h++){d.index>h?(g=d,d=null):g=d.sibling;var _=p(i,d,s[h],c);if(_===null){d===null&&(d=g);break}e&&d&&_.alternate===null&&t(i,d),a=o(_,a,h),u===null?l=_:u.sibling=_,u=_,d=g}if(h===s.length)return n(i,d),z&&zi(i,h),l;if(d===null){for(;h<s.length;h++)d=f(i,s[h],c),d!==null&&(a=o(d,a,h),u===null?l=d:u.sibling=d,u=d);return z&&zi(i,h),l}for(d=r(d);h<s.length;h++)g=m(d,i,h,s[h],c),g!==null&&(e&&g.alternate!==null&&d.delete(g.key===null?h:g.key),a=o(g,a,h),u===null?l=g:u.sibling=g,u=g);return e&&d.forEach(function(e){return t(i,e)}),z&&zi(i,h),l}function _(a,s,c,l){if(c==null)throw Error(i(151));for(var u=null,d=null,h=s,g=s=0,_=null,v=c.next();h!==null&&!v.done;g++,v=c.next()){h.index>g?(_=h,h=null):_=h.sibling;var y=p(a,h,v.value,l);if(y===null){h===null&&(h=_);break}e&&h&&y.alternate===null&&t(a,h),s=o(y,s,g),d===null?u=y:d.sibling=y,d=y,h=_}if(v.done)return n(a,h),z&&zi(a,g),u;if(h===null){for(;!v.done;g++,v=c.next())v=f(a,v.value,l),v!==null&&(s=o(v,s,g),d===null?u=v:d.sibling=v,d=v);return z&&zi(a,g),u}for(h=r(h);!v.done;g++,v=c.next())v=m(h,a,g,v.value,l),v!==null&&(e&&v.alternate!==null&&h.delete(v.key===null?g:v.key),s=o(v,s,g),d===null?u=v:d.sibling=v,d=v);return e&&h.forEach(function(e){return t(a,e)}),z&&zi(a,g),u}function b(e,r,o,c){if(typeof o==`object`&&o&&o.type===y&&o.key===null&&(o=o.props.children),typeof o==`object`&&o){switch(o.$$typeof){case g:a:{for(var l=o.key;r!==null;){if(r.key===l){if(l=o.type,l===y){if(r.tag===7){n(e,r.sibling),c=a(r,o.props.children),c.return=e,e=c;break a}}else if(r.elementType===l||typeof l==`object`&&l&&l.$$typeof===O&&Ra(l)===r.type){n(e,r.sibling),c=a(r,o.props),Ga(c,o),c.return=e,e=c;break a}n(e,r);break}else t(e,r);r=r.sibling}o.type===y?(c=Ti(o.props.children,e.mode,c,o.key),c.return=e,e=c):(c=wi(o.type,o.key,o.props,null,e.mode,c),Ga(c,o),c.return=e,e=c)}return s(e);case v:a:{for(l=o.key;r!==null;){if(r.key===l)if(r.tag===4&&r.stateNode.containerInfo===o.containerInfo&&r.stateNode.implementation===o.implementation){n(e,r.sibling),c=a(r,o.children||[]),c.return=e,e=c;break a}else{n(e,r);break}else t(e,r);r=r.sibling}c=Oi(o,e.mode,c),c.return=e,e=c}return s(e);case O:return o=Ra(o),b(e,r,o,c)}if(M(o))return h(e,r,o,c);if(ee(o)){if(l=ee(o),typeof l!=`function`)throw Error(i(150));return o=l.call(o),_(e,r,o,c)}if(typeof o.then==`function`)return b(e,r,Wa(o),c);if(o.$$typeof===C)return b(e,r,pa(e,o),c);Ka(e,o)}return typeof o==`string`&&o!==``||typeof o==`number`||typeof o==`bigint`?(o=``+o,r!==null&&r.tag===6?(n(e,r.sibling),c=a(r,o),c.return=e,e=c):(n(e,r),c=Ei(o,e.mode,c),c.return=e,e=c),s(e)):n(e,r)}return function(e,t,n,r){try{Ua=0;var i=b(e,t,n,r);return Ha=null,i}catch(t){if(t===Ma||t===Pa)throw t;var a=bi(29,t,null,e.mode);return a.lanes=r,a.return=e,a}}}var Ja=qa(!0),Ya=qa(!1),Xa=!1;function Za(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Qa(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function $a(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function eo(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,J&2){var i=r.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),r.pending=t,t=_i(e),gi(e,null,n),t}return pi(e,r,t,n),_i(e)}function to(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,n&4194048)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,nt(e,n)}}function no(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,a=null;if(n=n.firstBaseUpdate,n!==null){do{var o={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};a===null?i=a=o:a=a.next=o,n=n.next}while(n!==null);a===null?i=a=t:a=a.next=t}else i=a=t;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:r.shared,callbacks:r.callbacks},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}var ro=!1;function io(){if(ro){var e=wa;if(e!==null)throw e}}function ao(e,t,n,r){ro=!1;var i=e.updateQueue;Xa=!1;var a=i.firstBaseUpdate,o=i.lastBaseUpdate,s=i.shared.pending;if(s!==null){i.shared.pending=null;var c=s,l=c.next;c.next=null,o===null?a=l:o.next=l,o=c;var u=e.alternate;u!==null&&(u=u.updateQueue,s=u.lastBaseUpdate,s!==o&&(s===null?u.firstBaseUpdate=l:s.next=l,u.lastBaseUpdate=c))}if(a!==null){var d=i.baseState;o=0,u=l=c=null,s=a;do{var p=s.lane&-536870913,m=p!==s.lane;if(m?(X&p)===p:(r&p)===p){p!==0&&p===Ca&&(ro=!0),u!==null&&(u=u.next={lane:0,tag:s.tag,payload:s.payload,callback:null,next:null});a:{var h=e,g=s;p=t;var _=n;switch(g.tag){case 1:if(h=g.payload,typeof h==`function`){d=h.call(_,d,p);break a}d=h;break a;case 3:h.flags=h.flags&-65537|128;case 0:if(h=g.payload,p=typeof h==`function`?h.call(_,d,p):h,p==null)break a;d=f({},d,p);break a;case 2:Xa=!0}}p=s.callback,p!==null&&(e.flags|=64,m&&(e.flags|=8192),m=i.callbacks,m===null?i.callbacks=[p]:m.push(p))}else m={lane:p,tag:s.tag,payload:s.payload,callback:s.callback,next:null},u===null?(l=u=m,c=d):u=u.next=m,o|=p;if(s=s.next,s===null){if(s=i.shared.pending,s===null)break;m=s,s=m.next,m.next=null,i.lastBaseUpdate=m,i.shared.pending=null}}while(1);u===null&&(c=d),i.baseState=c,i.firstBaseUpdate=l,i.lastBaseUpdate=u,a===null&&(i.shared.lanes=0),ru|=o,e.lanes=o,e.memoizedState=d}}function oo(e,t){if(typeof e!=`function`)throw Error(i(191,e));e.call(t)}function so(e,t){var n=e.callbacks;if(n!==null)for(e.callbacks=null,e=0;e<n.length;e++)oo(n[e],t)}var co=oe(null),lo=oe(0);function uo(e,t){e=tu,F(lo,e),F(co,t),tu=e|t.baseLanes}function fo(){F(lo,tu),F(co,co.current)}function po(){tu=lo.current,se(co),se(lo)}var mo=oe(null),ho=null;function go(e){var t=e.alternate;F(xo,xo.current&1),F(mo,e),ho===null&&(t===null||co.current!==null||t.memoizedState!==null)&&(ho=e)}function _o(e){F(xo,xo.current),F(mo,e),ho===null&&(ho=e)}function vo(e){e.tag===22?(F(xo,xo.current),F(mo,e),ho===null&&(ho=e)):yo(e)}function yo(){F(xo,xo.current),F(mo,mo.current)}function bo(e){se(mo),ho===e&&(ho=null),se(xo)}var xo=oe(0);function So(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||xf(n)||Sf(n)))return t}else if(t.tag===19&&(t.memoizedProps.revealOrder===`forwards`||t.memoizedProps.revealOrder===`backwards`||t.memoizedProps.revealOrder===`unstable_legacy-backwards`||t.memoizedProps.revealOrder===`together`)){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Co=0,V=null,wo=null,To=null,Eo=!1,Do=!1,Oo=!1,ko=0,Ao=0,jo=null,Mo=0;function No(){throw Error(i(321))}function Po(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Pr(e[n],t[n]))return!1;return!0}function Fo(e,t,n,r,i,a){return Co=a,V=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,N.H=e===null||e.memoizedState===null?Zs:Qs,Oo=!1,a=n(r,i),Oo=!1,Do&&(a=H(t,n,r,i)),Io(e),a}function Io(e){N.H=Xs;var t=wo!==null&&wo.next!==null;if(Co=0,To=wo=V=null,Eo=!1,Ao=0,jo=null,t)throw Error(i(300));e===null||mc||(e=e.dependencies,e!==null&&ua(e)&&(mc=!0))}function H(e,t,n,r){V=e;var a=0;do{if(Do&&(jo=null),Ao=0,Do=!1,25<=a)throw Error(i(301));if(a+=1,To=wo=null,e.updateQueue!=null){var o=e.updateQueue;o.lastEffect=null,o.events=null,o.stores=null,o.memoCache!=null&&(o.memoCache.index=0)}N.H=$s,o=t(n,r)}while(Do);return o}function Lo(){var e=N.H,t=e.useState()[0];return t=typeof t.then==`function`?Wo(t):t,e=e.useState()[0],(wo===null?null:wo.memoizedState)!==e&&(V.flags|=1024),t}function Ro(){var e=ko!==0;return ko=0,e}function zo(e,t,n){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n}function Bo(e){if(Eo){for(e=e.memoizedState;e!==null;){var t=e.queue;t!==null&&(t.pending=null),e=e.next}Eo=!1}Co=0,To=wo=V=null,Do=!1,Ao=ko=0,jo=null}function Vo(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return To===null?V.memoizedState=To=e:To=To.next=e,To}function Ho(){if(wo===null){var e=V.alternate;e=e===null?null:e.memoizedState}else e=wo.next;var t=To===null?V.memoizedState:To.next;if(t!==null)To=t,wo=e;else{if(e===null)throw V.alternate===null?Error(i(467)):Error(i(310));wo=e,e={memoizedState:wo.memoizedState,baseState:wo.baseState,baseQueue:wo.baseQueue,queue:wo.queue,next:null},To===null?V.memoizedState=To=e:To=To.next=e}return To}function Uo(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Wo(e){var t=Ao;return Ao+=1,jo===null&&(jo=[]),e=La(jo,e,t),t=V,(To===null?t.memoizedState:To.next)===null&&(t=t.alternate,N.H=t===null||t.memoizedState===null?Zs:Qs),e}function Go(e){if(typeof e==`object`&&e){if(typeof e.then==`function`)return Wo(e);if(e.$$typeof===C)return fa(e)}throw Error(i(438,String(e)))}function Ko(e){var t=null,n=V.updateQueue;if(n!==null&&(t=n.memoCache),t==null){var r=V.alternate;r!==null&&(r=r.updateQueue,r!==null&&(r=r.memoCache,r!=null&&(t={data:r.data.map(function(e){return e.slice()}),index:0})))}if(t??={data:[],index:0},n===null&&(n=Uo(),V.updateQueue=n),n.memoCache=t,n=t.data[t.index],n===void 0)for(n=t.data[t.index]=Array(e),r=0;r<e;r++)n[r]=A;return t.index++,n}function qo(e,t){return typeof t==`function`?t(e):t}function Jo(e){var t=Ho();return Yo(t,wo,e)}function Yo(e,t,n){var r=e.queue;if(r===null)throw Error(i(311));r.lastRenderedReducer=n;var a=e.baseQueue,o=r.pending;if(o!==null){if(a!==null){var s=a.next;a.next=o.next,o.next=s}t.baseQueue=a=o,r.pending=null}if(o=e.baseState,a===null)e.memoizedState=o;else{t=a.next;var c=s=null,l=null,u=t,d=!1;do{var f=u.lane&-536870913;if(f===u.lane?(Co&f)===f:(X&f)===f){var p=u.revertLane;if(p===0)l!==null&&(l=l.next={lane:0,revertLane:0,gesture:null,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),f===Ca&&(d=!0);else if((Co&p)===p){u=u.next,p===Ca&&(d=!0);continue}else f={lane:0,revertLane:u.revertLane,gesture:null,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null},l===null?(c=l=f,s=o):l=l.next=f,V.lanes|=p,ru|=p;f=u.action,Oo&&n(o,f),o=u.hasEagerState?u.eagerState:n(o,f)}else p={lane:f,revertLane:u.revertLane,gesture:u.gesture,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null},l===null?(c=l=p,s=o):l=l.next=p,V.lanes|=f,ru|=f;u=u.next}while(u!==null&&u!==t);if(l===null?s=o:l.next=c,!Pr(o,e.memoizedState)&&(mc=!0,d&&(n=wa,n!==null)))throw n;e.memoizedState=o,e.baseState=s,e.baseQueue=l,r.lastRenderedState=o}return a===null&&(r.lanes=0),[e.memoizedState,r.dispatch]}function Xo(e){var t=Ho(),n=t.queue;if(n===null)throw Error(i(311));n.lastRenderedReducer=e;var r=n.dispatch,a=n.pending,o=t.memoizedState;if(a!==null){n.pending=null;var s=a=a.next;do o=e(o,s.action),s=s.next;while(s!==a);Pr(o,t.memoizedState)||(mc=!0),t.memoizedState=o,t.baseQueue===null&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function Zo(e,t,n){var r=V,a=Ho(),o=z;if(o){if(n===void 0)throw Error(i(407));n=n()}else n=t();var s=!Pr((wo||a).memoizedState,n);if(s&&(a.memoizedState=n,mc=!0),a=a.queue,ws(es.bind(null,r,a,e),[e]),a.getSnapshot!==t||s||To!==null&&To.memoizedState.tag&1){if(r.flags|=2048,ys(9,{destroy:void 0},$o.bind(null,r,a,n,t),null),Xl===null)throw Error(i(349));o||Co&127||Qo(r,t,n)}return n}function Qo(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=V.updateQueue,t===null?(t=Uo(),V.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function $o(e,t,n,r){t.value=n,t.getSnapshot=r,ts(t)&&ns(e)}function es(e,t,n){return n(function(){ts(t)&&ns(e)})}function ts(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Pr(e,n)}catch{return!0}}function ns(e){var t=hi(e,2);t!==null&&Du(t,e,2)}function rs(e){var t=Vo();if(typeof e==`function`){var n=e;if(e=n(),Oo){ze(!0);try{n()}finally{ze(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:qo,lastRenderedState:e},t}function os(e,t,n,r){return e.baseState=n,Yo(e,wo,typeof r==`function`?r:qo)}function ss(e,t,n,r,a){if(qs(e))throw Error(i(485));if(e=t.action,e!==null){var o={payload:a,action:e,next:null,isTransition:!0,status:`pending`,value:null,reason:null,listeners:[],then:function(e){o.listeners.push(e)}};N.T===null?o.isTransition=!1:n(!0),r(o),n=t.pending,n===null?(o.next=t.pending=o,cs(t,o)):(o.next=n.next,t.pending=n.next=o)}}function cs(e,t){var n=t.action,r=t.payload,i=e.state;if(t.isTransition){var a=N.T,o={};N.T=o;try{var s=n(i,r),c=N.S;c!==null&&c(o,s),ls(e,t,s)}catch(n){ds(e,t,n)}finally{a!==null&&o.types!==null&&(a.types=o.types),N.T=a}}else try{a=n(i,r),ls(e,t,a)}catch(n){ds(e,t,n)}}function ls(e,t,n){typeof n==`object`&&n&&typeof n.then==`function`?n.then(function(n){us(e,t,n)},function(n){return ds(e,t,n)}):us(e,t,n)}function us(e,t,n){t.status=`fulfilled`,t.value=n,fs(t),e.state=n,t=e.pending,t!==null&&(n=t.next,n===t?e.pending=null:(n=n.next,t.next=n,cs(e,n)))}function ds(e,t,n){var r=e.pending;if(e.pending=null,r!==null){r=r.next;do t.status=`rejected`,t.reason=n,fs(t),t=t.next;while(t!==r)}e.action=null}function fs(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function ps(e,t){return t}function ms(e,t){if(z){var n=Xl.formState;if(n!==null){a:{var r=V;if(z){if(Gi){b:{for(var i=Gi,a=qi;i.nodeType!==8;){if(!a){i=null;break b}if(i=wf(i.nextSibling),i===null){i=null;break b}}a=i.data,i=a===`F!`||a===`F`?i:null}if(i){Gi=wf(i.nextSibling),r=i.data===`F!`;break a}}Yi(r)}r=!1}r&&(t=n[0])}}return n=Vo(),n.memoizedState=n.baseState=t,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ps,lastRenderedState:t},n.queue=r,n=Ws.bind(null,V,r),r.dispatch=n,r=rs(!1),a=Ks.bind(null,V,!1,r.queue),r=Vo(),i={state:t,dispatch:null,action:e,pending:null},r.queue=i,n=ss.bind(null,V,i,a,n),i.dispatch=n,r.memoizedState=e,[t,n,!1]}function hs(e){var t=Ho();return gs(t,wo,e)}function gs(e,t,n){if(t=Yo(e,t,ps)[0],e=Jo(qo)[0],typeof t==`object`&&t&&typeof t.then==`function`)try{var r=Wo(t)}catch(e){throw e===Ma?Pa:e}else r=t;t=Ho();var i=t.queue,a=i.dispatch;return n!==t.memoizedState&&(V.flags|=2048,ys(9,{destroy:void 0},_s.bind(null,i,n),null)),[r,a,e]}function _s(e,t){e.action=t}function vs(e){var t=Ho(),n=wo;if(n!==null)return gs(t,n,e);Ho(),t=t.memoizedState,n=Ho();var r=n.queue.dispatch;return n.memoizedState=e,[t,r,!1]}function ys(e,t,n,r){return e={tag:e,create:n,deps:r,inst:t,next:null},t=V.updateQueue,t===null&&(t=Uo(),V.updateQueue=t),n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function bs(){return Ho().memoizedState}function xs(e,t,n,r){var i=Vo();V.flags|=e,i.memoizedState=ys(1|t,{destroy:void 0},n,r===void 0?null:r)}function Ss(e,t,n,r){var i=Ho();r=r===void 0?null:r;var a=i.memoizedState.inst;wo!==null&&r!==null&&Po(r,wo.memoizedState.deps)?i.memoizedState=ys(t,a,n,r):(V.flags|=e,i.memoizedState=ys(1|t,a,n,r))}function Cs(e,t){xs(8390656,8,e,t)}function ws(e,t){Ss(2048,8,e,t)}function Ts(e){V.flags|=4;var t=V.updateQueue;if(t===null)t=Uo(),V.updateQueue=t,t.events=[e];else{var n=t.events;n===null?t.events=[e]:n.push(e)}}function Es(e){var t=Ho().memoizedState;return Ts({ref:t,nextImpl:e}),function(){if(J&2)throw Error(i(440));return t.impl.apply(void 0,arguments)}}function Ds(e,t){return Ss(4,2,e,t)}function Os(e,t){return Ss(4,4,e,t)}function ks(e,t){if(typeof t==`function`){e=e();var n=t(e);return function(){typeof n==`function`?n():t(null)}}if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function As(e,t,n){n=n==null?null:n.concat([e]),Ss(4,4,ks.bind(null,t,e),n)}function js(){}function Ms(e,t){var n=Ho();t=t===void 0?null:t;var r=n.memoizedState;return t!==null&&Po(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Ns(e,t){var n=Ho();t=t===void 0?null:t;var r=n.memoizedState;if(t!==null&&Po(t,r[1]))return r[0];if(r=e(),Oo){ze(!0);try{e()}finally{ze(!1)}}return n.memoizedState=[r,t],r}function Ps(e,t,n){return n===void 0||Co&1073741824&&!(X&261930)?e.memoizedState=t:(e.memoizedState=n,e=Eu(),V.lanes|=e,ru|=e,n)}function Fs(e,t,n,r){return Pr(n,t)?n:co.current===null?!(Co&42)||Co&1073741824&&!(X&261930)?(mc=!0,e.memoizedState=n):(e=Eu(),V.lanes|=e,ru|=e,t):(e=Ps(e,n,r),Pr(e,t)||(mc=!0),e)}function U(e,t,n,r,i){var a=P.p;P.p=a!==0&&8>a?a:8;var o=N.T,s={};N.T=s,Ks(e,!1,t,n);try{var c=i(),l=N.S;if(l!==null&&l(s,c),typeof c==`object`&&c&&typeof c.then==`function`){var u=Da(c,r);Gs(e,t,u,Tu(e))}else Gs(e,t,r,Tu(e))}catch(n){Gs(e,t,{then:function(){},status:`rejected`,reason:n},Tu())}finally{P.p=a,o!==null&&s.types!==null&&(o.types=s.types),N.T=o}}function W(){}function Is(e,t,n,r){if(e.tag!==5)throw Error(i(476));var a=Ls(e).queue;U(e,a,t,re,n===null?W:function(){return Rs(e),n(r)})}function Ls(e){var t=e.memoizedState;if(t!==null)return t;t={memoizedState:re,baseState:re,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:qo,lastRenderedState:re},next:null};var n={};return t.next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:qo,lastRenderedState:n},next:null},e.memoizedState=t,e=e.alternate,e!==null&&(e.memoizedState=t),t}function Rs(e){var t=Ls(e);t.next===null&&(t=e.alternate.memoizedState),Gs(e,t.next.queue,{},Tu())}function zs(){return fa(mp)}function Bs(){return Ho().memoizedState}function Vs(){return Ho().memoizedState}function Hs(e){for(var t=e.return;t!==null;){switch(t.tag){case 24:case 3:var n=Tu();e=$a(n);var r=eo(t,e,n);r!==null&&(Du(r,t,n),to(r,t,n)),t={cache:ya()},e.payload=t;return}t=t.return}}function Us(e,t,n){var r=Tu();n={lane:r,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null},qs(e)?Js(t,n):(n=mi(e,t,n,r),n!==null&&(Du(n,e,r),Ys(n,t,r)))}function Ws(e,t,n){var r=Tu();Gs(e,t,n,r)}function Gs(e,t,n,r){var i={lane:r,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null};if(qs(e))Js(t,i);else{var a=e.alternate;if(e.lanes===0&&(a===null||a.lanes===0)&&(a=t.lastRenderedReducer,a!==null))try{var o=t.lastRenderedState,s=a(o,n);if(i.hasEagerState=!0,i.eagerState=s,Pr(s,o))return pi(e,t,i,0),Xl===null&&fi(),!1}catch{}if(n=mi(e,t,i,r),n!==null)return Du(n,e,r),Ys(n,t,r),!0}return!1}function Ks(e,t,n,r){if(r={lane:2,revertLane:Cd(),gesture:null,action:r,hasEagerState:!1,eagerState:null,next:null},qs(e)){if(t)throw Error(i(479))}else t=mi(e,n,r,2),t!==null&&Du(t,e,2)}function qs(e){var t=e.alternate;return e===V||t!==null&&t===V}function Js(e,t){Do=Eo=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Ys(e,t,n){if(n&4194048){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,nt(e,n)}}var Xs={readContext:fa,use:Go,useCallback:No,useContext:No,useEffect:No,useImperativeHandle:No,useLayoutEffect:No,useInsertionEffect:No,useMemo:No,useReducer:No,useRef:No,useState:No,useDebugValue:No,useDeferredValue:No,useTransition:No,useSyncExternalStore:No,useId:No,useHostTransitionStatus:No,useFormState:No,useActionState:No,useOptimistic:No,useMemoCache:No,useCacheRefresh:No};Xs.useEffectEvent=No;var Zs={readContext:fa,use:Go,useCallback:function(e,t){return Vo().memoizedState=[e,t===void 0?null:t],e},useContext:fa,useEffect:Cs,useImperativeHandle:function(e,t,n){n=n==null?null:n.concat([e]),xs(4194308,4,ks.bind(null,t,e),n)},useLayoutEffect:function(e,t){return xs(4194308,4,e,t)},useInsertionEffect:function(e,t){xs(4,2,e,t)},useMemo:function(e,t){var n=Vo();t=t===void 0?null:t;var r=e();if(Oo){ze(!0);try{e()}finally{ze(!1)}}return n.memoizedState=[r,t],r},useReducer:function(e,t,n){var r=Vo();if(n!==void 0){var i=n(t);if(Oo){ze(!0);try{n(t)}finally{ze(!1)}}}else i=t;return r.memoizedState=r.baseState=i,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:i},r.queue=e,e=e.dispatch=Us.bind(null,V,e),[r.memoizedState,e]},useRef:function(e){var t=Vo();return e={current:e},t.memoizedState=e},useState:function(e){e=rs(e);var t=e.queue,n=Ws.bind(null,V,t);return t.dispatch=n,[e.memoizedState,n]},useDebugValue:js,useDeferredValue:function(e,t){var n=Vo();return Ps(n,e,t)},useTransition:function(){var e=rs(!1);return e=U.bind(null,V,e.queue,!0,!1),Vo().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,n){var r=V,a=Vo();if(z){if(n===void 0)throw Error(i(407));n=n()}else{if(n=t(),Xl===null)throw Error(i(349));X&127||Qo(r,t,n)}a.memoizedState=n;var o={value:n,getSnapshot:t};return a.queue=o,Cs(es.bind(null,r,o,e),[e]),r.flags|=2048,ys(9,{destroy:void 0},$o.bind(null,r,o,n,t),null),n},useId:function(){var e=Vo(),t=Xl.identifierPrefix;if(z){var n=Ri,r=Li;n=(r&~(1<<32-Be(r)-1)).toString(32)+n,t=`_`+t+`R_`+n,n=ko++,0<n&&(t+=`H`+n.toString(32)),t+=`_`}else n=Mo++,t=`_`+t+`r_`+n.toString(32)+`_`;return e.memoizedState=t},useHostTransitionStatus:zs,useFormState:ms,useActionState:ms,useOptimistic:function(e){var t=Vo();t.memoizedState=t.baseState=e;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=n,t=Ks.bind(null,V,!0,n),n.dispatch=t,[e,t]},useMemoCache:Ko,useCacheRefresh:function(){return Vo().memoizedState=Hs.bind(null,V)},useEffectEvent:function(e){var t=Vo(),n={impl:e};return t.memoizedState=n,function(){if(J&2)throw Error(i(440));return n.impl.apply(void 0,arguments)}}},Qs={readContext:fa,use:Go,useCallback:Ms,useContext:fa,useEffect:ws,useImperativeHandle:As,useInsertionEffect:Ds,useLayoutEffect:Os,useMemo:Ns,useReducer:Jo,useRef:bs,useState:function(){return Jo(qo)},useDebugValue:js,useDeferredValue:function(e,t){var n=Ho();return Fs(n,wo.memoizedState,e,t)},useTransition:function(){var e=Jo(qo)[0],t=Ho().memoizedState;return[typeof e==`boolean`?e:Wo(e),t]},useSyncExternalStore:Zo,useId:Bs,useHostTransitionStatus:zs,useFormState:hs,useActionState:hs,useOptimistic:function(e,t){var n=Ho();return os(n,wo,e,t)},useMemoCache:Ko,useCacheRefresh:Vs};Qs.useEffectEvent=Es;var $s={readContext:fa,use:Go,useCallback:Ms,useContext:fa,useEffect:ws,useImperativeHandle:As,useInsertionEffect:Ds,useLayoutEffect:Os,useMemo:Ns,useReducer:Xo,useRef:bs,useState:function(){return Xo(qo)},useDebugValue:js,useDeferredValue:function(e,t){var n=Ho();return wo===null?Ps(n,e,t):Fs(n,wo.memoizedState,e,t)},useTransition:function(){var e=Xo(qo)[0],t=Ho().memoizedState;return[typeof e==`boolean`?e:Wo(e),t]},useSyncExternalStore:Zo,useId:Bs,useHostTransitionStatus:zs,useFormState:vs,useActionState:vs,useOptimistic:function(e,t){var n=Ho();return wo===null?(n.baseState=e,[e,n.queue.dispatch]):os(n,wo,e,t)},useMemoCache:Ko,useCacheRefresh:Vs};$s.useEffectEvent=Es;function ec(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:f({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var tc={enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Tu(),i=$a(r);i.payload=t,n!=null&&(i.callback=n),t=eo(e,i,r),t!==null&&(Du(t,e,r),to(t,e,r))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Tu(),i=$a(r);i.tag=1,i.payload=t,n!=null&&(i.callback=n),t=eo(e,i,r),t!==null&&(Du(t,e,r),to(t,e,r))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Tu(),r=$a(n);r.tag=2,t!=null&&(r.callback=t),t=eo(e,r,n),t!==null&&(Du(t,e,n),to(t,e,n))}};function nc(e,t,n,r,i,a,o){return e=e.stateNode,typeof e.shouldComponentUpdate==`function`?e.shouldComponentUpdate(r,a,o):t.prototype&&t.prototype.isPureReactComponent?!Fr(n,r)||!Fr(i,a):!0}function rc(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps==`function`&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps==`function`&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&tc.enqueueReplaceState(t,t.state,null)}function ic(e,t){var n=t;if(`ref`in t)for(var r in n={},t)r!==`ref`&&(n[r]=t[r]);if(e=e.defaultProps)for(var i in n===t&&(n=f({},n)),e)n[i]===void 0&&(n[i]=e[i]);return n}function ac(e){ci(e)}function oc(e){console.error(e)}function sc(e){ci(e)}function cc(e,t){try{var n=e.onUncaughtError;n(t.value,{componentStack:t.stack})}catch(e){setTimeout(function(){throw e})}}function G(e,t,n){try{var r=e.onCaughtError;r(n.value,{componentStack:n.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(e){setTimeout(function(){throw e})}}function lc(e,t,n){return n=$a(n),n.tag=3,n.payload={element:null},n.callback=function(){cc(e,t)},n}function uc(e){return e=$a(e),e.tag=3,e}function dc(e,t,n,r){var i=n.type.getDerivedStateFromError;if(typeof i==`function`){var a=r.value;e.payload=function(){return i(a)},e.callback=function(){G(t,n,r)}}var o=n.stateNode;o!==null&&typeof o.componentDidCatch==`function`&&(e.callback=function(){G(t,n,r),typeof i!=`function`&&(hu===null?hu=new Set([this]):hu.add(this));var e=r.stack;this.componentDidCatch(r.value,{componentStack:e===null?``:e})})}function fc(e,t,n,r,a){if(n.flags|=32768,typeof r==`object`&&r&&typeof r.then==`function`){if(t=n.alternate,t!==null&&la(t,n,a,!0),n=mo.current,n!==null){switch(n.tag){case 31:case 13:return ho===null?zu():n.alternate===null&&nu===0&&(nu=3),n.flags&=-257,n.flags|=65536,n.lanes=a,r===Fa?n.flags|=16384:(t=n.updateQueue,t===null?n.updateQueue=new Set([r]):t.add(r),rd(e,r,a)),!1;case 22:return n.flags|=65536,r===Fa?n.flags|=16384:(t=n.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([r])},n.updateQueue=t):(n=t.retryQueue,n===null?t.retryQueue=new Set([r]):n.add(r)),rd(e,r,a)),!1}throw Error(i(435,n.tag))}return rd(e,r,a),zu(),!1}if(z)return t=mo.current,t===null?(r!==Ji&&(t=Error(i(423),{cause:r}),ta(Ai(t,n))),e=e.current.alternate,e.flags|=65536,a&=-a,e.lanes|=a,r=Ai(r,n),a=lc(e.stateNode,r,a),no(e,a),nu!==4&&(nu=2)):(!(t.flags&65536)&&(t.flags|=256),t.flags|=65536,t.lanes=a,r!==Ji&&(e=Error(i(422),{cause:r}),ta(Ai(e,n)))),!1;var o=Error(i(520),{cause:r});if(o=Ai(o,n),cu===null?cu=[o]:cu.push(o),nu!==4&&(nu=2),t===null)return!0;r=Ai(r,n),n=t;do{switch(n.tag){case 3:return n.flags|=65536,e=a&-a,n.lanes|=e,e=lc(n.stateNode,r,e),no(n,e),!1;case 1:if(t=n.type,o=n.stateNode,!(n.flags&128)&&(typeof t.getDerivedStateFromError==`function`||o!==null&&typeof o.componentDidCatch==`function`&&(hu===null||!hu.has(o))))return n.flags|=65536,a&=-a,n.lanes|=a,a=uc(a),dc(a,e,n,r),no(n,a),!1}n=n.return}while(n!==null);return!1}var pc=Error(i(461)),mc=!1;function hc(e,t,n,r){t.child=e===null?Ya(t,null,n,r):Ja(t,e.child,n,r)}function gc(e,t,n,r,i){n=n.render;var a=t.ref;if(`ref`in r){var o={};for(var s in r)s!==`ref`&&(o[s]=r[s])}else o=r;return da(t),r=Fo(e,t,n,o,a,i),s=Ro(),e!==null&&!mc?(zo(e,t,i),Bc(e,t,i)):(z&&s&&Vi(t),t.flags|=1,hc(e,t,r,i),t.child)}function _c(e,t,n,r,i){if(e===null){var a=n.type;return typeof a==`function`&&!xi(a)&&a.defaultProps===void 0&&n.compare===null?(t.tag=15,t.type=a,vc(e,t,a,r,i)):(e=wi(n.type,null,r,t,t.mode,i),e.ref=t.ref,e.return=t,t.child=e)}if(a=e.child,!Vc(e,i)){var o=a.memoizedProps;if(n=n.compare,n=n===null?Fr:n,n(o,r)&&e.ref===t.ref)return Bc(e,t,i)}return t.flags|=1,e=Si(a,r),e.ref=t.ref,e.return=t,t.child=e}function vc(e,t,n,r,i){if(e!==null){var a=e.memoizedProps;if(Fr(a,r)&&e.ref===t.ref)if(mc=!1,t.pendingProps=r=a,Vc(e,i))e.flags&131072&&(mc=!0);else return t.lanes=e.lanes,Bc(e,t,i)}return Ec(e,t,n,r,i)}function yc(e,t,n,r){var i=r.children,a=e===null?null:e.memoizedState;if(e===null&&t.stateNode===null&&(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),r.mode===`hidden`){if(t.flags&128){if(a=a===null?n:a.baseLanes|n,e!==null){for(r=t.child=e.child,i=0;r!==null;)i=i|r.lanes|r.childLanes,r=r.sibling;r=i&~a}else r=0,t.child=null;return xc(e,t,a,n,r)}if(n&536870912)t.memoizedState={baseLanes:0,cachePool:null},e!==null&&B(t,a===null?null:a.cachePool),a===null?fo():uo(t,a),vo(t);else return r=t.lanes=536870912,xc(e,t,a===null?n:a.baseLanes|n,n,r)}else a===null?(e!==null&&B(t,null),fo(),yo(t)):(B(t,a.cachePool),uo(t,a),yo(t),t.memoizedState=null);return hc(e,t,i,n),t.child}function bc(e,t){return e!==null&&e.tag===22||t.stateNode!==null||(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),t.sibling}function xc(e,t,n,r,i){var a=Aa();return a=a===null?null:{parent:va._currentValue,pool:a},t.memoizedState={baseLanes:n,cachePool:a},e!==null&&B(t,null),fo(),vo(t),e!==null&&la(e,t,r,!0),t.childLanes=i,null}function Sc(e,t){return t=Fc({mode:t.mode,children:t.children},e.mode),t.ref=e.ref,e.child=t,t.return=e,t}function Cc(e,t,n){return Ja(t,e.child,null,n),e=Sc(t,t.pendingProps),e.flags|=2,bo(t),t.memoizedState=null,e}function wc(e,t,n){var r=t.pendingProps,a=(t.flags&128)!=0;if(t.flags&=-129,e===null){if(z){if(r.mode===`hidden`)return e=Sc(t,r),t.lanes=536870912,bc(null,e);if(_o(t),(e=Gi)?(e=bf(e,qi),e=e!==null&&e.data===`&`?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:Ii===null?null:{id:Li,overflow:Ri},retryLane:536870912,hydrationErrors:null},n=Di(e),n.return=t,t.child=n,Wi=t,Gi=null)):e=null,e===null)throw Yi(t);return t.lanes=536870912,null}return Sc(t,r)}var o=e.memoizedState;if(o!==null){var s=o.dehydrated;if(_o(t),a)if(t.flags&256)t.flags&=-257,t=Cc(e,t,n);else if(t.memoizedState!==null)t.child=e.child,t.flags|=128,t=null;else throw Error(i(558));else if(mc||la(e,t,n,!1),a=(n&e.childLanes)!==0,mc||a){if(r=Xl,r!==null&&(s=rt(r,n),s!==0&&s!==o.retryLane))throw o.retryLane=s,hi(e,s),Du(r,e,s),pc;zu(),t=Cc(e,t,n)}else e=o.treeContext,Gi=wf(s.nextSibling),Wi=t,z=!0,Ki=null,qi=!1,e!==null&&Ui(t,e),t=Sc(t,r),t.flags|=4096;return t}return e=Si(e.child,{mode:r.mode,children:r.children}),e.ref=t.ref,t.child=e,e.return=t,e}function Tc(e,t){var n=t.ref;if(n===null)e!==null&&e.ref!==null&&(t.flags|=4194816);else{if(typeof n!=`function`&&typeof n!=`object`)throw Error(i(284));(e===null||e.ref!==n)&&(t.flags|=4194816)}}function Ec(e,t,n,r,i){return da(t),n=Fo(e,t,n,r,void 0,i),r=Ro(),e!==null&&!mc?(zo(e,t,i),Bc(e,t,i)):(z&&r&&Vi(t),t.flags|=1,hc(e,t,n,i),t.child)}function Dc(e,t,n,r,i,a){return da(t),t.updateQueue=null,n=H(t,r,n,i),Io(e),r=Ro(),e!==null&&!mc?(zo(e,t,a),Bc(e,t,a)):(z&&r&&Vi(t),t.flags|=1,hc(e,t,n,a),t.child)}function Oc(e,t,n,r,i){if(da(t),t.stateNode===null){var a=vi,o=n.contextType;typeof o==`object`&&o&&(a=fa(o)),a=new n(r,a),t.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,a.updater=tc,t.stateNode=a,a._reactInternals=t,a=t.stateNode,a.props=r,a.state=t.memoizedState,a.refs={},Za(t),o=n.contextType,a.context=typeof o==`object`&&o?fa(o):vi,a.state=t.memoizedState,o=n.getDerivedStateFromProps,typeof o==`function`&&(ec(t,n,o,r),a.state=t.memoizedState),typeof n.getDerivedStateFromProps==`function`||typeof a.getSnapshotBeforeUpdate==`function`||typeof a.UNSAFE_componentWillMount!=`function`&&typeof a.componentWillMount!=`function`||(o=a.state,typeof a.componentWillMount==`function`&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount==`function`&&a.UNSAFE_componentWillMount(),o!==a.state&&tc.enqueueReplaceState(a,a.state,null),ao(t,r,a,i),io(),a.state=t.memoizedState),typeof a.componentDidMount==`function`&&(t.flags|=4194308),r=!0}else if(e===null){a=t.stateNode;var s=t.memoizedProps,c=ic(n,s);a.props=c;var l=a.context,u=n.contextType;o=vi,typeof u==`object`&&u&&(o=fa(u));var d=n.getDerivedStateFromProps;u=typeof d==`function`||typeof a.getSnapshotBeforeUpdate==`function`,s=t.pendingProps!==s,u||typeof a.UNSAFE_componentWillReceiveProps!=`function`&&typeof a.componentWillReceiveProps!=`function`||(s||l!==o)&&rc(t,a,r,o),Xa=!1;var f=t.memoizedState;a.state=f,ao(t,r,a,i),io(),l=t.memoizedState,s||f!==l||Xa?(typeof d==`function`&&(ec(t,n,d,r),l=t.memoizedState),(c=Xa||nc(t,n,c,r,f,l,o))?(u||typeof a.UNSAFE_componentWillMount!=`function`&&typeof a.componentWillMount!=`function`||(typeof a.componentWillMount==`function`&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount==`function`&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount==`function`&&(t.flags|=4194308)):(typeof a.componentDidMount==`function`&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),a.props=r,a.state=l,a.context=o,r=c):(typeof a.componentDidMount==`function`&&(t.flags|=4194308),r=!1)}else{a=t.stateNode,Qa(e,t),o=t.memoizedProps,u=ic(n,o),a.props=u,d=t.pendingProps,f=a.context,l=n.contextType,c=vi,typeof l==`object`&&l&&(c=fa(l)),s=n.getDerivedStateFromProps,(l=typeof s==`function`||typeof a.getSnapshotBeforeUpdate==`function`)||typeof a.UNSAFE_componentWillReceiveProps!=`function`&&typeof a.componentWillReceiveProps!=`function`||(o!==d||f!==c)&&rc(t,a,r,c),Xa=!1,f=t.memoizedState,a.state=f,ao(t,r,a,i),io();var p=t.memoizedState;o!==d||f!==p||Xa||e!==null&&e.dependencies!==null&&ua(e.dependencies)?(typeof s==`function`&&(ec(t,n,s,r),p=t.memoizedState),(u=Xa||nc(t,n,u,r,f,p,c)||e!==null&&e.dependencies!==null&&ua(e.dependencies))?(l||typeof a.UNSAFE_componentWillUpdate!=`function`&&typeof a.componentWillUpdate!=`function`||(typeof a.componentWillUpdate==`function`&&a.componentWillUpdate(r,p,c),typeof a.UNSAFE_componentWillUpdate==`function`&&a.UNSAFE_componentWillUpdate(r,p,c)),typeof a.componentDidUpdate==`function`&&(t.flags|=4),typeof a.getSnapshotBeforeUpdate==`function`&&(t.flags|=1024)):(typeof a.componentDidUpdate!=`function`||o===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!=`function`||o===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),a.props=r,a.state=p,a.context=c,r=u):(typeof a.componentDidUpdate!=`function`||o===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!=`function`||o===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),r=!1)}return a=r,Tc(e,t),r=(t.flags&128)!=0,a||r?(a=t.stateNode,n=r&&typeof n.getDerivedStateFromError!=`function`?null:a.render(),t.flags|=1,e!==null&&r?(t.child=Ja(t,e.child,null,i),t.child=Ja(t,null,n,i)):hc(e,t,n,i),t.memoizedState=a.state,e=t.child):e=Bc(e,t,i),e}function kc(e,t,n,r){return $i(),t.flags|=256,hc(e,t,n,r),t.child}var Ac={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function jc(e){return{baseLanes:e,cachePool:ja()}}function Mc(e,t,n){return e=e===null?0:e.childLanes&~n,t&&(e|=ou),e}function Nc(e,t,n){var r=t.pendingProps,a=!1,o=(t.flags&128)!=0,s;if((s=o)||(s=e!==null&&e.memoizedState===null?!1:(xo.current&2)!=0),s&&(a=!0,t.flags&=-129),s=(t.flags&32)!=0,t.flags&=-33,e===null){if(z){if(a?go(t):yo(t),(e=Gi)?(e=bf(e,qi),e=e!==null&&e.data!==`&`?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:Ii===null?null:{id:Li,overflow:Ri},retryLane:536870912,hydrationErrors:null},n=Di(e),n.return=t,t.child=n,Wi=t,Gi=null)):e=null,e===null)throw Yi(t);return Sf(e)?t.lanes=32:t.lanes=536870912,null}var c=r.children;return r=r.fallback,a?(yo(t),a=t.mode,c=Fc({mode:`hidden`,children:c},a),r=Ti(r,a,n,null),c.return=t,r.return=t,c.sibling=r,t.child=c,r=t.child,r.memoizedState=jc(n),r.childLanes=Mc(e,s,n),t.memoizedState=Ac,bc(null,r)):(go(t),Pc(t,c))}var l=e.memoizedState;if(l!==null&&(c=l.dehydrated,c!==null)){if(o)t.flags&256?(go(t),t.flags&=-257,t=Ic(e,t,n)):t.memoizedState===null?(yo(t),c=r.fallback,a=t.mode,r=Fc({mode:`visible`,children:r.children},a),c=Ti(c,a,n,null),c.flags|=2,r.return=t,c.return=t,r.sibling=c,t.child=r,Ja(t,e.child,null,n),r=t.child,r.memoizedState=jc(n),r.childLanes=Mc(e,s,n),t.memoizedState=Ac,t=bc(null,r)):(yo(t),t.child=e.child,t.flags|=128,t=null);else if(go(t),Sf(c)){if(s=c.nextSibling&&c.nextSibling.dataset,s)var u=s.dgst;s=u,r=Error(i(419)),r.stack=``,r.digest=s,ta({value:r,source:null,stack:null}),t=Ic(e,t,n)}else if(mc||la(e,t,n,!1),s=(n&e.childLanes)!==0,mc||s){if(s=Xl,s!==null&&(r=rt(s,n),r!==0&&r!==l.retryLane))throw l.retryLane=r,hi(e,r),Du(s,e,r),pc;xf(c)||zu(),t=Ic(e,t,n)}else xf(c)?(t.flags|=192,t.child=e.child,t=null):(e=l.treeContext,Gi=wf(c.nextSibling),Wi=t,z=!0,Ki=null,qi=!1,e!==null&&Ui(t,e),t=Pc(t,r.children),t.flags|=4096);return t}return a?(yo(t),c=r.fallback,a=t.mode,l=e.child,u=l.sibling,r=Si(l,{mode:`hidden`,children:r.children}),r.subtreeFlags=l.subtreeFlags&65011712,u===null?(c=Ti(c,a,n,null),c.flags|=2):c=Si(u,c),c.return=t,r.return=t,r.sibling=c,t.child=r,bc(null,r),r=t.child,c=e.child.memoizedState,c===null?c=jc(n):(a=c.cachePool,a===null?a=ja():(l=va._currentValue,a=a.parent===l?a:{parent:l,pool:l}),c={baseLanes:c.baseLanes|n,cachePool:a}),r.memoizedState=c,r.childLanes=Mc(e,s,n),t.memoizedState=Ac,bc(e.child,r)):(go(t),n=e.child,e=n.sibling,n=Si(n,{mode:`visible`,children:r.children}),n.return=t,n.sibling=null,e!==null&&(s=t.deletions,s===null?(t.deletions=[e],t.flags|=16):s.push(e)),t.child=n,t.memoizedState=null,n)}function Pc(e,t){return t=Fc({mode:`visible`,children:t},e.mode),t.return=e,e.child=t}function Fc(e,t){return e=bi(22,e,null,t),e.lanes=0,e}function Ic(e,t,n){return Ja(t,e.child,null,n),e=Pc(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Lc(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),sa(e.return,t,n)}function Rc(e,t,n,r,i,a){var o=e.memoizedState;o===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i,treeForkCount:a}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i,o.treeForkCount=a)}function zc(e,t,n){var r=t.pendingProps,i=r.revealOrder,a=r.tail;r=r.children;var o=xo.current,s=(o&2)!=0;if(s?(o=o&1|2,t.flags|=128):o&=1,F(xo,o),hc(e,t,r,n),r=z?Pi:0,!s&&e!==null&&e.flags&128)a:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Lc(e,n,t);else if(e.tag===19)Lc(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break a;for(;e.sibling===null;){if(e.return===null||e.return===t)break a;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(i){case`forwards`:for(n=t.child,i=null;n!==null;)e=n.alternate,e!==null&&So(e)===null&&(i=n),n=n.sibling;n=i,n===null?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Rc(t,!1,i,n,a,r);break;case`backwards`:case`unstable_legacy-backwards`:for(n=null,i=t.child,t.child=null;i!==null;){if(e=i.alternate,e!==null&&So(e)===null){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Rc(t,!0,n,null,a,r);break;case`together`:Rc(t,!1,null,null,void 0,r);break;default:t.memoizedState=null}return t.child}function Bc(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),ru|=t.lanes,(n&t.childLanes)===0)if(e!==null){if(la(e,t,n,!1),(n&t.childLanes)===0)return null}else return null;if(e!==null&&t.child!==e.child)throw Error(i(153));if(t.child!==null){for(e=t.child,n=Si(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=Si(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function Vc(e,t){return(e.lanes&t)===0?(e=e.dependencies,!!(e!==null&&ua(e))):!0}function Hc(e,t,n){switch(t.tag){case 3:fe(t,t.stateNode.containerInfo),aa(t,va,e.memoizedState.cache),$i();break;case 27:case 5:me(t);break;case 4:fe(t,t.stateNode.containerInfo);break;case 10:aa(t,t.type,t.memoizedProps.value);break;case 31:if(t.memoizedState!==null)return t.flags|=128,_o(t),null;break;case 13:var r=t.memoizedState;if(r!==null)return r.dehydrated===null?(n&t.child.childLanes)===0?(go(t),e=Bc(e,t,n),e===null?null:e.sibling):Nc(e,t,n):(go(t),t.flags|=128,null);go(t);break;case 19:var i=(e.flags&128)!=0;if(r=(n&t.childLanes)!==0,r||=(la(e,t,n,!1),(n&t.childLanes)!==0),i){if(r)return zc(e,t,n);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),F(xo,xo.current),r)break;return null;case 22:return t.lanes=0,yc(e,t,n,t.pendingProps);case 24:aa(t,va,e.memoizedState.cache)}return Bc(e,t,n)}function Uc(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps)mc=!0;else{if(!Vc(e,n)&&!(t.flags&128))return mc=!1,Hc(e,t,n);mc=!!(e.flags&131072)}else mc=!1,z&&t.flags&1048576&&Bi(t,Pi,t.index);switch(t.lanes=0,t.tag){case 16:a:{var r=t.pendingProps;if(e=Ra(t.elementType),t.type=e,typeof e==`function`)xi(e)?(r=ic(e,r),t.tag=1,t=Oc(null,t,e,r,n)):(t.tag=0,t=Ec(null,t,e,r,n));else{if(e!=null){var a=e.$$typeof;if(a===w){t.tag=11,t=gc(null,t,e,r,n);break a}else if(a===D){t.tag=14,t=_c(null,t,e,r,n);break a}}throw t=ne(e)||e,Error(i(306,t,``))}}return t;case 0:return Ec(e,t,t.type,t.pendingProps,n);case 1:return r=t.type,a=ic(r,t.pendingProps),Oc(e,t,r,a,n);case 3:a:{if(fe(t,t.stateNode.containerInfo),e===null)throw Error(i(387));r=t.pendingProps;var o=t.memoizedState;a=o.element,Qa(e,t),ao(t,r,null,n);var s=t.memoizedState;if(r=s.cache,aa(t,va,r),r!==o.cache&&ca(t,[va],n,!0),io(),r=s.element,o.isDehydrated)if(o={element:r,isDehydrated:!1,cache:s.cache},t.updateQueue.baseState=o,t.memoizedState=o,t.flags&256){t=kc(e,t,r,n);break a}else if(r!==a){a=Ai(Error(i(424)),t),ta(a),t=kc(e,t,r,n);break a}else{switch(e=t.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName===`HTML`?e.ownerDocument.body:e}for(Gi=wf(e.firstChild),Wi=t,z=!0,Ki=null,qi=!0,n=Ya(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling}else{if($i(),r===a){t=Bc(e,t,n);break a}hc(e,t,r,n)}t=t.child}return t;case 26:return Tc(e,t),e===null?(n=Gf(t.type,null,t.pendingProps,null))?t.memoizedState=n:z||(n=t.type,e=t.pendingProps,r=tf(ue.current).createElement(n),r[lt]=t,r[ut]=e,Yd(r,n,e),xt(r),t.stateNode=r):t.memoizedState=Gf(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return me(t),e===null&&z&&(r=t.stateNode=Of(t.type,t.pendingProps,ue.current),Wi=t,qi=!0,a=Gi,mf(t.type)?(Tf=a,Gi=wf(r.firstChild)):Gi=a),hc(e,t,t.pendingProps.children,n),Tc(e,t),e===null&&(t.flags|=4194304),t.child;case 5:return e===null&&z&&((a=r=Gi)&&(r=vf(r,t.type,t.pendingProps,qi),r===null?a=!1:(t.stateNode=r,Wi=t,Gi=wf(r.firstChild),qi=!1,a=!0)),a||Yi(t)),me(t),a=t.type,o=t.pendingProps,s=e===null?null:e.memoizedProps,r=o.children,af(a,o)?r=null:s!==null&&af(a,s)&&(t.flags|=32),t.memoizedState!==null&&(a=Fo(e,t,Lo,null,null,n),mp._currentValue=a),Tc(e,t),hc(e,t,r,n),t.child;case 6:return e===null&&z&&((e=n=Gi)&&(n=yf(n,t.pendingProps,qi),n===null?e=!1:(t.stateNode=n,Wi=t,Gi=null,e=!0)),e||Yi(t)),null;case 13:return Nc(e,t,n);case 4:return fe(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=Ja(t,null,r,n):hc(e,t,r,n),t.child;case 11:return gc(e,t,t.type,t.pendingProps,n);case 7:return hc(e,t,t.pendingProps,n),t.child;case 8:return hc(e,t,t.pendingProps.children,n),t.child;case 12:return hc(e,t,t.pendingProps.children,n),t.child;case 10:return r=t.pendingProps,aa(t,t.type,r.value),hc(e,t,r.children,n),t.child;case 9:return a=t.type._context,r=t.pendingProps.children,da(t),a=fa(a),r=r(a),t.flags|=1,hc(e,t,r,n),t.child;case 14:return _c(e,t,t.type,t.pendingProps,n);case 15:return vc(e,t,t.type,t.pendingProps,n);case 19:return zc(e,t,n);case 31:return wc(e,t,n);case 22:return yc(e,t,n,t.pendingProps);case 24:return da(t),r=fa(va),e===null?(a=Aa(),a===null&&(a=Xl,o=ya(),a.pooledCache=o,o.refCount++,o!==null&&(a.pooledCacheLanes|=n),a=o),t.memoizedState={parent:r,cache:a},Za(t),aa(t,va,a)):((e.lanes&n)!==0&&(Qa(e,t),ao(t,null,null,n),io()),a=e.memoizedState,o=t.memoizedState,a.parent===r?(r=o.cache,aa(t,va,r),r!==a.cache&&ca(t,[va],n,!0)):(a={parent:r,cache:r},t.memoizedState=a,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=a),aa(t,va,r))),hc(e,t,t.pendingProps.children,n),t.child;case 29:throw t.pendingProps}throw Error(i(156,t.tag))}function K(e){e.flags|=4}function Wc(e,t,n,r,i){if((t=(e.mode&32)!=0)&&(t=!1),t){if(e.flags|=16777216,(i&335544128)===i)if(e.stateNode.complete)e.flags|=8192;else if(Iu())e.flags|=8192;else throw za=Fa,Na}else e.flags&=-16777217}function Gc(e,t){if(t.type!==`stylesheet`||t.state.loading&4)e.flags&=-16777217;else if(e.flags|=16777216,!op(t))if(Iu())e.flags|=8192;else throw za=Fa,Na}function Kc(e,t){t!==null&&(e.flags|=4),e.flags&16384&&(t=e.tag===22?536870912:Ze(),e.lanes|=t,su|=t)}function qc(e,t){if(!z)switch(e.tailMode){case`hidden`:t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case`collapsed`:n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Jc(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&65011712,r|=i.flags&65011712,i.return=e,i=i.sibling;else for(i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Yc(e,t,n){var r=t.pendingProps;switch(Hi(t),t.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Jc(t),null;case 1:return Jc(t),null;case 3:return n=t.stateNode,r=null,e!==null&&(r=e.memoizedState.cache),t.memoizedState.cache!==r&&(t.flags|=2048),oa(va),pe(),n.pendingContext&&=(n.context=n.pendingContext,null),(e===null||e.child===null)&&(Qi(t)?K(t):e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,ea())),Jc(t),null;case 26:var a=t.type,o=t.memoizedState;return e===null?(K(t),o===null?(Jc(t),Wc(t,a,null,r,n)):(Jc(t),Gc(t,o))):o?o===e.memoizedState?(Jc(t),t.flags&=-16777217):(K(t),Jc(t),Gc(t,o)):(e=e.memoizedProps,e!==r&&K(t),Jc(t),Wc(t,a,e,r,n)),null;case 27:if(he(t),n=ue.current,a=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==r&&K(t);else{if(!r){if(t.stateNode===null)throw Error(i(166));return Jc(t),null}e=ce.current,Qi(t)?Xi(t,e):(e=Of(a,r,n),t.stateNode=e,K(t))}return Jc(t),null;case 5:if(he(t),a=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==r&&K(t);else{if(!r){if(t.stateNode===null)throw Error(i(166));return Jc(t),null}if(o=ce.current,Qi(t))Xi(t,o);else{var s=tf(ue.current);switch(o){case 1:o=s.createElementNS(`http://www.w3.org/2000/svg`,a);break;case 2:o=s.createElementNS(`http://www.w3.org/1998/Math/MathML`,a);break;default:switch(a){case`svg`:o=s.createElementNS(`http://www.w3.org/2000/svg`,a);break;case`math`:o=s.createElementNS(`http://www.w3.org/1998/Math/MathML`,a);break;case`script`:o=s.createElement(`div`),o.innerHTML=`<script><\/script>`,o=o.removeChild(o.firstChild);break;case`select`:o=typeof r.is==`string`?s.createElement(`select`,{is:r.is}):s.createElement(`select`),r.multiple?o.multiple=!0:r.size&&(o.size=r.size);break;default:o=typeof r.is==`string`?s.createElement(a,{is:r.is}):s.createElement(a)}}o[lt]=t,o[ut]=r;a:for(s=t.child;s!==null;){if(s.tag===5||s.tag===6)o.appendChild(s.stateNode);else if(s.tag!==4&&s.tag!==27&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===t)break a;for(;s.sibling===null;){if(s.return===null||s.return===t)break a;s=s.return}s.sibling.return=s.return,s=s.sibling}t.stateNode=o;a:switch(Yd(o,a,r),a){case`button`:case`input`:case`select`:case`textarea`:r=!!r.autoFocus;break a;case`img`:r=!0;break a;default:r=!1}r&&K(t)}}return Jc(t),Wc(t,t.type,e===null?null:e.memoizedProps,t.pendingProps,n),null;case 6:if(e&&t.stateNode!=null)e.memoizedProps!==r&&K(t);else{if(typeof r!=`string`&&t.stateNode===null)throw Error(i(166));if(e=ue.current,Qi(t)){if(e=t.stateNode,n=t.memoizedProps,r=null,a=Wi,a!==null)switch(a.tag){case 27:case 5:r=a.memoizedProps}e[lt]=t,e=!!(e.nodeValue===n||r!==null&&!0===r.suppressHydrationWarning||Kd(e.nodeValue,n)),e||Yi(t,!0)}else e=tf(e).createTextNode(r),e[lt]=t,t.stateNode=e}return Jc(t),null;case 31:if(n=t.memoizedState,e===null||e.memoizedState!==null){if(r=Qi(t),n!==null){if(e===null){if(!r)throw Error(i(318));if(e=t.memoizedState,e=e===null?null:e.dehydrated,!e)throw Error(i(557));e[lt]=t}else $i(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Jc(t),e=!1}else n=ea(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=n),e=!0;if(!e)return t.flags&256?(bo(t),t):(bo(t),null);if(t.flags&128)throw Error(i(558))}return Jc(t),null;case 13:if(r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(a=Qi(t),r!==null&&r.dehydrated!==null){if(e===null){if(!a)throw Error(i(318));if(a=t.memoizedState,a=a===null?null:a.dehydrated,!a)throw Error(i(317));a[lt]=t}else $i(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Jc(t),a=!1}else a=ea(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=a),a=!0;if(!a)return t.flags&256?(bo(t),t):(bo(t),null)}return bo(t),t.flags&128?(t.lanes=n,t):(n=r!==null,e=e!==null&&e.memoizedState!==null,n&&(r=t.child,a=null,r.alternate!==null&&r.alternate.memoizedState!==null&&r.alternate.memoizedState.cachePool!==null&&(a=r.alternate.memoizedState.cachePool.pool),o=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(o=r.memoizedState.cachePool.pool),o!==a&&(r.flags|=2048)),n!==e&&n&&(t.child.flags|=8192),Kc(t,t.updateQueue),Jc(t),null);case 4:return pe(),e===null&&Id(t.stateNode.containerInfo),Jc(t),null;case 10:return oa(t.type),Jc(t),null;case 19:if(se(xo),r=t.memoizedState,r===null)return Jc(t),null;if(a=(t.flags&128)!=0,o=r.rendering,o===null)if(a)qc(r,!1);else{if(nu!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=So(e),o!==null){for(t.flags|=128,qc(r,!1),e=o.updateQueue,t.updateQueue=e,Kc(t,e),t.subtreeFlags=0,e=n,n=t.child;n!==null;)Ci(n,e),n=n.sibling;return F(xo,xo.current&1|2),z&&zi(t,r.treeForkCount),t.child}e=e.sibling}r.tail!==null&&Oe()>pu&&(t.flags|=128,a=!0,qc(r,!1),t.lanes=4194304)}else{if(!a)if(e=So(o),e!==null){if(t.flags|=128,a=!0,e=e.updateQueue,t.updateQueue=e,Kc(t,e),qc(r,!0),r.tail===null&&r.tailMode===`hidden`&&!o.alternate&&!z)return Jc(t),null}else 2*Oe()-r.renderingStartTime>pu&&n!==536870912&&(t.flags|=128,a=!0,qc(r,!1),t.lanes=4194304);r.isBackwards?(o.sibling=t.child,t.child=o):(e=r.last,e===null?t.child=o:e.sibling=o,r.last=o)}return r.tail===null?(Jc(t),null):(e=r.tail,r.rendering=e,r.tail=e.sibling,r.renderingStartTime=Oe(),e.sibling=null,n=xo.current,F(xo,a?n&1|2:n&1),z&&zi(t,r.treeForkCount),e);case 22:case 23:return bo(t),po(),r=t.memoizedState!==null,e===null?r&&(t.flags|=8192):e.memoizedState!==null!==r&&(t.flags|=8192),r?n&536870912&&!(t.flags&128)&&(Jc(t),t.subtreeFlags&6&&(t.flags|=8192)):Jc(t),n=t.updateQueue,n!==null&&Kc(t,n.retryQueue),n=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(n=e.memoizedState.cachePool.pool),r=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(r=t.memoizedState.cachePool.pool),r!==n&&(t.flags|=2048),e!==null&&se(ka),null;case 24:return n=null,e!==null&&(n=e.memoizedState.cache),t.memoizedState.cache!==n&&(t.flags|=2048),oa(va),Jc(t),null;case 25:return null;case 30:return null}throw Error(i(156,t.tag))}function Xc(e,t){switch(Hi(t),t.tag){case 1:return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return oa(va),pe(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 26:case 27:case 5:return he(t),null;case 31:if(t.memoizedState!==null){if(bo(t),t.alternate===null)throw Error(i(340));$i()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 13:if(bo(t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(i(340));$i()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return se(xo),null;case 4:return pe(),null;case 10:return oa(t.type),null;case 22:case 23:return bo(t),po(),e!==null&&se(ka),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 24:return oa(va),null;case 25:return null;default:return null}}function Zc(e,t){switch(Hi(t),t.tag){case 3:oa(va),pe();break;case 26:case 27:case 5:he(t);break;case 4:pe();break;case 31:t.memoizedState!==null&&bo(t);break;case 13:bo(t);break;case 19:se(xo);break;case 10:oa(t.type);break;case 22:case 23:bo(t),po(),e!==null&&se(ka);break;case 24:oa(va)}}function Qc(e,t){try{var n=t.updateQueue,r=n===null?null:n.lastEffect;if(r!==null){var i=r.next;n=i;do{if((n.tag&e)===e){r=void 0;var a=n.create,o=n.inst;r=a(),o.destroy=r}n=n.next}while(n!==i)}}catch(e){Q(t,t.return,e)}}function $c(e,t,n){try{var r=t.updateQueue,i=r===null?null:r.lastEffect;if(i!==null){var a=i.next;r=a;do{if((r.tag&e)===e){var o=r.inst,s=o.destroy;if(s!==void 0){o.destroy=void 0,i=t;var c=n,l=s;try{l()}catch(e){Q(i,c,e)}}}r=r.next}while(r!==a)}}catch(e){Q(t,t.return,e)}}function el(e){var t=e.updateQueue;if(t!==null){var n=e.stateNode;try{so(t,n)}catch(t){Q(e,e.return,t)}}}function tl(e,t,n){n.props=ic(e.type,e.memoizedProps),n.state=e.memoizedState;try{n.componentWillUnmount()}catch(n){Q(e,t,n)}}function nl(e,t){try{var n=e.ref;if(n!==null){switch(e.tag){case 26:case 27:case 5:var r=e.stateNode;break;case 30:r=e.stateNode;break;default:r=e.stateNode}typeof n==`function`?e.refCleanup=n(r):n.current=r}}catch(n){Q(e,t,n)}}function rl(e,t){var n=e.ref,r=e.refCleanup;if(n!==null)if(typeof r==`function`)try{r()}catch(n){Q(e,t,n)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof n==`function`)try{n(null)}catch(n){Q(e,t,n)}else n.current=null}function il(e){var t=e.type,n=e.memoizedProps,r=e.stateNode;try{a:switch(t){case`button`:case`input`:case`select`:case`textarea`:n.autoFocus&&r.focus();break a;case`img`:n.src?r.src=n.src:n.srcSet&&(r.srcset=n.srcSet)}}catch(t){Q(e,e.return,t)}}function al(e,t,n){try{var r=e.stateNode;Xd(r,e.type,n,t),r[ut]=t}catch(t){Q(e,e.return,t)}}function ol(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&mf(e.type)||e.tag===4}function sl(e){a:for(;;){for(;e.sibling===null;){if(e.return===null||ol(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&mf(e.type)||e.flags&2||e.child===null||e.tag===4)continue a;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function cl(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?(n.nodeType===9?n.body:n.nodeName===`HTML`?n.ownerDocument.body:n).insertBefore(e,t):(t=n.nodeType===9?n.body:n.nodeName===`HTML`?n.ownerDocument.body:n,t.appendChild(e),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=tn));else if(r!==4&&(r===27&&mf(e.type)&&(n=e.stateNode,t=null),e=e.child,e!==null))for(cl(e,t,n),e=e.sibling;e!==null;)cl(e,t,n),e=e.sibling}function ll(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(r===27&&mf(e.type)&&(n=e.stateNode),e=e.child,e!==null))for(ll(e,t,n),e=e.sibling;e!==null;)ll(e,t,n),e=e.sibling}function q(e){var t=e.stateNode,n=e.memoizedProps;try{for(var r=e.type,i=t.attributes;i.length;)t.removeAttributeNode(i[0]);Yd(t,r,n),t[lt]=e,t[ut]=n}catch(t){Q(e,e.return,t)}}var ul=!1,dl=!1,fl=!1,pl=typeof WeakSet==`function`?WeakSet:Set,ml=null;function hl(e,t){if(e=e.containerInfo,$d=Cp,e=zr(e),Br(e)){if(`selectionStart`in e)var n={start:e.selectionStart,end:e.selectionEnd};else a:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var a=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch{n=null;break a}var s=0,c=-1,l=-1,u=0,d=0,f=e,p=null;b:for(;;){for(var m;f!==n||a!==0&&f.nodeType!==3||(c=s+a),f!==o||r!==0&&f.nodeType!==3||(l=s+r),f.nodeType===3&&(s+=f.nodeValue.length),(m=f.firstChild)!==null;)p=f,f=m;for(;;){if(f===e)break b;if(p===n&&++u===a&&(c=s),p===o&&++d===r&&(l=s),(m=f.nextSibling)!==null)break;f=p,p=f.parentNode}f=m}n=c===-1||l===-1?null:{start:c,end:l}}else n=null}n||={start:0,end:0}}else n=null;for(ef={focusedElem:e,selectionRange:n},Cp=!1,ml=t;ml!==null;)if(t=ml,e=t.child,t.subtreeFlags&1028&&e!==null)e.return=t,ml=e;else for(;ml!==null;){switch(t=ml,o=t.alternate,e=t.flags,t.tag){case 0:if(e&4&&(e=t.updateQueue,e=e===null?null:e.events,e!==null))for(n=0;n<e.length;n++)a=e[n],a.ref.impl=a.nextImpl;break;case 11:case 15:break;case 1:if(e&1024&&o!==null){e=void 0,n=t,a=o.memoizedProps,o=o.memoizedState,r=n.stateNode;try{var h=ic(n.type,a);e=r.getSnapshotBeforeUpdate(h,o),r.__reactInternalSnapshotBeforeUpdate=e}catch(e){Q(n,n.return,e)}}break;case 3:if(e&1024){if(e=t.stateNode.containerInfo,n=e.nodeType,n===9)_f(e);else if(n===1)switch(e.nodeName){case`HEAD`:case`HTML`:case`BODY`:_f(e);break;default:e.textContent=``}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if(e&1024)throw Error(i(163))}if(e=t.sibling,e!==null){e.return=t.return,ml=e;break}ml=t.return}}function gl(e,t,n){var r=n.flags;switch(n.tag){case 0:case 11:case 15:jl(e,n),r&4&&Qc(5,n);break;case 1:if(jl(e,n),r&4)if(e=n.stateNode,t===null)try{e.componentDidMount()}catch(e){Q(n,n.return,e)}else{var i=ic(n.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(i,t,e.__reactInternalSnapshotBeforeUpdate)}catch(e){Q(n,n.return,e)}}r&64&&el(n),r&512&&nl(n,n.return);break;case 3:if(jl(e,n),r&64&&(e=n.updateQueue,e!==null)){if(t=null,n.child!==null)switch(n.child.tag){case 27:case 5:t=n.child.stateNode;break;case 1:t=n.child.stateNode}try{so(e,t)}catch(e){Q(n,n.return,e)}}break;case 27:t===null&&r&4&&q(n);case 26:case 5:jl(e,n),t===null&&r&4&&il(n),r&512&&nl(n,n.return);break;case 12:jl(e,n);break;case 31:jl(e,n),r&4&&Sl(e,n);break;case 13:jl(e,n),r&4&&Cl(e,n),r&64&&(e=n.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(n=od.bind(null,n),Cf(e,n))));break;case 22:if(r=n.memoizedState!==null||ul,!r){t=t!==null&&t.memoizedState!==null||dl,i=ul;var a=dl;ul=r,(dl=t)&&!a?Nl(e,n,(n.subtreeFlags&8772)!=0):jl(e,n),ul=i,dl=a}break;case 30:break;default:jl(e,n)}}function _l(e){var t=e.alternate;t!==null&&(e.alternate=null,_l(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&_t(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var vl=null,yl=!1;function bl(e,t,n){for(n=n.child;n!==null;)xl(e,t,n),n=n.sibling}function xl(e,t,n){if(Re&&typeof Re.onCommitFiberUnmount==`function`)try{Re.onCommitFiberUnmount(Le,n)}catch{}switch(n.tag){case 26:dl||rl(n,t),bl(e,t,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode,n.parentNode.removeChild(n));break;case 27:dl||rl(n,t);var r=vl,i=yl;mf(n.type)&&(vl=n.stateNode,yl=!1),bl(e,t,n),kf(n.stateNode),vl=r,yl=i;break;case 5:dl||rl(n,t);case 6:if(r=vl,i=yl,vl=null,bl(e,t,n),vl=r,yl=i,vl!==null)if(yl)try{(vl.nodeType===9?vl.body:vl.nodeName===`HTML`?vl.ownerDocument.body:vl).removeChild(n.stateNode)}catch(e){Q(n,t,e)}else try{vl.removeChild(n.stateNode)}catch(e){Q(n,t,e)}break;case 18:vl!==null&&(yl?(e=vl,hf(e.nodeType===9?e.body:e.nodeName===`HTML`?e.ownerDocument.body:e,n.stateNode),Yp(e)):hf(vl,n.stateNode));break;case 4:r=vl,i=yl,vl=n.stateNode.containerInfo,yl=!0,bl(e,t,n),vl=r,yl=i;break;case 0:case 11:case 14:case 15:$c(2,n,t),dl||$c(4,n,t),bl(e,t,n);break;case 1:dl||(rl(n,t),r=n.stateNode,typeof r.componentWillUnmount==`function`&&tl(n,t,r)),bl(e,t,n);break;case 21:bl(e,t,n);break;case 22:dl=(r=dl)||n.memoizedState!==null,bl(e,t,n),dl=r;break;default:bl(e,t,n)}}function Sl(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{Yp(e)}catch(e){Q(t,t.return,e)}}}function Cl(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{Yp(e)}catch(e){Q(t,t.return,e)}}function wl(e){switch(e.tag){case 31:case 13:case 19:var t=e.stateNode;return t===null&&(t=e.stateNode=new pl),t;case 22:return e=e.stateNode,t=e._retryCache,t===null&&(t=e._retryCache=new pl),t;default:throw Error(i(435,e.tag))}}function Tl(e,t){var n=wl(e);t.forEach(function(t){if(!n.has(t)){n.add(t);var r=sd.bind(null,e,t);t.then(r,r)}})}function El(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var a=n[r],o=e,s=t,c=s;a:for(;c!==null;){switch(c.tag){case 27:if(mf(c.type)){vl=c.stateNode,yl=!1;break a}break;case 5:vl=c.stateNode,yl=!1;break a;case 3:case 4:vl=c.stateNode.containerInfo,yl=!0;break a}c=c.return}if(vl===null)throw Error(i(160));xl(o,s,a),vl=null,yl=!1,o=a.alternate,o!==null&&(o.return=null),a.return=null}if(t.subtreeFlags&13886)for(t=t.child;t!==null;)Ol(t,e),t=t.sibling}var Dl=null;function Ol(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:El(t,e),kl(e),r&4&&($c(3,e,e.return),Qc(3,e),$c(5,e,e.return));break;case 1:El(t,e),kl(e),r&512&&(dl||n===null||rl(n,n.return)),r&64&&ul&&(e=e.updateQueue,e!==null&&(r=e.callbacks,r!==null&&(n=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=n===null?r:n.concat(r))));break;case 26:var a=Dl;if(El(t,e),kl(e),r&512&&(dl||n===null||rl(n,n.return)),r&4){var o=n===null?null:n.memoizedState;if(r=e.memoizedState,n===null)if(r===null)if(e.stateNode===null){a:{r=e.type,n=e.memoizedProps,a=a.ownerDocument||a;b:switch(r){case`title`:o=a.getElementsByTagName(`title`)[0],(!o||o[gt]||o[lt]||o.namespaceURI===`http://www.w3.org/2000/svg`||o.hasAttribute(`itemprop`))&&(o=a.createElement(r),a.head.insertBefore(o,a.querySelector(`head > title`))),Yd(o,r,n),o[lt]=e,xt(o),r=o;break a;case`link`:var s=rp(`link`,`href`,a).get(r+(n.href||``));if(s){for(var c=0;c<s.length;c++)if(o=s[c],o.getAttribute(`href`)===(n.href==null||n.href===``?null:n.href)&&o.getAttribute(`rel`)===(n.rel==null?null:n.rel)&&o.getAttribute(`title`)===(n.title==null?null:n.title)&&o.getAttribute(`crossorigin`)===(n.crossOrigin==null?null:n.crossOrigin)){s.splice(c,1);break b}}o=a.createElement(r),Yd(o,r,n),a.head.appendChild(o);break;case`meta`:if(s=rp(`meta`,`content`,a).get(r+(n.content||``))){for(c=0;c<s.length;c++)if(o=s[c],o.getAttribute(`content`)===(n.content==null?null:``+n.content)&&o.getAttribute(`name`)===(n.name==null?null:n.name)&&o.getAttribute(`property`)===(n.property==null?null:n.property)&&o.getAttribute(`http-equiv`)===(n.httpEquiv==null?null:n.httpEquiv)&&o.getAttribute(`charset`)===(n.charSet==null?null:n.charSet)){s.splice(c,1);break b}}o=a.createElement(r),Yd(o,r,n),a.head.appendChild(o);break;default:throw Error(i(468,r))}o[lt]=e,xt(o),r=o}e.stateNode=r}else ip(a,e.type,e.stateNode);else e.stateNode=Qf(a,r,e.memoizedProps);else o===r?r===null&&e.stateNode!==null&&al(e,e.memoizedProps,n.memoizedProps):(o===null?n.stateNode!==null&&(n=n.stateNode,n.parentNode.removeChild(n)):o.count--,r===null?ip(a,e.type,e.stateNode):Qf(a,r,e.memoizedProps))}break;case 27:El(t,e),kl(e),r&512&&(dl||n===null||rl(n,n.return)),n!==null&&r&4&&al(e,e.memoizedProps,n.memoizedProps);break;case 5:if(El(t,e),kl(e),r&512&&(dl||n===null||rl(n,n.return)),e.flags&32){a=e.stateNode;try{qt(a,``)}catch(t){Q(e,e.return,t)}}r&4&&e.stateNode!=null&&(a=e.memoizedProps,al(e,a,n===null?a:n.memoizedProps)),r&1024&&(fl=!0);break;case 6:if(El(t,e),kl(e),r&4){if(e.stateNode===null)throw Error(i(162));r=e.memoizedProps,n=e.stateNode;try{n.nodeValue=r}catch(t){Q(e,e.return,t)}}break;case 3:if(np=null,a=Dl,Dl=Mf(t.containerInfo),El(t,e),Dl=a,kl(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Yp(t.containerInfo)}catch(t){Q(e,e.return,t)}fl&&(fl=!1,Al(e));break;case 4:r=Dl,Dl=Mf(e.stateNode.containerInfo),El(t,e),kl(e),Dl=r;break;case 12:El(t,e),kl(e);break;case 31:El(t,e),kl(e),r&4&&(r=e.updateQueue,r!==null&&(e.updateQueue=null,Tl(e,r)));break;case 13:El(t,e),kl(e),e.child.flags&8192&&e.memoizedState!==null!=(n!==null&&n.memoizedState!==null)&&(du=Oe()),r&4&&(r=e.updateQueue,r!==null&&(e.updateQueue=null,Tl(e,r)));break;case 22:a=e.memoizedState!==null;var l=n!==null&&n.memoizedState!==null,u=ul,d=dl;if(ul=u||a,dl=d||l,El(t,e),dl=d,ul=u,kl(e),r&8192)a:for(t=e.stateNode,t._visibility=a?t._visibility&-2:t._visibility|1,a&&(n===null||l||ul||dl||Ml(e)),n=null,t=e;;){if(t.tag===5||t.tag===26){if(n===null){l=n=t;try{if(o=l.stateNode,a)s=o.style,typeof s.setProperty==`function`?s.setProperty(`display`,`none`,`important`):s.display=`none`;else{c=l.stateNode;var f=l.memoizedProps.style,p=f!=null&&f.hasOwnProperty(`display`)?f.display:null;c.style.display=p==null||typeof p==`boolean`?``:(``+p).trim()}}catch(e){Q(l,l.return,e)}}}else if(t.tag===6){if(n===null){l=t;try{l.stateNode.nodeValue=a?``:l.memoizedProps}catch(e){Q(l,l.return,e)}}}else if(t.tag===18){if(n===null){l=t;try{var m=l.stateNode;a?gf(m,!0):gf(l.stateNode,!1)}catch(e){Q(l,l.return,e)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===e)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break a;for(;t.sibling===null;){if(t.return===null||t.return===e)break a;n===t&&(n=null),t=t.return}n===t&&(n=null),t.sibling.return=t.return,t=t.sibling}r&4&&(r=e.updateQueue,r!==null&&(n=r.retryQueue,n!==null&&(r.retryQueue=null,Tl(e,n))));break;case 19:El(t,e),kl(e),r&4&&(r=e.updateQueue,r!==null&&(e.updateQueue=null,Tl(e,r)));break;case 30:break;case 21:break;default:El(t,e),kl(e)}}function kl(e){var t=e.flags;if(t&2){try{for(var n,r=e.return;r!==null;){if(ol(r)){n=r;break}r=r.return}if(n==null)throw Error(i(160));switch(n.tag){case 27:var a=n.stateNode,o=sl(e);ll(e,o,a);break;case 5:var s=n.stateNode;n.flags&32&&(qt(s,``),n.flags&=-33);var c=sl(e);ll(e,c,s);break;case 3:case 4:var l=n.stateNode.containerInfo,u=sl(e);cl(e,u,l);break;default:throw Error(i(161))}}catch(t){Q(e,e.return,t)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Al(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var t=e;Al(t),t.tag===5&&t.flags&1024&&t.stateNode.reset(),e=e.sibling}}function jl(e,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)gl(e,t.alternate,t),t=t.sibling}function Ml(e){for(e=e.child;e!==null;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:$c(4,t,t.return),Ml(t);break;case 1:rl(t,t.return);var n=t.stateNode;typeof n.componentWillUnmount==`function`&&tl(t,t.return,n),Ml(t);break;case 27:kf(t.stateNode);case 26:case 5:rl(t,t.return),Ml(t);break;case 22:t.memoizedState===null&&Ml(t);break;case 30:Ml(t);break;default:Ml(t)}e=e.sibling}}function Nl(e,t,n){for(n&&=(t.subtreeFlags&8772)!=0,t=t.child;t!==null;){var r=t.alternate,i=e,a=t,o=a.flags;switch(a.tag){case 0:case 11:case 15:Nl(i,a,n),Qc(4,a);break;case 1:if(Nl(i,a,n),r=a,i=r.stateNode,typeof i.componentDidMount==`function`)try{i.componentDidMount()}catch(e){Q(r,r.return,e)}if(r=a,i=r.updateQueue,i!==null){var s=r.stateNode;try{var c=i.shared.hiddenCallbacks;if(c!==null)for(i.shared.hiddenCallbacks=null,i=0;i<c.length;i++)oo(c[i],s)}catch(e){Q(r,r.return,e)}}n&&o&64&&el(a),nl(a,a.return);break;case 27:q(a);case 26:case 5:Nl(i,a,n),n&&r===null&&o&4&&il(a),nl(a,a.return);break;case 12:Nl(i,a,n);break;case 31:Nl(i,a,n),n&&o&4&&Sl(i,a);break;case 13:Nl(i,a,n),n&&o&4&&Cl(i,a);break;case 22:a.memoizedState===null&&Nl(i,a,n),nl(a,a.return);break;case 30:break;default:Nl(i,a,n)}t=t.sibling}}function Pl(e,t){var n=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(n=e.memoizedState.cachePool.pool),e=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(e=t.memoizedState.cachePool.pool),e!==n&&(e!=null&&e.refCount++,n!=null&&ba(n))}function Fl(e,t){e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&ba(e))}function Il(e,t,n,r){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)Ll(e,t,n,r),t=t.sibling}function Ll(e,t,n,r){var i=t.flags;switch(t.tag){case 0:case 11:case 15:Il(e,t,n,r),i&2048&&Qc(9,t);break;case 1:Il(e,t,n,r);break;case 3:Il(e,t,n,r),i&2048&&(e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&ba(e)));break;case 12:if(i&2048){Il(e,t,n,r),e=t.stateNode;try{var a=t.memoizedProps,o=a.id,s=a.onPostCommit;typeof s==`function`&&s(o,t.alternate===null?`mount`:`update`,e.passiveEffectDuration,-0)}catch(e){Q(t,t.return,e)}}else Il(e,t,n,r);break;case 31:Il(e,t,n,r);break;case 13:Il(e,t,n,r);break;case 23:break;case 22:a=t.stateNode,o=t.alternate,t.memoizedState===null?a._visibility&2?Il(e,t,n,r):(a._visibility|=2,Rl(e,t,n,r,(t.subtreeFlags&10256)!=0||!1)):a._visibility&2?Il(e,t,n,r):zl(e,t),i&2048&&Pl(o,t);break;case 24:Il(e,t,n,r),i&2048&&Fl(t.alternate,t);break;default:Il(e,t,n,r)}}function Rl(e,t,n,r,i){for(i&&=(t.subtreeFlags&10256)!=0||!1,t=t.child;t!==null;){var a=e,o=t,s=n,c=r,l=o.flags;switch(o.tag){case 0:case 11:case 15:Rl(a,o,s,c,i),Qc(8,o);break;case 23:break;case 22:var u=o.stateNode;o.memoizedState===null?(u._visibility|=2,Rl(a,o,s,c,i)):u._visibility&2?Rl(a,o,s,c,i):zl(a,o),i&&l&2048&&Pl(o.alternate,o);break;case 24:Rl(a,o,s,c,i),i&&l&2048&&Fl(o.alternate,o);break;default:Rl(a,o,s,c,i)}t=t.sibling}}function zl(e,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var n=e,r=t,i=r.flags;switch(r.tag){case 22:zl(n,r),i&2048&&Pl(r.alternate,r);break;case 24:zl(n,r),i&2048&&Fl(r.alternate,r);break;default:zl(n,r)}t=t.sibling}}var Bl=8192;function Vl(e,t,n){if(e.subtreeFlags&Bl)for(e=e.child;e!==null;)Hl(e,t,n),e=e.sibling}function Hl(e,t,n){switch(e.tag){case 26:Vl(e,t,n),e.flags&Bl&&e.memoizedState!==null&&sp(n,Dl,e.memoizedState,e.memoizedProps);break;case 5:Vl(e,t,n);break;case 3:case 4:var r=Dl;Dl=Mf(e.stateNode.containerInfo),Vl(e,t,n),Dl=r;break;case 22:e.memoizedState===null&&(r=e.alternate,r!==null&&r.memoizedState!==null?(r=Bl,Bl=16777216,Vl(e,t,n),Bl=r):Vl(e,t,n));break;default:Vl(e,t,n)}}function Ul(e){var t=e.alternate;if(t!==null&&(e=t.child,e!==null)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(e!==null)}}function Wl(e){var t=e.deletions;if(e.flags&16){if(t!==null)for(var n=0;n<t.length;n++){var r=t[n];ml=r,ql(r,e)}Ul(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)Gl(e),e=e.sibling}function Gl(e){switch(e.tag){case 0:case 11:case 15:Wl(e),e.flags&2048&&$c(9,e,e.return);break;case 3:Wl(e);break;case 12:Wl(e);break;case 22:var t=e.stateNode;e.memoizedState!==null&&t._visibility&2&&(e.return===null||e.return.tag!==13)?(t._visibility&=-3,Kl(e)):Wl(e);break;default:Wl(e)}}function Kl(e){var t=e.deletions;if(e.flags&16){if(t!==null)for(var n=0;n<t.length;n++){var r=t[n];ml=r,ql(r,e)}Ul(e)}for(e=e.child;e!==null;){switch(t=e,t.tag){case 0:case 11:case 15:$c(8,t,t.return),Kl(t);break;case 22:n=t.stateNode,n._visibility&2&&(n._visibility&=-3,Kl(t));break;default:Kl(t)}e=e.sibling}}function ql(e,t){for(;ml!==null;){var n=ml;switch(n.tag){case 0:case 11:case 15:$c(8,n,t);break;case 23:case 22:if(n.memoizedState!==null&&n.memoizedState.cachePool!==null){var r=n.memoizedState.cachePool.pool;r!=null&&r.refCount++}break;case 24:ba(n.memoizedState.cache)}if(r=n.child,r!==null)r.return=n,ml=r;else a:for(n=e;ml!==null;){r=ml;var i=r.sibling,a=r.return;if(_l(r),r===n){ml=null;break a}if(i!==null){i.return=a,ml=i;break a}ml=a}}}var Jl={getCacheForType:function(e){var t=fa(va),n=t.data.get(e);return n===void 0&&(n=e(),t.data.set(e,n)),n},cacheSignal:function(){return fa(va).controller.signal}},Yl=typeof WeakMap==`function`?WeakMap:Map,J=0,Xl=null,Y=null,X=0,Z=0,Zl=null,Ql=!1,$l=!1,eu=!1,tu=0,nu=0,ru=0,iu=0,au=0,ou=0,su=0,cu=null,lu=null,uu=!1,du=0,fu=0,pu=1/0,mu=null,hu=null,gu=0,_u=null,vu=null,yu=0,bu=0,xu=null,Su=null,Cu=0,wu=null;function Tu(){return J&2&&X!==0?X&-X:N.T===null?ot():Cd()}function Eu(){if(ou===0)if(!(X&536870912)||z){var e=Ge;Ge<<=1,!(Ge&3932160)&&(Ge=262144),ou=e}else ou=536870912;return e=mo.current,e!==null&&(e.flags|=32),ou}function Du(e,t,n){(e===Xl&&(Z===2||Z===9)||e.cancelPendingCommit!==null)&&(Pu(e,0),ju(e,X,ou,!1)),$e(e,n),(!(J&2)||e!==Xl)&&(e===Xl&&(!(J&2)&&(iu|=n),nu===4&&ju(e,X,ou,!1)),hd(e))}function Ou(e,t,n){if(J&6)throw Error(i(327));var r=!n&&(t&127)==0&&(t&e.expiredLanes)===0||Ye(e,t),a=r?Hu(e,t):Bu(e,t,!0),o=r;do{if(a===0){$l&&!r&&ju(e,t,0,!1);break}else{if(n=e.current.alternate,o&&!Au(n)){a=Bu(e,t,!1),o=!1;continue}if(a===2){if(o=t,e.errorRecoveryDisabledLanes&o)var s=0;else s=e.pendingLanes&-536870913,s=s===0?s&536870912?536870912:0:s;if(s!==0){t=s;a:{var c=e;a=cu;var l=c.current.memoizedState.isDehydrated;if(l&&(Pu(c,s).flags|=256),s=Bu(c,s,!1),s!==2){if(eu&&!l){c.errorRecoveryDisabledLanes|=o,iu|=o,a=4;break a}o=lu,lu=a,o!==null&&(lu===null?lu=o:lu.push.apply(lu,o))}a=s}if(o=!1,a!==2)continue}}if(a===1){Pu(e,0),ju(e,t,0,!0);break}a:{switch(r=e,o=a,o){case 0:case 1:throw Error(i(345));case 4:if((t&4194048)!==t)break;case 6:ju(r,t,ou,!Ql);break a;case 2:lu=null;break;case 3:case 5:break;default:throw Error(i(329))}if((t&62914560)===t&&(a=du+300-Oe(),10<a)){if(ju(r,t,ou,!Ql),Je(r,0,!0)!==0)break a;yu=t,r.timeoutHandle=lf(ku.bind(null,r,n,lu,mu,uu,t,ou,iu,su,Ql,o,`Throttled`,-0,0),a);break a}ku(r,n,lu,mu,uu,t,ou,iu,su,Ql,o,null,-0,0)}}break}while(1);hd(e)}function ku(e,t,n,r,i,a,o,s,c,l,u,d,f,p){if(e.timeoutHandle=-1,d=t.subtreeFlags,d&8192||(d&16785408)==16785408){d={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:tn},Hl(t,a,d);var m=(a&62914560)===a?du-Oe():(a&4194048)===a?fu-Oe():0;if(m=lp(d,m),m!==null){yu=a,e.cancelPendingCommit=m(Yu.bind(null,e,t,a,n,r,i,o,s,c,u,d,null,f,p)),ju(e,a,o,!l);return}}Yu(e,t,a,n,r,i,o,s,c)}function Au(e){for(var t=e;;){var n=t.tag;if((n===0||n===11||n===15)&&t.flags&16384&&(n=t.updateQueue,n!==null&&(n=n.stores,n!==null)))for(var r=0;r<n.length;r++){var i=n[r],a=i.getSnapshot;i=i.value;try{if(!Pr(a(),i))return!1}catch{return!1}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function ju(e,t,n,r){t&=~au,t&=~iu,e.suspendedLanes|=t,e.pingedLanes&=~t,r&&(e.warmLanes|=t),r=e.expirationTimes;for(var i=t;0<i;){var a=31-Be(i),o=1<<a;r[a]=-1,i&=~o}n!==0&&tt(e,n,t)}function Mu(){return J&6?!0:(gd(0,!1),!1)}function Nu(){if(Y!==null){if(Z===0)var e=Y.return;else e=Y,ia=ra=null,Bo(e),Ha=null,Ua=0,e=Y;for(;e!==null;)Zc(e.alternate,e),e=e.return;Y=null}}function Pu(e,t){var n=e.timeoutHandle;n!==-1&&(e.timeoutHandle=-1,uf(n)),n=e.cancelPendingCommit,n!==null&&(e.cancelPendingCommit=null,n()),yu=0,Nu(),Xl=e,Y=n=Si(e.current,null),X=t,Z=0,Zl=null,Ql=!1,$l=Ye(e,t),eu=!1,su=ou=au=iu=ru=nu=0,lu=cu=null,uu=!1,t&8&&(t|=t&32);var r=e.entangledLanes;if(r!==0)for(e=e.entanglements,r&=t;0<r;){var i=31-Be(r),a=1<<i;t|=e[i],r&=~a}return tu=t,fi(),n}function Fu(e,t){V=null,N.H=Xs,t===Ma||t===Pa?(t=Ba(),Z=3):t===Na?(t=Ba(),Z=4):Z=t===pc?8:typeof t==`object`&&t&&typeof t.then==`function`?6:1,Zl=t,Y===null&&(nu=1,cc(e,Ai(t,e.current)))}function Iu(){var e=mo.current;return e===null?!0:(X&4194048)===X?ho===null:(X&62914560)===X||X&536870912?e===ho:!1}function Lu(){var e=N.H;return N.H=Xs,e===null?Xs:e}function Ru(){var e=N.A;return N.A=Jl,e}function zu(){nu=4,Ql||(X&4194048)!==X&&mo.current!==null||($l=!0),!(ru&134217727)&&!(iu&134217727)||Xl===null||ju(Xl,X,ou,!1)}function Bu(e,t,n){var r=J;J|=2;var i=Lu(),a=Ru();(Xl!==e||X!==t)&&(mu=null,Pu(e,t)),t=!1;var o=nu;a:do try{if(Z!==0&&Y!==null){var s=Y,c=Zl;switch(Z){case 8:Nu(),o=6;break a;case 3:case 2:case 9:case 6:mo.current===null&&(t=!0);var l=Z;if(Z=0,Zl=null,Ku(e,s,c,l),n&&$l){o=0;break a}break;default:l=Z,Z=0,Zl=null,Ku(e,s,c,l)}}Vu(),o=nu;break}catch(t){Fu(e,t)}while(1);return t&&e.shellSuspendCounter++,ia=ra=null,J=r,N.H=i,N.A=a,Y===null&&(Xl=null,X=0,fi()),o}function Vu(){for(;Y!==null;)Wu(Y)}function Hu(e,t){var n=J;J|=2;var r=Lu(),a=Ru();Xl!==e||X!==t?(mu=null,pu=Oe()+500,Pu(e,t)):$l=Ye(e,t);a:do try{if(Z!==0&&Y!==null){t=Y;var o=Zl;b:switch(Z){case 1:Z=0,Zl=null,Ku(e,t,o,1);break;case 2:case 9:if(Ia(o)){Z=0,Zl=null,Gu(t);break}t=function(){Z!==2&&Z!==9||Xl!==e||(Z=7),hd(e)},o.then(t,t);break a;case 3:Z=7;break a;case 4:Z=5;break a;case 7:Ia(o)?(Z=0,Zl=null,Gu(t)):(Z=0,Zl=null,Ku(e,t,o,7));break;case 5:var s=null;switch(Y.tag){case 26:s=Y.memoizedState;case 5:case 27:var c=Y;if(s?op(s):c.stateNode.complete){Z=0,Zl=null;var l=c.sibling;if(l!==null)Y=l;else{var u=c.return;u===null?Y=null:(Y=u,qu(u))}break b}}Z=0,Zl=null,Ku(e,t,o,5);break;case 6:Z=0,Zl=null,Ku(e,t,o,6);break;case 8:Nu(),nu=6;break a;default:throw Error(i(462))}}Uu();break}catch(t){Fu(e,t)}while(1);return ia=ra=null,N.H=r,N.A=a,J=n,Y===null?(Xl=null,X=0,fi(),nu):0}function Uu(){for(;Y!==null&&!Ee();)Wu(Y)}function Wu(e){var t=Uc(e.alternate,e,tu);e.memoizedProps=e.pendingProps,t===null?qu(e):Y=t}function Gu(e){var t=e,n=t.alternate;switch(t.tag){case 15:case 0:t=Dc(n,t,t.pendingProps,t.type,void 0,X);break;case 11:t=Dc(n,t,t.pendingProps,t.type.render,t.ref,X);break;case 5:Bo(t);default:Zc(n,t),t=Y=Ci(t,tu),t=Uc(n,t,tu)}e.memoizedProps=e.pendingProps,t===null?qu(e):Y=t}function Ku(e,t,n,r){ia=ra=null,Bo(t),Ha=null,Ua=0;var i=t.return;try{if(fc(e,i,t,n,X)){nu=1,cc(e,Ai(n,e.current)),Y=null;return}}catch(t){if(i!==null)throw Y=i,t;nu=1,cc(e,Ai(n,e.current)),Y=null;return}t.flags&32768?(z||r===1?e=!0:$l||X&536870912?e=!1:(Ql=e=!0,(r===2||r===9||r===3||r===6)&&(r=mo.current,r!==null&&r.tag===13&&(r.flags|=16384))),Ju(t,e)):qu(t)}function qu(e){var t=e;do{if(t.flags&32768){Ju(t,Ql);return}e=t.return;var n=Yc(t.alternate,t,tu);if(n!==null){Y=n;return}if(t=t.sibling,t!==null){Y=t;return}Y=t=e}while(t!==null);nu===0&&(nu=5)}function Ju(e,t){do{var n=Xc(e.alternate,e);if(n!==null){n.flags&=32767,Y=n;return}if(n=e.return,n!==null&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!t&&(e=e.sibling,e!==null)){Y=e;return}Y=e=n}while(e!==null);nu=6,Y=null}function Yu(e,t,n,r,a,o,s,c,l){e.cancelPendingCommit=null;do ed();while(gu!==0);if(J&6)throw Error(i(327));if(t!==null){if(t===e.current)throw Error(i(177));if(o=t.lanes|t.childLanes,o|=di,et(e,n,o,s,c,l),e===Xl&&(Y=Xl=null,X=0),vu=t,_u=e,yu=n,bu=o,xu=a,Su=r,t.subtreeFlags&10256||t.flags&10256?(e.callbackNode=null,e.callbackPriority=0,cd(Me,function(){return td(),null})):(e.callbackNode=null,e.callbackPriority=0),r=(t.flags&13878)!=0,t.subtreeFlags&13878||r){r=N.T,N.T=null,a=P.p,P.p=2,s=J,J|=4;try{hl(e,t,n)}finally{J=s,P.p=a,N.T=r}}gu=1,Xu(),Zu(),Qu()}}function Xu(){if(gu===1){gu=0;var e=_u,t=vu,n=(t.flags&13878)!=0;if(t.subtreeFlags&13878||n){n=N.T,N.T=null;var r=P.p;P.p=2;var i=J;J|=4;try{Ol(t,e);var a=ef,o=zr(e.containerInfo),s=a.focusedElem,c=a.selectionRange;if(o!==s&&s&&s.ownerDocument&&Rr(s.ownerDocument.documentElement,s)){if(c!==null&&Br(s)){var l=c.start,u=c.end;if(u===void 0&&(u=l),`selectionStart`in s)s.selectionStart=l,s.selectionEnd=Math.min(u,s.value.length);else{var d=s.ownerDocument||document,f=d&&d.defaultView||window;if(f.getSelection){var p=f.getSelection(),m=s.textContent.length,h=Math.min(c.start,m),g=c.end===void 0?h:Math.min(c.end,m);!p.extend&&h>g&&(o=g,g=h,h=o);var _=Lr(s,h),v=Lr(s,g);if(_&&v&&(p.rangeCount!==1||p.anchorNode!==_.node||p.anchorOffset!==_.offset||p.focusNode!==v.node||p.focusOffset!==v.offset)){var y=d.createRange();y.setStart(_.node,_.offset),p.removeAllRanges(),h>g?(p.addRange(y),p.extend(v.node,v.offset)):(y.setEnd(v.node,v.offset),p.addRange(y))}}}}for(d=[],p=s;p=p.parentNode;)p.nodeType===1&&d.push({element:p,left:p.scrollLeft,top:p.scrollTop});for(typeof s.focus==`function`&&s.focus(),s=0;s<d.length;s++){var b=d[s];b.element.scrollLeft=b.left,b.element.scrollTop=b.top}}Cp=!!$d,ef=$d=null}finally{J=i,P.p=r,N.T=n}}e.current=t,gu=2}}function Zu(){if(gu===2){gu=0;var e=_u,t=vu,n=(t.flags&8772)!=0;if(t.subtreeFlags&8772||n){n=N.T,N.T=null;var r=P.p;P.p=2;var i=J;J|=4;try{gl(e,t.alternate,t)}finally{J=i,P.p=r,N.T=n}}gu=3}}function Qu(){if(gu===4||gu===3){gu=0,De();var e=_u,t=vu,n=yu,r=Su;t.subtreeFlags&10256||t.flags&10256?gu=5:(gu=0,vu=_u=null,$u(e,e.pendingLanes));var i=e.pendingLanes;if(i===0&&(hu=null),at(n),t=t.stateNode,Re&&typeof Re.onCommitFiberRoot==`function`)try{Re.onCommitFiberRoot(Le,t,void 0,(t.current.flags&128)==128)}catch{}if(r!==null){t=N.T,i=P.p,P.p=2,N.T=null;try{for(var a=e.onRecoverableError,o=0;o<r.length;o++){var s=r[o];a(s.value,{componentStack:s.stack})}}finally{N.T=t,P.p=i}}yu&3&&ed(),hd(e),i=e.pendingLanes,n&261930&&i&42?e===wu?Cu++:(Cu=0,wu=e):Cu=0,gd(0,!1)}}function $u(e,t){(e.pooledCacheLanes&=t)===0&&(t=e.pooledCache,t!=null&&(e.pooledCache=null,ba(t)))}function ed(){return Xu(),Zu(),Qu(),td()}function td(){if(gu!==5)return!1;var e=_u,t=bu;bu=0;var n=at(yu),r=N.T,a=P.p;try{P.p=32>n?32:n,N.T=null,n=xu,xu=null;var o=_u,s=yu;if(gu=0,vu=_u=null,yu=0,J&6)throw Error(i(331));var c=J;if(J|=4,Gl(o.current),Ll(o,o.current,s,n),J=c,gd(0,!1),Re&&typeof Re.onPostCommitFiberRoot==`function`)try{Re.onPostCommitFiberRoot(Le,o)}catch{}return!0}finally{P.p=a,N.T=r,$u(e,t)}}function nd(e,t,n){t=Ai(n,t),t=lc(e.stateNode,t,2),e=eo(e,t,2),e!==null&&($e(e,2),hd(e))}function Q(e,t,n){if(e.tag===3)nd(e,e,n);else for(;t!==null;){if(t.tag===3){nd(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError==`function`||typeof r.componentDidCatch==`function`&&(hu===null||!hu.has(r))){e=Ai(n,e),n=uc(2),r=eo(t,n,2),r!==null&&(dc(n,r,t,e),$e(r,2),hd(r));break}}t=t.return}}function rd(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new Yl;var i=new Set;r.set(t,i)}else i=r.get(t),i===void 0&&(i=new Set,r.set(t,i));i.has(n)||(eu=!0,i.add(n),e=id.bind(null,e,t,n),t.then(e,e))}function id(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),e.pingedLanes|=e.suspendedLanes&n,e.warmLanes&=~n,Xl===e&&(X&n)===n&&(nu===4||nu===3&&(X&62914560)===X&&300>Oe()-du?!(J&2)&&Pu(e,0):au|=n,su===X&&(su=0)),hd(e)}function ad(e,t){t===0&&(t=Ze()),e=hi(e,t),e!==null&&($e(e,t),hd(e))}function od(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),ad(e,n)}function sd(e,t){var n=0;switch(e.tag){case 31:case 13:var r=e.stateNode,a=e.memoizedState;a!==null&&(n=a.retryLane);break;case 19:r=e.stateNode;break;case 22:r=e.stateNode._retryCache;break;default:throw Error(i(314))}r!==null&&r.delete(t),ad(e,n)}function cd(e,t){return we(e,t)}var ld=null,ud=null,dd=!1,fd=!1,pd=!1,md=0;function hd(e){e!==ud&&e.next===null&&(ud===null?ld=ud=e:ud=ud.next=e),fd=!0,dd||(dd=!0,Sd())}function gd(e,t){if(!pd&&fd){pd=!0;do for(var n=!1,r=ld;r!==null;){if(!t)if(e!==0){var i=r.pendingLanes;if(i===0)var a=0;else{var o=r.suspendedLanes,s=r.pingedLanes;a=(1<<31-Be(42|e)+1)-1,a&=i&~(o&~s),a=a&201326741?a&201326741|1:a?a|2:0}a!==0&&(n=!0,xd(r,a))}else a=X,a=Je(r,r===Xl?a:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),!(a&3)||Ye(r,a)||(n=!0,xd(r,a));r=r.next}while(n);pd=!1}}function _d(){vd()}function vd(){fd=dd=!1;var e=0;md!==0&&cf()&&(e=md);for(var t=Oe(),n=null,r=ld;r!==null;){var i=r.next,a=yd(r,t);a===0?(r.next=null,n===null?ld=i:n.next=i,i===null&&(ud=n)):(n=r,(e!==0||a&3)&&(fd=!0)),r=i}gu!==0&&gu!==5||gd(e,!1),md!==0&&(md=0)}function yd(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,a=e.pendingLanes&-62914561;0<a;){var o=31-Be(a),s=1<<o,c=i[o];c===-1?((s&n)===0||(s&r)!==0)&&(i[o]=Xe(s,t)):c<=t&&(e.expiredLanes|=s),a&=~s}if(t=Xl,n=X,n=Je(e,e===t?n:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),r=e.callbackNode,n===0||e===t&&(Z===2||Z===9)||e.cancelPendingCommit!==null)return r!==null&&r!==null&&Te(r),e.callbackNode=null,e.callbackPriority=0;if(!(n&3)||Ye(e,n)){if(t=n&-n,t===e.callbackPriority)return t;switch(r!==null&&Te(r),at(n)){case 2:case 8:n=je;break;case 32:n=Me;break;case 268435456:n=Pe;break;default:n=Me}return r=bd.bind(null,e),n=we(n,r),e.callbackPriority=t,e.callbackNode=n,t}return r!==null&&r!==null&&Te(r),e.callbackPriority=2,e.callbackNode=null,2}function bd(e,t){if(gu!==0&&gu!==5)return e.callbackNode=null,e.callbackPriority=0,null;var n=e.callbackNode;if(ed()&&e.callbackNode!==n)return null;var r=X;return r=Je(e,e===Xl?r:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),r===0?null:(Ou(e,r,t),yd(e,Oe()),e.callbackNode!=null&&e.callbackNode===n?bd.bind(null,e):null)}function xd(e,t){if(ed())return null;Ou(e,t,!0)}function Sd(){ff(function(){J&6?we(Ae,_d):vd()})}function Cd(){if(md===0){var e=Ca;e===0&&(e=We,We<<=1,!(We&261888)&&(We=256)),md=e}return md}function wd(e){return e==null||typeof e==`symbol`||typeof e==`boolean`?null:typeof e==`function`?e:en(``+e)}function Td(e,t){var n=t.ownerDocument.createElement(`input`);return n.name=t.name,n.value=t.value,e.id&&n.setAttribute(`form`,e.id),t.parentNode.insertBefore(n,t),e=new FormData(e),n.parentNode.removeChild(n),e}function Ed(e,t,n,r,i){if(t===`submit`&&n&&n.stateNode===i){var a=wd((i[ut]||null).action),o=r.submitter;o&&(t=(t=o[ut]||null)?wd(t.formAction):o.getAttribute(`formAction`),t!==null&&(a=t,o=null));var s=new Sn(`action`,`action`,null,r,i);e.push({event:s,listeners:[{instance:null,listener:function(){if(r.defaultPrevented){if(md!==0){var e=o?Td(i,o):new FormData(i);Is(n,{pending:!0,data:e,method:i.method,action:a},null,e)}}else typeof a==`function`&&(s.preventDefault(),e=o?Td(i,o):new FormData(i),Is(n,{pending:!0,data:e,method:i.method,action:a},a,e))},currentTarget:i}]})}}for(var Dd=0;Dd<oi.length;Dd++){var Od=oi[Dd],kd=Od.toLowerCase(),Ad=Od[0].toUpperCase()+Od.slice(1);si(kd,`on`+Ad)}si(Qr,`onAnimationEnd`),si($r,`onAnimationIteration`),si(ei,`onAnimationStart`),si(`dblclick`,`onDoubleClick`),si(`focusin`,`onFocus`),si(`focusout`,`onBlur`),si(ti,`onTransitionRun`),si(ni,`onTransitionStart`),si(ri,`onTransitionCancel`),si(ii,`onTransitionEnd`),Tt(`onMouseEnter`,[`mouseout`,`mouseover`]),Tt(`onMouseLeave`,[`mouseout`,`mouseover`]),Tt(`onPointerEnter`,[`pointerout`,`pointerover`]),Tt(`onPointerLeave`,[`pointerout`,`pointerover`]),wt(`onChange`,`change click focusin focusout input keydown keyup selectionchange`.split(` `)),wt(`onSelect`,`focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange`.split(` `)),wt(`onBeforeInput`,[`compositionend`,`keypress`,`textInput`,`paste`]),wt(`onCompositionEnd`,`compositionend focusout keydown keypress keyup mousedown`.split(` `)),wt(`onCompositionStart`,`compositionstart focusout keydown keypress keyup mousedown`.split(` `)),wt(`onCompositionUpdate`,`compositionupdate focusout keydown keypress keyup mousedown`.split(` `));var jd=`abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting`.split(` `),Md=new Set(`beforetoggle cancel close invalid load scroll scrollend toggle`.split(` `).concat(jd));function Nd(e,t){t=(t&4)!=0;for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;a:{var a=void 0;if(t)for(var o=r.length-1;0<=o;o--){var s=r[o],c=s.instance,l=s.currentTarget;if(s=s.listener,c!==a&&i.isPropagationStopped())break a;a=s,i.currentTarget=l;try{a(i)}catch(e){ci(e)}i.currentTarget=null,a=c}else for(o=0;o<r.length;o++){if(s=r[o],c=s.instance,l=s.currentTarget,s=s.listener,c!==a&&i.isPropagationStopped())break a;a=s,i.currentTarget=l;try{a(i)}catch(e){ci(e)}i.currentTarget=null,a=c}}}}function $(e,t){var n=t[ft];n===void 0&&(n=t[ft]=new Set);var r=e+`__bubble`;n.has(r)||(Ld(t,e,2,!1),n.add(r))}function Pd(e,t,n){var r=0;t&&(r|=4),Ld(n,e,r,t)}var Fd=`_reactListening`+Math.random().toString(36).slice(2);function Id(e){if(!e[Fd]){e[Fd]=!0,St.forEach(function(t){t!==`selectionchange`&&(Md.has(t)||Pd(t,!1,e),Pd(t,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Fd]||(t[Fd]=!0,Pd(`selectionchange`,!1,t))}}function Ld(e,t,n,r){switch(Ap(t)){case 2:var i=wp;break;case 8:i=Tp;break;default:i=Ep}n=i.bind(null,t,n,e),i=void 0,!dn||t!==`touchstart`&&t!==`touchmove`&&t!==`wheel`||(i=!0),r?i===void 0?e.addEventListener(t,n,!0):e.addEventListener(t,n,{capture:!0,passive:i}):i===void 0?e.addEventListener(t,n,!1):e.addEventListener(t,n,{passive:i})}function Rd(e,t,n,r,i){var a=r;if(!(t&1)&&!(t&2)&&r!==null)a:for(;;){if(r===null)return;var s=r.tag;if(s===3||s===4){var c=r.stateNode.containerInfo;if(c===i)break;if(s===4)for(s=r.return;s!==null;){var l=s.tag;if((l===3||l===4)&&s.stateNode.containerInfo===i)return;s=s.return}for(;c!==null;){if(s=vt(c),s===null)return;if(l=s.tag,l===5||l===6||l===26||l===27){r=a=s;continue a}c=c.parentNode}}r=r.return}L(function(){var r=a,i=rn(n),s=[];a:{var c=ai.get(e);if(c!==void 0){var l=Sn,u=e;switch(e){case`keypress`:if(_n(n)===0)break a;case`keydown`:case`keyup`:l=Kn;break;case`focusin`:u=`focus`,l=Nn;break;case`focusout`:u=`blur`,l=Nn;break;case`beforeblur`:case`afterblur`:l=Nn;break;case`click`:if(n.button===2)break a;case`auxclick`:case`dblclick`:case`mousedown`:case`mousemove`:case`mouseup`:case`mouseout`:case`mouseover`:case`contextmenu`:l=kn;break;case`drag`:case`dragend`:case`dragenter`:case`dragexit`:case`dragleave`:case`dragover`:case`dragstart`:case`drop`:l=jn;break;case`touchcancel`:case`touchend`:case`touchmove`:case`touchstart`:l=Xn;break;case Qr:case $r:case ei:l=Fn;break;case ii:l=Qn;break;case`scroll`:case`scrollend`:l=wn;break;case`wheel`:l=er;break;case`copy`:case`cut`:case`paste`:l=Ln;break;case`gotpointercapture`:case`lostpointercapture`:case`pointercancel`:case`pointerdown`:case`pointermove`:case`pointerout`:case`pointerover`:case`pointerup`:l=Jn;break;case`toggle`:case`beforetoggle`:l=nr}var d=(t&4)!=0,f=!d&&(e===`scroll`||e===`scrollend`),p=d?c===null?null:c+`Capture`:c;d=[];for(var m=r,h;m!==null;){var g=m;if(h=g.stateNode,g=g.tag,g!==5&&g!==26&&g!==27||h===null||p===null||(g=ln(m,p),g!=null&&d.push(zd(m,g,h))),f)break;m=m.return}0<d.length&&(c=new l(c,u,null,n,i),s.push({event:c,listeners:d}))}}if(!(t&7)){a:{if(c=e===`mouseover`||e===`pointerover`,l=e===`mouseout`||e===`pointerout`,c&&n!==nn&&(u=n.relatedTarget||n.fromElement)&&(vt(u)||u[dt]))break a;if((l||c)&&(c=i.window===i?i:(c=i.ownerDocument)?c.defaultView||c.parentWindow:window,l?(u=n.relatedTarget||n.toElement,l=r,u=u?vt(u):null,u!==null&&(f=o(u),d=u.tag,u!==f||d!==5&&d!==27&&d!==6)&&(u=null)):(l=null,u=r),l!==u)){if(d=kn,g=`onMouseLeave`,p=`onMouseEnter`,m=`mouse`,(e===`pointerout`||e===`pointerover`)&&(d=Jn,g=`onPointerLeave`,p=`onPointerEnter`,m=`pointer`),f=l==null?c:bt(l),h=u==null?c:bt(u),c=new d(g,m+`leave`,l,n,i),c.target=f,c.relatedTarget=h,g=null,vt(i)===r&&(d=new d(p,m+`enter`,u,n,i),d.target=h,d.relatedTarget=f,g=d),f=g,l&&u)b:{for(d=Vd,p=l,m=u,h=0,g=p;g;g=d(g))h++;g=0;for(var _=m;_;_=d(_))g++;for(;0<h-g;)p=d(p),h--;for(;0<g-h;)m=d(m),g--;for(;h--;){if(p===m||m!==null&&p===m.alternate){d=p;break b}p=d(p),m=d(m)}d=null}else d=null;l!==null&&Hd(s,c,l,d,!1),u!==null&&f!==null&&Hd(s,f,u,d,!0)}}a:{if(c=r?bt(r):window,l=c.nodeName&&c.nodeName.toLowerCase(),l===`select`||l===`input`&&c.type===`file`)var v=Sr;else if(gr(c))if(Cr)v=Mr;else{v=Ar;var y=kr}else l=c.nodeName,!l||l.toLowerCase()!==`input`||c.type!==`checkbox`&&c.type!==`radio`?r&&Zt(r.elementType)&&(v=Sr):v=jr;if(v&&=v(e,r)){_r(s,v,n,i);break a}y&&y(e,c,r),e===`focusout`&&r&&c.type===`number`&&r.memoizedProps.value!=null&&Ut(c,`number`,c.value)}switch(y=r?bt(r):window,e){case`focusin`:(gr(y)||y.contentEditable===`true`)&&(Hr=y,Ur=r,Wr=null);break;case`focusout`:Wr=Ur=Hr=null;break;case`mousedown`:Gr=!0;break;case`contextmenu`:case`mouseup`:case`dragend`:Gr=!1,Kr(s,n,i);break;case`selectionchange`:if(Vr)break;case`keydown`:case`keyup`:Kr(s,n,i)}var b;if(ir)b:{switch(e){case`compositionstart`:var x=`onCompositionStart`;break b;case`compositionend`:x=`onCompositionEnd`;break b;case`compositionupdate`:x=`onCompositionUpdate`;break b}x=void 0}else fr?ur(e,n)&&(x=`onCompositionEnd`):e===`keydown`&&n.keyCode===229&&(x=`onCompositionStart`);x&&(sr&&n.locale!==`ko`&&(fr||x!==`onCompositionStart`?x===`onCompositionEnd`&&fr&&(b=gn()):(pn=i,mn=`value`in pn?pn.value:pn.textContent,fr=!0)),y=Bd(r,x),0<y.length&&(x=new zn(x,e,null,n,i),s.push({event:x,listeners:y}),b?x.data=b:(b=dr(n),b!==null&&(x.data=b)))),(b=or?pr(e,n):mr(e,n))&&(x=Bd(r,`onBeforeInput`),0<x.length&&(y=new zn(`onBeforeInput`,`beforeinput`,null,n,i),s.push({event:y,listeners:x}),y.data=b)),Ed(s,e,r,n,i)}Nd(s,t)})}function zd(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Bd(e,t){for(var n=t+`Capture`,r=[];e!==null;){var i=e,a=i.stateNode;if(i=i.tag,i!==5&&i!==26&&i!==27||a===null||(i=ln(e,n),i!=null&&r.unshift(zd(e,i,a)),i=ln(e,t),i!=null&&r.push(zd(e,i,a))),e.tag===3)return r;e=e.return}return[]}function Vd(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function Hd(e,t,n,r,i){for(var a=t._reactName,o=[];n!==null&&n!==r;){var s=n,c=s.alternate,l=s.stateNode;if(s=s.tag,c!==null&&c===r)break;s!==5&&s!==26&&s!==27||l===null||(c=l,i?(l=ln(n,a),l!=null&&o.unshift(zd(n,l,c))):i||(l=ln(n,a),l!=null&&o.push(zd(n,l,c)))),n=n.return}o.length!==0&&e.push({event:t,listeners:o})}var Ud=/\r\n?/g,Wd=/\u0000|\uFFFD/g;function Gd(e){return(typeof e==`string`?e:``+e).replace(Ud,`
`).replace(Wd,``)}function Kd(e,t){return t=Gd(t),Gd(e)===t}function qd(e,t,n,r,a,o){switch(n){case`children`:typeof r==`string`?t===`body`||t===`textarea`&&r===``||qt(e,r):(typeof r==`number`||typeof r==`bigint`)&&t!==`body`&&qt(e,``+r);break;case`className`:jt(e,`class`,r);break;case`tabIndex`:jt(e,`tabindex`,r);break;case`dir`:case`role`:case`viewBox`:case`width`:case`height`:jt(e,n,r);break;case`style`:Xt(e,r,o);break;case`data`:if(t!==`object`){jt(e,`data`,r);break}case`src`:case`href`:if(r===``&&(t!==`a`||n!==`href`)){e.removeAttribute(n);break}if(r==null||typeof r==`function`||typeof r==`symbol`||typeof r==`boolean`){e.removeAttribute(n);break}r=en(``+r),e.setAttribute(n,r);break;case`action`:case`formAction`:if(typeof r==`function`){e.setAttribute(n,`javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')`);break}else typeof o==`function`&&(n===`formAction`?(t!==`input`&&qd(e,t,`name`,a.name,a,null),qd(e,t,`formEncType`,a.formEncType,a,null),qd(e,t,`formMethod`,a.formMethod,a,null),qd(e,t,`formTarget`,a.formTarget,a,null)):(qd(e,t,`encType`,a.encType,a,null),qd(e,t,`method`,a.method,a,null),qd(e,t,`target`,a.target,a,null)));if(r==null||typeof r==`symbol`||typeof r==`boolean`){e.removeAttribute(n);break}r=en(``+r),e.setAttribute(n,r);break;case`onClick`:r!=null&&(e.onclick=tn);break;case`onScroll`:r!=null&&$(`scroll`,e);break;case`onScrollEnd`:r!=null&&$(`scrollend`,e);break;case`dangerouslySetInnerHTML`:if(r!=null){if(typeof r!=`object`||!(`__html`in r))throw Error(i(61));if(n=r.__html,n!=null){if(a.children!=null)throw Error(i(60));e.innerHTML=n}}break;case`multiple`:e.multiple=r&&typeof r!=`function`&&typeof r!=`symbol`;break;case`muted`:e.muted=r&&typeof r!=`function`&&typeof r!=`symbol`;break;case`suppressContentEditableWarning`:case`suppressHydrationWarning`:case`defaultValue`:case`defaultChecked`:case`innerHTML`:case`ref`:break;case`autoFocus`:break;case`xlinkHref`:if(r==null||typeof r==`function`||typeof r==`boolean`||typeof r==`symbol`){e.removeAttribute(`xlink:href`);break}n=en(``+r),e.setAttributeNS(`http://www.w3.org/1999/xlink`,`xlink:href`,n);break;case`contentEditable`:case`spellCheck`:case`draggable`:case`value`:case`autoReverse`:case`externalResourcesRequired`:case`focusable`:case`preserveAlpha`:r!=null&&typeof r!=`function`&&typeof r!=`symbol`?e.setAttribute(n,``+r):e.removeAttribute(n);break;case`inert`:case`allowFullScreen`:case`async`:case`autoPlay`:case`controls`:case`default`:case`defer`:case`disabled`:case`disablePictureInPicture`:case`disableRemotePlayback`:case`formNoValidate`:case`hidden`:case`loop`:case`noModule`:case`noValidate`:case`open`:case`playsInline`:case`readOnly`:case`required`:case`reversed`:case`scoped`:case`seamless`:case`itemScope`:r&&typeof r!=`function`&&typeof r!=`symbol`?e.setAttribute(n,``):e.removeAttribute(n);break;case`capture`:case`download`:!0===r?e.setAttribute(n,``):!1!==r&&r!=null&&typeof r!=`function`&&typeof r!=`symbol`?e.setAttribute(n,r):e.removeAttribute(n);break;case`cols`:case`rows`:case`size`:case`span`:r!=null&&typeof r!=`function`&&typeof r!=`symbol`&&!isNaN(r)&&1<=r?e.setAttribute(n,r):e.removeAttribute(n);break;case`rowSpan`:case`start`:r==null||typeof r==`function`||typeof r==`symbol`||isNaN(r)?e.removeAttribute(n):e.setAttribute(n,r);break;case`popover`:$(`beforetoggle`,e),$(`toggle`,e),At(e,`popover`,r);break;case`xlinkActuate`:Mt(e,`http://www.w3.org/1999/xlink`,`xlink:actuate`,r);break;case`xlinkArcrole`:Mt(e,`http://www.w3.org/1999/xlink`,`xlink:arcrole`,r);break;case`xlinkRole`:Mt(e,`http://www.w3.org/1999/xlink`,`xlink:role`,r);break;case`xlinkShow`:Mt(e,`http://www.w3.org/1999/xlink`,`xlink:show`,r);break;case`xlinkTitle`:Mt(e,`http://www.w3.org/1999/xlink`,`xlink:title`,r);break;case`xlinkType`:Mt(e,`http://www.w3.org/1999/xlink`,`xlink:type`,r);break;case`xmlBase`:Mt(e,`http://www.w3.org/XML/1998/namespace`,`xml:base`,r);break;case`xmlLang`:Mt(e,`http://www.w3.org/XML/1998/namespace`,`xml:lang`,r);break;case`xmlSpace`:Mt(e,`http://www.w3.org/XML/1998/namespace`,`xml:space`,r);break;case`is`:At(e,`is`,r);break;case`innerText`:case`textContent`:break;default:(!(2<n.length)||n[0]!==`o`&&n[0]!==`O`||n[1]!==`n`&&n[1]!==`N`)&&(n=Qt.get(n)||n,At(e,n,r))}}function Jd(e,t,n,r,a,o){switch(n){case`style`:Xt(e,r,o);break;case`dangerouslySetInnerHTML`:if(r!=null){if(typeof r!=`object`||!(`__html`in r))throw Error(i(61));if(n=r.__html,n!=null){if(a.children!=null)throw Error(i(60));e.innerHTML=n}}break;case`children`:typeof r==`string`?qt(e,r):(typeof r==`number`||typeof r==`bigint`)&&qt(e,``+r);break;case`onScroll`:r!=null&&$(`scroll`,e);break;case`onScrollEnd`:r!=null&&$(`scrollend`,e);break;case`onClick`:r!=null&&(e.onclick=tn);break;case`suppressContentEditableWarning`:case`suppressHydrationWarning`:case`innerHTML`:case`ref`:break;case`innerText`:case`textContent`:break;default:if(!Ct.hasOwnProperty(n))a:{if(n[0]===`o`&&n[1]===`n`&&(a=n.endsWith(`Capture`),t=n.slice(2,a?n.length-7:void 0),o=e[ut]||null,o=o==null?null:o[n],typeof o==`function`&&e.removeEventListener(t,o,a),typeof r==`function`)){typeof o!=`function`&&o!==null&&(n in e?e[n]=null:e.hasAttribute(n)&&e.removeAttribute(n)),e.addEventListener(t,r,a);break a}n in e?e[n]=r:!0===r?e.setAttribute(n,``):At(e,n,r)}}}function Yd(e,t,n){switch(t){case`div`:case`span`:case`svg`:case`path`:case`a`:case`g`:case`p`:case`li`:break;case`img`:$(`error`,e),$(`load`,e);var r=!1,a=!1,o;for(o in n)if(n.hasOwnProperty(o)){var s=n[o];if(s!=null)switch(o){case`src`:r=!0;break;case`srcSet`:a=!0;break;case`children`:case`dangerouslySetInnerHTML`:throw Error(i(137,t));default:qd(e,t,o,s,n,null)}}a&&qd(e,t,`srcSet`,n.srcSet,n,null),r&&qd(e,t,`src`,n.src,n,null);return;case`input`:$(`invalid`,e);var c=o=s=a=null,l=null,u=null;for(r in n)if(n.hasOwnProperty(r)){var d=n[r];if(d!=null)switch(r){case`name`:a=d;break;case`type`:s=d;break;case`checked`:l=d;break;case`defaultChecked`:u=d;break;case`value`:o=d;break;case`defaultValue`:c=d;break;case`children`:case`dangerouslySetInnerHTML`:if(d!=null)throw Error(i(137,t));break;default:qd(e,t,r,d,n,null)}}Ht(e,o,c,l,u,s,a,!1);return;case`select`:for(a in $(`invalid`,e),r=s=o=null,n)if(n.hasOwnProperty(a)&&(c=n[a],c!=null))switch(a){case`value`:o=c;break;case`defaultValue`:s=c;break;case`multiple`:r=c;default:qd(e,t,a,c,n,null)}t=o,n=s,e.multiple=!!r,t==null?n!=null&&Wt(e,!!r,n,!0):Wt(e,!!r,t,!1);return;case`textarea`:for(s in $(`invalid`,e),o=a=r=null,n)if(n.hasOwnProperty(s)&&(c=n[s],c!=null))switch(s){case`value`:r=c;break;case`defaultValue`:a=c;break;case`children`:o=c;break;case`dangerouslySetInnerHTML`:if(c!=null)throw Error(i(91));break;default:qd(e,t,s,c,n,null)}Kt(e,r,a,o);return;case`option`:for(l in n)if(n.hasOwnProperty(l)&&(r=n[l],r!=null))switch(l){case`selected`:e.selected=r&&typeof r!=`function`&&typeof r!=`symbol`;break;default:qd(e,t,l,r,n,null)}return;case`dialog`:$(`beforetoggle`,e),$(`toggle`,e),$(`cancel`,e),$(`close`,e);break;case`iframe`:case`object`:$(`load`,e);break;case`video`:case`audio`:for(r=0;r<jd.length;r++)$(jd[r],e);break;case`image`:$(`error`,e),$(`load`,e);break;case`details`:$(`toggle`,e);break;case`embed`:case`source`:case`link`:$(`error`,e),$(`load`,e);case`area`:case`base`:case`br`:case`col`:case`hr`:case`keygen`:case`meta`:case`param`:case`track`:case`wbr`:case`menuitem`:for(u in n)if(n.hasOwnProperty(u)&&(r=n[u],r!=null))switch(u){case`children`:case`dangerouslySetInnerHTML`:throw Error(i(137,t));default:qd(e,t,u,r,n,null)}return;default:if(Zt(t)){for(d in n)n.hasOwnProperty(d)&&(r=n[d],r!==void 0&&Jd(e,t,d,r,n,void 0));return}}for(c in n)n.hasOwnProperty(c)&&(r=n[c],r!=null&&qd(e,t,c,r,n,null))}function Xd(e,t,n,r){switch(t){case`div`:case`span`:case`svg`:case`path`:case`a`:case`g`:case`p`:case`li`:break;case`input`:var a=null,o=null,s=null,c=null,l=null,u=null,d=null;for(m in n){var f=n[m];if(n.hasOwnProperty(m)&&f!=null)switch(m){case`checked`:break;case`value`:break;case`defaultValue`:l=f;default:r.hasOwnProperty(m)||qd(e,t,m,null,r,f)}}for(var p in r){var m=r[p];if(f=n[p],r.hasOwnProperty(p)&&(m!=null||f!=null))switch(p){case`type`:o=m;break;case`name`:a=m;break;case`checked`:u=m;break;case`defaultChecked`:d=m;break;case`value`:s=m;break;case`defaultValue`:c=m;break;case`children`:case`dangerouslySetInnerHTML`:if(m!=null)throw Error(i(137,t));break;default:m!==f&&qd(e,t,p,m,r,f)}}Vt(e,s,c,l,u,d,o,a);return;case`select`:for(o in m=s=c=p=null,n)if(l=n[o],n.hasOwnProperty(o)&&l!=null)switch(o){case`value`:break;case`multiple`:m=l;default:r.hasOwnProperty(o)||qd(e,t,o,null,r,l)}for(a in r)if(o=r[a],l=n[a],r.hasOwnProperty(a)&&(o!=null||l!=null))switch(a){case`value`:p=o;break;case`defaultValue`:c=o;break;case`multiple`:s=o;default:o!==l&&qd(e,t,a,o,r,l)}t=c,n=s,r=m,p==null?!!r!=!!n&&(t==null?Wt(e,!!n,n?[]:``,!1):Wt(e,!!n,t,!0)):Wt(e,!!n,p,!1);return;case`textarea`:for(c in m=p=null,n)if(a=n[c],n.hasOwnProperty(c)&&a!=null&&!r.hasOwnProperty(c))switch(c){case`value`:break;case`children`:break;default:qd(e,t,c,null,r,a)}for(s in r)if(a=r[s],o=n[s],r.hasOwnProperty(s)&&(a!=null||o!=null))switch(s){case`value`:p=a;break;case`defaultValue`:m=a;break;case`children`:break;case`dangerouslySetInnerHTML`:if(a!=null)throw Error(i(91));break;default:a!==o&&qd(e,t,s,a,r,o)}Gt(e,p,m);return;case`option`:for(var h in n)if(p=n[h],n.hasOwnProperty(h)&&p!=null&&!r.hasOwnProperty(h))switch(h){case`selected`:e.selected=!1;break;default:qd(e,t,h,null,r,p)}for(l in r)if(p=r[l],m=n[l],r.hasOwnProperty(l)&&p!==m&&(p!=null||m!=null))switch(l){case`selected`:e.selected=p&&typeof p!=`function`&&typeof p!=`symbol`;break;default:qd(e,t,l,p,r,m)}return;case`img`:case`link`:case`area`:case`base`:case`br`:case`col`:case`embed`:case`hr`:case`keygen`:case`meta`:case`param`:case`source`:case`track`:case`wbr`:case`menuitem`:for(var g in n)p=n[g],n.hasOwnProperty(g)&&p!=null&&!r.hasOwnProperty(g)&&qd(e,t,g,null,r,p);for(u in r)if(p=r[u],m=n[u],r.hasOwnProperty(u)&&p!==m&&(p!=null||m!=null))switch(u){case`children`:case`dangerouslySetInnerHTML`:if(p!=null)throw Error(i(137,t));break;default:qd(e,t,u,p,r,m)}return;default:if(Zt(t)){for(var _ in n)p=n[_],n.hasOwnProperty(_)&&p!==void 0&&!r.hasOwnProperty(_)&&Jd(e,t,_,void 0,r,p);for(d in r)p=r[d],m=n[d],!r.hasOwnProperty(d)||p===m||p===void 0&&m===void 0||Jd(e,t,d,p,r,m);return}}for(var v in n)p=n[v],n.hasOwnProperty(v)&&p!=null&&!r.hasOwnProperty(v)&&qd(e,t,v,null,r,p);for(f in r)p=r[f],m=n[f],!r.hasOwnProperty(f)||p===m||p==null&&m==null||qd(e,t,f,p,r,m)}function Zd(e){switch(e){case`css`:case`script`:case`font`:case`img`:case`image`:case`input`:case`link`:return!0;default:return!1}}function Qd(){if(typeof performance.getEntriesByType==`function`){for(var e=0,t=0,n=performance.getEntriesByType(`resource`),r=0;r<n.length;r++){var i=n[r],a=i.transferSize,o=i.initiatorType,s=i.duration;if(a&&s&&Zd(o)){for(o=0,s=i.responseEnd,r+=1;r<n.length;r++){var c=n[r],l=c.startTime;if(l>s)break;var u=c.transferSize,d=c.initiatorType;u&&Zd(d)&&(c=c.responseEnd,o+=u*(c<s?1:(s-l)/(c-l)))}if(--r,t+=8*(a+o)/(i.duration/1e3),e++,10<e)break}}if(0<e)return t/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e==`number`)?e:5}var $d=null,ef=null;function tf(e){return e.nodeType===9?e:e.ownerDocument}function nf(e){switch(e){case`http://www.w3.org/2000/svg`:return 1;case`http://www.w3.org/1998/Math/MathML`:return 2;default:return 0}}function rf(e,t){if(e===0)switch(t){case`svg`:return 1;case`math`:return 2;default:return 0}return e===1&&t===`foreignObject`?0:e}function af(e,t){return e===`textarea`||e===`noscript`||typeof t.children==`string`||typeof t.children==`number`||typeof t.children==`bigint`||typeof t.dangerouslySetInnerHTML==`object`&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var sf=null;function cf(){var e=window.event;return e&&e.type===`popstate`?e===sf?!1:(sf=e,!0):(sf=null,!1)}var lf=typeof setTimeout==`function`?setTimeout:void 0,uf=typeof clearTimeout==`function`?clearTimeout:void 0,df=typeof Promise==`function`?Promise:void 0,ff=typeof queueMicrotask==`function`?queueMicrotask:df===void 0?lf:function(e){return df.resolve(null).then(e).catch(pf)};function pf(e){setTimeout(function(){throw e})}function mf(e){return e===`head`}function hf(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&i.nodeType===8)if(n=i.data,n===`/$`||n===`/&`){if(r===0){e.removeChild(i),Yp(t);return}r--}else if(n===`$`||n===`$?`||n===`$~`||n===`$!`||n===`&`)r++;else if(n===`html`)kf(e.ownerDocument.documentElement);else if(n===`head`){n=e.ownerDocument.head,kf(n);for(var a=n.firstChild;a;){var o=a.nextSibling,s=a.nodeName;a[gt]||s===`SCRIPT`||s===`STYLE`||s===`LINK`&&a.rel.toLowerCase()===`stylesheet`||n.removeChild(a),a=o}}else n===`body`&&kf(e.ownerDocument.body);n=i}while(n);Yp(t)}function gf(e,t){var n=e;e=0;do{var r=n.nextSibling;if(n.nodeType===1?t?(n._stashedDisplay=n.style.display,n.style.display=`none`):(n.style.display=n._stashedDisplay||``,n.getAttribute(`style`)===``&&n.removeAttribute(`style`)):n.nodeType===3&&(t?(n._stashedText=n.nodeValue,n.nodeValue=``):n.nodeValue=n._stashedText||``),r&&r.nodeType===8)if(n=r.data,n===`/$`){if(e===0)break;e--}else n!==`$`&&n!==`$?`&&n!==`$~`&&n!==`$!`||e++;n=r}while(n)}function _f(e){var t=e.firstChild;for(t&&t.nodeType===10&&(t=t.nextSibling);t;){var n=t;switch(t=t.nextSibling,n.nodeName){case`HTML`:case`HEAD`:case`BODY`:_f(n),_t(n);continue;case`SCRIPT`:case`STYLE`:continue;case`LINK`:if(n.rel.toLowerCase()===`stylesheet`)continue}e.removeChild(n)}}function vf(e,t,n,r){for(;e.nodeType===1;){var i=n;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!r&&(e.nodeName!==`INPUT`||e.type!==`hidden`))break}else if(r){if(!e[gt])switch(t){case`meta`:if(!e.hasAttribute(`itemprop`))break;return e;case`link`:if(a=e.getAttribute(`rel`),a===`stylesheet`&&e.hasAttribute(`data-precedence`)||a!==i.rel||e.getAttribute(`href`)!==(i.href==null||i.href===``?null:i.href)||e.getAttribute(`crossorigin`)!==(i.crossOrigin==null?null:i.crossOrigin)||e.getAttribute(`title`)!==(i.title==null?null:i.title))break;return e;case`style`:if(e.hasAttribute(`data-precedence`))break;return e;case`script`:if(a=e.getAttribute(`src`),(a!==(i.src==null?null:i.src)||e.getAttribute(`type`)!==(i.type==null?null:i.type)||e.getAttribute(`crossorigin`)!==(i.crossOrigin==null?null:i.crossOrigin))&&a&&e.hasAttribute(`async`)&&!e.hasAttribute(`itemprop`))break;return e;default:return e}}else if(t===`input`&&e.type===`hidden`){var a=i.name==null?null:``+i.name;if(i.type===`hidden`&&e.getAttribute(`name`)===a)return e}else return e;if(e=wf(e.nextSibling),e===null)break}return null}function yf(e,t,n){if(t===``)return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!==`INPUT`||e.type!==`hidden`)&&!n||(e=wf(e.nextSibling),e===null))return null;return e}function bf(e,t){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!==`INPUT`||e.type!==`hidden`)&&!t||(e=wf(e.nextSibling),e===null))return null;return e}function xf(e){return e.data===`$?`||e.data===`$~`}function Sf(e){return e.data===`$!`||e.data===`$?`&&e.ownerDocument.readyState!==`loading`}function Cf(e,t){var n=e.ownerDocument;if(e.data===`$~`)e._reactRetry=t;else if(e.data!==`$?`||n.readyState!==`loading`)t();else{var r=function(){t(),n.removeEventListener(`DOMContentLoaded`,r)};n.addEventListener(`DOMContentLoaded`,r),e._reactRetry=r}}function wf(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t===`$`||t===`$!`||t===`$?`||t===`$~`||t===`&`||t===`F!`||t===`F`)break;if(t===`/$`||t===`/&`)return null}}return e}var Tf=null;function Ef(e){e=e.nextSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n===`/$`||n===`/&`){if(t===0)return wf(e.nextSibling);t--}else n!==`$`&&n!==`$!`&&n!==`$?`&&n!==`$~`&&n!==`&`||t++}e=e.nextSibling}return null}function Df(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n===`$`||n===`$!`||n===`$?`||n===`$~`||n===`&`){if(t===0)return e;t--}else n!==`/$`&&n!==`/&`||t++}e=e.previousSibling}return null}function Of(e,t,n){switch(t=tf(n),e){case`html`:if(e=t.documentElement,!e)throw Error(i(452));return e;case`head`:if(e=t.head,!e)throw Error(i(453));return e;case`body`:if(e=t.body,!e)throw Error(i(454));return e;default:throw Error(i(451))}}function kf(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);_t(e)}var Af=new Map,jf=new Set;function Mf(e){return typeof e.getRootNode==`function`?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var Nf=P.d;P.d={f:Pf,r:Ff,D:Rf,C:zf,L:Bf,m:Vf,X:Uf,S:Hf,M:Wf};function Pf(){var e=Nf.f(),t=Mu();return e||t}function Ff(e){var t=yt(e);t!==null&&t.tag===5&&t.type===`form`?Rs(t):Nf.r(e)}var If=typeof document>`u`?null:document;function Lf(e,t,n){var r=If;if(r&&typeof t==`string`&&t){var i=Bt(t);i=`link[rel="`+e+`"][href="`+i+`"]`,typeof n==`string`&&(i+=`[crossorigin="`+n+`"]`),jf.has(i)||(jf.add(i),e={rel:e,crossOrigin:n,href:t},r.querySelector(i)===null&&(t=r.createElement(`link`),Yd(t,`link`,e),xt(t),r.head.appendChild(t)))}}function Rf(e){Nf.D(e),Lf(`dns-prefetch`,e,null)}function zf(e,t){Nf.C(e,t),Lf(`preconnect`,e,t)}function Bf(e,t,n){Nf.L(e,t,n);var r=If;if(r&&e&&t){var i=`link[rel="preload"][as="`+Bt(t)+`"]`;t===`image`&&n&&n.imageSrcSet?(i+=`[imagesrcset="`+Bt(n.imageSrcSet)+`"]`,typeof n.imageSizes==`string`&&(i+=`[imagesizes="`+Bt(n.imageSizes)+`"]`)):i+=`[href="`+Bt(e)+`"]`;var a=i;switch(t){case`style`:a=Kf(e);break;case`script`:a=Xf(e)}Af.has(a)||(e=f({rel:`preload`,href:t===`image`&&n&&n.imageSrcSet?void 0:e,as:t},n),Af.set(a,e),r.querySelector(i)!==null||t===`style`&&r.querySelector(qf(a))||t===`script`&&r.querySelector(Zf(a))||(t=r.createElement(`link`),Yd(t,`link`,e),xt(t),r.head.appendChild(t)))}}function Vf(e,t){Nf.m(e,t);var n=If;if(n&&e){var r=t&&typeof t.as==`string`?t.as:`script`,i=`link[rel="modulepreload"][as="`+Bt(r)+`"][href="`+Bt(e)+`"]`,a=i;switch(r){case`audioworklet`:case`paintworklet`:case`serviceworker`:case`sharedworker`:case`worker`:case`script`:a=Xf(e)}if(!Af.has(a)&&(e=f({rel:`modulepreload`,href:e},t),Af.set(a,e),n.querySelector(i)===null)){switch(r){case`audioworklet`:case`paintworklet`:case`serviceworker`:case`sharedworker`:case`worker`:case`script`:if(n.querySelector(Zf(a)))return}r=n.createElement(`link`),Yd(r,`link`,e),xt(r),n.head.appendChild(r)}}}function Hf(e,t,n){Nf.S(e,t,n);var r=If;if(r&&e){var i=I(r).hoistableStyles,a=Kf(e);t||=`default`;var o=i.get(a);if(!o){var s={loading:0,preload:null};if(o=r.querySelector(qf(a)))s.loading=5;else{e=f({rel:`stylesheet`,href:e,"data-precedence":t},n),(n=Af.get(a))&&ep(e,n);var c=o=r.createElement(`link`);xt(c),Yd(c,`link`,e),c._p=new Promise(function(e,t){c.onload=e,c.onerror=t}),c.addEventListener(`load`,function(){s.loading|=1}),c.addEventListener(`error`,function(){s.loading|=2}),s.loading|=4,$f(o,t,r)}o={type:`stylesheet`,instance:o,count:1,state:s},i.set(a,o)}}}function Uf(e,t){Nf.X(e,t);var n=If;if(n&&e){var r=I(n).hoistableScripts,i=Xf(e),a=r.get(i);a||(a=n.querySelector(Zf(i)),a||(e=f({src:e,async:!0},t),(t=Af.get(i))&&tp(e,t),a=n.createElement(`script`),xt(a),Yd(a,`link`,e),n.head.appendChild(a)),a={type:`script`,instance:a,count:1,state:null},r.set(i,a))}}function Wf(e,t){Nf.M(e,t);var n=If;if(n&&e){var r=I(n).hoistableScripts,i=Xf(e),a=r.get(i);a||(a=n.querySelector(Zf(i)),a||(e=f({src:e,async:!0,type:`module`},t),(t=Af.get(i))&&tp(e,t),a=n.createElement(`script`),xt(a),Yd(a,`link`,e),n.head.appendChild(a)),a={type:`script`,instance:a,count:1,state:null},r.set(i,a))}}function Gf(e,t,n,r){var a=(a=ue.current)?Mf(a):null;if(!a)throw Error(i(446));switch(e){case`meta`:case`title`:return null;case`style`:return typeof n.precedence==`string`&&typeof n.href==`string`?(t=Kf(n.href),n=I(a).hoistableStyles,r=n.get(t),r||(r={type:`style`,instance:null,count:0,state:null},n.set(t,r)),r):{type:`void`,instance:null,count:0,state:null};case`link`:if(n.rel===`stylesheet`&&typeof n.href==`string`&&typeof n.precedence==`string`){e=Kf(n.href);var o=I(a).hoistableStyles,s=o.get(e);if(s||(a=a.ownerDocument||a,s={type:`stylesheet`,instance:null,count:0,state:{loading:0,preload:null}},o.set(e,s),(o=a.querySelector(qf(e)))&&!o._p&&(s.instance=o,s.state.loading=5),Af.has(e)||(n={rel:`preload`,as:`style`,href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},Af.set(e,n),o||Yf(a,e,n,s.state))),t&&r===null)throw Error(i(528,``));return s}if(t&&r!==null)throw Error(i(529,``));return null;case`script`:return t=n.async,n=n.src,typeof n==`string`&&t&&typeof t!=`function`&&typeof t!=`symbol`?(t=Xf(n),n=I(a).hoistableScripts,r=n.get(t),r||(r={type:`script`,instance:null,count:0,state:null},n.set(t,r)),r):{type:`void`,instance:null,count:0,state:null};default:throw Error(i(444,e))}}function Kf(e){return`href="`+Bt(e)+`"`}function qf(e){return`link[rel="stylesheet"][`+e+`]`}function Jf(e){return f({},e,{"data-precedence":e.precedence,precedence:null})}function Yf(e,t,n,r){e.querySelector(`link[rel="preload"][as="style"][`+t+`]`)?r.loading=1:(t=e.createElement(`link`),r.preload=t,t.addEventListener(`load`,function(){return r.loading|=1}),t.addEventListener(`error`,function(){return r.loading|=2}),Yd(t,`link`,n),xt(t),e.head.appendChild(t))}function Xf(e){return`[src="`+Bt(e)+`"]`}function Zf(e){return`script[async]`+e}function Qf(e,t,n){if(t.count++,t.instance===null)switch(t.type){case`style`:var r=e.querySelector(`style[data-href~="`+Bt(n.href)+`"]`);if(r)return t.instance=r,xt(r),r;var a=f({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return r=(e.ownerDocument||e).createElement(`style`),xt(r),Yd(r,`style`,a),$f(r,n.precedence,e),t.instance=r;case`stylesheet`:a=Kf(n.href);var o=e.querySelector(qf(a));if(o)return t.state.loading|=4,t.instance=o,xt(o),o;r=Jf(n),(a=Af.get(a))&&ep(r,a),o=(e.ownerDocument||e).createElement(`link`),xt(o);var s=o;return s._p=new Promise(function(e,t){s.onload=e,s.onerror=t}),Yd(o,`link`,r),t.state.loading|=4,$f(o,n.precedence,e),t.instance=o;case`script`:return o=Xf(n.src),(a=e.querySelector(Zf(o)))?(t.instance=a,xt(a),a):(r=n,(a=Af.get(o))&&(r=f({},n),tp(r,a)),e=e.ownerDocument||e,a=e.createElement(`script`),xt(a),Yd(a,`link`,r),e.head.appendChild(a),t.instance=a);case`void`:return null;default:throw Error(i(443,t.type))}else t.type===`stylesheet`&&!(t.state.loading&4)&&(r=t.instance,t.state.loading|=4,$f(r,n.precedence,e));return t.instance}function $f(e,t,n){for(var r=n.querySelectorAll(`link[rel="stylesheet"][data-precedence],style[data-precedence]`),i=r.length?r[r.length-1]:null,a=i,o=0;o<r.length;o++){var s=r[o];if(s.dataset.precedence===t)a=s;else if(a!==i)break}a?a.parentNode.insertBefore(e,a.nextSibling):(t=n.nodeType===9?n.head:n,t.insertBefore(e,t.firstChild))}function ep(e,t){e.crossOrigin??=t.crossOrigin,e.referrerPolicy??=t.referrerPolicy,e.title??=t.title}function tp(e,t){e.crossOrigin??=t.crossOrigin,e.referrerPolicy??=t.referrerPolicy,e.integrity??=t.integrity}var np=null;function rp(e,t,n){if(np===null){var r=new Map,i=np=new Map;i.set(n,r)}else i=np,r=i.get(n),r||(r=new Map,i.set(n,r));if(r.has(e))return r;for(r.set(e,null),n=n.getElementsByTagName(e),i=0;i<n.length;i++){var a=n[i];if(!(a[gt]||a[lt]||e===`link`&&a.getAttribute(`rel`)===`stylesheet`)&&a.namespaceURI!==`http://www.w3.org/2000/svg`){var o=a.getAttribute(t)||``;o=e+o;var s=r.get(o);s?s.push(a):r.set(o,[a])}}return r}function ip(e,t,n){e=e.ownerDocument||e,e.head.insertBefore(n,t===`title`?e.querySelector(`head > title`):null)}function ap(e,t,n){if(n===1||t.itemProp!=null)return!1;switch(e){case`meta`:case`title`:return!0;case`style`:if(typeof t.precedence!=`string`||typeof t.href!=`string`||t.href===``)break;return!0;case`link`:if(typeof t.rel!=`string`||typeof t.href!=`string`||t.href===``||t.onLoad||t.onError)break;switch(t.rel){case`stylesheet`:return e=t.disabled,typeof t.precedence==`string`&&e==null;default:return!0}case`script`:if(t.async&&typeof t.async!=`function`&&typeof t.async!=`symbol`&&!t.onLoad&&!t.onError&&t.src&&typeof t.src==`string`)return!0}return!1}function op(e){return!(e.type===`stylesheet`&&!(e.state.loading&3))}function sp(e,t,n,r){if(n.type===`stylesheet`&&(typeof r.media!=`string`||!1!==matchMedia(r.media).matches)&&!(n.state.loading&4)){if(n.instance===null){var i=Kf(r.href),a=t.querySelector(qf(i));if(a){t=a._p,typeof t==`object`&&t&&typeof t.then==`function`&&(e.count++,e=up.bind(e),t.then(e,e)),n.state.loading|=4,n.instance=a,xt(a);return}a=t.ownerDocument||t,r=Jf(r),(i=Af.get(i))&&ep(r,i),a=a.createElement(`link`),xt(a);var o=a;o._p=new Promise(function(e,t){o.onload=e,o.onerror=t}),Yd(a,`link`,r),n.instance=a}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(n,t),(t=n.state.preload)&&!(n.state.loading&3)&&(e.count++,n=up.bind(e),t.addEventListener(`load`,n),t.addEventListener(`error`,n))}}var cp=0;function lp(e,t){return e.stylesheets&&e.count===0&&fp(e,e.stylesheets),0<e.count||0<e.imgCount?function(n){var r=setTimeout(function(){if(e.stylesheets&&fp(e,e.stylesheets),e.unsuspend){var t=e.unsuspend;e.unsuspend=null,t()}},6e4+t);0<e.imgBytes&&cp===0&&(cp=62500*Qd());var i=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&fp(e,e.stylesheets),e.unsuspend)){var t=e.unsuspend;e.unsuspend=null,t()}},(e.imgBytes>cp?50:800)+t);return e.unsuspend=n,function(){e.unsuspend=null,clearTimeout(r),clearTimeout(i)}}:null}function up(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)fp(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var dp=null;function fp(e,t){e.stylesheets=null,e.unsuspend!==null&&(e.count++,dp=new Map,t.forEach(pp,e),dp=null,up.call(e))}function pp(e,t){if(!(t.state.loading&4)){var n=dp.get(e);if(n)var r=n.get(null);else{n=new Map,dp.set(e,n);for(var i=e.querySelectorAll(`link[data-precedence],style[data-precedence]`),a=0;a<i.length;a++){var o=i[a];(o.nodeName===`LINK`||o.getAttribute(`media`)!==`not all`)&&(n.set(o.dataset.precedence,o),r=o)}r&&n.set(null,r)}i=t.instance,o=i.getAttribute(`data-precedence`),a=n.get(o)||r,a===r&&n.set(null,i),n.set(o,i),this.count++,r=up.bind(this),i.addEventListener(`load`,r),i.addEventListener(`error`,r),a?a.parentNode.insertBefore(i,a.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(i,e.firstChild)),t.state.loading|=4}}var mp={$$typeof:C,Provider:null,Consumer:null,_currentValue:re,_currentValue2:re,_threadCount:0};function hp(e,t,n,r,i,a,o,s,c){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Qe(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Qe(0),this.hiddenUpdates=Qe(null),this.identifierPrefix=r,this.onUncaughtError=i,this.onCaughtError=a,this.onRecoverableError=o,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=c,this.incompleteTransitions=new Map}function gp(e,t,n,r,i,a,o,s,c,l,u,d){return e=new hp(e,t,n,o,c,l,u,d,s),t=1,!0===a&&(t|=24),a=bi(3,null,null,t),e.current=a,a.stateNode=e,t=ya(),t.refCount++,e.pooledCache=t,t.refCount++,a.memoizedState={element:r,isDehydrated:n,cache:t},Za(a),e}function _p(e){return e?(e=vi,e):vi}function vp(e,t,n,r,i,a){i=_p(i),r.context===null?r.context=i:r.pendingContext=i,r=$a(t),r.payload={element:n},a=a===void 0?null:a,a!==null&&(r.callback=a),n=eo(e,r,t),n!==null&&(Du(n,e,t),to(n,e,t))}function yp(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function bp(e,t){yp(e,t),(e=e.alternate)&&yp(e,t)}function xp(e){if(e.tag===13||e.tag===31){var t=hi(e,67108864);t!==null&&Du(t,e,67108864),bp(e,67108864)}}function Sp(e){if(e.tag===13||e.tag===31){var t=Tu();t=it(t);var n=hi(e,t);n!==null&&Du(n,e,t),bp(e,t)}}var Cp=!0;function wp(e,t,n,r){var i=N.T;N.T=null;var a=P.p;try{P.p=2,Ep(e,t,n,r)}finally{P.p=a,N.T=i}}function Tp(e,t,n,r){var i=N.T;N.T=null;var a=P.p;try{P.p=8,Ep(e,t,n,r)}finally{P.p=a,N.T=i}}function Ep(e,t,n,r){if(Cp){var i=Dp(r);if(i===null)Rd(e,t,r,Op,n),zp(e,r);else if(Vp(i,e,t,n,r))r.stopPropagation();else if(zp(e,r),t&4&&-1<Rp.indexOf(e)){for(;i!==null;){var a=yt(i);if(a!==null)switch(a.tag){case 3:if(a=a.stateNode,a.current.memoizedState.isDehydrated){var o=qe(a.pendingLanes);if(o!==0){var s=a;for(s.pendingLanes|=2,s.entangledLanes|=2;o;){var c=1<<31-Be(o);s.entanglements[1]|=c,o&=~c}hd(a),!(J&6)&&(pu=Oe()+500,gd(0,!1))}}break;case 31:case 13:s=hi(a,2),s!==null&&Du(s,a,2),Mu(),bp(a,2)}if(a=Dp(r),a===null&&Rd(e,t,r,Op,n),a===i)break;i=a}i!==null&&r.stopPropagation()}else Rd(e,t,r,null,n)}}function Dp(e){return e=rn(e),kp(e)}var Op=null;function kp(e){if(Op=null,e=vt(e),e!==null){var t=o(e);if(t===null)e=null;else{var n=t.tag;if(n===13){if(e=s(t),e!==null)return e;e=null}else if(n===31){if(e=c(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return Op=e,null}function Ap(e){switch(e){case`beforetoggle`:case`cancel`:case`click`:case`close`:case`contextmenu`:case`copy`:case`cut`:case`auxclick`:case`dblclick`:case`dragend`:case`dragstart`:case`drop`:case`focusin`:case`focusout`:case`input`:case`invalid`:case`keydown`:case`keypress`:case`keyup`:case`mousedown`:case`mouseup`:case`paste`:case`pause`:case`play`:case`pointercancel`:case`pointerdown`:case`pointerup`:case`ratechange`:case`reset`:case`resize`:case`seeked`:case`submit`:case`toggle`:case`touchcancel`:case`touchend`:case`touchstart`:case`volumechange`:case`change`:case`selectionchange`:case`textInput`:case`compositionstart`:case`compositionend`:case`compositionupdate`:case`beforeblur`:case`afterblur`:case`beforeinput`:case`blur`:case`fullscreenchange`:case`focus`:case`hashchange`:case`popstate`:case`select`:case`selectstart`:return 2;case`drag`:case`dragenter`:case`dragexit`:case`dragleave`:case`dragover`:case`mousemove`:case`mouseout`:case`mouseover`:case`pointermove`:case`pointerout`:case`pointerover`:case`scroll`:case`touchmove`:case`wheel`:case`mouseenter`:case`mouseleave`:case`pointerenter`:case`pointerleave`:return 8;case`message`:switch(ke()){case Ae:return 2;case je:return 8;case Me:case Ne:return 32;case Pe:return 268435456;default:return 32}default:return 32}}var jp=!1,Mp=null,Np=null,Pp=null,Fp=new Map,Ip=new Map,Lp=[],Rp=`mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset`.split(` `);function zp(e,t){switch(e){case`focusin`:case`focusout`:Mp=null;break;case`dragenter`:case`dragleave`:Np=null;break;case`mouseover`:case`mouseout`:Pp=null;break;case`pointerover`:case`pointerout`:Fp.delete(t.pointerId);break;case`gotpointercapture`:case`lostpointercapture`:Ip.delete(t.pointerId)}}function Bp(e,t,n,r,i,a){return e===null||e.nativeEvent!==a?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:a,targetContainers:[i]},t!==null&&(t=yt(t),t!==null&&xp(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),e)}function Vp(e,t,n,r,i){switch(t){case`focusin`:return Mp=Bp(Mp,e,t,n,r,i),!0;case`dragenter`:return Np=Bp(Np,e,t,n,r,i),!0;case`mouseover`:return Pp=Bp(Pp,e,t,n,r,i),!0;case`pointerover`:var a=i.pointerId;return Fp.set(a,Bp(Fp.get(a)||null,e,t,n,r,i)),!0;case`gotpointercapture`:return a=i.pointerId,Ip.set(a,Bp(Ip.get(a)||null,e,t,n,r,i)),!0}return!1}function Hp(e){var t=vt(e.target);if(t!==null){var n=o(t);if(n!==null){if(t=n.tag,t===13){if(t=s(n),t!==null){e.blockedOn=t,st(e.priority,function(){Sp(n)});return}}else if(t===31){if(t=c(n),t!==null){e.blockedOn=t,st(e.priority,function(){Sp(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Up(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=Dp(e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);nn=r,n.target.dispatchEvent(r),nn=null}else return t=yt(n),t!==null&&xp(t),e.blockedOn=n,!1;t.shift()}return!0}function Wp(e,t,n){Up(e)&&n.delete(t)}function Gp(){jp=!1,Mp!==null&&Up(Mp)&&(Mp=null),Np!==null&&Up(Np)&&(Np=null),Pp!==null&&Up(Pp)&&(Pp=null),Fp.forEach(Wp),Ip.forEach(Wp)}function Kp(e,n){e.blockedOn===n&&(e.blockedOn=null,jp||(jp=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,Gp)))}var qp=null;function Jp(e){qp!==e&&(qp=e,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){qp===e&&(qp=null);for(var t=0;t<e.length;t+=3){var n=e[t],r=e[t+1],i=e[t+2];if(typeof r!=`function`){if(kp(r||n)===null)continue;break}var a=yt(n);a!==null&&(e.splice(t,3),t-=3,Is(a,{pending:!0,data:i,method:n.method,action:r},r,i))}}))}function Yp(e){function t(t){return Kp(t,e)}Mp!==null&&Kp(Mp,e),Np!==null&&Kp(Np,e),Pp!==null&&Kp(Pp,e),Fp.forEach(t),Ip.forEach(t);for(var n=0;n<Lp.length;n++){var r=Lp[n];r.blockedOn===e&&(r.blockedOn=null)}for(;0<Lp.length&&(n=Lp[0],n.blockedOn===null);)Hp(n),n.blockedOn===null&&Lp.shift();if(n=(e.ownerDocument||e).$$reactFormReplay,n!=null)for(r=0;r<n.length;r+=3){var i=n[r],a=n[r+1],o=i[ut]||null;if(typeof a==`function`)o||Jp(n);else if(o){var s=null;if(a&&a.hasAttribute(`formAction`)){if(i=a,o=a[ut]||null)s=o.formAction;else if(kp(i)!==null)continue}else s=o.action;typeof s==`function`?n[r+1]=s:(n.splice(r,3),r-=3),Jp(n)}}}function Xp(){function e(e){e.canIntercept&&e.info===`react-transition`&&e.intercept({handler:function(){return new Promise(function(e){return i=e})},focusReset:`manual`,scroll:`manual`})}function t(){i!==null&&(i(),i=null),r||setTimeout(n,20)}function n(){if(!r&&!navigation.transition){var e=navigation.currentEntry;e&&e.url!=null&&navigation.navigate(e.url,{state:e.getState(),info:`react-transition`,history:`replace`})}}if(typeof navigation==`object`){var r=!1,i=null;return navigation.addEventListener(`navigate`,e),navigation.addEventListener(`navigatesuccess`,t),navigation.addEventListener(`navigateerror`,t),setTimeout(n,100),function(){r=!0,navigation.removeEventListener(`navigate`,e),navigation.removeEventListener(`navigatesuccess`,t),navigation.removeEventListener(`navigateerror`,t),i!==null&&(i(),i=null)}}}function Zp(e){this._internalRoot=e}Qp.prototype.render=Zp.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(i(409));var n=t.current,r=Tu();vp(n,r,e,t,null,null)},Qp.prototype.unmount=Zp.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;vp(e.current,2,null,e,null,null),Mu(),t[dt]=null}};function Qp(e){this._internalRoot=e}Qp.prototype.unstable_scheduleHydration=function(e){if(e){var t=ot();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Lp.length&&t!==0&&t<Lp[n].priority;n++);Lp.splice(n,0,e),n===0&&Hp(e)}};var $p=n.version;if($p!==`19.2.0`)throw Error(i(527,$p,`19.2.0`));P.findDOMNode=function(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render==`function`?Error(i(188)):(e=Object.keys(e).join(`,`),Error(i(268,e)));return e=u(t),e=e===null?null:d(e),e=e===null?null:e.stateNode,e};var em={bundleType:0,version:`19.2.0`,rendererPackageName:`react-dom`,currentDispatcherRef:N,reconcilerVersion:`19.2.0`};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<`u`){var tm=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!tm.isDisabled&&tm.supportsFiber)try{Le=tm.inject(em),Re=tm}catch{}}exports.createRoot=function(e,t){if(!a(e))throw Error(i(299));var n=!1,r=``,o=ac,s=oc,c=sc;return t!=null&&(!0===t.unstable_strictMode&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onUncaughtError!==void 0&&(o=t.onUncaughtError),t.onCaughtError!==void 0&&(s=t.onCaughtError),t.onRecoverableError!==void 0&&(c=t.onRecoverableError)),t=gp(e,1,!1,null,null,n,r,null,o,s,c,Xp),e[dt]=t.current,Id(e),new Zp(t)}})),y=u(s(((exports,t)=>{function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>`u`||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!=`function`))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}n(),t.exports=v()}))()),b=u(p(),1),x=s((exports=>{var t=p().__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;exports.c=function(e){return t.H.useMemoCache(e)}})),S=s(((exports,t)=>{t.exports=x()})),C=u(S()),w=`modulepreload`,T=function(e){return`/FE7-PROJECT2-TEAM-5/`+e},E={};const D=function(e,t,n){let r=Promise.resolve();if(t&&t.length>0){let e=document.getElementsByTagName(`link`),i=document.querySelector(`meta[property=csp-nonce]`),a=i?.nonce||i?.getAttribute(`nonce`);function o(e){return Promise.all(e.map(e=>Promise.resolve(e).then(e=>({status:`fulfilled`,value:e}),e=>({status:`rejected`,reason:e}))))}r=o(t.map(t=>{if(t=T(t,n),t in E)return;E[t]=!0;let r=t.endsWith(`.css`),i=r?`[rel="stylesheet"]`:``;if(n)for(let n=e.length-1;n>=0;n--){let i=e[n];if(i.href===t&&(!r||i.rel===`stylesheet`))return}else if(document.querySelector(`link[href="${t}"]${i}`))return;let o=document.createElement(`link`);if(o.rel=r?`stylesheet`:w,r||(o.as=`script`),o.crossOrigin=``,o.href=t,a&&o.setAttribute(`nonce`,a),document.head.appendChild(o),r)return new Promise((e,n)=>{o.addEventListener(`load`,e),o.addEventListener(`error`,()=>n(Error(`Unable to preload CSS for ${t}`)))})}))}function i(e){let t=new Event(`vite:preloadError`,{cancelable:!0});if(t.payload=e,window.dispatchEvent(t),!t.defaultPrevented)throw e}return r.then(t=>{for(let e of t||[]){if(e.status!==`rejected`)continue;i(e.reason)}return e().catch(i)})};var O=`popstate`;function k(e={}){function t(e,t){let{pathname:n,search:r,hash:i}=e.location;return ne(``,{pathname:n,search:r,hash:i},t.state&&t.state.usr||null,t.state&&t.state.key||`default`)}function n(e,t){return typeof t==`string`?t:M(t)}return P(t,n,null,e)}function A(e,t){if(e===!1||e==null)throw Error(t)}function j(e,t){if(!e){typeof console<`u`&&console.warn(t);try{throw Error(t)}catch{}}}function ee(){return Math.random().toString(36).substring(2,10)}function te(e,t){return{usr:e.state,key:e.key,idx:t}}function ne(e,t,n=null,r){return{pathname:typeof e==`string`?e:e.pathname,search:``,hash:``,...typeof t==`string`?N(t):t,state:n,key:t&&t.key||r||ee()}}function M({pathname:e=`/`,search:t=``,hash:n=``}){return t&&t!==`?`&&(e+=t.charAt(0)===`?`?t:`?`+t),n&&n!==`#`&&(e+=n.charAt(0)===`#`?n:`#`+n),e}function N(e){let t={};if(e){let n=e.indexOf(`#`);n>=0&&(t.hash=e.substring(n),e=e.substring(0,n));let r=e.indexOf(`?`);r>=0&&(t.search=e.substring(r),e=e.substring(0,r)),e&&(t.pathname=e)}return t}function P(e,t,n,r={}){let{window:i=document.defaultView,v5Compat:a=!1}=r,o=i.history,s=`POP`,c=null,l=u();l??(l=0,o.replaceState({...o.state,idx:l},``));function u(){return(o.state||{idx:null}).idx}function d(){s=`POP`;let e=u(),t=e==null?null:e-l;l=e,c&&c({action:s,location:h.location,delta:t})}function f(e,t){s=`PUSH`;let r=ne(h.location,e,t);n&&n(r,e),l=u()+1;let d=te(r,l),f=h.createHref(r);try{o.pushState(d,``,f)}catch(e){if(e instanceof DOMException&&e.name===`DataCloneError`)throw e;i.location.assign(f)}a&&c&&c({action:s,location:h.location,delta:1})}function p(e,t){s=`REPLACE`;let r=ne(h.location,e,t);n&&n(r,e),l=u();let i=te(r,l),d=h.createHref(r);o.replaceState(i,``,d),a&&c&&c({action:s,location:h.location,delta:0})}function m(e){return re(e)}let h={get action(){return s},get location(){return e(i,o)},listen(e){if(c)throw Error(`A history only accepts one active listener`);return i.addEventListener(O,d),c=e,()=>{i.removeEventListener(O,d),c=null}},createHref(e){return t(i,e)},createURL:m,encodeLocation(e){let t=m(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:f,replace:p,go(e){return o.go(e)}};return h}function re(e,t=!1){let n=`http://localhost`;typeof window<`u`&&(n=window.location.origin===`null`?window.location.href:window.location.origin),A(n,`No window.location.(origin|href) available to create URL`);let r=typeof e==`string`?e:M(e);return r=r.replace(/ $/,`%20`),!t&&r.startsWith(`//`)&&(r=n+r),new URL(r,n)}function ie(e,t,n=`/`){return ae(e,t,n,!1)}function ae(e,t,n,r){let i=typeof t==`string`?N(t):t,a=Se(i.pathname||`/`,n);if(a==null)return null;let o=se(e);ce(o);let s=null;for(let e=0;s==null&&e<o.length;++e){let t=xe(a);s=ve(o[e],t,r)}return s}function oe(e,t){let{route:n,pathname:r,params:i}=e;return{id:n.id,pathname:r,params:i,data:t[n.id],loaderData:t[n.id],handle:n.handle}}function se(e,t=[],n=[],r=``,i=!1){let a=(e,a,o=i,s)=>{let c={relativePath:s===void 0?e.path||``:s,caseSensitive:e.caseSensitive===!0,childrenIndex:a,route:e};if(c.relativePath.startsWith(`/`)){if(!c.relativePath.startsWith(r)&&o)return;A(c.relativePath.startsWith(r),`Absolute route path "${c.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),c.relativePath=c.relativePath.slice(r.length)}let l=ke([r,c.relativePath]),u=n.concat(c);e.children&&e.children.length>0&&(A(e.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${l}".`),se(e.children,t,u,l,o)),!(e.path==null&&!e.index)&&t.push({path:l,score:ge(l,e.index),routesMeta:u})};return e.forEach((e,t)=>{if(e.path===``||!e.path?.includes(`?`))a(e,t);else for(let n of F(e.path))a(e,t,!0,n)}),t}function F(e){let t=e.split(`/`);if(t.length===0)return[];let[n,...r]=t,i=n.endsWith(`?`),a=n.replace(/\?$/,``);if(r.length===0)return i?[a,``]:[a];let o=F(r.join(`/`)),s=[];return s.push(...o.map(e=>e===``?a:[a,e].join(`/`))),i&&s.push(...o),s.map(t=>e.startsWith(`/`)&&t===``?`/`:t)}function ce(e){e.sort((e,t)=>e.score===t.score?_e(e.routesMeta.map(e=>e.childrenIndex),t.routesMeta.map(e=>e.childrenIndex)):t.score-e.score)}var le=/^:[\w-]+$/,ue=3,de=2,fe=1,pe=10,me=-2,he=e=>e===`*`;function ge(e,t){let n=e.split(`/`),r=n.length;return n.some(he)&&(r+=me),t&&(r+=de),n.filter(e=>!he(e)).reduce((e,t)=>e+(le.test(t)?ue:t===``?fe:pe),r)}function _e(e,t){return e.length===t.length&&e.slice(0,-1).every((e,n)=>e===t[n])?e[e.length-1]-t[t.length-1]:0}function ve(e,t,n=!1){let{routesMeta:r}=e,i={},a=`/`,o=[];for(let e=0;e<r.length;++e){let s=r[e],c=e===r.length-1,l=a===`/`?t:t.slice(a.length)||`/`,u=ye({path:s.relativePath,caseSensitive:s.caseSensitive,end:c},l),d=s.route;if(!u&&c&&n&&!r[r.length-1].route.index&&(u=ye({path:s.relativePath,caseSensitive:s.caseSensitive,end:!1},l)),!u)return null;Object.assign(i,u.params),o.push({params:i,pathname:ke([a,u.pathname]),pathnameBase:Ae(ke([a,u.pathnameBase])),route:d}),u.pathnameBase!==`/`&&(a=ke([a,u.pathnameBase]))}return o}function ye(e,t){typeof e==`string`&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=be(e.path,e.caseSensitive,e.end),i=t.match(n);if(!i)return null;let a=i[0],o=a.replace(/(.)\/+$/,`$1`),s=i.slice(1);return{params:r.reduce((e,{paramName:t,isOptional:n},r)=>{if(t===`*`){let e=s[r]||``;o=a.slice(0,a.length-e.length).replace(/(.)\/+$/,`$1`)}let i=s[r];return n&&!i?e[t]=void 0:e[t]=(i||``).replace(/%2F/g,`/`),e},{}),pathname:a,pathnameBase:o,pattern:e}}function be(e,t=!1,n=!0){j(e===`*`||!e.endsWith(`*`)||e.endsWith(`/*`),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,`/*`)}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,`/*`)}".`);let r=[],i=`^`+e.replace(/\/*\*?$/,``).replace(/^\/*/,`/`).replace(/[\\.*+^${}|()[\]]/g,`\\$&`).replace(/\/:([\w-]+)(\?)?/g,(e,t,n)=>(r.push({paramName:t,isOptional:n!=null}),n?`/?([^\\/]+)?`:`/([^\\/]+)`)).replace(/\/([\w-]+)\?(\/|$)/g,`(/$1)?$2`);return e.endsWith(`*`)?(r.push({paramName:`*`}),i+=e===`*`||e===`/*`?`(.*)$`:`(?:\\/(.+)|\\/*)$`):n?i+=`\\/*$`:e!==``&&e!==`/`&&(i+=`(?:(?=\\/|$))`),[new RegExp(i,t?void 0:`i`),r]}function xe(e){try{return e.split(`/`).map(e=>decodeURIComponent(e).replace(/\//g,`%2F`)).join(`/`)}catch(t){return j(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),e}}function Se(e,t){if(t===`/`)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith(`/`)?t.length-1:t.length,r=e.charAt(n);return r&&r!==`/`?null:e.slice(n)||`/`}function Ce(e,t=`/`){let{pathname:n,search:r=``,hash:i=``}=typeof e==`string`?N(e):e;return{pathname:n?n.startsWith(`/`)?n:we(n,t):t,search:je(r),hash:Me(i)}}function we(e,t){let n=t.replace(/\/+$/,``).split(`/`);return e.split(`/`).forEach(e=>{e===`..`?n.length>1&&n.pop():e!==`.`&&n.push(e)}),n.length>1?n.join(`/`):`/`}function Te(e,t,n,r){return`Cannot include a '${e}' character in a manually specified \`to.${t}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function Ee(e){return e.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function De(e){let t=Ee(e);return t.map((e,n)=>n===t.length-1?e.pathname:e.pathnameBase)}function Oe(e,t,n,r=!1){let i;typeof e==`string`?i=N(e):(i={...e},A(!i.pathname||!i.pathname.includes(`?`),Te(`?`,`pathname`,`search`,i)),A(!i.pathname||!i.pathname.includes(`#`),Te(`#`,`pathname`,`hash`,i)),A(!i.search||!i.search.includes(`#`),Te(`#`,`search`,`hash`,i)));let a=e===``||i.pathname===``,o=a?`/`:i.pathname,s;if(o==null)s=n;else{let e=t.length-1;if(!r&&o.startsWith(`..`)){let t=o.split(`/`);for(;t[0]===`..`;)t.shift(),--e;i.pathname=t.join(`/`)}s=e>=0?t[e]:`/`}let c=Ce(i,s),l=o&&o!==`/`&&o.endsWith(`/`),u=(a||o===`.`)&&n.endsWith(`/`);return!c.pathname.endsWith(`/`)&&(l||u)&&(c.pathname+=`/`),c}var ke=e=>e.join(`/`).replace(/\/\/+/g,`/`),Ae=e=>e.replace(/\/+$/,``).replace(/^\/*/,`/`),je=e=>!e||e===`?`?``:e.startsWith(`?`)?e:`?`+e,Me=e=>!e||e===`#`?``:e.startsWith(`#`)?e:`#`+e;function Ne(e){return e!=null&&typeof e.status==`number`&&typeof e.statusText==`string`&&typeof e.internal==`boolean`&&`data`in e}var Pe=b.createContext(null);Pe.displayName=`DataRouter`;var Fe=b.createContext(null);Fe.displayName=`DataRouterState`,b.createContext(!1);var Ie=b.createContext({isTransitioning:!1});Ie.displayName=`ViewTransition`;var Le=b.createContext(new Map);Le.displayName=`Fetchers`;var Re=b.createContext(null);Re.displayName=`Await`;var ze=b.createContext(null);ze.displayName=`Navigation`;var Be=b.createContext(null);Be.displayName=`Location`;var Ve=b.createContext({outlet:null,matches:[],isDataRoute:!1});Ve.displayName=`Route`;var He=b.createContext(null);He.displayName=`RouteError`;function Ue(e,{relative:t}={}){A(We(),`useHref() may be used only in the context of a <Router> component.`);let{basename:n,navigator:r}=b.useContext(ze),{hash:i,pathname:a,search:o}=$e(e,{relative:t}),s=a;return n!==`/`&&(s=a===`/`?n:ke([n,a])),r.createHref({pathname:s,search:o,hash:i})}function We(){return b.useContext(Be)!=null}function Ge(){return A(We(),`useLocation() may be used only in the context of a <Router> component.`),b.useContext(Be).location}var Ke=`You should call navigate() in a React.useEffect(), not when your component is first rendered.`;function qe(e){b.useContext(ze).static||b.useLayoutEffect(e)}function Je(){let{isDataRoute:e}=b.useContext(Ve);return e?gt():Ye()}function Ye(){A(We(),`useNavigate() may be used only in the context of a <Router> component.`);let e=b.useContext(Pe),{basename:t,navigator:n}=b.useContext(ze),{matches:r}=b.useContext(Ve),{pathname:i}=Ge(),a=JSON.stringify(De(r)),o=b.useRef(!1);return qe(()=>{o.current=!0}),b.useCallback((r,s={})=>{if(j(o.current,Ke),!o.current)return;if(typeof r==`number`){n.go(r);return}let c=Oe(r,JSON.parse(a),i,s.relative===`path`);e==null&&t!==`/`&&(c.pathname=c.pathname===`/`?t:ke([t,c.pathname])),(s.replace?n.replace:n.push)(c,s.state,s)},[t,n,a,i,e])}var Xe=b.createContext(null);function Ze(e){let t=b.useContext(Ve).outlet;return b.useMemo(()=>t&&b.createElement(Xe.Provider,{value:e},t),[t,e])}function Qe(){let{matches:e}=b.useContext(Ve),t=e[e.length-1];return t?t.params:{}}function $e(e,{relative:t}={}){let{matches:n}=b.useContext(Ve),{pathname:r}=Ge(),i=JSON.stringify(De(n));return b.useMemo(()=>Oe(e,JSON.parse(i),r,t===`path`),[e,i,r,t])}function et(e,t){return tt(e,t)}function tt(e,t,n,r,i){A(We(),`useRoutes() may be used only in the context of a <Router> component.`);let{navigator:a}=b.useContext(ze),{matches:o}=b.useContext(Ve),s=o[o.length-1],c=s?s.params:{},l=s?s.pathname:`/`,u=s?s.pathnameBase:`/`,d=s&&s.route;{let e=d&&d.path||``;vt(l,!d||e.endsWith(`*`)||e.endsWith(`*?`),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${l}" (under <Route path="${e}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${e}"> to <Route path="${e===`/`?`*`:`${e}/*`}">.`)}let f=Ge(),p;if(t){let e=typeof t==`string`?N(t):t;A(u===`/`||e.pathname?.startsWith(u),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${u}" but pathname "${e.pathname}" was given in the \`location\` prop.`),p=e}else p=f;let m=p.pathname||`/`,h=m;if(u!==`/`){let e=u.replace(/^\//,``).split(`/`);h=`/`+m.replace(/^\//,``).split(`/`).slice(e.length).join(`/`)}let g=ie(e,{pathname:h});j(d||g!=null,`No routes matched location "${p.pathname}${p.search}${p.hash}" `),j(g==null||g[g.length-1].route.element!==void 0||g[g.length-1].route.Component!==void 0||g[g.length-1].route.lazy!==void 0,`Matched leaf route at location "${p.pathname}${p.search}${p.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let _=ot(g&&g.map(e=>Object.assign({},e,{params:Object.assign({},c,e.params),pathname:ke([u,a.encodeLocation?a.encodeLocation(e.pathname.replace(/\?/g,`%3F`).replace(/#/g,`%23`)).pathname:e.pathname]),pathnameBase:e.pathnameBase===`/`?u:ke([u,a.encodeLocation?a.encodeLocation(e.pathnameBase.replace(/\?/g,`%3F`).replace(/#/g,`%23`)).pathname:e.pathnameBase])})),o,n,r,i);return t&&_?b.createElement(Be.Provider,{value:{location:{pathname:`/`,search:``,hash:``,state:null,key:`default`,...p},navigationType:`POP`}},_):_}function nt(){let e=ht(),t=Ne(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,r=`rgba(200,200,200, 0.5)`,i={padding:`0.5rem`,backgroundColor:r},a={padding:`2px 4px`,backgroundColor:r},o=null;return console.error(`Error handled by React Router default ErrorBoundary:`,e),o=b.createElement(b.Fragment,null,b.createElement(`p`,null,`💿 Hey developer 👋`),b.createElement(`p`,null,`You can provide a way better UX than this when your app throws errors by providing your own `,b.createElement(`code`,{style:a},`ErrorBoundary`),` or`,` `,b.createElement(`code`,{style:a},`errorElement`),` prop on your route.`)),b.createElement(b.Fragment,null,b.createElement(`h2`,null,`Unexpected Application Error!`),b.createElement(`h3`,{style:{fontStyle:`italic`}},t),n?b.createElement(`pre`,{style:i},n):null,o)}var rt=b.createElement(nt,null),it=class extends b.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!==`idle`&&e.revalidation===`idle`?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error===void 0?t.error:e.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){this.props.unstable_onError?this.props.unstable_onError(e,t):console.error(`React Router caught the following error during render`,e)}render(){return this.state.error===void 0?this.props.children:b.createElement(Ve.Provider,{value:this.props.routeContext},b.createElement(He.Provider,{value:this.state.error,children:this.props.component}))}};function at({routeContext:e,match:t,children:n}){let r=b.useContext(Pe);return r&&r.static&&r.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=t.route.id),b.createElement(Ve.Provider,{value:e},n)}function ot(e,t=[],n=null,r=null,i=null){if(e==null){if(!n)return null;if(n.errors)e=n.matches;else if(t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let a=e,o=n?.errors;if(o!=null){let e=a.findIndex(e=>e.route.id&&o?.[e.route.id]!==void 0);A(e>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(o).join(`,`)}`),a=a.slice(0,Math.min(a.length,e+1))}let s=!1,c=-1;if(n)for(let e=0;e<a.length;e++){let t=a[e];if((t.route.HydrateFallback||t.route.hydrateFallbackElement)&&(c=e),t.route.id){let{loaderData:e,errors:r}=n,i=t.route.loader&&!e.hasOwnProperty(t.route.id)&&(!r||r[t.route.id]===void 0);if(t.route.lazy||i){s=!0,a=c>=0?a.slice(0,c+1):[a[0]];break}}}return a.reduceRight((e,i,l)=>{let u,d=!1,f=null,p=null;n&&(u=o&&i.route.id?o[i.route.id]:void 0,f=i.route.errorElement||rt,s&&(c<0&&l===0?(vt(`route-fallback`,!1,"No `HydrateFallback` element provided to render during initial hydration"),d=!0,p=null):c===l&&(d=!0,p=i.route.hydrateFallbackElement||null)));let m=t.concat(a.slice(0,l+1)),h=()=>{let t;return t=u?f:d?p:i.route.Component?b.createElement(i.route.Component,null):i.route.element?i.route.element:e,b.createElement(at,{match:i,routeContext:{outlet:e,matches:m,isDataRoute:n!=null},children:t})};return n&&(i.route.ErrorBoundary||i.route.errorElement||l===0)?b.createElement(it,{location:n.location,revalidation:n.revalidation,component:f,error:u,children:h(),routeContext:{outlet:null,matches:m,isDataRoute:!0},unstable_onError:r}):h()},null)}function st(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function ct(e){let t=b.useContext(Pe);return A(t,st(e)),t}function lt(e){let t=b.useContext(Fe);return A(t,st(e)),t}function ut(e){let t=b.useContext(Ve);return A(t,st(e)),t}function dt(e){let t=ut(e),n=t.matches[t.matches.length-1];return A(n.route.id,`${e} can only be used on routes that contain a unique "id"`),n.route.id}function ft(){return dt(`useRouteId`)}function pt(){return lt(`useNavigation`).navigation}function mt(){let{matches:e,loaderData:t}=lt(`useMatches`);return b.useMemo(()=>e.map(e=>oe(e,t)),[e,t])}function ht(){let e=b.useContext(He),t=lt(`useRouteError`),n=dt(`useRouteError`);return e===void 0?t.errors?.[n]:e}function gt(){let{router:e}=ct(`useNavigate`),t=dt(`useNavigate`),n=b.useRef(!1);return qe(()=>{n.current=!0}),b.useCallback(async(r,i={})=>{j(n.current,Ke),n.current&&(typeof r==`number`?e.navigate(r):await e.navigate(r,{fromRouteId:t,...i}))},[e,t])}var _t={};function vt(e,t,n){!t&&!_t[e]&&(_t[e]=!0,j(!1,n))}b.memo(yt);function yt({routes:e,future:t,state:n,unstable_onError:r}){return tt(e,void 0,n,r,t)}function bt(e){return Ze(e.context)}function I(e){A(!1,`A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.`)}function xt({basename:e=`/`,children:t=null,location:n,navigationType:r=`POP`,navigator:i,static:a=!1}){A(!We(),`You cannot render a <Router> inside another <Router>. You should never have more than one in your app.`);let o=e.replace(/^\/*/,`/`),s=b.useMemo(()=>({basename:o,navigator:i,static:a,future:{}}),[o,i,a]);typeof n==`string`&&(n=N(n));let{pathname:c=`/`,search:l=``,hash:u=``,state:d=null,key:f=`default`}=n,p=b.useMemo(()=>{let e=Se(c,o);return e==null?null:{location:{pathname:e,search:l,hash:u,state:d,key:f},navigationType:r}},[o,c,l,u,d,f,r]);return j(p!=null,`<Router basename="${o}"> is not able to match the URL "${c}${l}${u}" because it does not start with the basename, so the <Router> won't render anything.`),p==null?null:b.createElement(ze.Provider,{value:s},b.createElement(Be.Provider,{children:t,value:p}))}function St({children:e,location:t}){return et(Ct(e),t)}function Ct(e,t=[]){let n=[];return b.Children.forEach(e,(e,r)=>{if(!b.isValidElement(e))return;let i=[...t,r];if(e.type===b.Fragment){n.push.apply(n,Ct(e.props.children,i));return}A(e.type===I,`[${typeof e.type==`string`?e.type:e.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),A(!e.props.index||!e.props.children,`An index route cannot have child routes.`);let a={id:e.props.id||i.join(`-`),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,middleware:e.props.middleware,loader:e.props.loader,action:e.props.action,hydrateFallbackElement:e.props.hydrateFallbackElement,HydrateFallback:e.props.HydrateFallback,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:e.props.hasErrorBoundary===!0||e.props.ErrorBoundary!=null||e.props.errorElement!=null,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(a.children=Ct(e.props.children,i)),n.push(a)}),n}var wt=`get`,Tt=`application/x-www-form-urlencoded`;function Et(e){return e!=null&&typeof e.tagName==`string`}function Dt(e){return Et(e)&&e.tagName.toLowerCase()===`button`}function Ot(e){return Et(e)&&e.tagName.toLowerCase()===`form`}function kt(e){return Et(e)&&e.tagName.toLowerCase()===`input`}function At(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function jt(e,t){return e.button===0&&(!t||t===`_self`)&&!At(e)}var Mt=null;function Nt(){if(Mt===null)try{new FormData(document.createElement(`form`),0),Mt=!1}catch{Mt=!0}return Mt}var Pt=new Set([`application/x-www-form-urlencoded`,`multipart/form-data`,`text/plain`]);function Ft(e){return e!=null&&!Pt.has(e)?(j(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Tt}"`),null):e}function It(e,t){let n,r,i,a,o;if(Ot(e)){let o=e.getAttribute(`action`);r=o?Se(o,t):null,n=e.getAttribute(`method`)||wt,i=Ft(e.getAttribute(`enctype`))||Tt,a=new FormData(e)}else if(Dt(e)||kt(e)&&(e.type===`submit`||e.type===`image`)){let o=e.form;if(o==null)throw Error(`Cannot submit a <button> or <input type="submit"> without a <form>`);let s=e.getAttribute(`formaction`)||o.getAttribute(`action`);if(r=s?Se(s,t):null,n=e.getAttribute(`formmethod`)||o.getAttribute(`method`)||wt,i=Ft(e.getAttribute(`formenctype`))||Ft(o.getAttribute(`enctype`))||Tt,a=new FormData(o,e),!Nt()){let{name:t,type:n,value:r}=e;if(n===`image`){let e=t?`${t}.`:``;a.append(`${e}x`,`0`),a.append(`${e}y`,`0`)}else t&&a.append(t,r)}}else if(Et(e))throw Error(`Cannot submit element that is not <form>, <button>, or <input type="submit|image">`);else n=wt,r=null,i=Tt,o=e;return a&&i===`text/plain`&&(o=a,a=void 0),{action:r,method:n.toLowerCase(),encType:i,formData:a,body:o}}Object.getOwnPropertyNames(Object.prototype).sort().join(`\0`);function Lt(e,t){if(e===!1||e==null)throw Error(t)}function Rt(e,t,n){let r=typeof e==`string`?new URL(e,typeof window>`u`?`server://singlefetch/`:window.location.origin):e;return r.pathname===`/`?r.pathname=`_root.${n}`:t&&Se(r.pathname,t)===`/`?r.pathname=`${t.replace(/\/$/,``)}/_root.${n}`:r.pathname=`${r.pathname.replace(/\/$/,``)}.${n}`,r}async function zt(e,t){if(e.id in t)return t[e.id];try{let n=await D(()=>import(e.module),[]);return t[e.id]=n,n}catch(t){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function Bt(e){return e!=null&&typeof e.page==`string`}function Vt(e){return e==null?!1:e.href==null?e.rel===`preload`&&typeof e.imageSrcSet==`string`&&typeof e.imageSizes==`string`:typeof e.rel==`string`&&typeof e.href==`string`}async function Ht(e,t,n){let r=await Promise.all(e.map(async e=>{let r=t.routes[e.route.id];if(r){let e=await zt(r,n);return e.links?e.links():[]}return[]}));return qt(r.flat(1).filter(Vt).filter(e=>e.rel===`stylesheet`||e.rel===`preload`).map(e=>e.rel===`stylesheet`?{...e,rel:`prefetch`,as:`style`}:{...e,rel:`prefetch`}))}function Ut(e,t,n,r,i,a){let o=(e,t)=>n[t]?e.route.id!==n[t].route.id:!0,s=(e,t)=>n[t].pathname!==e.pathname||n[t].route.path?.endsWith(`*`)&&n[t].params[`*`]!==e.params[`*`];return a===`assets`?t.filter((e,t)=>o(e,t)||s(e,t)):a===`data`?t.filter((t,a)=>{let c=r.routes[t.route.id];if(!c||!c.hasLoader)return!1;if(o(t,a)||s(t,a))return!0;if(t.route.shouldRevalidate){let r=t.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:n[0]?.params||{},nextUrl:new URL(e,window.origin),nextParams:t.params,defaultShouldRevalidate:!0});if(typeof r==`boolean`)return r}return!0}):[]}function Wt(e,t,{includeHydrateFallback:n}={}){return Gt(e.map(e=>{let r=t.routes[e.route.id];if(!r)return[];let i=[r.module];return r.clientActionModule&&(i=i.concat(r.clientActionModule)),r.clientLoaderModule&&(i=i.concat(r.clientLoaderModule)),n&&r.hydrateFallbackModule&&(i=i.concat(r.hydrateFallbackModule)),r.imports&&(i=i.concat(r.imports)),i}).flat(1))}function Gt(e){return[...new Set(e)]}function Kt(e){let t={},n=Object.keys(e).sort();for(let r of n)t[r]=e[r];return t}function qt(e,t){let n=new Set,r=new Set(t);return e.reduce((e,i)=>{if(t&&!Bt(i)&&i.as===`script`&&i.href&&r.has(i.href))return e;let a=JSON.stringify(Kt(i));return n.has(a)||(n.add(a),e.push({key:a,link:i})),e},[])}function Jt(){let e=b.useContext(Pe);return Lt(e,`You must render this element inside a <DataRouterContext.Provider> element`),e}function Yt(){let e=b.useContext(Fe);return Lt(e,`You must render this element inside a <DataRouterStateContext.Provider> element`),e}var Xt=b.createContext(void 0);Xt.displayName=`FrameworkContext`;function Zt(){let e=b.useContext(Xt);return Lt(e,`You must render this element inside a <HydratedRouter> element`),e}function Qt(e,t){let n=b.useContext(Xt),[r,i]=b.useState(!1),[a,o]=b.useState(!1),{onFocus:s,onBlur:c,onMouseEnter:l,onMouseLeave:u,onTouchStart:d}=t,f=b.useRef(null);b.useEffect(()=>{if(e===`render`&&o(!0),e===`viewport`){let e=new IntersectionObserver(e=>{e.forEach(e=>{o(e.isIntersecting)})},{threshold:.5});return f.current&&e.observe(f.current),()=>{e.disconnect()}}},[e]),b.useEffect(()=>{if(r){let e=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(e)}}},[r]);let p=()=>{i(!0)},m=()=>{i(!1),o(!1)};return n?e===`intent`?[a,f,{onFocus:$t(s,p),onBlur:$t(c,m),onMouseEnter:$t(l,p),onMouseLeave:$t(u,m),onTouchStart:$t(d,p)}]:[a,f,{}]:[!1,f,{}]}function $t(e,t){return n=>{e&&e(n),n.defaultPrevented||t(n)}}function en({page:e,...t}){let{router:n}=Jt(),r=b.useMemo(()=>ie(n.routes,e,n.basename),[n.routes,e,n.basename]);return r?b.createElement(nn,{page:e,matches:r,...t}):null}function tn(e){let{manifest:t,routeModules:n}=Zt(),[r,i]=b.useState([]);return b.useEffect(()=>{let r=!1;return Ht(e,t,n).then(e=>{r||i(e)}),()=>{r=!0}},[e,t,n]),r}function nn({page:e,matches:t,...n}){let r=Ge(),{manifest:i,routeModules:a}=Zt(),{basename:o}=Jt(),{loaderData:s,matches:c}=Yt(),l=b.useMemo(()=>Ut(e,t,c,i,r,`data`),[e,t,c,i,r]),u=b.useMemo(()=>Ut(e,t,c,i,r,`assets`),[e,t,c,i,r]),d=b.useMemo(()=>{if(e===r.pathname+r.search+r.hash)return[];let n=new Set,c=!1;if(t.forEach(e=>{let t=i.routes[e.route.id];!t||!t.hasLoader||(!l.some(t=>t.route.id===e.route.id)&&e.route.id in s&&a[e.route.id]?.shouldRevalidate||t.hasClientLoader?c=!0:n.add(e.route.id))}),n.size===0)return[];let u=Rt(e,o,`data`);return c&&n.size>0&&u.searchParams.set(`_routes`,t.filter(e=>n.has(e.route.id)).map(e=>e.route.id).join(`,`)),[u.pathname+u.search]},[o,s,r,i,l,t,e,a]),f=b.useMemo(()=>Wt(u,i),[u,i]),p=tn(u);return b.createElement(b.Fragment,null,d.map(e=>b.createElement(`link`,{key:e,rel:`prefetch`,as:`fetch`,href:e,...n})),f.map(e=>b.createElement(`link`,{key:e,rel:`modulepreload`,href:e,...n})),p.map(({key:e,link:t})=>b.createElement(`link`,{key:e,nonce:n.nonce,...t})))}function rn(...e){return t=>{e.forEach(e=>{typeof e==`function`?e(t):e!=null&&(e.current=t)})}}var an=typeof window<`u`&&window.document!==void 0&&window.document.createElement!==void 0;try{an&&(window.__reactRouterVersion=`7.9.4`)}catch{}function on({basename:e,children:t,window:n}){let r=b.useRef();r.current??=k({window:n,v5Compat:!0});let i=r.current,[a,o]=b.useState({action:i.action,location:i.location}),s=b.useCallback(e=>{b.startTransition(()=>o(e))},[o]);return b.useLayoutEffect(()=>i.listen(s),[i,s]),b.createElement(xt,{basename:e,children:t,location:a.location,navigationType:a.action,navigator:i})}function sn({basename:e,children:t,history:n}){let[r,i]=b.useState({action:n.action,location:n.location}),a=b.useCallback(e=>{b.startTransition(()=>i(e))},[i]);return b.useLayoutEffect(()=>n.listen(a),[n,a]),b.createElement(xt,{basename:e,children:t,location:r.location,navigationType:r.action,navigator:n})}sn.displayName=`unstable_HistoryRouter`;var cn=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,L=b.forwardRef(function({onClick:e,discover:t=`render`,prefetch:n=`none`,relative:r,reloadDocument:i,replace:a,state:o,target:s,to:c,preventScrollReset:l,viewTransition:u,...d},f){let{basename:p}=b.useContext(ze),m=typeof c==`string`&&cn.test(c),h,g=!1;if(typeof c==`string`&&m&&(h=c,an))try{let e=new URL(window.location.href),t=c.startsWith(`//`)?new URL(e.protocol+c):new URL(c),n=Se(t.pathname,p);t.origin===e.origin&&n!=null?c=n+t.search+t.hash:g=!0}catch{j(!1,`<Link to="${c}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let _=Ue(c,{relative:r}),[v,y,x]=Qt(n,d),S=hn(c,{replace:a,state:o,target:s,preventScrollReset:l,relative:r,viewTransition:u});function C(t){e&&e(t),t.defaultPrevented||S(t)}let w=b.createElement(`a`,{...d,...x,href:h||_,onClick:g||i?e:C,ref:rn(f,y),target:s,"data-discover":!m&&t===`render`?`true`:void 0});return v&&!m?b.createElement(b.Fragment,null,w,b.createElement(en,{page:_})):w});L.displayName=`Link`;var ln=b.forwardRef(function({"aria-current":e=`page`,caseSensitive:t=!1,className:n=``,end:r=!1,style:i,to:a,viewTransition:o,children:s,...c},l){let u=$e(a,{relative:c.relative}),d=Ge(),f=b.useContext(Fe),{navigator:p,basename:m}=b.useContext(ze),h=f!=null&&Tn(u)&&o===!0,g=p.encodeLocation?p.encodeLocation(u).pathname:u.pathname,_=d.pathname,v=f&&f.navigation&&f.navigation.location?f.navigation.location.pathname:null;t||(_=_.toLowerCase(),v=v?v.toLowerCase():null,g=g.toLowerCase()),v&&m&&(v=Se(v,m)||v);let y=g!==`/`&&g.endsWith(`/`)?g.length-1:g.length,x=_===g||!r&&_.startsWith(g)&&_.charAt(y)===`/`,S=v!=null&&(v===g||!r&&v.startsWith(g)&&v.charAt(g.length)===`/`),C={isActive:x,isPending:S,isTransitioning:h},w=x?e:void 0,T;T=typeof n==`function`?n(C):[n,x?`active`:null,S?`pending`:null,h?`transitioning`:null].filter(Boolean).join(` `);let E=typeof i==`function`?i(C):i;return b.createElement(L,{...c,"aria-current":w,className:T,ref:l,style:E,to:a,viewTransition:o},typeof s==`function`?s(C):s)});ln.displayName=`NavLink`;var un=b.forwardRef(({discover:e=`render`,fetcherKey:t,navigate:n,reloadDocument:r,replace:i,state:a,method:o=wt,action:s,onSubmit:c,relative:l,preventScrollReset:u,viewTransition:d,...f},p)=>{let m=vn(),h=yn(s,{relative:l}),g=o.toLowerCase()===`get`?`get`:`post`,_=typeof s==`string`&&cn.test(s);return b.createElement(`form`,{ref:p,method:g,action:h,onSubmit:r?c:e=>{if(c&&c(e),e.defaultPrevented)return;e.preventDefault();let r=e.nativeEvent.submitter,s=r?.getAttribute(`formmethod`)||o;m(r||e.currentTarget,{fetcherKey:t,method:s,navigate:n,replace:i,state:a,relative:l,preventScrollReset:u,viewTransition:d})},...f,"data-discover":!_&&e===`render`?`true`:void 0})});un.displayName=`Form`;function dn({getKey:e,storageKey:t,...n}){let r=b.useContext(Xt),{basename:i}=b.useContext(ze),a=Ge(),o=mt();Cn({getKey:e,storageKey:t});let s=b.useMemo(()=>{if(!r||!e)return null;let t=Sn(a,o,i,e);return t===a.key?null:t},[]);if(!r||r.isSpaMode)return null;let c=((e,t)=>{if(!window.history.state||!window.history.state.key){let e=Math.random().toString(32).slice(2);window.history.replaceState({key:e},``)}try{let n=JSON.parse(sessionStorage.getItem(e)||`{}`)[t||window.history.state.key];typeof n==`number`&&window.scrollTo(0,n)}catch(t){console.error(t),sessionStorage.removeItem(e)}}).toString();return b.createElement(`script`,{...n,suppressHydrationWarning:!0,dangerouslySetInnerHTML:{__html:`(${c})(${JSON.stringify(t||bn)}, ${JSON.stringify(s)})`}})}dn.displayName=`ScrollRestoration`;function fn(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function pn(e){let t=b.useContext(Pe);return A(t,fn(e)),t}function mn(e){let t=b.useContext(Fe);return A(t,fn(e)),t}function hn(e,{target:t,replace:n,state:r,preventScrollReset:i,relative:a,viewTransition:o}={}){let s=Je(),c=Ge(),l=$e(e,{relative:a});return b.useCallback(u=>{if(jt(u,t)){u.preventDefault();let t=n===void 0?M(c)===M(l):n;s(e,{replace:t,state:r,preventScrollReset:i,relative:a,viewTransition:o})}},[c,s,l,n,r,t,e,i,a,o])}var gn=0,_n=()=>`__${String(++gn)}__`;function vn(){let{router:e}=pn(`useSubmit`),{basename:t}=b.useContext(ze),n=ft();return b.useCallback(async(r,i={})=>{let{action:a,method:o,encType:s,formData:c,body:l}=It(r,t);if(i.navigate===!1){let t=i.fetcherKey||_n();await e.fetch(t,n,i.action||a,{preventScrollReset:i.preventScrollReset,formData:c,body:l,formMethod:i.method||o,formEncType:i.encType||s,flushSync:i.flushSync})}else await e.navigate(i.action||a,{preventScrollReset:i.preventScrollReset,formData:c,body:l,formMethod:i.method||o,formEncType:i.encType||s,replace:i.replace,state:i.state,fromRouteId:n,flushSync:i.flushSync,viewTransition:i.viewTransition})},[e,t,n])}function yn(e,{relative:t}={}){let{basename:n}=b.useContext(ze),r=b.useContext(Ve);A(r,`useFormAction must be used inside a RouteContext`);let[i]=r.matches.slice(-1),a={...$e(e||`.`,{relative:t})},o=Ge();if(e==null){a.search=o.search;let e=new URLSearchParams(a.search),t=e.getAll(`index`);if(t.some(e=>e===``)){e.delete(`index`),t.filter(e=>e).forEach(t=>e.append(`index`,t));let n=e.toString();a.search=n?`?${n}`:``}}return(!e||e===`.`)&&i.route.index&&(a.search=a.search?a.search.replace(/^\?/,`?index&`):`?index`),n!==`/`&&(a.pathname=a.pathname===`/`?n:ke([n,a.pathname])),M(a)}var bn=`react-router-scroll-positions`,xn={};function Sn(e,t,n,r){let i=null;return r&&(i=r(n===`/`?e:{...e,pathname:Se(e.pathname,n)||e.pathname},t)),i??=e.key,i}function Cn({getKey:e,storageKey:t}={}){let{router:n}=pn(`useScrollRestoration`),{restoreScrollPosition:r,preventScrollReset:i}=mn(`useScrollRestoration`),{basename:a}=b.useContext(ze),o=Ge(),s=mt(),c=pt();b.useEffect(()=>(window.history.scrollRestoration=`manual`,()=>{window.history.scrollRestoration=`auto`}),[]),wn(b.useCallback(()=>{if(c.state===`idle`){let t=Sn(o,s,a,e);xn[t]=window.scrollY}try{sessionStorage.setItem(t||bn,JSON.stringify(xn))}catch(e){j(!1,`Failed to save scroll positions in sessionStorage, <ScrollRestoration /> will not work properly (${e}).`)}window.history.scrollRestoration=`auto`},[c.state,e,a,o,s,t])),typeof document<`u`&&(b.useLayoutEffect(()=>{try{let e=sessionStorage.getItem(t||bn);e&&(xn=JSON.parse(e))}catch{}},[t]),b.useLayoutEffect(()=>{let t=n?.enableScrollRestoration(xn,()=>window.scrollY,e?(t,n)=>Sn(t,n,a,e):void 0);return()=>t&&t()},[n,a,e]),b.useLayoutEffect(()=>{if(r!==!1){if(typeof r==`number`){window.scrollTo(0,r);return}try{if(o.hash){let e=document.getElementById(decodeURIComponent(o.hash.slice(1)));if(e){e.scrollIntoView();return}}}catch{j(!1,`"${o.hash.slice(1)}" is not a decodable element ID. The view will not scroll to it.`)}i!==!0&&window.scrollTo(0,0)}},[o,r,i]))}function wn(e,t){let{capture:n}=t||{};b.useEffect(()=>{let t=n==null?void 0:{capture:n};return window.addEventListener(`pagehide`,e,t),()=>{window.removeEventListener(`pagehide`,e,t)}},[e,n])}function Tn(e,{relative:t}={}){let n=b.useContext(Ie);A(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=pn(`useViewTransitionState`),i=$e(e,{relative:t});if(!n.isTransitioning)return!1;let a=Se(n.currentLocation.pathname,r)||n.currentLocation.pathname,o=Se(n.nextLocation.pathname,r)||n.nextLocation.pathname;return ye(i.pathname,o)!=null||ye(i.pathname,a)!=null}var En=e=>{let t,n=new Set,r=(e,r)=>{let i=typeof e==`function`?e(t):e;if(!Object.is(i,t)){let e=t;t=r??(typeof i!=`object`||!i)?i:Object.assign({},t,i),n.forEach(n=>n(t,e))}},i=()=>t,a={setState:r,getState:i,getInitialState:()=>o,subscribe:e=>(n.add(e),()=>n.delete(e))},o=t=e(r,i,a);return a},Dn=(e=>e?En(e):En),On=e=>e;function kn(e,t=On){let n=b.useSyncExternalStore(e.subscribe,b.useCallback(()=>t(e.getState()),[e,t]),b.useCallback(()=>t(e.getInitialState()),[e,t]));return b.useDebugValue(n),n}var An=e=>{let t=Dn(e),n=e=>kn(t,e);return Object.assign(n,t),n},jn=(e=>e?An(e):An),Mn=Symbol.for(`immer-nothing`),Nn=Symbol.for(`immer-draftable`),Pn=Symbol.for(`immer-state`);function Fn(e,...t){throw Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var In=Object.getPrototypeOf;function Ln(e){return!!e&&!!e[Pn]}function Rn(e){return e?Bn(e)||Array.isArray(e)||!!e[Nn]||!!e.constructor?.[Nn]||Kn(e)||qn(e):!1}var zn=Object.prototype.constructor.toString();function Bn(e){if(!e||typeof e!=`object`)return!1;let t=In(e);if(t===null)return!0;let n=Object.hasOwnProperty.call(t,`constructor`)&&t.constructor;return n===Object?!0:typeof n==`function`&&Function.toString.call(n)===zn}function Vn(e,t){Hn(e)===0?Reflect.ownKeys(e).forEach(n=>{t(n,e[n],e)}):e.forEach((n,r)=>t(r,n,e))}function Hn(e){let t=e[Pn];return t?t.type_:Array.isArray(e)?1:Kn(e)?2:qn(e)?3:0}function Un(e,t){return Hn(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function Wn(e,t,n){let r=Hn(e);r===2?e.set(t,n):r===3?e.add(n):e[t]=n}function Gn(e,t){return e===t?e!==0||1/e==1/t:e!==e&&t!==t}function Kn(e){return e instanceof Map}function qn(e){return e instanceof Set}function Jn(e){return e.copy_||e.base_}function Yn(e,t){if(Kn(e))return new Map(e);if(qn(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);let n=Bn(e);if(t===!0||t===`class_only`&&!n){let t=Object.getOwnPropertyDescriptors(e);delete t[Pn];let n=Reflect.ownKeys(t);for(let r=0;r<n.length;r++){let i=n[r],a=t[i];a.writable===!1&&(a.writable=!0,a.configurable=!0),(a.get||a.set)&&(t[i]={configurable:!0,writable:!0,enumerable:a.enumerable,value:e[i]})}return Object.create(In(e),t)}else{let t=In(e);if(t!==null&&n)return{...e};let r=Object.create(t);return Object.assign(r,e)}}function Xn(e,t=!1){return Qn(e)||Ln(e)||!Rn(e)?e:(Hn(e)>1&&Object.defineProperties(e,{set:{value:Zn},add:{value:Zn},clear:{value:Zn},delete:{value:Zn}}),Object.freeze(e),t&&Object.values(e).forEach(e=>Xn(e,!0)),e)}function Zn(){Fn(2)}function Qn(e){return Object.isFrozen(e)}var $n={};function er(e){let t=$n[e];return t||Fn(0,e),t}var tr;function nr(){return tr}function rr(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function ir(e,t){t&&(er(`Patches`),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function ar(e){or(e),e.drafts_.forEach(cr),e.drafts_=null}function or(e){e===tr&&(tr=e.parent_)}function sr(e){return tr=rr(tr,e)}function cr(e){let t=e[Pn];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function lr(e,t){t.unfinalizedDrafts_=t.drafts_.length;let n=t.drafts_[0];return e!==void 0&&e!==n?(n[Pn].modified_&&(ar(t),Fn(4)),Rn(e)&&(e=ur(t,e),t.parent_||fr(t,e)),t.patches_&&er(`Patches`).generateReplacementPatches_(n[Pn].base_,e,t.patches_,t.inversePatches_)):e=ur(t,n,[]),ar(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e===Mn?void 0:e}function ur(e,t,n){if(Qn(t))return t;let r=t[Pn];if(!r)return Vn(t,(i,a)=>dr(e,r,t,i,a,n)),t;if(r.scope_!==e)return t;if(!r.modified_)return fr(e,r.base_,!0),r.base_;if(!r.finalized_){r.finalized_=!0,r.scope_.unfinalizedDrafts_--;let t=r.copy_,i=t,a=!1;r.type_===3&&(i=new Set(t),t.clear(),a=!0),Vn(i,(i,o)=>dr(e,r,t,i,o,n,a)),fr(e,t,!1),n&&e.patches_&&er(`Patches`).generatePatches_(r,n,e.patches_,e.inversePatches_)}return r.copy_}function dr(e,t,n,r,i,a,o){if(Ln(i)){let o=a&&t&&t.type_!==3&&!Un(t.assigned_,r)?a.concat(r):void 0,s=ur(e,i,o);if(Wn(n,r,s),Ln(s))e.canAutoFreeze_=!1;else return}else o&&n.add(i);if(Rn(i)&&!Qn(i)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;ur(e,i),(!t||!t.scope_.parent_)&&typeof r!=`symbol`&&(Kn(n)?n.has(r):Object.prototype.propertyIsEnumerable.call(n,r))&&fr(e,i)}}function fr(e,t,n=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&Xn(t,n)}function pr(e,t){let n=Array.isArray(e),r={type_:n?1:0,scope_:t?t.scope_:nr(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1},i=r,a=mr;n&&(i=[r],a=hr);let{revoke:o,proxy:s}=Proxy.revocable(i,a);return r.draft_=s,r.revoke_=o,s}var mr={get(e,t){if(t===Pn)return e;let n=Jn(e);if(!Un(n,t))return _r(e,n,t);let r=n[t];return e.finalized_||!Rn(r)?r:r===gr(e.base_,t)?(br(e),e.copy_[t]=Sr(r,e)):r},has(e,t){return t in Jn(e)},ownKeys(e){return Reflect.ownKeys(Jn(e))},set(e,t,n){let r=vr(Jn(e),t);if(r?.set)return r.set.call(e.draft_,n),!0;if(!e.modified_){let r=gr(Jn(e),t),i=r?.[Pn];if(i&&i.base_===n)return e.copy_[t]=n,e.assigned_[t]=!1,!0;if(Gn(n,r)&&(n!==void 0||Un(e.base_,t)))return!0;br(e),yr(e)}return e.copy_[t]===n&&(n!==void 0||t in e.copy_)||Number.isNaN(n)&&Number.isNaN(e.copy_[t])?!0:(e.copy_[t]=n,e.assigned_[t]=!0,!0)},deleteProperty(e,t){return gr(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,br(e),yr(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){let n=Jn(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r&&{writable:!0,configurable:e.type_!==1||t!==`length`,enumerable:r.enumerable,value:n[t]}},defineProperty(){Fn(11)},getPrototypeOf(e){return In(e.base_)},setPrototypeOf(){Fn(12)}},hr={};Vn(mr,(e,t)=>{hr[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}}),hr.deleteProperty=function(e,t){return hr.set.call(this,e,t,void 0)},hr.set=function(e,t,n){return mr.set.call(this,e[0],t,n,e[0])};function gr(e,t){let n=e[Pn];return(n?Jn(n):e)[t]}function _r(e,t,n){let r=vr(t,n);return r?`value`in r?r.value:r.get?.call(e.draft_):void 0}function vr(e,t){if(!(t in e))return;let n=In(e);for(;n;){let e=Object.getOwnPropertyDescriptor(n,t);if(e)return e;n=In(n)}}function yr(e){e.modified_||(e.modified_=!0,e.parent_&&yr(e.parent_))}function br(e){e.copy_||=Yn(e.base_,e.scope_.immer_.useStrictShallowCopy_)}var xr=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(e,t,n)=>{if(typeof e==`function`&&typeof t!=`function`){let n=t;t=e;let r=this;return function(e=n,...i){return r.produce(e,e=>t.call(this,e,...i))}}typeof t!=`function`&&Fn(6),n!==void 0&&typeof n!=`function`&&Fn(7);let r;if(Rn(e)){let i=sr(this),a=Sr(e,void 0),o=!0;try{r=t(a),o=!1}finally{o?ar(i):or(i)}return ir(i,n),lr(r,i)}else if(!e||typeof e!=`object`){if(r=t(e),r===void 0&&(r=e),r===Mn&&(r=void 0),this.autoFreeze_&&Xn(r,!0),n){let t=[],i=[];er(`Patches`).generateReplacementPatches_(e,r,t,i),n(t,i)}return r}else Fn(1,e)},this.produceWithPatches=(e,t)=>{if(typeof e==`function`)return(t,...n)=>this.produceWithPatches(t,t=>e(t,...n));let n,r;return[this.produce(e,t,(e,t)=>{n=e,r=t}),n,r]},typeof e?.autoFreeze==`boolean`&&this.setAutoFreeze(e.autoFreeze),typeof e?.useStrictShallowCopy==`boolean`&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){Rn(e)||Fn(8),Ln(e)&&(e=Cr(e));let t=sr(this),n=Sr(e,void 0);return n[Pn].isManual_=!0,or(t),n}finishDraft(e,t){let n=e&&e[Pn];(!n||!n.isManual_)&&Fn(9);let{scope_:r}=n;return ir(r,t),lr(void 0,r)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let n;for(n=t.length-1;n>=0;n--){let r=t[n];if(r.path.length===0&&r.op===`replace`){e=r.value;break}}n>-1&&(t=t.slice(n+1));let r=er(`Patches`).applyPatches_;return Ln(e)?r(e,t):this.produce(e,e=>r(e,t))}};function Sr(e,t){let n=Kn(e)?er(`MapSet`).proxyMap_(e,t):qn(e)?er(`MapSet`).proxySet_(e,t):pr(e,t);return(t?t.scope_:nr()).drafts_.push(n),n}function Cr(e){return Ln(e)||Fn(10,e),wr(e)}function wr(e){if(!Rn(e)||Qn(e))return e;let t=e[Pn],n;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,n=Yn(e,t.scope_.immer_.useStrictShallowCopy_)}else n=Yn(e,!0);return Vn(n,(e,t)=>{Wn(n,e,wr(t))}),t&&(t.finalized_=!1),n}var Tr=new xr().produce,Er=e=>(t,n,r)=>(r.setState=(e,n,...r)=>{let i=typeof e==`function`?Tr(e):e;return t(i,n,...r)},e(r.setState,n,r));const Dr=e=>{let t;return t=e||(typeof fetch>`u`?(...e)=>D(async()=>{let{default:e}=await import(`./browser-B8tSOwzD.js`);return{default:e}},[]).then(({default:t})=>t(...e)):fetch),(...e)=>t(...e)};var Or=class extends Error{constructor(e,t=`FunctionsError`,n){super(e),this.name=t,this.context=n}},kr=class extends Or{constructor(e){super(`Failed to send a request to the Edge Function`,`FunctionsFetchError`,e)}},Ar=class extends Or{constructor(e){super(`Relay Error invoking the Edge Function`,`FunctionsRelayError`,e)}},jr=class extends Or{constructor(e){super(`Edge Function returned a non-2xx status code`,`FunctionsHttpError`,e)}},Mr;(function(e){e.Any=`any`,e.ApNortheast1=`ap-northeast-1`,e.ApNortheast2=`ap-northeast-2`,e.ApSouth1=`ap-south-1`,e.ApSoutheast1=`ap-southeast-1`,e.ApSoutheast2=`ap-southeast-2`,e.CaCentral1=`ca-central-1`,e.EuCentral1=`eu-central-1`,e.EuWest1=`eu-west-1`,e.EuWest2=`eu-west-2`,e.EuWest3=`eu-west-3`,e.SaEast1=`sa-east-1`,e.UsEast1=`us-east-1`,e.UsWest1=`us-west-1`,e.UsWest2=`us-west-2`})(Mr||={});var Nr=function(e,t,n,r){function i(e){return e instanceof n?e:new n(function(t){t(e)})}return new(n||=Promise)(function(n,a){function o(e){try{c(r.next(e))}catch(e){a(e)}}function s(e){try{c(r.throw(e))}catch(e){a(e)}}function c(e){e.done?n(e.value):i(e.value).then(o,s)}c((r=r.apply(e,t||[])).next())})},Pr=class{constructor(e,{headers:t={},customFetch:n,region:r=Mr.Any}={}){this.url=e,this.headers=t,this.region=r,this.fetch=Dr(n)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e){return Nr(this,arguments,void 0,function*(e,t={}){try{let{headers:n,method:r,body:i,signal:a}=t,o={},{region:s}=t;s||=this.region;let c=new URL(`${this.url}/${e}`);s&&s!==`any`&&(o[`x-region`]=s,c.searchParams.set(`forceFunctionRegion`,s));let l;i&&(n&&!Object.prototype.hasOwnProperty.call(n,`Content-Type`)||!n)&&(typeof Blob<`u`&&i instanceof Blob||i instanceof ArrayBuffer?(o[`Content-Type`]=`application/octet-stream`,l=i):typeof i==`string`?(o[`Content-Type`]=`text/plain`,l=i):typeof FormData<`u`&&i instanceof FormData?l=i:(o[`Content-Type`]=`application/json`,l=JSON.stringify(i)));let u=yield this.fetch(c.toString(),{method:r||`POST`,headers:Object.assign(Object.assign(Object.assign({},o),this.headers),n),body:l,signal:a}).catch(e=>{throw e.name===`AbortError`?e:new kr(e)}),d=u.headers.get(`x-relay-error`);if(d&&d===`true`)throw new Ar(u);if(!u.ok)throw new jr(u);let f=(u.headers.get(`Content-Type`)??`text/plain`).split(`;`)[0].trim(),p;return p=f===`application/json`?yield u.json():f===`application/octet-stream`?yield u.blob():f===`text/event-stream`?u:f===`multipart/form-data`?yield u.formData():yield u.text(),{data:p,error:null,response:u}}catch(e){return e instanceof Error&&e.name===`AbortError`?{data:null,error:new kr(e)}:{data:null,error:e,response:e instanceof jr||e instanceof Ar?e.context:void 0}}})}},Fr=c({Headers:()=>Br,Request:()=>Vr,Response:()=>Hr,default:()=>zr,fetch:()=>Rr}),Ir,Lr,Rr,zr,Br,Vr,Hr,Ur=o((()=>{Ir=function(){if(typeof self<`u`)return self;if(typeof window<`u`)return window;if(typeof global<`u`)return global;throw Error(`unable to locate global object`)},Lr=Ir(),Rr=Lr.fetch,zr=Lr.fetch.bind(Lr),Br=Lr.Headers,Vr=Lr.Request,Hr=Lr.Response})),Wr=s((exports=>{Object.defineProperty(exports,`__esModule`,{value:!0}),exports.default=class extends Error{constructor(e){super(e.message),this.name=`PostgrestError`,this.details=e.details,this.hint=e.hint,this.code=e.code}}})),Gr=s((exports=>{var t=exports&&exports.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,`__esModule`,{value:!0});var n=t((Ur(),d(Fr))),r=t(Wr());exports.default=class{constructor(e){this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=new Headers(e.headers),this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=e.shouldThrowOnError??!1,this.signal=e.signal,this.isMaybeSingle=e.isMaybeSingle??!1,e.fetch?this.fetch=e.fetch:typeof fetch>`u`?this.fetch=n.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,t){return this.headers=new Headers(this.headers),this.headers.set(e,t),this}then(e,t){this.schema===void 0||([`GET`,`HEAD`].includes(this.method)?this.headers.set(`Accept-Profile`,this.schema):this.headers.set(`Content-Profile`,this.schema)),this.method!==`GET`&&this.method!==`HEAD`&&this.headers.set(`Content-Type`,`application/json`);let n=this.fetch,i=n(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async e=>{let t=null,n=null,i=null,a=e.status,o=e.statusText;if(e.ok){if(this.method!==`HEAD`){let t=await e.text();t===``||(n=this.headers.get(`Accept`)===`text/csv`||this.headers.get(`Accept`)&&this.headers.get(`Accept`)?.includes(`application/vnd.pgrst.plan+text`)?t:JSON.parse(t))}let r=this.headers.get(`Prefer`)?.match(/count=(exact|planned|estimated)/),s=e.headers.get(`content-range`)?.split(`/`);r&&s&&s.length>1&&(i=parseInt(s[1])),this.isMaybeSingle&&this.method===`GET`&&Array.isArray(n)&&(n.length>1?(t={code:`PGRST116`,details:`Results contain ${n.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:`JSON object requested, multiple (or no) rows returned`},n=null,i=null,a=406,o=`Not Acceptable`):n=n.length===1?n[0]:null)}else{let i=await e.text();try{t=JSON.parse(i),Array.isArray(t)&&e.status===404&&(n=[],t=null,a=200,o=`OK`)}catch{e.status===404&&i===``?(a=204,o=`No Content`):t={message:i}}if(t&&this.isMaybeSingle&&(t?.details)?.includes(`0 rows`)&&(t=null,a=200,o=`OK`),t&&this.shouldThrowOnError)throw new r.default(t)}return{error:t,data:n,count:i,status:a,statusText:o}});return this.shouldThrowOnError||(i=i.catch(e=>({error:{message:`${e?.name??`FetchError`}: ${e?.message}`,details:`${e?.stack??``}`,hint:``,code:`${e?.code??``}`},data:null,count:null,status:0,statusText:``}))),i.then(e,t)}returns(){return this}overrideTypes(){return this}}})),Kr=s((exports=>{var t=exports&&exports.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,`__esModule`,{value:!0});var n=t(Gr());exports.default=class extends n.default{select(e){let t=!1,n=(e??`*`).split(``).map(e=>/\s/.test(e)&&!t?``:(e===`"`&&(t=!t),e)).join(``);return this.url.searchParams.set(`select`,n),this.headers.append(`Prefer`,`return=representation`),this}order(e,{ascending:t=!0,nullsFirst:n,foreignTable:r,referencedTable:i=r}={}){let a=i?`${i}.order`:`order`,o=this.url.searchParams.get(a);return this.url.searchParams.set(a,`${o?`${o},`:``}${e}.${t?`asc`:`desc`}${n===void 0?``:n?`.nullsfirst`:`.nullslast`}`),this}limit(e,{foreignTable:t,referencedTable:n=t}={}){let r=n===void 0?`limit`:`${n}.limit`;return this.url.searchParams.set(r,`${e}`),this}range(e,t,{foreignTable:n,referencedTable:r=n}={}){let i=r===void 0?`offset`:`${r}.offset`,a=r===void 0?`limit`:`${r}.limit`;return this.url.searchParams.set(i,`${e}`),this.url.searchParams.set(a,`${t-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.set(`Accept`,`application/vnd.pgrst.object+json`),this}maybeSingle(){return this.method===`GET`?this.headers.set(`Accept`,`application/json`):this.headers.set(`Accept`,`application/vnd.pgrst.object+json`),this.isMaybeSingle=!0,this}csv(){return this.headers.set(`Accept`,`text/csv`),this}geojson(){return this.headers.set(`Accept`,`application/geo+json`),this}explain({analyze:e=!1,verbose:t=!1,settings:n=!1,buffers:r=!1,wal:i=!1,format:a=`text`}={}){let o=[e?`analyze`:null,t?`verbose`:null,n?`settings`:null,r?`buffers`:null,i?`wal`:null].filter(Boolean).join(`|`),s=this.headers.get(`Accept`)??`application/json`;return this.headers.set(`Accept`,`application/vnd.pgrst.plan+${a}; for="${s}"; options=${o};`),this}rollback(){return this.headers.append(`Prefer`,`tx=rollback`),this}returns(){return this}maxAffected(e){return this.headers.append(`Prefer`,`handling=strict`),this.headers.append(`Prefer`,`max-affected=${e}`),this}}})),qr=s((exports=>{var t=exports&&exports.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,`__esModule`,{value:!0});var n=t(Kr());exports.default=class extends n.default{eq(e,t){return this.url.searchParams.append(e,`eq.${t}`),this}neq(e,t){return this.url.searchParams.append(e,`neq.${t}`),this}gt(e,t){return this.url.searchParams.append(e,`gt.${t}`),this}gte(e,t){return this.url.searchParams.append(e,`gte.${t}`),this}lt(e,t){return this.url.searchParams.append(e,`lt.${t}`),this}lte(e,t){return this.url.searchParams.append(e,`lte.${t}`),this}like(e,t){return this.url.searchParams.append(e,`like.${t}`),this}likeAllOf(e,t){return this.url.searchParams.append(e,`like(all).{${t.join(`,`)}}`),this}likeAnyOf(e,t){return this.url.searchParams.append(e,`like(any).{${t.join(`,`)}}`),this}ilike(e,t){return this.url.searchParams.append(e,`ilike.${t}`),this}ilikeAllOf(e,t){return this.url.searchParams.append(e,`ilike(all).{${t.join(`,`)}}`),this}ilikeAnyOf(e,t){return this.url.searchParams.append(e,`ilike(any).{${t.join(`,`)}}`),this}is(e,t){return this.url.searchParams.append(e,`is.${t}`),this}in(e,t){let n=Array.from(new Set(t)).map(e=>typeof e==`string`&&RegExp(`[,()]`).test(e)?`"${e}"`:`${e}`).join(`,`);return this.url.searchParams.append(e,`in.(${n})`),this}contains(e,t){return typeof t==`string`?this.url.searchParams.append(e,`cs.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cs.{${t.join(`,`)}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(t)}`),this}containedBy(e,t){return typeof t==`string`?this.url.searchParams.append(e,`cd.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cd.{${t.join(`,`)}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(t)}`),this}rangeGt(e,t){return this.url.searchParams.append(e,`sr.${t}`),this}rangeGte(e,t){return this.url.searchParams.append(e,`nxl.${t}`),this}rangeLt(e,t){return this.url.searchParams.append(e,`sl.${t}`),this}rangeLte(e,t){return this.url.searchParams.append(e,`nxr.${t}`),this}rangeAdjacent(e,t){return this.url.searchParams.append(e,`adj.${t}`),this}overlaps(e,t){return typeof t==`string`?this.url.searchParams.append(e,`ov.${t}`):this.url.searchParams.append(e,`ov.{${t.join(`,`)}}`),this}textSearch(e,t,{config:n,type:r}={}){let i=``;r===`plain`?i=`pl`:r===`phrase`?i=`ph`:r===`websearch`&&(i=`w`);let a=n===void 0?``:`(${n})`;return this.url.searchParams.append(e,`${i}fts${a}.${t}`),this}match(e){return Object.entries(e).forEach(([e,t])=>{this.url.searchParams.append(e,`eq.${t}`)}),this}not(e,t,n){return this.url.searchParams.append(e,`not.${t}.${n}`),this}or(e,{foreignTable:t,referencedTable:n=t}={}){let r=n?`${n}.or`:`or`;return this.url.searchParams.append(r,`(${e})`),this}filter(e,t,n){return this.url.searchParams.append(e,`${t}.${n}`),this}}})),Jr=s((exports=>{var t=exports&&exports.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,`__esModule`,{value:!0});var n=t(qr());exports.default=class{constructor(e,{headers:t={},schema:n,fetch:r}){this.url=e,this.headers=new Headers(t),this.schema=n,this.fetch=r}select(e,t){let{head:r=!1,count:i}=t??{},a=r?`HEAD`:`GET`,o=!1,s=(e??`*`).split(``).map(e=>/\s/.test(e)&&!o?``:(e===`"`&&(o=!o),e)).join(``);return this.url.searchParams.set(`select`,s),i&&this.headers.append(`Prefer`,`count=${i}`),new n.default({method:a,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(e,{count:t,defaultToNull:r=!0}={}){if(t&&this.headers.append(`Prefer`,`count=${t}`),r||this.headers.append(`Prefer`,`missing=default`),Array.isArray(e)){let t=e.reduce((e,t)=>e.concat(Object.keys(t)),[]);if(t.length>0){let e=[...new Set(t)].map(e=>`"${e}"`);this.url.searchParams.set(`columns`,e.join(`,`))}}return new n.default({method:`POST`,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch??fetch})}upsert(e,{onConflict:t,ignoreDuplicates:r=!1,count:i,defaultToNull:a=!0}={}){if(this.headers.append(`Prefer`,`resolution=${r?`ignore`:`merge`}-duplicates`),t!==void 0&&this.url.searchParams.set(`on_conflict`,t),i&&this.headers.append(`Prefer`,`count=${i}`),a||this.headers.append(`Prefer`,`missing=default`),Array.isArray(e)){let t=e.reduce((e,t)=>e.concat(Object.keys(t)),[]);if(t.length>0){let e=[...new Set(t)].map(e=>`"${e}"`);this.url.searchParams.set(`columns`,e.join(`,`))}}return new n.default({method:`POST`,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch??fetch})}update(e,{count:t}={}){return t&&this.headers.append(`Prefer`,`count=${t}`),new n.default({method:`PATCH`,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch??fetch})}delete({count:e}={}){return e&&this.headers.append(`Prefer`,`count=${e}`),new n.default({method:`DELETE`,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch??fetch})}}})),Yr=s((exports=>{var t=exports&&exports.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,`__esModule`,{value:!0});var n=t(Jr()),r=t(qr());exports.default=class e{constructor(e,{headers:t={},schema:n,fetch:r}={}){this.url=e,this.headers=new Headers(t),this.schemaName=n,this.fetch=r}from(e){let t=new URL(`${this.url}/${e}`);return new n.default(t,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(t){return new e(this.url,{headers:this.headers,schema:t,fetch:this.fetch})}rpc(e,t={},{head:n=!1,get:i=!1,count:a}={}){let o,s=new URL(`${this.url}/rpc/${e}`),c;n||i?(o=n?`HEAD`:`GET`,Object.entries(t).filter(([e,t])=>t!==void 0).map(([e,t])=>[e,Array.isArray(t)?`{${t.join(`,`)}}`:`${t}`]).forEach(([e,t])=>{s.searchParams.append(e,t)})):(o=`POST`,c=t);let l=new Headers(this.headers);return a&&l.set(`Prefer`,`count=${a}`),new r.default({method:o,url:s,headers:l,schema:this.schemaName,body:c,fetch:this.fetch??fetch})}}})),{PostgrestClient:Xr,PostgrestQueryBuilder:Zr,PostgrestFilterBuilder:Qr,PostgrestTransformBuilder:$r,PostgrestBuilder:ei,PostgrestError:ti}=u(s((exports=>{var t=exports&&exports.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,`__esModule`,{value:!0});var n=t(Yr());exports.PostgrestClient=n.default;var r=t(Jr());exports.PostgrestQueryBuilder=r.default;var i=t(qr());exports.PostgrestFilterBuilder=i.default;var a=t(Kr());exports.PostgrestTransformBuilder=a.default;var o=t(Gr());exports.PostgrestBuilder=o.default;var s=t(Wr());exports.PostgrestError=s.default,exports.default={PostgrestClient:n.default,PostgrestQueryBuilder:r.default,PostgrestFilterBuilder:i.default,PostgrestTransformBuilder:a.default,PostgrestBuilder:o.default,PostgrestError:s.default}}))(),1).default,ni=class{static detectEnvironment(){if(typeof WebSocket<`u`)return{type:`native`,constructor:WebSocket};if(typeof globalThis<`u`&&globalThis.WebSocket!==void 0)return{type:`native`,constructor:globalThis.WebSocket};if(typeof global<`u`&&global.WebSocket!==void 0)return{type:`native`,constructor:global.WebSocket};if(typeof globalThis<`u`&&globalThis.WebSocketPair!==void 0&&globalThis.WebSocket===void 0)return{type:`cloudflare`,error:`Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.`,workaround:`Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime.`};if(typeof globalThis<`u`&&globalThis.EdgeRuntime||typeof navigator<`u`&&navigator.userAgent?.includes(`Vercel-Edge`))return{type:`unsupported`,error:`Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.`,workaround:`Use serverless functions or a different deployment target for WebSocket functionality.`};if(typeof process<`u`){let e=process.versions;if(e&&e.node){let t=e.node,n=parseInt(t.replace(/^v/,``).split(`.`)[0]);return n>=22?globalThis.WebSocket===void 0?{type:`unsupported`,error:`Node.js ${n} detected but native WebSocket not found.`,workaround:`Provide a WebSocket implementation via the transport option.`}:{type:`native`,constructor:globalThis.WebSocket}:{type:`unsupported`,error:`Node.js ${n} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:`unsupported`,error:`Unknown JavaScript runtime without WebSocket support.`,workaround:`Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation.`}}static getWebSocketConstructor(){let e=this.detectEnvironment();if(e.constructor)return e.constructor;let t=e.error||`WebSocket not supported in this environment.`;throw e.workaround&&(t+=`\n\nSuggested solution: ${e.workaround}`),Error(t)}static createWebSocket(e,t){return new(this.getWebSocketConstructor())(e,t)}static isWebSocketSupported(){try{let e=this.detectEnvironment();return e.type===`native`||e.type===`ws`}catch{return!1}}};const ri=1e4;var ii;(function(e){e[e.connecting=0]=`connecting`,e[e.open=1]=`open`,e[e.closing=2]=`closing`,e[e.closed=3]=`closed`})(ii||={});var ai;(function(e){e.closed=`closed`,e.errored=`errored`,e.joined=`joined`,e.joining=`joining`,e.leaving=`leaving`})(ai||={});var oi;(function(e){e.close=`phx_close`,e.error=`phx_error`,e.join=`phx_join`,e.reply=`phx_reply`,e.leave=`phx_leave`,e.access_token=`access_token`})(oi||={});var si;(function(e){e.websocket=`websocket`})(si||={});var ci;(function(e){e.Connecting=`connecting`,e.Open=`open`,e.Closing=`closing`,e.Closed=`closed`})(ci||={});var li=class{constructor(){this.HEADER_LENGTH=1}decode(e,t){return e.constructor===ArrayBuffer?t(this._binaryDecode(e)):t(typeof e==`string`?JSON.parse(e):{})}_binaryDecode(e){let t=new DataView(e),n=new TextDecoder;return this._decodeBroadcast(e,t,n)}_decodeBroadcast(e,t,n){let r=t.getUint8(1),i=t.getUint8(2),a=this.HEADER_LENGTH+2,o=n.decode(e.slice(a,a+r));a+=r;let s=n.decode(e.slice(a,a+i));a+=i;let c=JSON.parse(n.decode(e.slice(a,e.byteLength)));return{ref:null,topic:o,event:s,payload:c}}},ui=class{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries+=1,this.callback()},this.timerCalc(this.tries+1))}},di;(function(e){e.abstime=`abstime`,e.bool=`bool`,e.date=`date`,e.daterange=`daterange`,e.float4=`float4`,e.float8=`float8`,e.int2=`int2`,e.int4=`int4`,e.int4range=`int4range`,e.int8=`int8`,e.int8range=`int8range`,e.json=`json`,e.jsonb=`jsonb`,e.money=`money`,e.numeric=`numeric`,e.oid=`oid`,e.reltime=`reltime`,e.text=`text`,e.time=`time`,e.timestamp=`timestamp`,e.timestamptz=`timestamptz`,e.timetz=`timetz`,e.tsrange=`tsrange`,e.tstzrange=`tstzrange`})(di||={});const fi=(e,t,n={})=>{let r=n.skipTypes??[];return t?Object.keys(t).reduce((n,i)=>(n[i]=pi(i,e,t,r),n),{}):{}},pi=(e,t,n,r)=>{let i=t.find(t=>t.name===e),a=i?.type,o=n[e];return a&&!r.includes(a)?mi(a,o):hi(o)},mi=(e,t)=>{if(e.charAt(0)===`_`){let n=e.slice(1,e.length);return yi(t,n)}switch(e){case di.bool:return gi(t);case di.float4:case di.float8:case di.int2:case di.int4:case di.int8:case di.numeric:case di.oid:return _i(t);case di.json:case di.jsonb:return vi(t);case di.timestamp:return bi(t);case di.abstime:case di.date:case di.daterange:case di.int4range:case di.int8range:case di.money:case di.reltime:case di.text:case di.time:case di.timestamptz:case di.timetz:case di.tsrange:case di.tstzrange:return hi(t);default:return hi(t)}};var hi=e=>e;const gi=e=>{switch(e){case`t`:return!0;case`f`:return!1;default:return e}},_i=e=>{if(typeof e==`string`){let t=parseFloat(e);if(!Number.isNaN(t))return t}return e},vi=e=>{if(typeof e==`string`)try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},yi=(e,t)=>{if(typeof e!=`string`)return e;let n=e.length-1,r=e[n];if(e[0]===`{`&&r===`}`){let r,i=e.slice(1,n);try{r=JSON.parse(`[`+i+`]`)}catch{r=i?i.split(`,`):[]}return r.map(e=>mi(t,e))}return e},bi=e=>typeof e==`string`?e.replace(` `,`T`):e,xi=e=>{let t=e;return t=t.replace(/^ws/i,`http`),t=t.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,``),t.replace(/\/+$/,``)+`/api/broadcast`};var Si=class{constructor(e,t,n={},r=ri){this.channel=e,this.event=t,this.payload=n,this.timeout=r,this.sent=!1,this.timeoutTimer=void 0,this.ref=``,this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref=``,this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived(`timeout`)||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){return this._hasReceived(e)&&t(this.receivedResp?.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){this.timeoutTimer||=(this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref),this.channel._on(this.refEvent,{},e=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=e,this._matchReceive(e)}),setTimeout(()=>{this.trigger(`timeout`,{})},this.timeout))}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:t}){this.recHooks.filter(t=>t.status===e).forEach(e=>e.callback(t))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}},Ci;(function(e){e.SYNC=`sync`,e.JOIN=`join`,e.LEAVE=`leave`})(Ci||={});var wi=class e{constructor(t,n){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};let r=n?.events||{state:`presence_state`,diff:`presence_diff`};this.channel._on(r.state,{},t=>{let{onJoin:n,onLeave:r,onSync:i}=this.caller;this.joinRef=this.channel._joinRef(),this.state=e.syncState(this.state,t,n,r),this.pendingDiffs.forEach(t=>{this.state=e.syncDiff(this.state,t,n,r)}),this.pendingDiffs=[],i()}),this.channel._on(r.diff,{},t=>{let{onJoin:n,onLeave:r,onSync:i}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(t):(this.state=e.syncDiff(this.state,t,n,r),i())}),this.onJoin((e,t,n)=>{this.channel._trigger(`presence`,{event:`join`,key:e,currentPresences:t,newPresences:n})}),this.onLeave((e,t,n)=>{this.channel._trigger(`presence`,{event:`leave`,key:e,currentPresences:t,leftPresences:n})}),this.onSync(()=>{this.channel._trigger(`presence`,{event:`sync`})})}static syncState(e,t,n,r){let i=this.cloneDeep(e),a=this.transformState(t),o={},s={};return this.map(i,(e,t)=>{a[e]||(s[e]=t)}),this.map(a,(e,t)=>{let n=i[e];if(n){let r=t.map(e=>e.presence_ref),i=n.map(e=>e.presence_ref),a=t.filter(e=>i.indexOf(e.presence_ref)<0),c=n.filter(e=>r.indexOf(e.presence_ref)<0);a.length>0&&(o[e]=a),c.length>0&&(s[e]=c)}else o[e]=t}),this.syncDiff(i,{joins:o,leaves:s},n,r)}static syncDiff(e,t,n,r){let{joins:i,leaves:a}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return n||=()=>{},r||=()=>{},this.map(i,(t,r)=>{let i=e[t]??[];if(e[t]=this.cloneDeep(r),i.length>0){let n=e[t].map(e=>e.presence_ref),r=i.filter(e=>n.indexOf(e.presence_ref)<0);e[t].unshift(...r)}n(t,i,r)}),this.map(a,(t,n)=>{let i=e[t];if(!i)return;let a=n.map(e=>e.presence_ref);i=i.filter(e=>a.indexOf(e.presence_ref)<0),e[t]=i,r(t,i,n),i.length===0&&delete e[t]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(n=>t(n,e[n]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((t,n)=>{let r=e[n];return`metas`in r?t[n]=r.metas.map(e=>(e.presence_ref=e.phx_ref,delete e.phx_ref,delete e.phx_ref_prev,e)):t[n]=r,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}},Ti;(function(e){e.ALL=`*`,e.INSERT=`INSERT`,e.UPDATE=`UPDATE`,e.DELETE=`DELETE`})(Ti||={});var Ei;(function(e){e.BROADCAST=`broadcast`,e.PRESENCE=`presence`,e.POSTGRES_CHANGES=`postgres_changes`,e.SYSTEM=`system`})(Ei||={});var Di;(function(e){e.SUBSCRIBED=`SUBSCRIBED`,e.TIMED_OUT=`TIMED_OUT`,e.CLOSED=`CLOSED`,e.CHANNEL_ERROR=`CHANNEL_ERROR`})(Di||={});var Oi=class e{constructor(e,t={config:{}},n){if(this.topic=e,this.params=t,this.socket=n,this.bindings={},this.state=ai.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,``),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:``,enabled:!1},private:!1},t.config),this.timeout=this.socket.timeout,this.joinPush=new Si(this,oi.join,this.params,this.timeout),this.rejoinTimer=new ui(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive(`ok`,()=>{this.state=ai.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(e=>e.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log(`channel`,`close ${this.topic} ${this._joinRef()}`),this.state=ai.closed,this.socket._remove(this)}),this._onError(e=>{this._isLeaving()||this._isClosed()||(this.socket.log(`channel`,`error ${this.topic}`,e),this.state=ai.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive(`timeout`,()=>{this._isJoining()&&(this.socket.log(`channel`,`timeout ${this.topic}`,this.joinPush.timeout),this.state=ai.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive(`error`,e=>{this._isLeaving()||this._isClosed()||(this.socket.log(`channel`,`error ${this.topic}`,e),this.state=ai.errored,this.rejoinTimer.scheduleTimeout())}),this._on(oi.reply,{},(e,t)=>{this._trigger(this._replyEventName(t),e)}),this.presence=new wi(this),this.broadcastEndpointURL=xi(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&this.params.config?.broadcast?.replay)throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(e,t=this.timeout){if(this.socket.isConnected()||this.socket.connect(),this.state==ai.closed){let{config:{broadcast:n,presence:r,private:i}}=this.params,a=this.bindings.postgres_changes?.map(e=>e.filter)??[],o=!!this.bindings[Ei.PRESENCE]&&this.bindings[Ei.PRESENCE].length>0||this.params.config.presence?.enabled===!0,s={},c={broadcast:n,presence:Object.assign(Object.assign({},r),{enabled:o}),postgres_changes:a,private:i};this.socket.accessTokenValue&&(s.access_token=this.socket.accessTokenValue),this._onError(t=>e?.(Di.CHANNEL_ERROR,t)),this._onClose(()=>e?.(Di.CLOSED)),this.updateJoinPayload(Object.assign({config:c},s)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive(`ok`,async({postgres_changes:t})=>{if(this.socket.setAuth(),t===void 0){e?.(Di.SUBSCRIBED);return}else{let n=this.bindings.postgres_changes,r=n?.length??0,i=[];for(let a=0;a<r;a++){let r=n[a],{filter:{event:o,schema:s,table:c,filter:l}}=r,u=t&&t[a];if(u&&u.event===o&&u.schema===s&&u.table===c&&u.filter===l)i.push(Object.assign(Object.assign({},r),{id:u.id}));else{this.unsubscribe(),this.state=ai.errored,e?.(Di.CHANNEL_ERROR,Error(`mismatch between server and client bindings for postgres changes`));return}}this.bindings.postgres_changes=i,e&&e(Di.SUBSCRIBED);return}}).receive(`error`,t=>{this.state=ai.errored,e?.(Di.CHANNEL_ERROR,Error(JSON.stringify(Object.values(t).join(`, `)||`error`)))}).receive(`timeout`,()=>{e?.(Di.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,t={}){return await this.send({type:`presence`,event:`track`,payload:e},t.timeout||this.timeout)}async untrack(e={}){return await this.send({type:`presence`,event:`untrack`},e)}on(e,t,n){return this.state===ai.joined&&e===Ei.PRESENCE&&(this.socket.log(`channel`,`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(e,t,n)}async send(e,t={}){if(!this._canPush()&&e.type===`broadcast`){let{event:n,payload:r}=e,i={method:`POST`,headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:``,apikey:this.socket.apiKey?this.socket.apiKey:``,"Content-Type":`application/json`},body:JSON.stringify({messages:[{topic:this.subTopic,event:n,payload:r,private:this.private}]})};try{let e=await this._fetchWithTimeout(this.broadcastEndpointURL,i,t.timeout??this.timeout);return await e.body?.cancel(),e.ok?`ok`:`error`}catch(e){return e.name===`AbortError`?`timed out`:`error`}}else return new Promise(n=>{let r=this._push(e.type,e,t.timeout||this.timeout);e.type===`broadcast`&&!this.params?.config?.broadcast?.ack&&n(`ok`),r.receive(`ok`,()=>n(`ok`)),r.receive(`error`,()=>n(`error`)),r.receive(`timeout`,()=>n(`timed out`))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=ai.leaving;let t=()=>{this.socket.log(`channel`,`leave ${this.topic}`),this._trigger(oi.close,`leave`,this._joinRef())};this.joinPush.destroy();let n=null;return new Promise(r=>{n=new Si(this,oi.leave,{},e),n.receive(`ok`,()=>{t(),r(`ok`)}).receive(`timeout`,()=>{t(),r(`timed out`)}).receive(`error`,()=>{r(`error`)}),n.send(),this._canPush()||n.trigger(`ok`,{})}).finally(()=>{n?.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=ai.closed,this.bindings={}}async _fetchWithTimeout(e,t,n){let r=new AbortController,i=setTimeout(()=>r.abort(),n),a=await this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:r.signal}));return clearTimeout(i),a}_push(e,t,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let r=new Si(this,e,t,n);return this._canPush()?r.send():this._addToPushBuffer(r),r}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>100){let e=this.pushBuffer.shift();e&&(e.destroy(),this.socket.log(`channel`,`discarded push due to buffer overflow: ${e.event}`,e.payload))}}_onMessage(e,t,n){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,n){var r,i;let a=e.toLocaleLowerCase(),{close:o,error:s,leave:c,join:l}=oi;if(n&&[o,s,c,l].indexOf(a)>=0&&n!==this._joinRef())return;let u=this._onMessage(a,t,n);if(t&&!u)throw`channel onMessage callbacks must return the payload, modified or unmodified`;[`insert`,`update`,`delete`].includes(a)?(r=this.bindings.postgres_changes)==null||r.filter(e=>e.filter?.event===`*`||(e.filter?.event)?.toLocaleLowerCase()===a).map(e=>e.callback(u,n)):(i=this.bindings[a])==null||i.filter(e=>{if([`broadcast`,`presence`,`postgres_changes`].includes(a))if(`id`in e){let n=e.id,r=e.filter?.event;return n&&t.ids?.includes(n)&&(r===`*`||r?.toLocaleLowerCase()===t.data?.type.toLocaleLowerCase())}else{let n=(e?.filter?.event)?.toLocaleLowerCase();return n===`*`||n===(t?.event)?.toLocaleLowerCase()}else return e.type.toLocaleLowerCase()===a}).map(e=>{if(typeof u==`object`&&`ids`in u){let e=u.data,{schema:t,table:n,commit_timestamp:r,type:i,errors:a}=e,o={schema:t,table:n,commit_timestamp:r,eventType:i,new:{},old:{},errors:a};u=Object.assign(Object.assign({},o),this._getPayloadRecords(e))}e.callback(u,n)})}_isClosed(){return this.state===ai.closed}_isJoined(){return this.state===ai.joined}_isJoining(){return this.state===ai.joining}_isLeaving(){return this.state===ai.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,t,n){let r=e.toLocaleLowerCase(),i={type:r,filter:t,callback:n};return this.bindings[r]?this.bindings[r].push(i):this.bindings[r]=[i],this}_off(t,n){let r=t.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(t=>!(t.type?.toLocaleLowerCase()===r&&e.isEqual(t.filter,n)))),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(let n in e)if(e[n]!==t[n])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(oi.close,{},e)}_onError(e){this._on(oi.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=ai.joining,this.joinPush.resend(e))}_getPayloadRecords(e){let t={new:{},old:{}};return(e.type===`INSERT`||e.type===`UPDATE`)&&(t.new=fi(e.columns,e.record)),(e.type===`UPDATE`||e.type===`DELETE`)&&(t.old=fi(e.columns,e.old_record)),t}},ki=()=>{},Ai={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},ji=[1e3,2e3,5e3,1e4],Mi=1e4,Ni=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`,Pi=class{constructor(e,t){if(this.accessTokenValue=null,this.apiKey=null,this.channels=[],this.endPoint=``,this.httpEndpoint=``,this.headers={},this.params={},this.timeout=ri,this.transport=null,this.heartbeatIntervalMs=Ai.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=ki,this.ref=0,this.reconnectTimer=null,this.logger=ki,this.conn=null,this.sendBuffer=[],this.serializer=new li,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState=`disconnected`,this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=e=>{let t;return t=e||(typeof fetch>`u`?(...e)=>D(async()=>{let{default:e}=await import(`./browser-B8tSOwzD.js`);return{default:e}},[]).then(({default:t})=>t(...e)).catch(e=>{throw Error(`Failed to load @supabase/node-fetch: ${e.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):fetch),(...e)=>t(...e)},!t?.params?.apikey)throw Error(`API key is required to connect to Realtime`);this.apiKey=t.params.apikey,this.endPoint=`${e}/${si.websocket}`,this.httpEndpoint=xi(e),this._initializeOptions(t),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(t?.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState(`connecting`),this._setAuthSafely(`connect`),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=ni.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState(`disconnected`);let t=e.message;throw t.includes(`Node.js`)?Error(`${t}\n\nTo use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):Error(`WebSocket not available: ${t}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:`1.0.0`}))}disconnect(e,t){if(!this.isDisconnecting())if(this._setConnectionState(`disconnecting`,!0),this.conn){let n=setTimeout(()=>{this._setConnectionState(`disconnected`)},100);this.conn.onclose=()=>{clearTimeout(n),this._setConnectionState(`disconnected`)},e?this.conn.close(e,t??``):this.conn.close(),this._teardownConnection()}else this._setConnectionState(`disconnected`)}getChannels(){return this.channels}async removeChannel(e){let t=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),t}async removeAllChannels(){let e=await Promise.all(this.channels.map(e=>e.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,t,n){this.logger(e,t,n)}connectionState(){switch(this.conn&&this.conn.readyState){case ii.connecting:return ci.Connecting;case ii.open:return ci.Open;case ii.closing:return ci.Closing;default:return ci.Closed}}isConnected(){return this.connectionState()===ci.Open}isConnecting(){return this._connectionState===`connecting`}isDisconnecting(){return this._connectionState===`disconnecting`}channel(e,t={config:{}}){let n=`realtime:${e}`,r=this.getChannels().find(e=>e.topic===n);if(r)return r;{let n=new Oi(`realtime:${e}`,t,this);return this.channels.push(n),n}}push(e){let{topic:t,event:n,payload:r,ref:i}=e,a=()=>{this.encode(e,e=>{var t;(t=this.conn)==null||t.send(e)})};this.log(`push`,`${t} ${n} (${i})`,r),this.isConnected()?a():this.sendBuffer.push(a)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback(`disconnected`)}catch(e){this.log(`error`,`error in heartbeat callback`,e)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log(`transport`,`heartbeat timeout. Attempting to re-establish connection`);try{this.heartbeatCallback(`timeout`)}catch(e){this.log(`error`,`error in heartbeat callback`,e)}this._wasManualDisconnect=!1,(e=this.conn)==null||e.close(1e3,`heartbeat timeout`),setTimeout(()=>{var e;this.isConnected()||(e=this.reconnectTimer)==null||e.scheduleTimeout()},Ai.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:`phoenix`,event:`heartbeat`,payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback(`sent`)}catch(e){this.log(`error`,`error in heartbeat callback`,e)}this._setAuthSafely(`heartbeat`)}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(t=>t.topic===e&&(t._isJoined()||t._isJoining()));t&&(this.log(`transport`,`leaving duplicate topic "${e}"`),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,e=>{if(e.topic===`phoenix`&&e.event===`phx_reply`)try{this.heartbeatCallback(e.payload.status===`ok`?`ok`:`error`)}catch(e){this.log(`error`,`error in heartbeat callback`,e)}e.ref&&e.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);let{topic:t,event:n,payload:r,ref:i}=e,a=i?`(${i})`:``,o=r.status||``;this.log(`receive`,`${o} ${t} ${n} ${a}`.trim(),r),this.channels.filter(e=>e._isMember(t)).forEach(e=>e._trigger(n,r,i)),this._triggerStateCallbacks(`message`,e)})}_clearTimer(e){var t;e===`heartbeat`&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e===`reconnect`&&((t=this.reconnectTimer)==null||t.reset())}_clearAllTimers(){this._clearTimer(`heartbeat`),this._clearTimer(`reconnect`)}_setupConnectionHandlers(){this.conn&&(`binaryType`in this.conn&&(this.conn.binaryType=`arraybuffer`),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){this.conn&&=(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,null),this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState(`connected`),this.log(`transport`,`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer(`reconnect`),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks(`open`)}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log(`worker`,`starting worker for from ${this.workerUrl}`):this.log(`worker`,`starting default worker`);let e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=e=>{this.log(`worker`,`worker error`,e.message),this.workerRef.terminate()},this.workerRef.onmessage=e=>{e.data.event===`keepAlive`&&this.sendHeartbeat()},this.workerRef.postMessage({event:`start`,interval:this.heartbeatIntervalMs})}_onConnClose(e){var t;this._setConnectionState(`disconnected`),this.log(`transport`,`close`,e),this._triggerChanError(),this._clearTimer(`heartbeat`),this._wasManualDisconnect||(t=this.reconnectTimer)==null||t.scheduleTimeout(),this._triggerStateCallbacks(`close`,e)}_onConnError(e){this._setConnectionState(`disconnected`),this.log(`transport`,`${e}`),this._triggerChanError(),this._triggerStateCallbacks(`error`,e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(oi.error))}_appendParams(e,t){if(Object.keys(t).length===0)return e;let n=e.match(/\?/)?`&`:`?`,r=new URLSearchParams(t);return`${e}${n}${r}`}_workerObjectUrl(e){let t;if(e)t=e;else{let e=new Blob([Ni],{type:`application/javascript`});t=URL.createObjectURL(e)}return t}_setConnectionState(e,t=!1){this._connectionState=e,e===`connecting`?this._wasManualDisconnect=!1:e===`disconnecting`&&(this._wasManualDisconnect=t)}async _performAuth(e=null){let t;t=e||(this.accessToken?await this.accessToken():this.accessTokenValue),this.accessTokenValue!=t&&(this.accessTokenValue=t,this.channels.forEach(e=>{let n={access_token:t,version:`realtime-js/2.75.0`};t&&e.updateJoinPayload(n),e.joinedOnce&&e._isJoined()&&e._push(oi.access_token,{access_token:t})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e=`general`){this.setAuth().catch(t=>{this.log(`error`,`error setting auth in ${e}`,t)})}_triggerStateCallbacks(e,t){try{this.stateChangeCallbacks[e].forEach(n=>{try{n(t)}catch(t){this.log(`error`,`error in ${e} callback`,t)}})}catch(t){this.log(`error`,`error triggering ${e} callbacks`,t)}}_setupReconnectionTimer(){this.reconnectTimer=new ui(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Ai.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){if(this.transport=e?.transport??null,this.timeout=e?.timeout??ri,this.heartbeatIntervalMs=e?.heartbeatIntervalMs??Ai.HEARTBEAT_INTERVAL,this.worker=e?.worker??!1,this.accessToken=e?.accessToken??null,this.heartbeatCallback=e?.heartbeatCallback??ki,e?.params&&(this.params=e.params),e?.logger&&(this.logger=e.logger),(e?.logLevel||e?.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=e?.reconnectAfterMs??(e=>ji[e-1]||Mi),this.encode=e?.encode??((e,t)=>t(JSON.stringify(e))),this.decode=e?.decode??this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<`u`&&!window.Worker)throw Error(`Web Worker is not supported`);this.workerUrl=e?.workerUrl}}},Fi=class extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name=`StorageError`}};function R(e){return typeof e==`object`&&!!e&&`__isStorageError`in e}var Ii=class extends Fi{constructor(e,t,n){super(e),this.name=`StorageApiError`,this.status=t,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},Li=class extends Fi{constructor(e,t){super(e),this.name=`StorageUnknownError`,this.originalError=t}},Ri=function(e,t,n,r){function i(e){return e instanceof n?e:new n(function(t){t(e)})}return new(n||=Promise)(function(n,a){function o(e){try{c(r.next(e))}catch(e){a(e)}}function s(e){try{c(r.throw(e))}catch(e){a(e)}}function c(e){e.done?n(e.value):i(e.value).then(o,s)}c((r=r.apply(e,t||[])).next())})};const zi=e=>{let t;return t=e||(typeof fetch>`u`?(...e)=>D(async()=>{let{default:e}=await import(`./browser-B8tSOwzD.js`);return{default:e}},[]).then(({default:t})=>t(...e)):fetch),(...e)=>t(...e)},Bi=()=>Ri(void 0,void 0,void 0,function*(){return typeof Response>`u`?(yield D(()=>import(`./browser-B8tSOwzD.js`),[])).Response:Response}),Vi=e=>{if(Array.isArray(e))return e.map(e=>Vi(e));if(typeof e==`function`||e!==Object(e))return e;let t={};return Object.entries(e).forEach(([e,n])=>{let r=e.replace(/([-_][a-z])/gi,e=>e.toUpperCase().replace(/[-_]/g,``));t[r]=Vi(n)}),t},Hi=e=>{if(typeof e!=`object`||!e)return!1;let t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)};var Ui=function(e,t,n,r){function i(e){return e instanceof n?e:new n(function(t){t(e)})}return new(n||=Promise)(function(n,a){function o(e){try{c(r.next(e))}catch(e){a(e)}}function s(e){try{c(r.throw(e))}catch(e){a(e)}}function c(e){e.done?n(e.value):i(e.value).then(o,s)}c((r=r.apply(e,t||[])).next())})},Wi=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),Gi=(e,t,n)=>Ui(void 0,void 0,void 0,function*(){let r=yield Bi();e instanceof r&&!n?.noResolveJson?e.json().then(n=>{let r=e.status||500,i=n?.statusCode||r+``;t(new Ii(Wi(n),r,i))}).catch(e=>{t(new Li(Wi(e),e))}):t(new Li(Wi(e),e))}),z=(e,t,n,r)=>{let i={method:e,headers:t?.headers||{}};return e===`GET`||!r?i:(Hi(r)?(i.headers=Object.assign({"Content-Type":`application/json`},t?.headers),i.body=JSON.stringify(r)):i.body=r,t?.duplex&&(i.duplex=t.duplex),Object.assign(Object.assign({},i),n))};function Ki(e,t,n,r,i,a){return Ui(this,void 0,void 0,function*(){return new Promise((o,s)=>{e(n,z(t,r,i,a)).then(e=>{if(!e.ok)throw e;return r?.noResolveJson?e:e.json()}).then(e=>o(e)).catch(e=>Gi(e,s,r))})})}function qi(e,t,n,r){return Ui(this,void 0,void 0,function*(){return Ki(e,`GET`,t,n,r)})}function Ji(e,t,n,r,i){return Ui(this,void 0,void 0,function*(){return Ki(e,`POST`,t,r,i,n)})}function Yi(e,t,n,r,i){return Ui(this,void 0,void 0,function*(){return Ki(e,`PUT`,t,r,i,n)})}function Xi(e,t,n,r){return Ui(this,void 0,void 0,function*(){return Ki(e,`HEAD`,t,Object.assign(Object.assign({},n),{noResolveJson:!0}),r)})}function Zi(e,t,n,r,i){return Ui(this,void 0,void 0,function*(){return Ki(e,`DELETE`,t,r,i,n)})}var Qi=function(e,t,n,r){function i(e){return e instanceof n?e:new n(function(t){t(e)})}return new(n||=Promise)(function(n,a){function o(e){try{c(r.next(e))}catch(e){a(e)}}function s(e){try{c(r.throw(e))}catch(e){a(e)}}function c(e){e.done?n(e.value):i(e.value).then(o,s)}c((r=r.apply(e,t||[])).next())})},$i=class{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t}then(e,t){return this.execute().then(e,t)}execute(){return Qi(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(R(e))return{data:null,error:e};throw e}})}},ea=function(e,t,n,r){function i(e){return e instanceof n?e:new n(function(t){t(e)})}return new(n||=Promise)(function(n,a){function o(e){try{c(r.next(e))}catch(e){a(e)}}function s(e){try{c(r.throw(e))}catch(e){a(e)}}function c(e){e.done?n(e.value):i(e.value).then(o,s)}c((r=r.apply(e,t||[])).next())})},ta=class{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t}asStream(){return new $i(this.downloadFn,this.shouldThrowOnError)}then(e,t){return this.execute().then(e,t)}execute(){return ea(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(R(e))return{data:null,error:e};throw e}})}},na=function(e,t,n,r){function i(e){return e instanceof n?e:new n(function(t){t(e)})}return new(n||=Promise)(function(n,a){function o(e){try{c(r.next(e))}catch(e){a(e)}}function s(e){try{c(r.throw(e))}catch(e){a(e)}}function c(e){e.done?n(e.value):i(e.value).then(o,s)}c((r=r.apply(e,t||[])).next())})},ra={limit:100,offset:0,sortBy:{column:`name`,order:`asc`}},ia={cacheControl:`3600`,contentType:`text/plain;charset=UTF-8`,upsert:!1},aa=class{constructor(e,t={},n,r){this.shouldThrowOnError=!1,this.url=e,this.headers=t,this.bucketId=n,this.fetch=zi(r)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(e,t,n,r){return na(this,void 0,void 0,function*(){try{let i,a=Object.assign(Object.assign({},ia),r),o=Object.assign(Object.assign({},this.headers),e===`POST`&&{"x-upsert":String(a.upsert)}),s=a.metadata;typeof Blob<`u`&&n instanceof Blob?(i=new FormData,i.append(`cacheControl`,a.cacheControl),s&&i.append(`metadata`,this.encodeMetadata(s)),i.append(``,n)):typeof FormData<`u`&&n instanceof FormData?(i=n,i.append(`cacheControl`,a.cacheControl),s&&i.append(`metadata`,this.encodeMetadata(s))):(i=n,o[`cache-control`]=`max-age=${a.cacheControl}`,o[`content-type`]=a.contentType,s&&(o[`x-metadata`]=this.toBase64(this.encodeMetadata(s)))),r?.headers&&(o=Object.assign(Object.assign({},o),r.headers));let c=this._removeEmptyFolders(t),l=this._getFinalPath(c),u=yield(e==`PUT`?Yi:Ji)(this.fetch,`${this.url}/object/${l}`,i,Object.assign({headers:o},a?.duplex?{duplex:a.duplex}:{}));return{data:{path:c,id:u.Id,fullPath:u.Key},error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(R(e))return{data:null,error:e};throw e}})}upload(e,t,n){return na(this,void 0,void 0,function*(){return this.uploadOrUpdate(`POST`,e,t,n)})}uploadToSignedUrl(e,t,n,r){return na(this,void 0,void 0,function*(){let i=this._removeEmptyFolders(e),a=this._getFinalPath(i),o=new URL(this.url+`/object/upload/sign/${a}`);o.searchParams.set(`token`,t);try{let e,t=Object.assign({upsert:ia.upsert},r),a=Object.assign(Object.assign({},this.headers),{"x-upsert":String(t.upsert)});typeof Blob<`u`&&n instanceof Blob?(e=new FormData,e.append(`cacheControl`,t.cacheControl),e.append(``,n)):typeof FormData<`u`&&n instanceof FormData?(e=n,e.append(`cacheControl`,t.cacheControl)):(e=n,a[`cache-control`]=`max-age=${t.cacheControl}`,a[`content-type`]=t.contentType);let s=yield Yi(this.fetch,o.toString(),e,{headers:a});return{data:{path:i,fullPath:s.Key},error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(R(e))return{data:null,error:e};throw e}})}createSignedUploadUrl(e,t){return na(this,void 0,void 0,function*(){try{let n=this._getFinalPath(e),r=Object.assign({},this.headers);t?.upsert&&(r[`x-upsert`]=`true`);let i=yield Ji(this.fetch,`${this.url}/object/upload/sign/${n}`,{},{headers:r}),a=new URL(this.url+i.url),o=a.searchParams.get(`token`);if(!o)throw new Fi(`No token returned by API`);return{data:{signedUrl:a.toString(),path:e,token:o},error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(R(e))return{data:null,error:e};throw e}})}update(e,t,n){return na(this,void 0,void 0,function*(){return this.uploadOrUpdate(`PUT`,e,t,n)})}move(e,t,n){return na(this,void 0,void 0,function*(){try{return{data:yield Ji(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:n?.destinationBucket},{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(R(e))return{data:null,error:e};throw e}})}copy(e,t,n){return na(this,void 0,void 0,function*(){try{return{data:{path:(yield Ji(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:n?.destinationBucket},{headers:this.headers})).Key},error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(R(e))return{data:null,error:e};throw e}})}createSignedUrl(e,t,n){return na(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e),i=yield Ji(this.fetch,`${this.url}/object/sign/${r}`,Object.assign({expiresIn:t},n?.transform?{transform:n.transform}:{}),{headers:this.headers}),a=n?.download?`&download=${n.download===!0?``:n.download}`:``;return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${a}`)},{data:i,error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(R(e))return{data:null,error:e};throw e}})}createSignedUrls(e,t,n){return na(this,void 0,void 0,function*(){try{let r=yield Ji(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:t,paths:e},{headers:this.headers}),i=n?.download?`&download=${n.download===!0?``:n.download}`:``;return{data:r.map(e=>Object.assign(Object.assign({},e),{signedUrl:e.signedURL?encodeURI(`${this.url}${e.signedURL}${i}`):null})),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(R(e))return{data:null,error:e};throw e}})}download(e,t){let n=t?.transform===void 0?`object`:`render/image/authenticated`,r=this.transformOptsToQueryString(t?.transform||{}),i=r?`?${r}`:``,a=this._getFinalPath(e);return new ta(()=>qi(this.fetch,`${this.url}/${n}/${a}${i}`,{headers:this.headers,noResolveJson:!0}),this.shouldThrowOnError)}info(e){return na(this,void 0,void 0,function*(){let t=this._getFinalPath(e);try{let e=yield qi(this.fetch,`${this.url}/object/info/${t}`,{headers:this.headers});return{data:Vi(e),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(R(e))return{data:null,error:e};throw e}})}exists(e){return na(this,void 0,void 0,function*(){let t=this._getFinalPath(e);try{return yield Xi(this.fetch,`${this.url}/object/${t}`,{headers:this.headers}),{data:!0,error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(R(e)&&e instanceof Li){let t=e.originalError;if([400,404].includes(t?.status))return{data:!1,error:e}}throw e}})}getPublicUrl(e,t){let n=this._getFinalPath(e),r=[],i=t?.download?`download=${t.download===!0?``:t.download}`:``;i!==``&&r.push(i);let a=t?.transform===void 0?`object`:`render/image`,o=this.transformOptsToQueryString(t?.transform||{});o!==``&&r.push(o);let s=r.join(`&`);return s!==``&&(s=`?${s}`),{data:{publicUrl:encodeURI(`${this.url}/${a}/public/${n}${s}`)}}}remove(e){return na(this,void 0,void 0,function*(){try{return{data:yield Zi(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(R(e))return{data:null,error:e};throw e}})}list(e,t,n){return na(this,void 0,void 0,function*(){try{let r=Object.assign(Object.assign(Object.assign({},ra),t),{prefix:e||``});return{data:yield Ji(this.fetch,`${this.url}/object/list/${this.bucketId}`,r,{headers:this.headers},n),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(R(e))return{data:null,error:e};throw e}})}listV2(e,t){return na(this,void 0,void 0,function*(){try{let n=Object.assign({},e);return{data:yield Ji(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,n,{headers:this.headers},t),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(R(e))return{data:null,error:e};throw e}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<`u`?Buffer.from(e).toString(`base64`):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,``)}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,``).replace(/\/+/g,`/`)}transformOptsToQueryString(e){let t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join(`&`)}};const oa={"X-Client-Info":`storage-js/2.75.0`};var sa=function(e,t,n,r){function i(e){return e instanceof n?e:new n(function(t){t(e)})}return new(n||=Promise)(function(n,a){function o(e){try{c(r.next(e))}catch(e){a(e)}}function s(e){try{c(r.throw(e))}catch(e){a(e)}}function c(e){e.done?n(e.value):i(e.value).then(o,s)}c((r=r.apply(e,t||[])).next())})},ca=class{constructor(e,t={},n,r){this.shouldThrowOnError=!1;let i=new URL(e);r?.useNewHostname&&/supabase\.(co|in|red)$/.test(i.hostname)&&!i.hostname.includes(`storage.supabase.`)&&(i.hostname=i.hostname.replace(`supabase.`,`storage.supabase.`)),this.url=i.href.replace(/\/$/,``),this.headers=Object.assign(Object.assign({},oa),t),this.fetch=zi(n)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(){return sa(this,void 0,void 0,function*(){try{return{data:yield qi(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(R(e))return{data:null,error:e};throw e}})}getBucket(e){return sa(this,void 0,void 0,function*(){try{return{data:yield qi(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(R(e))return{data:null,error:e};throw e}})}createBucket(e){return sa(this,arguments,void 0,function*(e,t={public:!1}){try{return{data:yield Ji(this.fetch,`${this.url}/bucket`,{id:e,name:e,type:t.type,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(R(e))return{data:null,error:e};throw e}})}updateBucket(e,t){return sa(this,void 0,void 0,function*(){try{return{data:yield Yi(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(R(e))return{data:null,error:e};throw e}})}emptyBucket(e){return sa(this,void 0,void 0,function*(){try{return{data:yield Ji(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(R(e))return{data:null,error:e};throw e}})}deleteBucket(e){return sa(this,void 0,void 0,function*(){try{return{data:yield Zi(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(R(e))return{data:null,error:e};throw e}})}},la=class extends ca{constructor(e,t={},n,r){super(e,t,n,r)}from(e){return new aa(this.url,this.headers,e,this.fetch)}},ua=``;ua=typeof Deno<`u`?`deno`:typeof document<`u`?`web`:typeof navigator<`u`&&navigator.product===`ReactNative`?`react-native`:`node`;const da={headers:{"X-Client-Info":`supabase-js-${ua}/2.75.0`}},fa={schema:`public`},pa={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:`implicit`},ma={};Ur();var ha=function(e,t,n,r){function i(e){return e instanceof n?e:new n(function(t){t(e)})}return new(n||=Promise)(function(n,a){function o(e){try{c(r.next(e))}catch(e){a(e)}}function s(e){try{c(r.throw(e))}catch(e){a(e)}}function c(e){e.done?n(e.value):i(e.value).then(o,s)}c((r=r.apply(e,t||[])).next())})};const ga=e=>{let t;return t=e||(typeof fetch>`u`?zr:fetch),(...e)=>t(...e)},_a=()=>typeof Headers>`u`?Br:Headers,va=(e,t,n)=>{let r=ga(n),i=_a();return(n,a)=>ha(void 0,void 0,void 0,function*(){let o=(yield t())??e,s=new i(a?.headers);return s.has(`apikey`)||s.set(`apikey`,e),s.has(`Authorization`)||s.set(`Authorization`,`Bearer ${o}`),r(n,Object.assign(Object.assign({},a),{headers:s}))})};var ya=function(e,t,n,r){function i(e){return e instanceof n?e:new n(function(t){t(e)})}return new(n||=Promise)(function(n,a){function o(e){try{c(r.next(e))}catch(e){a(e)}}function s(e){try{c(r.throw(e))}catch(e){a(e)}}function c(e){e.done?n(e.value):i(e.value).then(o,s)}c((r=r.apply(e,t||[])).next())})};function ba(e){return e.endsWith(`/`)?e:e+`/`}function xa(e,t){let{db:n,auth:r,realtime:i,global:a}=e,{db:o,auth:s,realtime:c,global:l}=t,u={db:Object.assign(Object.assign({},o),n),auth:Object.assign(Object.assign({},s),r),realtime:Object.assign(Object.assign({},c),i),storage:{},global:Object.assign(Object.assign(Object.assign({},l),a),{headers:Object.assign(Object.assign({},l?.headers??{}),a?.headers??{})}),accessToken:()=>ya(this,void 0,void 0,function*(){return``})};return e.accessToken?u.accessToken=e.accessToken:delete u.accessToken,u}function Sa(e){let t=e?.trim();if(!t)throw Error(`supabaseUrl is required.`);if(!t.match(/^https?:\/\//i))throw Error(`Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.`);try{return new URL(ba(t))}catch{throw Error(`Invalid supabaseUrl: Provided URL is malformed.`)}}const Ca=`2.75.0`,wa=30*1e3,Ta=3*wa,Ea={"X-Client-Info":`gotrue-js/${Ca}`},Da=`X-Supabase-Api-Version`,Oa={"2024-01-01":{timestamp:Date.parse(`2024-01-01T00:00:00.0Z`),name:`2024-01-01`}},ka=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i;var Aa=class extends Error{constructor(e,t,n){super(e),this.__isAuthError=!0,this.name=`AuthError`,this.status=t,this.code=n}};function B(e){return typeof e==`object`&&!!e&&`__isAuthError`in e}var ja=class extends Aa{constructor(e,t,n){super(e,t,n),this.name=`AuthApiError`,this.status=t,this.code=n}};function Ma(e){return B(e)&&e.name===`AuthApiError`}var Na=class extends Aa{constructor(e,t){super(e),this.name=`AuthUnknownError`,this.originalError=t}},Pa=class extends Aa{constructor(e,t,n,r){super(e,n,r),this.name=t,this.status=n}},Fa=class extends Pa{constructor(){super(`Auth session missing!`,`AuthSessionMissingError`,400,void 0)}};function Ia(e){return B(e)&&e.name===`AuthSessionMissingError`}var La=class extends Pa{constructor(){super(`Auth session or user missing`,`AuthInvalidTokenResponseError`,500,void 0)}},Ra=class extends Pa{constructor(e){super(e,`AuthInvalidCredentialsError`,400,void 0)}},za=class extends Pa{constructor(e,t=null){super(e,`AuthImplicitGrantRedirectError`,500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}};function Ba(e){return B(e)&&e.name===`AuthImplicitGrantRedirectError`}var Va=class extends Pa{constructor(e,t=null){super(e,`AuthPKCEGrantCodeExchangeError`,500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}},Ha=class extends Pa{constructor(e,t){super(e,`AuthRetryableFetchError`,t,void 0)}};function Ua(e){return B(e)&&e.name===`AuthRetryableFetchError`}var Wa=class extends Pa{constructor(e,t,n){super(e,`AuthWeakPasswordError`,t,`weak_password`),this.reasons=n}},Ga=class extends Pa{constructor(e){super(e,`AuthInvalidJwtError`,400,`invalid_jwt`)}},Ka=`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_`.split(``),qa=` 	
\r=`.split(``),Ja=(()=>{let e=Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<qa.length;t+=1)e[qa[t].charCodeAt(0)]=-2;for(let t=0;t<Ka.length;t+=1)e[Ka[t].charCodeAt(0)]=t;return e})();function Ya(e,t,n){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){let e=t.queue>>t.queuedBits-6&63;n(Ka[e]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue<<=6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){let e=t.queue>>t.queuedBits-6&63;n(Ka[e]),t.queuedBits-=6}}function Xa(e,t,n){let r=Ja[e];if(r>-1)for(t.queue=t.queue<<6|r,t.queuedBits+=6;t.queuedBits>=8;)n(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else if(r===-2)return;else throw Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}function Za(e){let t=[],n=e=>{t.push(String.fromCodePoint(e))},r={utf8seq:0,codepoint:0},i={queue:0,queuedBits:0},a=e=>{eo(e,r,n)};for(let t=0;t<e.length;t+=1)Xa(e.charCodeAt(t),i,a);return t.join(``)}function Qa(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function $a(e,t){for(let n=0;n<e.length;n+=1){let r=e.charCodeAt(n);if(r>55295&&r<=56319){let t=(r-55296)*1024&65535;r=(e.charCodeAt(n+1)-56320&65535|t)+65536,n+=1}Qa(r,t)}}function eo(e,t,n){if(t.utf8seq===0){if(e<=127){n(e);return}for(let n=1;n<6;n+=1)if(!(e>>7-n&1)){t.utf8seq=n;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw Error(`Invalid UTF-8 sequence`);--t.utf8seq}else if(t.utf8seq>0){if(e<=127)throw Error(`Invalid UTF-8 sequence`);t.codepoint=t.codepoint<<6|e&63,--t.utf8seq,t.utf8seq===0&&n(t.codepoint)}}function to(e){let t=[],n={queue:0,queuedBits:0},r=e=>{t.push(e)};for(let t=0;t<e.length;t+=1)Xa(e.charCodeAt(t),n,r);return new Uint8Array(t)}function no(e){let t=[];return $a(e,e=>t.push(e)),new Uint8Array(t)}function ro(e){let t=[],n={queue:0,queuedBits:0},r=e=>{t.push(e)};return e.forEach(e=>Ya(e,n,r)),Ya(null,n,r),t.join(``)}function io(e){return Math.round(Date.now()/1e3)+e}function ao(){return`xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx`.replace(/[xy]/g,function(e){let t=Math.random()*16|0;return(e==`x`?t:t&3|8).toString(16)})}const oo=()=>typeof window<`u`&&typeof document<`u`;var so={tested:!1,writable:!1};const co=()=>{if(!oo())return!1;try{if(typeof globalThis.localStorage!=`object`)return!1}catch{return!1}if(so.tested)return so.writable;let e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),so.tested=!0,so.writable=!0}catch{so.tested=!0,so.writable=!1}return so.writable};function lo(e){let t={},n=new URL(e);if(n.hash&&n.hash[0]===`#`)try{new URLSearchParams(n.hash.substring(1)).forEach((e,n)=>{t[n]=e})}catch{}return n.searchParams.forEach((e,n)=>{t[n]=e}),t}const uo=e=>{let t;return t=e||(typeof fetch>`u`?(...e)=>D(async()=>{let{default:e}=await import(`./browser-B8tSOwzD.js`);return{default:e}},[]).then(({default:t})=>t(...e)):fetch),(...e)=>t(...e)},fo=e=>typeof e==`object`&&!!e&&`status`in e&&`ok`in e&&`json`in e&&typeof e.json==`function`,po=async(e,t,n)=>{await e.setItem(t,JSON.stringify(n))},mo=async(e,t)=>{let n=await e.getItem(t);if(!n)return null;try{return JSON.parse(n)}catch{return n}},ho=async(e,t)=>{await e.removeItem(t)};var go=class e{constructor(){this.promise=new e.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}};go.promiseConstructor=Promise;function _o(e){let t=e.split(`.`);if(t.length!==3)throw new Ga(`Invalid JWT structure`);for(let e=0;e<t.length;e++)if(!ka.test(t[e]))throw new Ga(`JWT not in base64url format`);return{header:JSON.parse(Za(t[0])),payload:JSON.parse(Za(t[1])),signature:to(t[2]),raw:{header:t[0],payload:t[1]}}}async function vo(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function yo(e,t){return new Promise((n,r)=>{(async()=>{for(let i=0;i<1/0;i++)try{let r=await e(i);if(!t(i,null,r)){n(r);return}}catch(e){if(!t(i,e)){r(e);return}}})()})}function bo(e){return(`0`+e.toString(16)).substr(-2)}function xo(){let e=new Uint32Array(56);if(typeof crypto>`u`){let e=``;for(let t=0;t<56;t++)e+=`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~`.charAt(Math.floor(Math.random()*66));return e}return crypto.getRandomValues(e),Array.from(e,bo).join(``)}async function So(e){let t=new TextEncoder().encode(e),n=await crypto.subtle.digest(`SHA-256`,t),r=new Uint8Array(n);return Array.from(r).map(e=>String.fromCharCode(e)).join(``)}async function Co(e){if(!(typeof crypto<`u`&&crypto.subtle!==void 0&&typeof TextEncoder<`u`))return console.warn(`WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256.`),e;let t=await So(e);return btoa(t).replace(/\+/g,`-`).replace(/\//g,`_`).replace(/=+$/,``)}async function V(e,t,n=!1){let r=xo(),i=r;n&&(i+=`/PASSWORD_RECOVERY`),await po(e,`${t}-code-verifier`,i);let a=await Co(r);return[a,r===a?`plain`:`s256`]}var wo=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function To(e){let t=e.headers.get(Da);if(!t||!t.match(wo))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function Eo(e){if(!e)throw Error(`Missing exp claim`);let t=Math.floor(Date.now()/1e3);if(e<=t)throw Error(`JWT has expired`)}function Do(e){switch(e){case`RS256`:return{name:`RSASSA-PKCS1-v1_5`,hash:{name:`SHA-256`}};case`ES256`:return{name:`ECDSA`,namedCurve:`P-256`,hash:{name:`SHA-256`}};default:throw Error(`Invalid alg claim`)}}var Oo=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function ko(e){if(!Oo.test(e))throw Error(`@supabase/auth-js: Expected parameter to be UUID but is not`)}function Ao(){return new Proxy({},{get:(e,t)=>{if(t===`__isUserNotAvailableProxy`)return!0;if(typeof t==`symbol`){let e=t.toString();if(e===`Symbol(Symbol.toPrimitive)`||e===`Symbol(Symbol.toStringTag)`||e===`Symbol(util.inspect.custom)`)return}throw Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${t}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,t)=>{throw Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,t)=>{throw Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function jo(e){return JSON.parse(JSON.stringify(e))}var Mo=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols==`function`)for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n},No=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),Po=[502,503,504];async function Fo(e){if(!fo(e))throw new Ha(No(e),0);if(Po.includes(e.status))throw new Ha(No(e),e.status);let t;try{t=await e.json()}catch(e){throw new Na(No(e),e)}let n,r=To(e);if(r&&r.getTime()>=Oa[`2024-01-01`].timestamp&&typeof t==`object`&&t&&typeof t.code==`string`?n=t.code:typeof t==`object`&&t&&typeof t.error_code==`string`&&(n=t.error_code),n){if(n===`weak_password`)throw new Wa(No(t),e.status,t.weak_password?.reasons||[]);if(n===`session_not_found`)throw new Fa}else if(typeof t==`object`&&t&&typeof t.weak_password==`object`&&t.weak_password&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.reasons.reduce((e,t)=>e&&typeof t==`string`,!0))throw new Wa(No(t),e.status,t.weak_password.reasons);throw new ja(No(t),e.status||500,n)}var Io=(e,t,n,r)=>{let i={method:e,headers:t?.headers||{}};return e===`GET`?i:(i.headers=Object.assign({"Content-Type":`application/json;charset=UTF-8`},t?.headers),i.body=JSON.stringify(r),Object.assign(Object.assign({},i),n))};async function H(e,t,n,r){let i=Object.assign({},r?.headers);i[`X-Supabase-Api-Version`]||(i[Da]=Oa[`2024-01-01`].name),r?.jwt&&(i.Authorization=`Bearer ${r.jwt}`);let a=r?.query??{};r?.redirectTo&&(a.redirect_to=r.redirectTo);let o=Object.keys(a).length?`?`+new URLSearchParams(a).toString():``,s=await Lo(e,t,n+o,{headers:i,noResolveJson:r?.noResolveJson},{},r?.body);return r?.xform?r?.xform(s):{data:Object.assign({},s),error:null}}async function Lo(e,t,n,r,i,a){let o=Io(t,r,i,a),s;try{s=await e(n,Object.assign({},o))}catch(e){throw console.error(e),new Ha(No(e),0)}if(s.ok||await Fo(s),r?.noResolveJson)return s;try{return await s.json()}catch(e){await Fo(e)}}function Ro(e){let t=null;Wo(e)&&(t=Object.assign({},e),e.expires_at||(t.expires_at=io(e.expires_in)));let n=e.user??e;return{data:{session:t,user:n},error:null}}function zo(e){let t=Ro(e);return!t.error&&e.weak_password&&typeof e.weak_password==`object`&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message==`string`&&e.weak_password.reasons.reduce((e,t)=>e&&typeof t==`string`,!0)&&(t.data.weak_password=e.weak_password),t}function Bo(e){return{data:{user:e.user??e},error:null}}function Vo(e){return{data:e,error:null}}function Ho(e){let{action_link:t,email_otp:n,hashed_token:r,redirect_to:i,verification_type:a}=e,o=Mo(e,[`action_link`,`email_otp`,`hashed_token`,`redirect_to`,`verification_type`]),s={action_link:t,email_otp:n,hashed_token:r,redirect_to:i,verification_type:a},c=Object.assign({},o);return{data:{properties:s,user:c},error:null}}function Uo(e){return e}function Wo(e){return e.access_token&&e.refresh_token&&e.expires_in}const Go=[`global`,`local`,`others`];var Ko=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols==`function`)for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n},qo=class{constructor({url:e=``,headers:t={},fetch:n}){this.url=e,this.headers=t,this.fetch=uo(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(e,t=Go[0]){if(Go.indexOf(t)<0)throw Error(`@supabase/auth-js: Parameter scope must be one of ${Go.join(`, `)}`);try{return await H(this.fetch,`POST`,`${this.url}/logout?scope=${t}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(e){if(B(e))return{data:null,error:e};throw e}}async inviteUserByEmail(e,t={}){try{return await H(this.fetch,`POST`,`${this.url}/invite`,{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:Bo})}catch(e){if(B(e))return{data:{user:null},error:e};throw e}}async generateLink(e){try{let{options:t}=e,n=Ko(e,[`options`]),r=Object.assign(Object.assign({},n),t);return`newEmail`in n&&(r.new_email=n?.newEmail,delete r.newEmail),await H(this.fetch,`POST`,`${this.url}/admin/generate_link`,{body:r,headers:this.headers,xform:Ho,redirectTo:t?.redirectTo})}catch(e){if(B(e))return{data:{properties:null,user:null},error:e};throw e}}async createUser(e){try{return await H(this.fetch,`POST`,`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Bo})}catch(e){if(B(e))return{data:{user:null},error:e};throw e}}async listUsers(e){try{let t={nextPage:null,lastPage:0,total:0},n=await H(this.fetch,`GET`,`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(e?.page)?.toString()??``,per_page:(e?.perPage)?.toString()??``},xform:Uo});if(n.error)throw n.error;let r=await n.json(),i=n.headers.get(`x-total-count`)??0,a=n.headers.get(`link`)?.split(`,`)??[];return a.length>0&&(a.forEach(e=>{let n=parseInt(e.split(`;`)[0].split(`=`)[1].substring(0,1)),r=JSON.parse(e.split(`;`)[1].split(`=`)[1]);t[`${r}Page`]=n}),t.total=parseInt(i)),{data:Object.assign(Object.assign({},r),t),error:null}}catch(e){if(B(e))return{data:{users:[]},error:e};throw e}}async getUserById(e){ko(e);try{return await H(this.fetch,`GET`,`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Bo})}catch(e){if(B(e))return{data:{user:null},error:e};throw e}}async updateUserById(e,t){ko(e);try{return await H(this.fetch,`PUT`,`${this.url}/admin/users/${e}`,{body:t,headers:this.headers,xform:Bo})}catch(e){if(B(e))return{data:{user:null},error:e};throw e}}async deleteUser(e,t=!1){ko(e);try{return await H(this.fetch,`DELETE`,`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:t},xform:Bo})}catch(e){if(B(e))return{data:{user:null},error:e};throw e}}async _listFactors(e){ko(e.userId);try{let{data:t,error:n}=await H(this.fetch,`GET`,`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:e=>({data:{factors:e},error:null})});return{data:t,error:n}}catch(e){if(B(e))return{data:null,error:e};throw e}}async _deleteFactor(e){ko(e.userId),ko(e.id);try{return{data:await H(this.fetch,`DELETE`,`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(e){if(B(e))return{data:null,error:e};throw e}}async _listOAuthClients(e){try{let t={nextPage:null,lastPage:0,total:0},n=await H(this.fetch,`GET`,`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(e?.page)?.toString()??``,per_page:(e?.perPage)?.toString()??``},xform:Uo});if(n.error)throw n.error;let r=await n.json(),i=n.headers.get(`x-total-count`)??0,a=n.headers.get(`link`)?.split(`,`)??[];return a.length>0&&(a.forEach(e=>{let n=parseInt(e.split(`;`)[0].split(`=`)[1].substring(0,1)),r=JSON.parse(e.split(`;`)[1].split(`=`)[1]);t[`${r}Page`]=n}),t.total=parseInt(i)),{data:Object.assign(Object.assign({},r),t),error:null}}catch(e){if(B(e))return{data:{clients:[]},error:e};throw e}}async _createOAuthClient(e){try{return await H(this.fetch,`POST`,`${this.url}/admin/oauth/clients`,{body:e,headers:this.headers,xform:e=>({data:e,error:null})})}catch(e){if(B(e))return{data:null,error:e};throw e}}async _getOAuthClient(e){try{return await H(this.fetch,`GET`,`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:e=>({data:e,error:null})})}catch(e){if(B(e))return{data:null,error:e};throw e}}async _deleteOAuthClient(e){try{return await H(this.fetch,`DELETE`,`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:e=>({data:e,error:null})})}catch(e){if(B(e))return{data:null,error:e};throw e}}async _regenerateOAuthClientSecret(e){try{return await H(this.fetch,`POST`,`${this.url}/admin/oauth/clients/${e}/regenerate_secret`,{headers:this.headers,xform:e=>({data:e,error:null})})}catch(e){if(B(e))return{data:null,error:e};throw e}}};function Jo(e={}){return{getItem:t=>e[t]||null,setItem:(t,n)=>{e[t]=n},removeItem:t=>{delete e[t]}}}const Yo={debug:!!(globalThis&&co()&&globalThis.localStorage&&globalThis.localStorage.getItem(`supabase.gotrue-js.locks.debug`)===`true`)};var Xo=class extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}},Zo=class extends Xo{};async function Qo(e,t,n){Yo.debug&&console.log(`@supabase/gotrue-js: navigatorLock: acquire lock`,e,t);let r=new globalThis.AbortController;return t>0&&setTimeout(()=>{r.abort(),Yo.debug&&console.log(`@supabase/gotrue-js: navigatorLock acquire timed out`,e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:`exclusive`,ifAvailable:!0}:{mode:`exclusive`,signal:r.signal},async r=>{if(r){Yo.debug&&console.log(`@supabase/gotrue-js: navigatorLock: acquired`,e,r.name);try{return await n()}finally{Yo.debug&&console.log(`@supabase/gotrue-js: navigatorLock: released`,e,r.name)}}else if(t===0)throw Yo.debug&&console.log(`@supabase/gotrue-js: navigatorLock: not immediately available`,e),new Zo(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);else{if(Yo.debug)try{let e=await globalThis.navigator.locks.query();console.log(`@supabase/gotrue-js: Navigator LockManager state`,JSON.stringify(e,null,`  `))}catch(e){console.warn(`@supabase/gotrue-js: Error when querying Navigator LockManager state`,e)}return console.warn(`@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request`),await n()}}))}function $o(){if(typeof globalThis!=`object`)try{Object.defineProperty(Object.prototype,`__magic__`,{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<`u`&&(self.globalThis=self)}}function es(e){if(!/^0x[a-fA-F0-9]{40}$/.test(e))throw Error(`@supabase/auth-js: Address "${e}" is invalid.`);return e.toLowerCase()}function ts(e){return parseInt(e,16)}function ns(e){let t=new TextEncoder().encode(e);return`0x`+Array.from(t,e=>e.toString(16).padStart(2,`0`)).join(``)}function rs(e){let{chainId:t,domain:n,expirationTime:r,issuedAt:i=new Date,nonce:a,notBefore:o,requestId:s,resources:c,scheme:l,uri:u,version:d}=e;if(!Number.isInteger(t))throw Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${t}`);if(!n)throw Error(`@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.`);if(a&&a.length<8)throw Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${a}`);if(!u)throw Error(`@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.`);if(d!==`1`)throw Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${d}`);if(e.statement?.includes(`
`))throw Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${e.statement}`);let f=es(e.address),p=l?`${l}://${n}`:n,m=e.statement?`${e.statement}\n`:``,h=`${p} wants you to sign in with your Ethereum account:\n${f}\n\n${m}`,g=`URI: ${u}\nVersion: ${d}\nChain ID: ${t}${a?`\nNonce: ${a}`:``}\nIssued At: ${i.toISOString()}`;if(r&&(g+=`\nExpiration Time: ${r.toISOString()}`),o&&(g+=`\nNot Before: ${o.toISOString()}`),s&&(g+=`\nRequest ID: ${s}`),c){let e=`
Resources:`;for(let t of c){if(!t||typeof t!=`string`)throw Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${t}`);e+=`\n- ${t}`}g+=e}return`${h}\n${g}`}var os=class extends Error{constructor({message:e,code:t,cause:n,name:r}){super(e,{cause:n}),this.__isWebAuthnError=!0,this.name=r??(n instanceof Error?n.name:void 0)??`Unknown Error`,this.code=t}},ss=class extends os{constructor(e,t){super({code:`ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY`,cause:t,message:e}),this.name=`WebAuthnUnknownError`,this.originalError=t}};function cs({error:e,options:t}){let{publicKey:n}=t;if(!n)throw Error(`options was missing required publicKey property`);if(e.name===`AbortError`){if(t.signal instanceof AbortSignal)return new os({message:`Registration ceremony was sent an abort signal`,code:`ERROR_CEREMONY_ABORTED`,cause:e})}else if(e.name===`ConstraintError`){if(n.authenticatorSelection?.requireResidentKey===!0)return new os({message:`Discoverable credentials were required but no available authenticator supported it`,code:`ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT`,cause:e});if(t.mediation===`conditional`&&n.authenticatorSelection?.userVerification===`required`)return new os({message:`User verification was required during automatic registration but it could not be performed`,code:`ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE`,cause:e});if(n.authenticatorSelection?.userVerification===`required`)return new os({message:`User verification was required but no available authenticator supported it`,code:`ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT`,cause:e})}else if(e.name===`InvalidStateError`)return new os({message:`The authenticator was previously registered`,code:`ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED`,cause:e});else if(e.name===`NotAllowedError`)return new os({message:e.message,code:`ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY`,cause:e});else if(e.name===`NotSupportedError`)return n.pubKeyCredParams.filter(e=>e.type===`public-key`).length===0?new os({message:`No entry in pubKeyCredParams was of type "public-key"`,code:`ERROR_MALFORMED_PUBKEYCREDPARAMS`,cause:e}):new os({message:`No available authenticator supported any of the specified pubKeyCredParams algorithms`,code:`ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG`,cause:e});else if(e.name===`SecurityError`){let t=window.location.hostname;if(gs(t)){if(n.rp.id!==t)return new os({message:`The RP ID "${n.rp.id}" is invalid for this domain`,code:`ERROR_INVALID_RP_ID`,cause:e})}else return new os({message:`${window.location.hostname} is an invalid domain`,code:`ERROR_INVALID_DOMAIN`,cause:e})}else if(e.name===`TypeError`){if(n.user.id.byteLength<1||n.user.id.byteLength>64)return new os({message:`User ID was not between 1 and 64 characters`,code:`ERROR_INVALID_USER_ID_LENGTH`,cause:e})}else if(e.name===`UnknownError`)return new os({message:`The authenticator was unable to process the specified options, or could not create a new credential`,code:`ERROR_AUTHENTICATOR_GENERAL_ERROR`,cause:e});return new os({message:`a Non-Webauthn related error has occurred`,code:`ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY`,cause:e})}function ls({error:e,options:t}){let{publicKey:n}=t;if(!n)throw Error(`options was missing required publicKey property`);if(e.name===`AbortError`){if(t.signal instanceof AbortSignal)return new os({message:`Authentication ceremony was sent an abort signal`,code:`ERROR_CEREMONY_ABORTED`,cause:e})}else if(e.name===`NotAllowedError`)return new os({message:e.message,code:`ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY`,cause:e});else if(e.name===`SecurityError`){let t=window.location.hostname;if(gs(t)){if(n.rpId!==t)return new os({message:`The RP ID "${n.rpId}" is invalid for this domain`,code:`ERROR_INVALID_RP_ID`,cause:e})}else return new os({message:`${window.location.hostname} is an invalid domain`,code:`ERROR_INVALID_DOMAIN`,cause:e})}else if(e.name===`UnknownError`)return new os({message:`The authenticator was unable to process the specified options, or could not create a new assertion signature`,code:`ERROR_AUTHENTICATOR_GENERAL_ERROR`,cause:e});return new os({message:`a Non-Webauthn related error has occurred`,code:`ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY`,cause:e})}var us=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols==`function`)for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const ds=new class{createNewAbortSignal(){if(this.controller){let e=(Error(`Cancelling existing WebAuthn API call for new one`));e.name=`AbortError`,this.controller.abort(e)}let e=new AbortController;return this.controller=e,e.signal}cancelCeremony(){if(this.controller){let e=(Error(`Manually cancelling existing WebAuthn API call`));e.name=`AbortError`,this.controller.abort(e),this.controller=void 0}}};function fs(e){if(!e)throw Error(`Credential creation options are required`);if(typeof PublicKeyCredential<`u`&&`parseCreationOptionsFromJSON`in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON==`function`)return PublicKeyCredential.parseCreationOptionsFromJSON(e);let{challenge:t,user:n,excludeCredentials:r}=e,i=us(e,[`challenge`,`user`,`excludeCredentials`]),a=to(t).buffer,o=Object.assign(Object.assign({},n),{id:to(n.id).buffer}),s=Object.assign(Object.assign({},i),{challenge:a,user:o});if(r&&r.length>0){s.excludeCredentials=Array(r.length);for(let e=0;e<r.length;e++){let t=r[e];s.excludeCredentials[e]=Object.assign(Object.assign({},t),{id:to(t.id).buffer,type:t.type||`public-key`,transports:t.transports})}}return s}function ps(e){if(!e)throw Error(`Credential request options are required`);if(typeof PublicKeyCredential<`u`&&`parseRequestOptionsFromJSON`in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON==`function`)return PublicKeyCredential.parseRequestOptionsFromJSON(e);let{challenge:t,allowCredentials:n}=e,r=us(e,[`challenge`,`allowCredentials`]),i=to(t).buffer,a=Object.assign(Object.assign({},r),{challenge:i});if(n&&n.length>0){a.allowCredentials=Array(n.length);for(let e=0;e<n.length;e++){let t=n[e];a.allowCredentials[e]=Object.assign(Object.assign({},t),{id:to(t.id).buffer,type:t.type||`public-key`,transports:t.transports})}}return a}function ms(e){if(`toJSON`in e&&typeof e.toJSON==`function`)return e.toJSON();let t=e;return{id:e.id,rawId:e.id,response:{attestationObject:ro(new Uint8Array(e.response.attestationObject)),clientDataJSON:ro(new Uint8Array(e.response.clientDataJSON))},type:`public-key`,clientExtensionResults:e.getClientExtensionResults(),authenticatorAttachment:t.authenticatorAttachment??void 0}}function hs(e){if(`toJSON`in e&&typeof e.toJSON==`function`)return e.toJSON();let t=e,n=e.getClientExtensionResults(),r=e.response;return{id:e.id,rawId:e.id,response:{authenticatorData:ro(new Uint8Array(r.authenticatorData)),clientDataJSON:ro(new Uint8Array(r.clientDataJSON)),signature:ro(new Uint8Array(r.signature)),userHandle:r.userHandle?ro(new Uint8Array(r.userHandle)):void 0},type:`public-key`,clientExtensionResults:n,authenticatorAttachment:t.authenticatorAttachment??void 0}}function gs(e){return e===`localhost`||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(e)}function _s(){return!!(oo()&&`PublicKeyCredential`in window&&window.PublicKeyCredential&&`credentials`in navigator&&typeof(navigator==null?void 0:navigator.credentials)?.create==`function`&&typeof(navigator==null?void 0:navigator.credentials)?.get==`function`)}async function vs(e){try{let t=await navigator.credentials.create(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new ss(`Browser returned unexpected credential type`,t)}:{data:null,error:new ss(`Empty credential response`,t)}}catch(t){return{data:null,error:cs({error:t,options:e})}}}async function ys(e){try{let t=await navigator.credentials.get(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new ss(`Browser returned unexpected credential type`,t)}:{data:null,error:new ss(`Empty credential response`,t)}}catch(t){return{data:null,error:ls({error:t,options:e})}}}const bs={hints:[`security-key`],authenticatorSelection:{authenticatorAttachment:`cross-platform`,requireResidentKey:!1,userVerification:`preferred`,residentKey:`discouraged`},attestation:`none`},xs={userVerification:`preferred`,hints:[`security-key`]};function Ss(...e){let t=e=>typeof e==`object`&&!!e&&!Array.isArray(e),n=e=>e instanceof ArrayBuffer||ArrayBuffer.isView(e),r={};for(let i of e){if(!i)continue;for(let e in i){let a=i[e];if(a===void 0)continue;if(Array.isArray(a))r[e]=a;else if(n(a))r[e]=a;else if(t(a)){let n=r[e];t(n)?r[e]=Ss(n,a):r[e]=Ss(a)}else r[e]=a}}return r}function Cs(e,t){return Ss(bs,e,t||{})}function ws(e,t){return Ss(xs,e,t||{})}var Ts=class{constructor(e){this.client=e,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(e){return this.client.mfa.enroll(Object.assign(Object.assign({},e),{factorType:`webauthn`}))}async _challenge({factorId:e,webauthn:t,friendlyName:n,signal:r},i){try{let{data:a,error:o}=await this.client.mfa.challenge({factorId:e,webauthn:t});if(!a)return{data:null,error:o};let s=r??ds.createNewAbortSignal();if(a.webauthn.type===`create`){let{user:e}=a.webauthn.credential_options.publicKey;e.name||=`${e.id}:${n}`,e.displayName||=e.name}switch(a.webauthn.type){case`create`:{let t=Cs(a.webauthn.credential_options.publicKey,i?.create),{data:n,error:r}=await vs({publicKey:t,signal:s});return n?{data:{factorId:e,challengeId:a.id,webauthn:{type:a.webauthn.type,credential_response:n}},error:null}:{data:null,error:r}}case`request`:{let t=ws(a.webauthn.credential_options.publicKey,i?.request),{data:n,error:r}=await ys(Object.assign(Object.assign({},a.webauthn.credential_options),{publicKey:t,signal:s}));return n?{data:{factorId:e,challengeId:a.id,webauthn:{type:a.webauthn.type,credential_response:n}},error:null}:{data:null,error:r}}}}catch(e){return B(e)?{data:null,error:e}:{data:null,error:new Na(`Unexpected error in challenge`,e)}}}async _verify({challengeId:e,factorId:t,webauthn:n}){return this.client.mfa.verify({factorId:t,challengeId:e,webauthn:n})}async _authenticate({factorId:e,webauthn:{rpId:t=typeof window<`u`?window.location.hostname:void 0,rpOrigins:n=typeof window<`u`?[window.location.origin]:void 0,signal:r}},i){if(!t)return{data:null,error:new Aa(`rpId is required for WebAuthn authentication`)};try{if(!_s())return{data:null,error:new Na(`Browser does not support WebAuthn`,null)};let{data:a,error:o}=await this.challenge({factorId:e,webauthn:{rpId:t,rpOrigins:n},signal:r},{request:i});if(!a)return{data:null,error:o};let{webauthn:s}=a;return this._verify({factorId:e,challengeId:a.challengeId,webauthn:{type:s.type,rpId:t,rpOrigins:n,credential_response:s.credential_response}})}catch(e){return B(e)?{data:null,error:e}:{data:null,error:new Na(`Unexpected error in authenticate`,e)}}}async _register({friendlyName:e,rpId:t=typeof window<`u`?window.location.hostname:void 0,rpOrigins:n=typeof window<`u`?[window.location.origin]:void 0,signal:r},i){if(!t)return{data:null,error:new Aa(`rpId is required for WebAuthn registration`)};try{if(!_s())return{data:null,error:new Na(`Browser does not support WebAuthn`,null)};let{data:a,error:o}=await this._enroll({friendlyName:e});if(!a)return await this.client.mfa.listFactors().then(t=>t.data?.all.find(t=>t.factor_type===`webauthn`&&t.friendly_name===e&&t.status!==`unverified`)).then(e=>e?this.client.mfa.unenroll({factorId:e?.id}):void 0),{data:null,error:o};let{data:s,error:c}=await this._challenge({factorId:a.id,friendlyName:a.friendly_name,webauthn:{rpId:t,rpOrigins:n},signal:r},{create:i});return s?this._verify({factorId:a.id,challengeId:s.challengeId,webauthn:{rpId:t,rpOrigins:n,type:s.webauthn.type,credential_response:s.webauthn.credential_response}}):{data:null,error:c}}catch(e){return B(e)?{data:null,error:e}:{data:null,error:new Na(`Unexpected error in register`,e)}}}};$o();var Es={url:`http://localhost:9999`,storageKey:`supabase.auth.token`,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Ea,flowType:`implicit`,debug:!1,hasCustomAuthorizationHeader:!1};async function Ds(e,t,n){return await n()}var Os={},ks=class e{get jwks(){return Os[this.storageKey]?.jwks??{keys:[]}}set jwks(e){Os[this.storageKey]=Object.assign(Object.assign({},Os[this.storageKey]),{jwks:e})}get jwks_cached_at(){return Os[this.storageKey]?.cachedAt??-(2**53-1)}set jwks_cached_at(e){Os[this.storageKey]=Object.assign(Object.assign({},Os[this.storageKey]),{cachedAt:e})}constructor(t){var n;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=e.nextInstanceID,e.nextInstanceID+=1,this.instanceID>0&&oo()&&console.warn(`Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`);let r=Object.assign(Object.assign({},Es),t);if(this.logDebugMessages=!!r.debug,typeof r.debug==`function`&&(this.logger=r.debug),this.persistSession=r.persistSession,this.storageKey=r.storageKey,this.autoRefreshToken=r.autoRefreshToken,this.admin=new qo({url:r.url,headers:r.headers,fetch:r.fetch}),this.url=r.url,this.headers=r.headers,this.fetch=uo(r.fetch),this.lock=r.lock||Ds,this.detectSessionInUrl=r.detectSessionInUrl,this.flowType=r.flowType,this.hasCustomAuthorizationHeader=r.hasCustomAuthorizationHeader,r.lock?this.lock=r.lock:oo()&&(globalThis==null?void 0:globalThis.navigator)?.locks?this.lock=Qo:this.lock=Ds,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=-(2**53-1)),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new Ts(this)},this.persistSession?(r.storage?this.storage=r.storage:co()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Jo(this.memoryStorage)),r.userStorage&&(this.userStorage=r.userStorage)):(this.memoryStorage={},this.storage=Jo(this.memoryStorage)),oo()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(e){console.error(`Failed to create a new BroadcastChannel, multi-tab state changes will not be available`,e)}(n=this.broadcastChannel)==null||n.addEventListener(`message`,async e=>{this._debug(`received broadcast notification from other tab or client`,e),await this._notifyAllSubscribers(e.data.event,e.data.session,!1)})}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${Ca}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise||=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise}async _initialize(){try{let e=lo(window.location.href),t=`none`;if(this._isImplicitGrantCallback(e)?t=`implicit`:await this._isPKCECallback(e)&&(t=`pkce`),oo()&&this.detectSessionInUrl&&t!==`none`){let{data:n,error:r}=await this._getSessionFromURL(e,t);if(r){if(this._debug(`#_initialize()`,`error detecting session from URL`,r),Ba(r)){let e=r.details?.code;if(e===`identity_already_exists`||e===`identity_not_found`||e===`single_identity_not_deletable`)return{error:r}}return await this._removeSession(),{error:r}}let{session:i,redirectType:a}=n;return this._debug(`#_initialize()`,`detected session in URL`,i,`redirect type`,a),await this._saveSession(i),setTimeout(async()=>{a===`recovery`?await this._notifyAllSubscribers(`PASSWORD_RECOVERY`,i):await this._notifyAllSubscribers(`SIGNED_IN`,i)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(e){return B(e)?{error:e}:{error:new Na(`Unexpected error during initialization`,e)}}finally{await this._handleVisibilityChange(),this._debug(`#_initialize()`,`end`)}}async signInAnonymously(e){try{let{data:t,error:n}=await H(this.fetch,`POST`,`${this.url}/signup`,{headers:this.headers,body:{data:e?.options?.data??{},gotrue_meta_security:{captcha_token:e?.options?.captchaToken}},xform:Ro});if(n||!t)return{data:{user:null,session:null},error:n};let r=t.session,i=t.user;return t.session&&(await this._saveSession(t.session),await this._notifyAllSubscribers(`SIGNED_IN`,r)),{data:{user:i,session:r},error:null}}catch(e){if(B(e))return{data:{user:null,session:null},error:e};throw e}}async signUp(e){try{let t;if(`email`in e){let{email:n,password:r,options:i}=e,a=null,o=null;this.flowType===`pkce`&&([a,o]=await V(this.storage,this.storageKey)),t=await H(this.fetch,`POST`,`${this.url}/signup`,{headers:this.headers,redirectTo:i?.emailRedirectTo,body:{email:n,password:r,data:i?.data??{},gotrue_meta_security:{captcha_token:i?.captchaToken},code_challenge:a,code_challenge_method:o},xform:Ro})}else if(`phone`in e){let{phone:n,password:r,options:i}=e;t=await H(this.fetch,`POST`,`${this.url}/signup`,{headers:this.headers,body:{phone:n,password:r,data:i?.data??{},channel:i?.channel??`sms`,gotrue_meta_security:{captcha_token:i?.captchaToken}},xform:Ro})}else throw new Ra(`You must provide either an email or phone number and a password`);let{data:n,error:r}=t;if(r||!n)return{data:{user:null,session:null},error:r};let i=n.session,a=n.user;return n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers(`SIGNED_IN`,i)),{data:{user:a,session:i},error:null}}catch(e){if(B(e))return{data:{user:null,session:null},error:e};throw e}}async signInWithPassword(e){try{let t;if(`email`in e){let{email:n,password:r,options:i}=e;t=await H(this.fetch,`POST`,`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:n,password:r,gotrue_meta_security:{captcha_token:i?.captchaToken}},xform:zo})}else if(`phone`in e){let{phone:n,password:r,options:i}=e;t=await H(this.fetch,`POST`,`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:n,password:r,gotrue_meta_security:{captcha_token:i?.captchaToken}},xform:zo})}else throw new Ra(`You must provide either an email or phone number and a password`);let{data:n,error:r}=t;return r?{data:{user:null,session:null},error:r}:!n||!n.session||!n.user?{data:{user:null,session:null},error:new La}:(n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers(`SIGNED_IN`,n.session)),{data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:r})}catch(e){if(B(e))return{data:{user:null,session:null},error:e};throw e}}async signInWithOAuth(e){return await this._handleProviderSignIn(e.provider,{redirectTo:e.options?.redirectTo,scopes:e.options?.scopes,queryParams:e.options?.queryParams,skipBrowserRedirect:e.options?.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){let{chain:t}=e;switch(t){case`ethereum`:return await this.signInWithEthereum(e);case`solana`:return await this.signInWithSolana(e);default:throw Error(`@supabase/auth-js: Unsupported chain "${t}"`)}}async signInWithEthereum(e){let t,n;if(`message`in e)t=e.message,n=e.signature;else{let{chain:r,wallet:i,statement:a,options:o}=e,s;if(oo())if(typeof i==`object`)s=i;else{let e=window;if(`ethereum`in e&&typeof e.ethereum==`object`&&`request`in e.ethereum&&typeof e.ethereum.request==`function`)s=e.ethereum;else throw Error(`@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.`)}else{if(typeof i!=`object`||!o?.url)throw Error(`@supabase/auth-js: Both wallet and url must be specified in non-browser environments.`);s=i}let c=new URL(o?.url??window.location.href),l=await s.request({method:`eth_requestAccounts`}).then(e=>e).catch(()=>{throw Error(`@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid`)});if(!l||l.length===0)throw Error(`@supabase/auth-js: No accounts available. Please ensure the wallet is connected.`);let u=es(l[0]),d=o?.signInWithEthereum?.chainId;if(!d){let e=await s.request({method:`eth_chainId`});d=ts(e)}let f={domain:c.host,address:u,statement:a,uri:c.href,version:`1`,chainId:d,nonce:o?.signInWithEthereum?.nonce,issuedAt:o?.signInWithEthereum?.issuedAt??new Date,expirationTime:o?.signInWithEthereum?.expirationTime,notBefore:o?.signInWithEthereum?.notBefore,requestId:o?.signInWithEthereum?.requestId,resources:o?.signInWithEthereum?.resources};t=rs(f),n=await s.request({method:`personal_sign`,params:[ns(t),u]})}try{let{data:r,error:i}=await H(this.fetch,`POST`,`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:`ethereum`,message:t,signature:n},e.options?.captchaToken?{gotrue_meta_security:{captcha_token:e.options?.captchaToken}}:null),xform:Ro});if(i)throw i;return!r||!r.session||!r.user?{data:{user:null,session:null},error:new La}:(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers(`SIGNED_IN`,r.session)),{data:Object.assign({},r),error:i})}catch(e){if(B(e))return{data:{user:null,session:null},error:e};throw e}}async signInWithSolana(e){let t,n;if(`message`in e)t=e.message,n=e.signature;else{let{chain:r,wallet:i,statement:a,options:o}=e,s;if(oo())if(typeof i==`object`)s=i;else{let e=window;if(`solana`in e&&typeof e.solana==`object`&&(`signIn`in e.solana&&typeof e.solana.signIn==`function`||`signMessage`in e.solana&&typeof e.solana.signMessage==`function`))s=e.solana;else throw Error(`@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.`)}else{if(typeof i!=`object`||!o?.url)throw Error(`@supabase/auth-js: Both wallet and url must be specified in non-browser environments.`);s=i}let c=new URL(o?.url??window.location.href);if(`signIn`in s&&s.signIn){let e=await s.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},o?.signInWithSolana),{version:`1`,domain:c.host,uri:c.href}),a?{statement:a}:null)),r;if(Array.isArray(e)&&e[0]&&typeof e[0]==`object`)r=e[0];else if(e&&typeof e==`object`&&`signedMessage`in e&&`signature`in e)r=e;else throw Error(`@supabase/auth-js: Wallet method signIn() returned unrecognized value`);if(`signedMessage`in r&&`signature`in r&&(typeof r.signedMessage==`string`||r.signedMessage instanceof Uint8Array)&&r.signature instanceof Uint8Array)t=typeof r.signedMessage==`string`?r.signedMessage:new TextDecoder().decode(r.signedMessage),n=r.signature;else throw Error(`@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields`)}else{if(!(`signMessage`in s)||typeof s.signMessage!=`function`||!(`publicKey`in s)||typeof s!=`object`||!s.publicKey||!(`toBase58`in s.publicKey)||typeof s.publicKey.toBase58!=`function`)throw Error(`@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API`);t=[`${c.host} wants you to sign in with your Solana account:`,s.publicKey.toBase58(),...a?[``,a,``]:[``],`Version: 1`,`URI: ${c.href}`,`Issued At: ${o?.signInWithSolana?.issuedAt??new Date().toISOString()}`,...o?.signInWithSolana?.notBefore?[`Not Before: ${o.signInWithSolana.notBefore}`]:[],...o?.signInWithSolana?.expirationTime?[`Expiration Time: ${o.signInWithSolana.expirationTime}`]:[],...o?.signInWithSolana?.chainId?[`Chain ID: ${o.signInWithSolana.chainId}`]:[],...o?.signInWithSolana?.nonce?[`Nonce: ${o.signInWithSolana.nonce}`]:[],...o?.signInWithSolana?.requestId?[`Request ID: ${o.signInWithSolana.requestId}`]:[],...o?.signInWithSolana?.resources?.length?[`Resources`,...o.signInWithSolana.resources.map(e=>`- ${e}`)]:[]].join(`
`);let e=await s.signMessage(new TextEncoder().encode(t),`utf8`);if(!e||!(e instanceof Uint8Array))throw Error(`@supabase/auth-js: Wallet signMessage() API returned an recognized value`);n=e}}try{let{data:r,error:i}=await H(this.fetch,`POST`,`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:`solana`,message:t,signature:ro(n)},e.options?.captchaToken?{gotrue_meta_security:{captcha_token:e.options?.captchaToken}}:null),xform:Ro});if(i)throw i;return!r||!r.session||!r.user?{data:{user:null,session:null},error:new La}:(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers(`SIGNED_IN`,r.session)),{data:Object.assign({},r),error:i})}catch(e){if(B(e))return{data:{user:null,session:null},error:e};throw e}}async _exchangeCodeForSession(e){let t=await mo(this.storage,`${this.storageKey}-code-verifier`),[n,r]=(t??``).split(`/`);try{let{data:t,error:i}=await H(this.fetch,`POST`,`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:n},xform:Ro});if(await ho(this.storage,`${this.storageKey}-code-verifier`),i)throw i;return!t||!t.session||!t.user?{data:{user:null,session:null,redirectType:null},error:new La}:(t.session&&(await this._saveSession(t.session),await this._notifyAllSubscribers(`SIGNED_IN`,t.session)),{data:Object.assign(Object.assign({},t),{redirectType:r??null}),error:i})}catch(e){if(B(e))return{data:{user:null,session:null,redirectType:null},error:e};throw e}}async signInWithIdToken(e){try{let{options:t,provider:n,token:r,access_token:i,nonce:a}=e,{data:o,error:s}=await H(this.fetch,`POST`,`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:r,access_token:i,nonce:a,gotrue_meta_security:{captcha_token:t?.captchaToken}},xform:Ro});return s?{data:{user:null,session:null},error:s}:!o||!o.session||!o.user?{data:{user:null,session:null},error:new La}:(o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers(`SIGNED_IN`,o.session)),{data:o,error:s})}catch(e){if(B(e))return{data:{user:null,session:null},error:e};throw e}}async signInWithOtp(e){try{if(`email`in e){let{email:t,options:n}=e,r=null,i=null;this.flowType===`pkce`&&([r,i]=await V(this.storage,this.storageKey));let{error:a}=await H(this.fetch,`POST`,`${this.url}/otp`,{headers:this.headers,body:{email:t,data:n?.data??{},create_user:n?.shouldCreateUser??!0,gotrue_meta_security:{captcha_token:n?.captchaToken},code_challenge:r,code_challenge_method:i},redirectTo:n?.emailRedirectTo});return{data:{user:null,session:null},error:a}}if(`phone`in e){let{phone:t,options:n}=e,{data:r,error:i}=await H(this.fetch,`POST`,`${this.url}/otp`,{headers:this.headers,body:{phone:t,data:n?.data??{},create_user:n?.shouldCreateUser??!0,gotrue_meta_security:{captcha_token:n?.captchaToken},channel:n?.channel??`sms`}});return{data:{user:null,session:null,messageId:r?.message_id},error:i}}throw new Ra(`You must provide either an email or phone number.`)}catch(e){if(B(e))return{data:{user:null,session:null},error:e};throw e}}async verifyOtp(e){try{let t,n;`options`in e&&(t=e.options?.redirectTo,n=e.options?.captchaToken);let{data:r,error:i}=await H(this.fetch,`POST`,`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:n}}),redirectTo:t,xform:Ro});if(i)throw i;if(!r)throw Error(`An error occurred on token verification.`);let a=r.session,o=r.user;return a?.access_token&&(await this._saveSession(a),await this._notifyAllSubscribers(e.type==`recovery`?`PASSWORD_RECOVERY`:`SIGNED_IN`,a)),{data:{user:o,session:a},error:null}}catch(e){if(B(e))return{data:{user:null,session:null},error:e};throw e}}async signInWithSSO(e){try{let t=null,n=null;return this.flowType===`pkce`&&([t,n]=await V(this.storage,this.storageKey)),await H(this.fetch,`POST`,`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},`providerId`in e?{provider_id:e.providerId}:null),`domain`in e?{domain:e.domain}:null),{redirect_to:e.options?.redirectTo??void 0}),e?.options?.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:t,code_challenge_method:n}),headers:this.headers,xform:Vo})}catch(e){if(B(e))return{data:null,error:e};throw e}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{let{data:{session:t},error:n}=e;if(n)throw n;if(!t)throw new Fa;let{error:r}=await H(this.fetch,`GET`,`${this.url}/reauthenticate`,{headers:this.headers,jwt:t.access_token});return{data:{user:null,session:null},error:r}})}catch(e){if(B(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{let t=`${this.url}/resend`;if(`email`in e){let{email:n,type:r,options:i}=e,{error:a}=await H(this.fetch,`POST`,t,{headers:this.headers,body:{email:n,type:r,gotrue_meta_security:{captcha_token:i?.captchaToken}},redirectTo:i?.emailRedirectTo});return{data:{user:null,session:null},error:a}}else if(`phone`in e){let{phone:n,type:r,options:i}=e,{data:a,error:o}=await H(this.fetch,`POST`,t,{headers:this.headers,body:{phone:n,type:r,gotrue_meta_security:{captcha_token:i?.captchaToken}}});return{data:{user:null,session:null,messageId:a?.message_id},error:o}}throw new Ra(`You must provide either an email or phone number and a type`)}catch(e){if(B(e))return{data:{user:null,session:null},error:e};throw e}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async e=>e))}async _acquireLock(e,t){this._debug(`#_acquireLock`,`begin`,e);try{if(this.lockAcquired){let e=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),n=(async()=>(await e,await t()))();return this.pendingInLock.push((async()=>{try{await n}catch{}})()),n}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug(`#_acquireLock`,`lock acquired for storage key`,this.storageKey);try{this.lockAcquired=!0;let e=t();for(this.pendingInLock.push((async()=>{try{await e}catch{}})()),await e;this.pendingInLock.length;){let e=[...this.pendingInLock];await Promise.all(e),this.pendingInLock.splice(0,e.length)}return await e}finally{this._debug(`#_acquireLock`,`lock released for storage key`,this.storageKey),this.lockAcquired=!1}})}finally{this._debug(`#_acquireLock`,`end`)}}async _useSession(e){this._debug(`#_useSession`,`begin`);try{let t=await this.__loadSession();return await e(t)}finally{this._debug(`#_useSession`,`end`)}}async __loadSession(){this._debug(`#__loadSession()`,`begin`),this.lockAcquired||this._debug(`#__loadSession()`,`used outside of an acquired lock!`,Error().stack);try{let e=null,t=await mo(this.storage,this.storageKey);if(this._debug(`#getSession()`,`session from storage`,t),t!==null&&(this._isValidSession(t)?e=t:(this._debug(`#getSession()`,`session from storage is not valid`),await this._removeSession())),!e)return{data:{session:null},error:null};let n=e.expires_at?e.expires_at*1e3-Date.now()<Ta:!1;if(this._debug(`#__loadSession()`,`session has${n?``:` not`} expired`,`expires_at`,e.expires_at),!n){if(this.userStorage){let t=await mo(this.userStorage,this.storageKey+`-user`);t?.user?e.user=t.user:e.user=Ao()}if(this.storage.isServer&&e.user){let t=this.suppressGetSessionWarning;e=new Proxy(e,{get:(e,n,r)=>(!t&&n===`user`&&(console.warn(`Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server.`),t=!0,this.suppressGetSessionWarning=!0),Reflect.get(e,n,r))})}return{data:{session:e},error:null}}let{data:r,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{session:null},error:i}:{data:{session:r},error:null}}finally{this._debug(`#__loadSession()`,`end`)}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await H(this.fetch,`GET`,`${this.url}/user`,{headers:this.headers,jwt:e,xform:Bo}):await this._useSession(async e=>{let{data:t,error:n}=e;if(n)throw n;return!t.session?.access_token&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Fa}:await H(this.fetch,`GET`,`${this.url}/user`,{headers:this.headers,jwt:t.session?.access_token??void 0,xform:Bo})})}catch(e){if(B(e))return Ia(e)&&(await this._removeSession(),await ho(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:e};throw e}}async updateUser(e,t={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,t))}async _updateUser(e,t={}){try{return await this._useSession(async n=>{let{data:r,error:i}=n;if(i)throw i;if(!r.session)throw new Fa;let a=r.session,o=null,s=null;this.flowType===`pkce`&&e.email!=null&&([o,s]=await V(this.storage,this.storageKey));let{data:c,error:l}=await H(this.fetch,`PUT`,`${this.url}/user`,{headers:this.headers,redirectTo:t?.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:o,code_challenge_method:s}),jwt:a.access_token,xform:Bo});if(l)throw l;return a.user=c.user,await this._saveSession(a),await this._notifyAllSubscribers(`USER_UPDATED`,a),{data:{user:a.user},error:null}})}catch(e){if(B(e))return{data:{user:null},error:e};throw e}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Fa;let t=Date.now()/1e3,n=t,r=!0,i=null,{payload:a}=_o(e.access_token);if(a.exp&&(n=a.exp,r=n<=t),r){let{data:t,error:n}=await this._callRefreshToken(e.refresh_token);if(n)return{data:{user:null,session:null},error:n};if(!t)return{data:{user:null,session:null},error:null};i=t}else{let{data:r,error:a}=await this._getUser(e.access_token);if(a)throw a;i={access_token:e.access_token,refresh_token:e.refresh_token,user:r.user,token_type:`bearer`,expires_in:n-t,expires_at:n},await this._saveSession(i),await this._notifyAllSubscribers(`SIGNED_IN`,i)}return{data:{user:i.user,session:i},error:null}}catch(e){if(B(e))return{data:{session:null,user:null},error:e};throw e}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async t=>{if(!e){let{data:n,error:r}=t;if(r)throw r;e=n.session??void 0}if(!e?.refresh_token)throw new Fa;let{data:n,error:r}=await this._callRefreshToken(e.refresh_token);return r?{data:{user:null,session:null},error:r}:n?{data:{user:n.user,session:n},error:null}:{data:{user:null,session:null},error:null}})}catch(e){if(B(e))return{data:{user:null,session:null},error:e};throw e}}async _getSessionFromURL(e,t){try{if(!oo())throw new za(`No browser detected.`);if(e.error||e.error_description||e.error_code)throw new za(e.error_description||`Error in URL with unspecified error_description`,{error:e.error||`unspecified_error`,code:e.error_code||`unspecified_code`});switch(t){case`implicit`:if(this.flowType===`pkce`)throw new Va(`Not a valid PKCE flow url.`);break;case`pkce`:if(this.flowType===`implicit`)throw new za(`Not a valid implicit grant flow url.`);break;default:}if(t===`pkce`){if(this._debug(`#_initialize()`,`begin`,`is PKCE flow`,!0),!e.code)throw new Va(`No code detected.`);let{data:t,error:n}=await this._exchangeCodeForSession(e.code);if(n)throw n;let r=new URL(window.location.href);return r.searchParams.delete(`code`),window.history.replaceState(window.history.state,``,r.toString()),{data:{session:t.session,redirectType:null},error:null}}let{provider_token:n,provider_refresh_token:r,access_token:i,refresh_token:a,expires_in:o,expires_at:s,token_type:c}=e;if(!i||!o||!a||!c)throw new za(`No session defined in URL`);let l=Math.round(Date.now()/1e3),u=parseInt(o),d=l+u;s&&(d=parseInt(s));let f=d-l;f*1e3<=3e4&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${f}s, should have been closer to ${u}s`);let p=d-u;l-p>=120?console.warn(`@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale`,p,d,l):l-p<0&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew`,p,d,l);let{data:m,error:h}=await this._getUser(i);if(h)throw h;let g={provider_token:n,provider_refresh_token:r,access_token:i,expires_in:u,expires_at:d,refresh_token:a,token_type:c,user:m.user};return window.location.hash=``,this._debug(`#_getSessionFromURL()`,`clearing window.location.hash`),{data:{session:g,redirectType:e.type},error:null}}catch(e){if(B(e))return{data:{session:null,redirectType:null},error:e};throw e}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){let t=await mo(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&t)}async signOut(e={scope:`global`}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:`global`}){return await this._useSession(async t=>{let{data:n,error:r}=t;if(r)return{error:r};let i=n.session?.access_token;if(i){let{error:t}=await this.admin.signOut(i,e);if(t&&!(Ma(t)&&(t.status===404||t.status===401||t.status===403)))return{error:t}}return e!==`others`&&(await this._removeSession(),await ho(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){let t=ao(),n={id:t,callback:e,unsubscribe:()=>{this._debug(`#unsubscribe()`,`state change callback with id removed`,t),this.stateChangeEmitters.delete(t)}};return this._debug(`#onAuthStateChange()`,`registered callback with id`,t),this.stateChangeEmitters.set(t,n),(async()=>{await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(t)})})(),{data:{subscription:n}}}async _emitInitialSession(e){return await this._useSession(async t=>{try{let{data:{session:n},error:r}=t;if(r)throw r;await this.stateChangeEmitters.get(e)?.callback(`INITIAL_SESSION`,n),this._debug(`INITIAL_SESSION`,`callback id`,e,`session`,n)}catch(t){await this.stateChangeEmitters.get(e)?.callback(`INITIAL_SESSION`,null),this._debug(`INITIAL_SESSION`,`callback id`,e,`error`,t),console.error(t)}})}async resetPasswordForEmail(e,t={}){let n=null,r=null;this.flowType===`pkce`&&([n,r]=await V(this.storage,this.storageKey,!0));try{return await H(this.fetch,`POST`,`${this.url}/recover`,{body:{email:e,code_challenge:n,code_challenge_method:r,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(e){if(B(e))return{data:null,error:e};throw e}}async getUserIdentities(){try{let{data:e,error:t}=await this.getUser();if(t)throw t;return{data:{identities:e.user.identities??[]},error:null}}catch(e){if(B(e))return{data:null,error:e};throw e}}async linkIdentity(e){return`token`in e?this.linkIdentityIdToken(e):this.linkIdentityOAuth(e)}async linkIdentityOAuth(e){try{let{data:t,error:n}=await this._useSession(async t=>{let{data:n,error:r}=t;if(r)throw r;let i=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:e.options?.redirectTo,scopes:e.options?.scopes,queryParams:e.options?.queryParams,skipBrowserRedirect:!0});return await H(this.fetch,`GET`,i,{headers:this.headers,jwt:n.session?.access_token??void 0})});if(n)throw n;return oo()&&!e.options?.skipBrowserRedirect&&window.location.assign(t?.url),{data:{provider:e.provider,url:t?.url},error:null}}catch(t){if(B(t))return{data:{provider:e.provider,url:null},error:t};throw t}}async linkIdentityIdToken(e){return await this._useSession(async t=>{try{let{error:n,data:{session:r}}=t;if(n)throw n;let{options:i,provider:a,token:o,access_token:s,nonce:c}=e,{data:l,error:u}=await H(this.fetch,`POST`,`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:r?.access_token??void 0,body:{provider:a,id_token:o,access_token:s,nonce:c,link_identity:!0,gotrue_meta_security:{captcha_token:i?.captchaToken}},xform:Ro});return u?{data:{user:null,session:null},error:u}:!l||!l.session||!l.user?{data:{user:null,session:null},error:new La}:(l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers(`USER_UPDATED`,l.session)),{data:l,error:u})}catch(e){if(B(e))return{data:{user:null,session:null},error:e};throw e}})}async unlinkIdentity(e){try{return await this._useSession(async t=>{let{data:n,error:r}=t;if(r)throw r;return await H(this.fetch,`DELETE`,`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:n.session?.access_token??void 0})})}catch(e){if(B(e))return{data:null,error:e};throw e}}async _refreshAccessToken(e){let t=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(t,`begin`);try{let n=Date.now();return await yo(async n=>(n>0&&await vo(200*2**(n-1)),this._debug(t,`refreshing attempt`,n),await H(this.fetch,`POST`,`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:Ro})),(e,t)=>{let r=200*2**e;return t&&Ua(t)&&Date.now()+r-n<3e4})}catch(e){if(this._debug(t,`error`,e),B(e))return{data:{session:null,user:null},error:e};throw e}finally{this._debug(t,`end`)}}_isValidSession(e){return typeof e==`object`&&!!e&&`access_token`in e&&`refresh_token`in e&&`expires_at`in e}async _handleProviderSignIn(e,t){let n=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug(`#_handleProviderSignIn()`,`provider`,e,`options`,t,`url`,n),oo()&&!t.skipBrowserRedirect&&window.location.assign(n),{data:{provider:e,url:n},error:null}}async _recoverAndRefresh(){let e=`#_recoverAndRefresh()`;this._debug(e,`begin`);try{let t=await mo(this.storage,this.storageKey);if(t&&this.userStorage){let e=await mo(this.userStorage,this.storageKey+`-user`);!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!e&&(e={user:t.user},await po(this.userStorage,this.storageKey+`-user`,e)),t.user=e?.user??Ao()}else if(t&&!t.user&&!t.user){let e=await mo(this.storage,this.storageKey+`-user`);e&&e?.user?(t.user=e.user,await ho(this.storage,this.storageKey+`-user`),await po(this.storage,this.storageKey,t)):t.user=Ao()}if(this._debug(e,`session from storage`,t),!this._isValidSession(t)){this._debug(e,`session is not valid`),t!==null&&await this._removeSession();return}let n=(t.expires_at??1/0)*1e3-Date.now()<Ta;if(this._debug(e,`session has${n?``:` not`} expired with margin of ${Ta}s`),n){if(this.autoRefreshToken&&t.refresh_token){let{error:n}=await this._callRefreshToken(t.refresh_token);n&&(console.error(n),Ua(n)||(this._debug(e,`refresh failed with a non-retryable error, removing the session`,n),await this._removeSession()))}}else if(t.user&&t.user.__isUserNotAvailableProxy===!0)try{let{data:n,error:r}=await this._getUser(t.access_token);!r&&n?.user?(t.user=n.user,await this._saveSession(t),await this._notifyAllSubscribers(`SIGNED_IN`,t)):this._debug(e,`could not get user data, skipping SIGNED_IN notification`)}catch(t){console.error(`Error getting user data:`,t),this._debug(e,`error getting user data, skipping SIGNED_IN notification`,t)}else await this._notifyAllSubscribers(`SIGNED_IN`,t)}catch(t){this._debug(e,`error`,t),console.error(t);return}finally{this._debug(e,`end`)}}async _callRefreshToken(e){var t,n;if(!e)throw new Fa;if(this.refreshingDeferred)return this.refreshingDeferred.promise;let r=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(r,`begin`);try{this.refreshingDeferred=new go;let{data:t,error:n}=await this._refreshAccessToken(e);if(n)throw n;if(!t.session)throw new Fa;await this._saveSession(t.session),await this._notifyAllSubscribers(`TOKEN_REFRESHED`,t.session);let r={data:t.session,error:null};return this.refreshingDeferred.resolve(r),r}catch(e){if(this._debug(r,`error`,e),B(e)){let n={data:null,error:e};return Ua(e)||await this._removeSession(),(t=this.refreshingDeferred)==null||t.resolve(n),n}throw(n=this.refreshingDeferred)==null||n.reject(e),e}finally{this.refreshingDeferred=null,this._debug(r,`end`)}}async _notifyAllSubscribers(e,t,n=!0){let r=`#_notifyAllSubscribers(${e})`;this._debug(r,`begin`,t,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:e,session:t});let r=[],i=Array.from(this.stateChangeEmitters.values()).map(async n=>{try{await n.callback(e,t)}catch(e){r.push(e)}});if(await Promise.all(i),r.length>0){for(let e=0;e<r.length;e+=1)console.error(r[e]);throw r[0]}}finally{this._debug(r,`end`)}}async _saveSession(e){this._debug(`#_saveSession()`,e),this.suppressGetSessionWarning=!0;let t=Object.assign({},e),n=t.user&&t.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!n&&t.user&&await po(this.userStorage,this.storageKey+`-user`,{user:t.user});let e=Object.assign({},t);delete e.user;let r=jo(e);await po(this.storage,this.storageKey,r)}else{let e=jo(t);await po(this.storage,this.storageKey,e)}}async _removeSession(){this._debug(`#_removeSession()`),await ho(this.storage,this.storageKey),await ho(this.storage,this.storageKey+`-code-verifier`),await ho(this.storage,this.storageKey+`-user`),this.userStorage&&await ho(this.userStorage,this.storageKey+`-user`),await this._notifyAllSubscribers(`SIGNED_OUT`,null)}_removeVisibilityChangedCallback(){this._debug(`#_removeVisibilityChangedCallback()`);let e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&oo()&&window!=null&&window.removeEventListener&&window.removeEventListener(`visibilitychange`,e)}catch(e){console.error(`removing visibilitychange callback failed`,e)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug(`#_startAutoRefresh()`);let e=setInterval(()=>this._autoRefreshTokenTick(),wa);this.autoRefreshTicker=e,e&&typeof e==`object`&&typeof e.unref==`function`?e.unref():typeof Deno<`u`&&typeof Deno.unrefTimer==`function`&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug(`#_stopAutoRefresh()`);let e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug(`#_autoRefreshTokenTick()`,`begin`);try{await this._acquireLock(0,async()=>{try{let e=Date.now();try{return await this._useSession(async t=>{let{data:{session:n}}=t;if(!n||!n.refresh_token||!n.expires_at){this._debug(`#_autoRefreshTokenTick()`,`no session`);return}let r=Math.floor((n.expires_at*1e3-e)/wa);this._debug(`#_autoRefreshTokenTick()`,`access token expires in ${r} ticks, a tick lasts ${wa}ms, refresh threshold is 3 ticks`),r<=3&&await this._callRefreshToken(n.refresh_token)})}catch(e){console.error(`Auto refresh tick failed with error. This is likely a transient error.`,e)}}finally{this._debug(`#_autoRefreshTokenTick()`,`end`)}})}catch(e){if(e.isAcquireTimeout||e instanceof Xo)this._debug(`auto refresh token tick lock not available`);else throw e}}async _handleVisibilityChange(){if(this._debug(`#_handleVisibilityChange()`),!oo()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener(`visibilitychange`,this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error(`_handleVisibilityChange`,e)}}async _onVisibilityChanged(e){let t=`#_onVisibilityChanged(${e})`;this._debug(t,`visibilityState`,document.visibilityState),document.visibilityState===`visible`?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!==`visible`){this._debug(t,`acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting`);return}await this._recoverAndRefresh()}))):document.visibilityState===`hidden`&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,t,n){let r=[`provider=${encodeURIComponent(t)}`];if(n?.redirectTo&&r.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n?.scopes&&r.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType===`pkce`){let[e,t]=await V(this.storage,this.storageKey),n=new URLSearchParams({code_challenge:`${encodeURIComponent(e)}`,code_challenge_method:`${encodeURIComponent(t)}`});r.push(n.toString())}if(n?.queryParams){let e=new URLSearchParams(n.queryParams);r.push(e.toString())}return n?.skipBrowserRedirect&&r.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${e}?${r.join(`&`)}`}async _unenroll(e){try{return await this._useSession(async t=>{let{data:n,error:r}=t;return r?{data:null,error:r}:await H(this.fetch,`DELETE`,`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:n?.session?.access_token})})}catch(e){if(B(e))return{data:null,error:e};throw e}}async _enroll(e){try{return await this._useSession(async t=>{let{data:n,error:r}=t;if(r)return{data:null,error:r};let i=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType===`phone`?{phone:e.phone}:e.factorType===`totp`?{issuer:e.issuer}:{}),{data:a,error:o}=await H(this.fetch,`POST`,`${this.url}/factors`,{body:i,headers:this.headers,jwt:n?.session?.access_token});return o?{data:null,error:o}:(e.factorType===`totp`&&a.type===`totp`&&a?.totp?.qr_code&&(a.totp.qr_code=`data:image/svg+xml;utf-8,${a.totp.qr_code}`),{data:a,error:null})})}catch(e){if(B(e))return{data:null,error:e};throw e}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{let{data:n,error:r}=t;if(r)return{data:null,error:r};let i=Object.assign({challenge_id:e.challengeId},`webauthn`in e?{webauthn:Object.assign(Object.assign({},e.webauthn),{credential_response:e.webauthn.type===`create`?ms(e.webauthn.credential_response):hs(e.webauthn.credential_response)})}:{code:e.code}),{data:a,error:o}=await H(this.fetch,`POST`,`${this.url}/factors/${e.factorId}/verify`,{body:i,headers:this.headers,jwt:n?.session?.access_token});return o?{data:null,error:o}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+a.expires_in},a)),await this._notifyAllSubscribers(`MFA_CHALLENGE_VERIFIED`,a),{data:a,error:o})})}catch(e){if(B(e))return{data:null,error:e};throw e}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{let{data:n,error:r}=t;if(r)return{data:null,error:r};let i=await H(this.fetch,`POST`,`${this.url}/factors/${e.factorId}/challenge`,{body:e,headers:this.headers,jwt:n?.session?.access_token});if(i.error)return i;let{data:a}=i;if(a.type!==`webauthn`)return{data:a,error:null};switch(a.webauthn.type){case`create`:return{data:Object.assign(Object.assign({},a),{webauthn:Object.assign(Object.assign({},a.webauthn),{credential_options:Object.assign(Object.assign({},a.webauthn.credential_options),{publicKey:fs(a.webauthn.credential_options.publicKey)})})}),error:null};case`request`:return{data:Object.assign(Object.assign({},a),{webauthn:Object.assign(Object.assign({},a.webauthn),{credential_options:Object.assign(Object.assign({},a.webauthn.credential_options),{publicKey:ps(a.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(e){if(B(e))return{data:null,error:e};throw e}})}async _challengeAndVerify(e){let{data:t,error:n}=await this._challenge({factorId:e.factorId});return n?{data:null,error:n}:await this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})}async _listFactors(){let{data:{user:e},error:t}=await this.getUser();if(t)return{data:null,error:t};let n={all:[],phone:[],totp:[],webauthn:[]};for(let t of e?.factors??[])n.all.push(t),t.status===`verified`&&n[t.factor_type].push(t);return{data:n,error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{let{data:{session:t},error:n}=e;if(n)return{data:null,error:n};if(!t)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};let{payload:r}=_o(t.access_token),i=null;r.aal&&(i=r.aal);let a=i;(t.user.factors?.filter(e=>e.status===`verified`)??[]).length>0&&(a=`aal2`);let o=r.amr||[];return{data:{currentLevel:i,nextLevel:a,currentAuthenticationMethods:o},error:null}}))}async fetchJwk(e,t={keys:[]}){let n=t.keys.find(t=>t.kid===e);if(n)return n;let r=Date.now();if(n=this.jwks.keys.find(t=>t.kid===e),n&&this.jwks_cached_at+6e5>r)return n;let{data:i,error:a}=await H(this.fetch,`GET`,`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(a)throw a;return!i.keys||i.keys.length===0||(this.jwks=i,this.jwks_cached_at=r,n=i.keys.find(t=>t.kid===e),!n)?null:n}async getClaims(e,t={}){try{let n=e;if(!n){let{data:e,error:t}=await this.getSession();if(t||!e.session)return{data:null,error:t};n=e.session.access_token}let{header:r,payload:i,signature:a,raw:{header:o,payload:s}}=_o(n);t?.allowExpired||Eo(i.exp);let c=!r.alg||r.alg.startsWith(`HS`)||!r.kid||!(`crypto`in globalThis&&`subtle`in globalThis.crypto)?null:await this.fetchJwk(r.kid,t?.keys?{keys:t.keys}:t?.jwks);if(!c){let{error:e}=await this.getUser(n);if(e)throw e;return{data:{claims:i,header:r,signature:a},error:null}}let l=Do(r.alg),u=await crypto.subtle.importKey(`jwk`,c,l,!0,[`verify`]);if(!await crypto.subtle.verify(l,u,a,no(`${o}.${s}`)))throw new Ga(`Invalid JWT signature`);return{data:{claims:i,header:r,signature:a},error:null}}catch(e){if(B(e))return{data:null,error:e};throw e}}};ks.nextInstanceID=0;var As=ks,js=class extends As{constructor(e){super(e)}},Ms=function(e,t,n,r){function i(e){return e instanceof n?e:new n(function(t){t(e)})}return new(n||=Promise)(function(n,a){function o(e){try{c(r.next(e))}catch(e){a(e)}}function s(e){try{c(r.throw(e))}catch(e){a(e)}}function c(e){e.done?n(e.value):i(e.value).then(o,s)}c((r=r.apply(e,t||[])).next())})},Ns=class{constructor(e,t,n){this.supabaseUrl=e,this.supabaseKey=t;let r=Sa(e);if(!t)throw Error(`supabaseKey is required.`);this.realtimeUrl=new URL(`realtime/v1`,r),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace(`http`,`ws`),this.authUrl=new URL(`auth/v1`,r),this.storageUrl=new URL(`storage/v1`,r),this.functionsUrl=new URL(`functions/v1`,r);let i=`sb-${r.hostname.split(`.`)[0]}-auth-token`,a={db:fa,realtime:ma,auth:Object.assign(Object.assign({},pa),{storageKey:i}),global:da},o=xa(n??{},a);this.storageKey=o.auth.storageKey??``,this.headers=o.global.headers??{},o.accessToken?(this.accessToken=o.accessToken,this.auth=new Proxy({},{get:(e,t)=>{throw Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(t)} is not possible`)}})):this.auth=this._initSupabaseAuthClient(o.auth??{},this.headers,o.global.fetch),this.fetch=va(t,this._getAccessToken.bind(this),o.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},o.realtime)),this.rest=new Xr(new URL(`rest/v1`,r).href,{headers:this.headers,schema:o.db.schema,fetch:this.fetch}),this.storage=new la(this.storageUrl.href,this.headers,this.fetch,n?.storage),o.accessToken||this._listenForAuthEvents()}get functions(){return new Pr(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},n={head:!1,get:!1,count:void 0}){return this.rest.rpc(e,t,n)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){return Ms(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();let{data:e}=yield this.auth.getSession();return e.session?.access_token??this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:n,storage:r,userStorage:i,storageKey:a,flowType:o,lock:s,debug:c},l,u){let d={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new js({url:this.authUrl.href,headers:Object.assign(Object.assign({},d),l),storageKey:a,autoRefreshToken:e,persistSession:t,detectSessionInUrl:n,storage:r,userStorage:i,flowType:o,lock:s,debug:c,fetch:u,hasCustomAuthorizationHeader:Object.keys(this.headers).some(e=>e.toLowerCase()===`authorization`)})}_initRealtimeClient(e){return new Pi(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((e,t)=>{this._handleTokenChanged(e,`CLIENT`,t?.access_token)})}_handleTokenChanged(e,t,n){(e===`TOKEN_REFRESHED`||e===`SIGNED_IN`)&&this.changedAccessToken!==n?(this.changedAccessToken=n,this.realtime.setAuth(n)):e===`SIGNED_OUT`&&(this.realtime.setAuth(),t==`STORAGE`&&this.auth.signOut(),this.changedAccessToken=void 0)}};const Ps=(e,t,n)=>new Ns(e,t,n);function Fs(){if(typeof window<`u`||typeof process>`u`)return!1;let e=process.version;if(e==null)return!1;let t=e.match(/^v(\d+)\./);return t?parseInt(t[1],10)<=18:!1}Fs()&&console.warn(`⚠️  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217`);var U=Ps(`https://ejazbezcauxdtlkqctuw.supabase.co`,`eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImVqYXpiZXpjYXV4ZHRsa3FjdHV3Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTkyOTk0MTIsImV4cCI6MjA3NDg3NTQxMn0.YKZIOej3agqNyS5cqVxjNQf9wuWCGurIBMEdNpgZWNA`);const W=jn()(Er((e,t)=>({profile:null,currentUserId:null,childInfos:[],isLoggedIn:!1,loading:!1,error:null,fetchCurrentUserId:async()=>{try{let{data:{user:t},error:n}=await U.auth.getUser();if(n)throw n;e(e=>{e.currentUserId=t?.id??null,e.isLoggedIn=!!t})}catch{e(e=>{e.currentUserId=null,e.isLoggedIn=!1})}},fetchProfile:async t=>{e(e=>{e.loading=!0,e.error=null});try{let{data:{user:n},error:r}=await U.auth.getUser();r&&console.warn(`로그인하지 않음:`,r.message),e(e=>{e.isLoggedIn=!!n});let i=null;if(!t||t===`me`){if(!n)throw Error(`로그인이 필요합니다.`);i=n.id}else i=t;if(!i)throw Error(`유효하지 않은 사용자 ID입니다.`);let{data:a,error:o}=await U.from(`users`).select(`*`).eq(`auth_id`,i).single();if(o)throw o;let s=[];if(n&&a.role&&(a.role===`parent`||a.role===`teacher`)&&i===n.id)try{let{data:e,error:t}=await U.from(`child_parent_links`).select(`child_id (auth_id, nickname, child_link_code)`).eq(`parent_id`,i);if(t)throw t;s=e?.map(e=>e.child_id)??[]}catch(e){console.error(`자녀 정보 로딩 실패:`,e.message),s=[]}e(e=>{e.profile=a,e.childInfos=s,e.loading=!1,e.error=null})}catch(t){e(e=>{e.profile=null,e.childInfos=[],e.loading=!1,e.error=t.message??`프로필 불러오기 실패`})}},updateProfile:async(n,r)=>{e(e=>{e.loading=!0,e.error=null});try{let{profile:e}=t();if(!e)throw Error(`프로필이 없습니다.`);let{error:i}=await U.from(`users`).update(n).eq(`auth_id`,e.auth_id);if(i)throw i;r?.length&&await t().updateValidChildCodes(r),await t().fetchProfile(e.auth_id)}catch(t){e(e=>{e.error=t.message})}finally{e(e=>{e.loading=!1})}},updateValidChildCodes:async n=>{let r=t().profile;if(!r)return[];let i=n.map(e=>e.trim()).filter(Boolean);try{let{data:t,error:n}=await U.from(`child_parent_links`).select(`child_id`).eq(`parent_id`,r.auth_id);if(n)throw n;let a=t?.map(e=>e.child_id)??[],{data:o,error:s}=await U.from(`users`).select(`auth_id, nickname, child_link_code`).in(`child_link_code`,i);if(s)throw s;let c=o?.map(e=>e.auth_id)??[],l=a.filter(e=>!c.includes(e));if(l.length){let{error:e}=await U.from(`child_parent_links`).delete().in(`child_id`,l).eq(`parent_id`,r.auth_id);if(e)throw e}let u=c.filter(e=>!a.includes(e)).map(e=>({parent_id:r.auth_id,child_id:e}));if(u.length){let{error:e}=await U.from(`child_parent_links`).insert(u);if(e)throw e}return e(e=>{e.childInfos=o}),o.map(e=>e.child_link_code)}catch(e){throw console.error(`자녀코드 업데이트 오류:`,e.message),e}},logout:async()=>{e(e=>{e.loading=!0,e.error=null});try{await U.auth.signOut(),t().clearProfile()}catch(t){e(e=>{e.error=t.message})}finally{e(e=>{e.loading=!1})}},deleteProfile:async()=>{let n=t().profile;if(n)try{let{error:t}=await U.functions.invoke(`deleteUser`,{body:{userId:n.auth_id}});if(t)throw t;e(e=>{e.profile=null,e.currentUserId=null,e.isLoggedIn=!1,e.childInfos=[]}),await U.auth.signOut()}catch(e){console.error(`회원 삭제 중 오류:`,e.message??e),alert(`회원 삭제에 실패했습니다.`)}},clearProfile:()=>{e(e=>{e.profile=null,e.currentUserId=null,e.isLoggedIn=!1,e.childInfos=[],e.error=null,e.loading=!1})}})));
/**
* @license lucide-react v0.545.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/
var Is=e=>e.replace(/([a-z0-9])([A-Z])/g,`$1-$2`).toLowerCase(),Ls=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,n)=>n?n.toUpperCase():t.toLowerCase()),Rs=e=>{let t=Ls(e);return t.charAt(0).toUpperCase()+t.slice(1)},zs=(...e)=>e.filter((e,t,n)=>!!e&&e.trim()!==``&&n.indexOf(e)===t).join(` `).trim(),Bs=e=>{for(let t in e)if(t.startsWith(`aria-`)||t===`role`||t===`title`)return!0},Vs={xmlns:`http://www.w3.org/2000/svg`,width:24,height:24,viewBox:`0 0 24 24`,fill:`none`,stroke:`currentColor`,strokeWidth:2,strokeLinecap:`round`,strokeLinejoin:`round`},Hs=(0,b.forwardRef)(({color:e=`currentColor`,size:t=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:i=``,children:a,iconNode:o,...s},c)=>(0,b.createElement)(`svg`,{ref:c,...Vs,width:t,height:t,stroke:e,strokeWidth:r?Number(n)*24/Number(t):n,className:zs(`lucide`,i),...!a&&!Bs(s)&&{"aria-hidden":`true`},...s},[...o.map(([e,t])=>(0,b.createElement)(e,t)),...Array.isArray(a)?a:[a]])),Us=(e,t)=>{let n=(0,b.forwardRef)(({className:n,...r},i)=>(0,b.createElement)(Hs,{ref:i,iconNode:t,className:zs(`lucide-${Is(Rs(e))}`,`lucide-${e}`,n),...r}));return n.displayName=Rs(e),n},Ws=Us(`bell`,[[`path`,{d:`M10.268 21a2 2 0 0 0 3.464 0`,key:`vwvbt9`}],[`path`,{d:`M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326`,key:`11g9vi`}]]),Gs=Us(`chevron-down`,[[`path`,{d:`m6 9 6 6 6-6`,key:`qrunsl`}]]),Ks=Us(`chevron-right`,[[`path`,{d:`m9 18 6-6-6-6`,key:`mthhwq`}]]),qs=Us(`download`,[[`path`,{d:`M12 15V3`,key:`m9g1x1`}],[`path`,{d:`M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4`,key:`ih7n3h`}],[`path`,{d:`m7 10 5 5 5-5`,key:`brsn70`}]]),Js=Us(`file`,[[`path`,{d:`M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z`,key:`1rqfz7`}],[`path`,{d:`M14 2v4a2 2 0 0 0 2 2h4`,key:`tnqrlb`}]]),Ys=Us(`heart`,[[`path`,{d:`M2 9.5a5.5 5.5 0 0 1 9.591-3.676.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5c0 2.29-1.5 4-3 5.5l-5.492 5.313a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5`,key:`mvr1a0`}]]),Xs=Us(`message-circle`,[[`path`,{d:`M2.992 16.342a2 2 0 0 1 .094 1.167l-1.065 3.29a1 1 0 0 0 1.236 1.168l3.413-.998a2 2 0 0 1 1.099.092 10 10 0 1 0-4.777-4.719`,key:`1sd12s`}]]),Zs=Us(`message-square`,[[`path`,{d:`M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z`,key:`18887p`}]]),Qs=Us(`milestone`,[[`path`,{d:`M12 13v8`,key:`1l5pq0`}],[`path`,{d:`M12 3v3`,key:`1n5kay`}],[`path`,{d:`M4 6a1 1 0 0 0-1 1v5a1 1 0 0 0 1 1h13a2 2 0 0 0 1.152-.365l3.424-2.317a1 1 0 0 0 0-1.635l-3.424-2.318A2 2 0 0 0 17 6z`,key:`1btarq`}]]),$s=Us(`move-left`,[[`path`,{d:`M6 8L2 12L6 16`,key:`kyvwex`}],[`path`,{d:`M2 12H22`,key:`1m8cig`}]]),ec=Us(`smile`,[[`circle`,{cx:`12`,cy:`12`,r:`10`,key:`1mglay`}],[`path`,{d:`M8 14s1.5 2 4 2 4-2 4-2`,key:`1y1vjs`}],[`line`,{x1:`9`,x2:`9.01`,y1:`9`,y2:`9`,key:`yxxnd0`}],[`line`,{x1:`15`,x2:`15.01`,y1:`9`,y2:`9`,key:`1p4y9e`}]]),tc=Us(`square-pen`,[[`path`,{d:`M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7`,key:`1m0v6g`}],[`path`,{d:`M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z`,key:`ohrbg2`}]]),nc=Us(`thumbs-up`,[[`path`,{d:`M7 10v12`,key:`1qc93n`}],[`path`,{d:`M15 5.88 14 10h5.83a2 2 0 0 1 1.92 2.56l-2.33 8A2 2 0 0 1 17.5 22H4a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2.76a2 2 0 0 0 1.79-1.11L12 2a3.13 3.13 0 0 1 3 3.88Z`,key:`emmmcr`}]]),rc=Us(`trash-2`,[[`path`,{d:`M10 11v6`,key:`nco0om`}],[`path`,{d:`M14 11v6`,key:`outv1u`}],[`path`,{d:`M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6`,key:`miytrc`}],[`path`,{d:`M3 6h18`,key:`d0wm0j`}],[`path`,{d:`M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2`,key:`e791ji`}]]),ic=Us(`user-plus`,[[`path`,{d:`M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2`,key:`1yyitq`}],[`circle`,{cx:`9`,cy:`7`,r:`4`,key:`nufk8`}],[`line`,{x1:`19`,x2:`19`,y1:`8`,y2:`14`,key:`1bvyxn`}],[`line`,{x1:`22`,x2:`16`,y1:`11`,y2:`11`,key:`1shjgl`}]]),ac=Us(`users-round`,[[`path`,{d:`M18 21a8 8 0 0 0-16 0`,key:`3ypg7q`}],[`circle`,{cx:`10`,cy:`8`,r:`5`,key:`o932ke`}],[`path`,{d:`M22 20c0-3.37-2-6.5-4-8a5 5 0 0 0-.45-8.3`,key:`10s06x`}]]),oc=Us(`x`,[[`path`,{d:`M18 6 6 18`,key:`1bl5f8`}],[`path`,{d:`m6 6 12 12`,key:`d8bk6v`}]]);const sc=jn()(Er(e=>({notifications:[],isLoading:!1,error:null,fetchNotifications:async t=>{e(e=>{e.isLoading=!0,e.error=null});try{let{data:n,error:r}=await U.from(`notifications`).select(`
						id,
						type,
						message,
						content,
						created_at,
						actor_id,
						target_id,
						user_id
					`).eq(`user_id`,t).order(`created_at`,{ascending:!1}).limit(100);if(r)throw r;let i=(n||[]).map(e=>({id:e.id,type:e.type,message:e.message,content:e.content||void 0,date:new Date(e.created_at).toLocaleDateString(`ko-KR`),actorId:e.actor_id,targetId:e.target_id,createdAt:e.created_at}));e(e=>{e.notifications=i,e.isLoading=!1})}catch(t){console.error(`알림 로딩 오류:`,t),e(e=>{e.error=t instanceof Error?t.message:`알림을 불러오는데 실패했습니다.`,e.isLoading=!1})}},deleteNotification:async t=>{try{let{error:n}=await U.from(`notifications`).delete().eq(`id`,t);if(n)throw n;e(e=>{e.notifications=e.notifications.filter(e=>e.id!==t)})}catch(t){console.error(`알림 삭제 오류:`,t),e(e=>{e.error=t instanceof Error?t.message:`알림 삭제에 실패했습니다.`})}},deleteAllNotifications:async t=>{try{let{error:n}=await U.from(`notifications`).delete().eq(`user_id`,t);if(n)throw n;e(e=>{e.notifications=[]})}catch(t){console.error(`모든 알림 삭제 오류:`,t),e(e=>{e.error=t instanceof Error?t.message:`모든 알림 삭제에 실패했습니다.`})}},clearError:()=>{e(e=>{e.error=null})}})));var cc=s((exports=>{var t=Symbol.for(`react.transitional.element`),n=Symbol.for(`react.fragment`);function r(e,n,r){var i=null;if(r!==void 0&&(i=``+r),n.key!==void 0&&(i=``+n.key),`key`in n)for(var a in r={},n)a!==`key`&&(r[a]=n[a]);else r=n;return n=r.ref,{$$typeof:t,type:e,key:i,ref:n===void 0?null:n,props:r}}exports.Fragment=n,exports.jsx=r,exports.jsxs=r})),G=u(s(((exports,t)=>{t.exports=cc()}))());function lc(){let e=(0,C.c)(1),t;return e[0]===Symbol.for(`react.memo_cache_sentinel`)?(t=(0,G.jsx)(G.Fragment,{children:Array.from({length:3}).map(uc)}),e[0]=t):t=e[0],t}function uc(e,t){return(0,G.jsx)(`div`,{className:`p-4 rounded-lg border bg-white border-[#E6E9EE]`,children:(0,G.jsxs)(`div`,{className:`flex items-start gap-3`,children:[(0,G.jsx)(`div`,{className:`flex-shrink-0 mt-1`,children:(0,G.jsx)(`div`,{className:`w-5 h-5 rounded-full skeleton-40`})}),(0,G.jsxs)(`div`,{className:`flex-1 min-w-0`,children:[(0,G.jsx)(`div`,{className:`w-3/4 h-4 rounded-sm skeleton-50 mb-2`}),t!==1&&(0,G.jsx)(`div`,{className:`w-1/2 h-3 rounded-sm skeleton-30 mb-2`}),(0,G.jsx)(`div`,{className:`w-20 h-3 rounded-sm skeleton-30`})]})]})},t)}var dc=u(S());function fc(e){let t=(0,dc.c)(42),{isOpen:n,onClose:r}=e,i=Je(),a=W(mc),{notifications:o,isLoading:s,error:c,fetchNotifications:l,deleteNotification:u,deleteAllNotifications:d,clearError:f}=sc(),p,m;t[0]!==n||t[1]!==r?(p=()=>{let e=e=>{e.key===`Escape`&&r()};return n&&document.addEventListener(`keydown`,e),()=>{document.removeEventListener(`keydown`,e)}},m=[n,r],t[0]=n,t[1]=r,t[2]=p,t[3]=m):(p=t[2],m=t[3]),(0,b.useEffect)(p,m);let h,g;t[4]!==a||t[5]!==l||t[6]!==n?(h=()=>{n&&a&&l(a)},g=[n,a,l],t[4]=a,t[5]=l,t[6]=n,t[7]=h,t[8]=g):(h=t[7],g=t[8]),(0,b.useEffect)(h,g);let _;t[9]!==a||t[10]!==d?(_=async()=>{a&&confirm(`모든 알림을 삭제하시겠습니까?`)&&await d(a)},t[9]=a,t[10]=d,t[11]=_):_=t[11];let v=_,y;t[12]===u?y=t[13]:(y=async(e,t)=>{e.stopPropagation(),await u(t.id)},t[12]=u,t[13]=y);let x=y,S;t[14]!==u||t[15]!==i||t[16]!==r?(S=async e=>{bb26:switch(e.type){case`CHILD_LINKED`:i(`/profile/${e.targetId}`),r();break bb26;case`NEW_POST_BY_CHILD`:i(`/posts/${e.targetId}`),r();break bb26;case`COMMENT_ADOPTED`:i(`/posts/${e.targetId}`),r();break bb26;case`COMMENT_LIKE`:i(`/posts/${e.targetId}`),r();break bb26;case`NEW_COMMENT`:i(`/posts/${e.targetId}`),r();break bb26;case`POST_LIKE`:i(`/posts/${e.targetId}`),r();break bb26;case`NEW_REPLY`:i(`/posts/${e.targetId}`),r();break bb26;default:console.log(`알 수 없는 알림 타입:`,e.type)}await u(e.id)},t[14]=u,t[15]=i,t[16]=r,t[17]=S):S=t[17];let C=S,w=pc,T=`fixed inset-0 bg-gray-900/60 z-40 transition-opacity duration-300 ease-in-out ${n?`opacity-100`:`opacity-0 pointer-events-none`}`,E;t[18]!==r||t[19]!==T?(E=(0,G.jsx)(`div`,{className:T,onClick:r}),t[18]=r,t[19]=T,t[20]=E):E=t[20];let D=`fixed right-0 top-0 w-[440px] h-screen bg-white shadow-lg z-50 transform transition-transform duration-300 ease-in-out flex flex-col ${n?`translate-x-0`:`translate-x-full`}`,O;t[21]===Symbol.for(`react.memo_cache_sentinel`)?(O=(0,G.jsx)(`h2`,{className:`text-xl font-bold text-[#1F2937]`,children:`알림`}),t[21]=O):O=t[21];let k=o.length===0,A;t[22]!==v||t[23]!==k?(A=(0,G.jsxs)(`div`,{className:`flex justify-between items-center p-6 border-b border-[#E6E9EE]`,children:[O,(0,G.jsx)(`button`,{onClick:v,className:`text-sm text-[#6B7280] hover:text-[#8B5CF6] transition-colors disabled:opacity-50 disabled:cursor-not-allowed cursor-pointer`,disabled:k,children:`모두 삭제`})]}),t[22]=v,t[23]=k,t[24]=A):A=t[24];let j;t[25]!==f||t[26]!==c||t[27]!==x||t[28]!==C||t[29]!==s||t[30]!==n||t[31]!==o?(j=n&&(0,G.jsxs)(G.Fragment,{children:[c&&(0,G.jsxs)(`div`,{className:`p-4 bg-red-50 border border-red-200 rounded-lg text-red-700 text-sm`,children:[(0,G.jsx)(`p`,{className:`font-medium`,children:`에러`}),(0,G.jsx)(`p`,{children:c}),(0,G.jsx)(`button`,{onClick:f,className:`mt-2 text-xs underline hover:no-underline`,children:`닫기`})]}),s?(0,G.jsx)(lc,{}):o.length===0?(0,G.jsxs)(`div`,{className:`flex flex-col items-center justify-center h-64 text-[#6B7280]`,children:[(0,G.jsx)(Ws,{className:`w-12 h-12 mb-4 opacity-50`}),(0,G.jsx)(`p`,{children:`알림이 없습니다!`})]}):o.map(e=>(0,G.jsxs)(`div`,{className:`group relative p-4 rounded-lg border bg-white border-[#E6E9EE] hover:bg-[#F8FAFC] transition-colors cursor-pointer`,onClick:()=>C(e),children:[(0,G.jsxs)(`div`,{className:`flex items-start gap-3`,children:[(0,G.jsx)(`div`,{className:`flex-shrink-0 mt-1`,children:w(e.type)}),(0,G.jsxs)(`div`,{className:`flex-1 min-w-0`,children:[(0,G.jsx)(`p`,{className:`text-sm font-medium text-[#1F2937] mb-1`,children:e.message}),e.content&&(0,G.jsxs)(`p`,{className:`text-sm text-[#6B7280] mb-2 italic truncate`,children:[`"`,e.content,`"`]}),(0,G.jsx)(`p`,{className:`text-xs text-[#9CA3AF]`,children:e.date})]})]}),(0,G.jsx)(`div`,{className:`absolute right-2 bottom-2 opacity-0 group-hover:opacity-100 transition-opacity duration-200`,children:(0,G.jsx)(`button`,{onClick:t=>x(t,e),className:`w-8 h-8 flex items-center justify-center rounded-full bg-transparent hover:bg-red-500/20 transition-colors duration-200 group/delete cursor-pointer`,children:(0,G.jsx)(rc,{className:`w-4 h-4 text-[#6B7280] group-hover/delete:text-red-500 transition-colors duration-200`})})})]},e.id))]}),t[25]=f,t[26]=c,t[27]=x,t[28]=C,t[29]=s,t[30]=n,t[31]=o,t[32]=j):j=t[32];let ee;t[33]===j?ee=t[34]:(ee=(0,G.jsx)(`div`,{className:`flex-1 overflow-y-auto p-4 space-y-3 min-h-0`,children:j}),t[33]=j,t[34]=ee);let te;t[35]!==D||t[36]!==A||t[37]!==ee?(te=(0,G.jsxs)(`div`,{className:D,children:[A,ee]}),t[35]=D,t[36]=A,t[37]=ee,t[38]=te):te=t[38];let ne;return t[39]!==te||t[40]!==E?(ne=(0,G.jsxs)(G.Fragment,{children:[E,te]}),t[39]=te,t[40]=E,t[41]=ne):ne=t[41],ne}function pc(e){switch(e){case`NEW_COMMENT`:return(0,G.jsx)(Xs,{className:`w-5 h-5 text-[#8B5CF6]`});case`NEW_REPLY`:return(0,G.jsx)(Xs,{className:`w-5 h-5 text-[#8B5CF6]`});case`POST_LIKE`:return(0,G.jsx)(Ys,{className:`w-5 h-5 text-[#EA489A]`});case`COMMENT_LIKE`:return(0,G.jsx)(Ys,{className:`w-5 h-5 text-[#EA489A]`});case`CHILD_LINKED`:return(0,G.jsx)(ic,{className:`w-5 h-5 text-[#10B981]`});case`NEW_POST_BY_CHILD`:return(0,G.jsx)(Ws,{className:`w-5 h-5 text-[#F59E0B]`});case`COMMENT_ADOPTED`:return(0,G.jsx)(nc,{className:`w-5 h-5 text-[#8B5CF6]`});default:return(0,G.jsx)(Ws,{className:`w-5 h-5 text-[#8B5CF6]`})}}function mc(e){return e.currentUserId}var hc=u(S());const gc=()=>{let e=(0,hc.c)(7),t=W(_c),n=sc(vc),r=sc(yc),i,a;e[0]!==t||e[1]!==r?(i=()=>{if(!t)return;r(t);let e=setInterval(()=>{r(t)},3e4);return()=>{clearInterval(e)}},a=[t,r],e[0]=t,e[1]=r,e[2]=i,e[3]=a):(i=e[2],a=e[3]),(0,b.useEffect)(i,a);let o;return e[4]!==r||e[5]!==n?(o={notifications:n,fetchNotifications:r},e[4]=r,e[5]=n,e[6]=o):o=e[6],o};function _c(e){return e.currentUserId}function vc(e){return e.notifications}function yc(e){return e.fetchNotifications}const bc=async(e,t,n)=>{try{let{data:r,error:i}=await U.from(`chat_rooms`).select(`user1_id, user2_id`).eq(`id`,e).single();if(i||!r)return console.error(`채팅방 조회 실패:`,i),null;let a=r.user1_id===t?r.user2_id:r.user1_id,{data:o,error:s}=await U.from(`messages`).insert({sender_id:t,receiver_id:a,message:n,room_id:e}).select().single();if(s)return console.error(`메시지 전송 실패:`,s),null;let c=r.user1_id===t;return await U.from(`chat_rooms`).update({last_message_id:o.id,last_message_at:o.created_at,is_read_user1:c,is_read_user2:!c}).eq(`id`,e),o}catch(e){return console.error(`메시지 전송 중 오류:`,e),null}},xc=async e=>{try{let{data:t,error:n}=await U.from(`messages`).select(`*`).eq(`room_id`,e).order(`created_at`,{ascending:!0});return n?(console.error(`메시지 조회 실패:`,n),[]):t||[]}catch(e){return console.error(`메시지 조회 중 오류:`,e),[]}},Sc=async e=>{try{let{data:t,error:n}=await U.from(`chat_rooms`).select(`
				*,
				user1:users!chat_rooms_user1_id_fkey(nickname, profile_image_url),
				user2:users!chat_rooms_user2_id_fkey(nickname, profile_image_url),
				last_message:messages!chat_rooms_last_message_id_fkey(message, created_at)
			`).or(`user1_id.eq.${e},user2_id.eq.${e}`).order(`last_message_at`,{ascending:!1});return n?(console.error(`채팅방 목록 조회 실패:`,n),[]):t||[]}catch(e){return console.error(`채팅방 목록 조회 중 오류:`,e),[]}},Cc=async(e,t)=>{try{let{data:n,error:r}=await U.from(`chat_rooms`).select(`*`).or(`and(user1_id.eq.${e},user2_id.eq.${t}),and(user1_id.eq.${t},user2_id.eq.${e})`).single();return r?null:n}catch{return null}},wc=async(e,t)=>{try{let{data:n,error:r}=await U.from(`chat_rooms`).insert({user1_id:e,user2_id:t,is_read_user1:!0,is_read_user2:!0}).select().single();return r?(console.error(`채팅방 생성 실패:`,r),null):n}catch(e){return console.error(`채팅방 생성 중 오류:`,e),null}},Tc=async(e,t)=>{try{let{data:n,error:r}=await U.from(`chat_rooms`).select(`user1_id, user2_id`).eq(`id`,e).single();if(r||!n)return;let i=n.user1_id===t?`is_read_user1`:`is_read_user2`;await U.from(`chat_rooms`).update({[i]:!0}).eq(`id`,e)}catch(e){console.error(`채팅방 읽음 처리 실패:`,e)}},Ec=(e,t)=>U.channel(`messages:${e}`).on(`postgres_changes`,{event:`INSERT`,schema:`public`,table:`messages`,filter:`room_id=eq.${e}`},e=>{let n=e.new;t(n)}).subscribe(),Dc=(e,t)=>U.channel(`chat_rooms:${e}`).on(`postgres_changes`,{event:`UPDATE`,schema:`public`,table:`chat_rooms`},n=>{let r=n.new;(r.user1_id===e||r.user2_id===e)&&t()}).subscribe(),Oc=async e=>{try{let{error:t}=await U.from(`messages`).delete().eq(`room_id`,e);if(t)return console.error(`메시지 삭제 실패:`,t),!1;let{error:n}=await U.from(`chat_rooms`).delete().eq(`id`,e);return n?(console.error(`채팅방 삭제 실패:`,n),!1):!0}catch(e){return console.error(`채팅방 삭제 중 오류:`,e),!1}};var kc=u(S());const Ac=()=>{let e=(0,kc.c)(12),[t,n]=(0,b.useState)(!1),r=W(jc),i;e[0]===r?i=e[1]:(i=async()=>{if(!r){n(!1);return}try{let e=(await Sc(r)).some(e=>e.user1_id===r?!e.is_read_user1:!e.is_read_user2);n(e)}catch(e){let t=e;console.error(`읽지 않은 메시지 확인 실패:`,t),n(!1)}},e[0]=r,e[1]=i);let a=i,o,s;e[2]===a?(o=e[3],s=e[4]):(o=()=>{a()},s=[a],e[2]=a,e[3]=o,e[4]=s),(0,b.useEffect)(o,s);let c,l;e[5]!==a||e[6]!==r?(c=()=>{if(!r)return;let e=U.channel(`unread_messages:${r}`).on(`postgres_changes`,{event:`UPDATE`,schema:`public`,table:`chat_rooms`},e=>{let t=e.new;(t.user1_id===r||t.user2_id===r)&&a()}).subscribe();return()=>{U.removeChannel(e)}},l=[r,a],e[5]=a,e[6]=r,e[7]=c,e[8]=l):(c=e[7],l=e[8]),(0,b.useEffect)(c,l);let u;return e[9]!==a||e[10]!==t?(u={hasUnreadMessages:t,checkUnreadMessages:a},e[9]=a,e[10]=t,e[11]=u):u=e[11],u};function jc(e){return e.currentUserId}var Mc=u(S());function Nc(){let e=(0,Mc.c)(17),t=W(Pc),{notifications:n}=gc(),{hasUnreadMessages:r}=Ac(),[i,a]=(0,b.useState)(!1),o;e[0]===i?o=e[1]:(o=()=>{a(!i)},e[0]=i,e[1]=o);let s=o,c;e[2]===Symbol.for(`react.memo_cache_sentinel`)?(c=(0,G.jsx)(L,{to:`/`,className:`text-xl font-bold text-[#8B5CF6]`,children:`StudyHub`}),e[2]=c):c=e[2];let l,u,d;e[3]===Symbol.for(`react.memo_cache_sentinel`)?(l=(0,G.jsx)(L,{to:`/search`,children:`검색`}),u=(0,G.jsx)(L,{to:`/posts`,children:`게시판`}),d=(0,G.jsx)(L,{to:`/groups`,children:`그룹`}),e[3]=l,e[4]=u,e[5]=d):(l=e[3],u=e[4],d=e[5]);let f;e[6]!==s||e[7]!==r||e[8]!==t||e[9]!==n?(f=(0,G.jsxs)(`header`,{className:`z-10 w-full h-[70px] px-6 flex justify-between items-center border-b border-[#E6E9EE] shadow-[0_2px_6px_rgba(0,0,0,0.05)]`,children:[c,(0,G.jsxs)(`nav`,{className:`flex flex-row gap-6 text-[#6B7280] font-medium`,children:[l,u,d,t?(0,G.jsxs)(G.Fragment,{children:[(0,G.jsxs)(`button`,{onClick:s,className:`cursor-pointer flex items-center gap-2 hover:text-[#8B5CF6] transition-colors relative`,children:[`알림`,n.length>0&&(0,G.jsx)(`div`,{className:`absolute -top-1 -right-1 bg-red-500 rounded-full w-2 h-2 animate-pulse`})]}),(0,G.jsxs)(L,{to:`/msg`,className:`cursor-pointer flex items-center gap-2 hover:text-[#8B5CF6] transition-colors relative`,children:[`메시지`,r&&(0,G.jsx)(`div`,{className:`absolute -top-1 -right-1 bg-red-500 rounded-full w-2 h-2 animate-pulse`})]}),(0,G.jsx)(L,{to:`/profile/me`,children:`프로필`})]}):(0,G.jsx)(G.Fragment,{})]})]}),e[6]=s,e[7]=r,e[8]=t,e[9]=n,e[10]=f):f=e[10];let p;e[11]===Symbol.for(`react.memo_cache_sentinel`)?(p=()=>a(!1),e[11]=p):p=e[11];let m;e[12]===i?m=e[13]:(m=(0,G.jsx)(fc,{isOpen:i,onClose:p}),e[12]=i,e[13]=m);let h;return e[14]!==f||e[15]!==m?(h=(0,G.jsxs)(G.Fragment,{children:[f,m]}),e[14]=f,e[15]=m,e[16]=h):h=e[16],h}function Pc(e){return e.isLoggedIn}var Fc=u(S());function Ic(){let e=(0,Fc.c)(1),t;return e[0]===Symbol.for(`react.memo_cache_sentinel`)?(t=(0,G.jsx)(G.Fragment,{children:(0,G.jsx)(`footer`,{className:`w-full pt-[40px] pb-[30px] text-center text-[#6B7280] text-sm`,children:`© 2025 StudyHub. All rights reserved.`})}),e[0]=t):t=e[0],t}function Lc(e){if(!e)return;let t=new Date,n=new Date(e),r=t.getFullYear()-n.getFullYear(),i=t.getMonth()-n.getMonth();return(i<0||i===0&&t.getDate()<n.getDate())&&r--,r}function Rc(e){if(e)return e>=8&&e<=13?`초등학교 ${e-7}학년`:e>=14&&e<=16?`중학교 ${e-13}학년`:e>=17&&e<=19?`고등학교 ${e-16}학년`:``}const zc=()=>{let[e,t]=(0,b.useState)(!1);return{sendMessage:(0,b.useCallback)(async(e,n)=>{t(!0);try{let t=W.getState().currentUserId;return t?await bc(e,t,n):null}finally{t(!1)}},[]),isLoading:e}},Bc=e=>{let[t,n]=(0,b.useState)([]),[r,i]=(0,b.useState)(!1),a=W(e=>e.currentUserId),o=(0,b.useCallback)(async()=>{if(e){i(!0);try{let t=await xc(e);n(t)}finally{i(!1)}}},[e]);return(0,b.useEffect)(()=>{o()},[o]),(0,b.useEffect)(()=>{if(!e)return;let t=Ec(e,e=>{n(t=>[...t,e])});return()=>{U.removeChannel(t)}},[e]),(0,b.useEffect)(()=>{!e||!a||(async()=>{await Tc(e,a)})()},[e,a]),{messages:t,isLoading:r,refetch:o}},Vc=()=>{let[e,t]=(0,b.useState)([]),[n,r]=(0,b.useState)(!1),i=W(e=>e.currentUserId),a=(0,b.useCallback)(async()=>{if(i){r(!0);try{let e=await Sc(i);t(e)}catch(e){console.error(`useChatRooms: 에러`,e)}finally{r(!1)}}},[i]),o=(0,b.useCallback)(async()=>{if(i)try{let e=await Sc(i);t(e)}catch(e){console.error(`useChatRooms: 실시간 업데이트 에러`,e)}},[i]);return(0,b.useEffect)(()=>{a()},[a]),(0,b.useEffect)(()=>{if(!i)return;let e=Dc(i,()=>{o()});return()=>{U.removeChannel(e)}},[i,o]),{chatRooms:e,isLoading:n,refetch:a}},Hc=()=>{let[e,t]=(0,b.useState)(!1),n=W(e=>e.currentUserId);return{createRoom:(0,b.useCallback)(async e=>{if(!n)return null;t(!0);try{return await Cc(n,e)||await wc(n,e)}finally{t(!1)}},[n]),isLoading:e}},Uc=()=>{let[e,t]=(0,b.useState)(!1);return{deleteRoom:(0,b.useCallback)(async e=>{t(!0);try{return await Oc(e)}finally{t(!1)}},[]),isLoading:e}},K=jn()(Er(e=>({friendsByProfileId:{},userFollowed:[],userFollowing:[],followStatus:{},onlineStatus:{},fetchUserFollowings:async(t,n)=>{let r=[];if(n)try{let{data:t,error:i}=await U.from(`group_members`).select(`user_id`).eq(`group_id`,n);if(i)throw i;let a=t.map(e=>e.user_id)??[];if(a.length===0)return e(e=>{e.friendsByProfileId[n]=[]}),[];let{data:o,error:s}=await U.from(`users`).select(`auth_id, nickname, profile_image_url, is_online, last_seen`).in(`auth_id`,a);if(s)throw s;let c=o.map(e=>({id:crypto.randomUUID(),created_at:new Date().toISOString(),follower_id:``,following_id:e.auth_id,users:{auth_id:e.auth_id,nickname:e.nickname,profile_image_url:e.profile_image_url,is_online:e.is_online,last_seen:e.last_seen}}));return r=c,e(e=>{e.friendsByProfileId[n]=c}),c}catch(e){return console.error(`그룹 멤버 불러오기 실패:`,e.message),[]}try{let{data:n,error:i}=await U.from(`follows`).select(`
							*,
							users!follows_following_id_fkey(
							auth_id,
							nickname,
							profile_image_url,
							is_online,
							last_seen
							)
						`).eq(`follower_id`,t);if(i)throw i;let a={};(n||[]).forEach(e=>{e.following_id&&(a[e.following_id]=!0)});let o=(n||[]).sort((e,t)=>{let n=e.users?.is_online?1:0;return(t.users?.is_online?1:0)-n});e(e=>{e.userFollowed=o,e.friendsByProfileId[t]=o}),r=[...r,...o]}catch(e){console.error(`목록 불러오기 실패:`,e.message)}return r},fetchUserFollowers:async t=>{let{data:n,error:r}=await U.from(`follows`).select(`*, users!fk_Follows_following_id_users_id(auth_id, nickname, profile_image_url, is_online)`).eq(`following_id`,t);if(r){console.error(`follows 테이블 불러오기 실패:`,r.message);return}e(e=>{e.userFollowing=n||[]})},followedUserFnc:async(t,n)=>{try{let{data:r,error:i}=await U.from(`follows`).select(`*`).eq(`follower_id`,t).eq(`following_id`,n).maybeSingle();if(i)throw i;if(r){console.log(`이미 팔로우 중입니다.`);return}let{error:a}=await U.from(`follows`).insert([{follower_id:t,following_id:n}]).select();if(a)throw a;e(e=>{e.followStatus[n]=!0})}catch(e){console.error(`팔로우 실패:`,e.message)}},unFollowUserFnc:async(t,n)=>{let{error:r}=await U.from(`follows`).delete().eq(`follower_id`,t).eq(`following_id`,n).select();if(r){console.error(`언팔로우 실패:`,r.message);return}e(e=>{e.followStatus[n]=!1})},setFriends:(t,n)=>e(e=>{e.friendsByProfileId[t]=n}),removeFriend:(t,n)=>e(e=>{e.friendsByProfileId[t]=e.friendsByProfileId[t]?.filter(e=>e.users?.auth_id!==n)||[]}),setFollowStatus:(t,n)=>e(e=>{e.followStatus[t]=n}),setUserFollowed:t=>e(e=>{typeof t==`function`?e.userFollowed=t(e.userFollowed):e.userFollowed=t}),setOnlineStatus:(t,n)=>e(e=>{e.onlineStatus[t]=n}),updateOnlineStatus:t=>e(e=>{e.onlineStatus={...e.onlineStatus,...t}})})));var Wc=`data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAKgAAACoCAAAAABRIPpoAAAAIGNIUk0AAHomAACAhAAA+gAAAIDoAAB1MAAA6mAAADqYAAAXcJy6UTwAAAACYktHRADgCofBSgAAAAlwSFlzAAAAyAAAAMgAY/rnrQAAAAd0SU1FB+cMDwgCGHVP16EAAANFelRYdFJhdyBwcm9maWxlIHR5cGUgZ2lmOnhtcCBkYXRheG1wAABYw+1YS5IbNwzd8xQ+AgmAAJHbgCSQyiJVWWSR4weURhmPHU9m7FQiudxdUreID997ILvUKD//Ej/98etvH7b9bnktH/IAlVYwZEjlxsiTuxBUBu4srOy4QTzmnAGS48p0Rrpgp42VtlTC9B2sNIqYZGBHMfJOnNdMiJhBIBjo1XDJQJPBGZgf4gb1/OLFLngsJ31JLMRxUKBdDenSL+4XHM9JcmyeENL0aIk5I9Cop1WZSz9pghdUbAjgSFgTyxUJ5CSM1oGI+BMcV1sm5iEkVKSi5dwhlwNc0gucIx0FIpMral5rThII+b2vKfKKkjoe7DJgl5M/7RcM1RLXXzgSROqaqgHrhZgmck9cT/akBzlhynDRCOSEvwB9Qvhj2DfUl0n9WdW8x7w7BdByQg6FVKceeQ8yqBdkt4RGh6hmoa9EnrChJ/GVolz8yueON7crUYjXqV7LAlFeVuY2/PHKuS6GG9IvneU143vOH4nemOj1ejwKtU9ZPGjV3lKMB6D2tWvqvqgdFg+/+79cioei9r4VdbfUvv1hew/UXrJ42C3yz8V4CGpft6bujVq17+KP1t8X4+GovX1N3TW1b3vc3gu1ZxYPvUW+kxe/96+pu6T2b7z2/f/UPmfxkFvkbcX40dL4DxKdxtXprpbn9irU0xy7tlFFnvqiLSI8dqyYYaExQoKjBwUGRIvq4e7bV/Hp5urDxdm7k6ODN687tu+9157btu6xZfPum3bOs9uuK5avvdaay5auUZYsXn3RwgWrrTpj+txzzTlt6hxTJs8+aeKE2Wa1MLdty6aZqQ0TY+tGxdDAmlUNdd26dKqp6lDRrnTaotq0jhg+9lhjDhs6xpDBow8aOGC0USWKuGxZMsVEZaQ4fHqdgilSS/0iVTutzsnGyoOFOZWkVBVS29qje9999Vm6de2jS+feO3Xs0FuvFOS0adEkI6VBQkydiJCAGtVTCNxZr4mGigOlIGNHQkTAdumNOmxYMMFAYYAAQwc63V5okEVs3nZbbTZr2kaTxq03algatNZqzTrWLEVNNWtKUpNVTWA1c9c0lz8BWNjO1HA9GV8AAAABb3JOVAHPoneaAAACTklEQVR42u3avW7FMAgFYN7/KTMheUBiYe+VbpdKzY2NbQztOUPmT7Eh8Q9dRUKAAgoooIACCiiggAIKKKCAAgoooIACCiiggC4IN1FVs9dDGmeFtpfwZ7Tlg7LYrxFOBWW12yjngYp9jCSBsj2GM0CbdaSdh4p1RU5D1TqjZ6HdzmkpRYz7itGn7XW0qKJob19a16VmoDacM1AZh8oJKJsjfACqHqjGQ10vdOKVUuAMnZqlFFfyc4VPMb1+vutTZCnNlBMFj7x77Cm05ifqnoKnqHuSUmhzmmhQFFxL7moCNAnULLo//XUo5ui/hZZp+GU+oWV+Ssr85tX5cS6zFCmzuKuzXC6zAVFmS6fOJlmZbcc6G7l1tsbLHDbUOb6pcyBW54ixzqFtnWPwOhcLrjJXNa46l1+uMteJ3lVV4oLW93stceVtbwAFFFBAAQUUUEABDYPy+/+zZ22v71/UA9uOL6Nvb9z5Q+2Dskwchpp6FlIeaJtReldT49Bma9L2Qlcxh6ljUFZbmZG9iSGo2OrIDijbjvByqNieyGKo2q7oUug+Z6eUTlS7p/opgbNLSqfHvXf0KYWzQ0o5nM9SOtY/B/spnfkejX+jHqEWlymoBEJlAsoWGfZDNRSqbmiz2DQv1KLjhLZwaPNBzfK8Ukr1Qj+8UkpT8g+FT1l66FMvpRwfpefPE+Ua+fuxp2Qjfzv2lKrmP9Q9JZuit5OUMnX7Tz2fsk3Ru0laH9qOQdsYVI5BZQyqx6AKKKBdUDsXQAEFFFBAAQUUUED/D/QLm016EoW110UAAAAldEVYdGRhdGU6Y3JlYXRlADIwMjMtMTItMTVUMDg6MDI6MjMrMDA6MDD08/7gAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDIzLTEyLTE1VDA4OjAyOjE1KzAwOjAwaPF0hQAAACh0RVh0ZGF0ZTp0aW1lc3RhbXAAMjAyMy0xMi0xNVQwODowMjoyNCswMDowMBccWQ0AAAAASUVORK5CYII=`;function Gc({user:e,profileBeingViewedId:t}){let n=Je(),{currentUserId:r}=W(),{followStatus:i,followedUserFnc:a,unFollowUserFnc:o,setFollowStatus:s,setUserFollowed:c,setFriends:l}=K(),{createRoom:u,isLoading:d}=Hc(),f=i[e.auth_id]||!1,p=e.birth_date?Lc(e.birth_date):0,m=e.role===`student`&&Rc(p);return(0,G.jsx)(G.Fragment,{children:(0,G.jsx)(L,{to:`/profile/${e.auth_id}`,children:(0,G.jsxs)(`div`,{className:`flex flex-row justify-between items-center py-4 px-5 hover:bg-[#F1F3F5]`,children:[(0,G.jsxs)(`div`,{className:`flex flex-row items-center gap-2.5`,children:[(0,G.jsxs)(`div`,{className:`relative w-12 h-12 rounded-lg`,children:[(0,G.jsx)(`img`,{className:`w-full h-full rounded-lg object-cover`,src:e.profile_image_url||`data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAKgAAACoCAAAAABRIPpoAAAAIGNIUk0AAHomAACAhAAA+gAAAIDoAAB1MAAA6mAAADqYAAAXcJy6UTwAAAACYktHRADgCofBSgAAAAlwSFlzAAAAyAAAAMgAY/rnrQAAAAd0SU1FB+cMDwgCGHVP16EAAANFelRYdFJhdyBwcm9maWxlIHR5cGUgZ2lmOnhtcCBkYXRheG1wAABYw+1YS5IbNwzd8xQ+AgmAAJHbgCSQyiJVWWSR4weURhmPHU9m7FQiudxdUreID997ILvUKD//Ej/98etvH7b9bnktH/IAlVYwZEjlxsiTuxBUBu4srOy4QTzmnAGS48p0Rrpgp42VtlTC9B2sNIqYZGBHMfJOnNdMiJhBIBjo1XDJQJPBGZgf4gb1/OLFLngsJ31JLMRxUKBdDenSL+4XHM9JcmyeENL0aIk5I9Cop1WZSz9pghdUbAjgSFgTyxUJ5CSM1oGI+BMcV1sm5iEkVKSi5dwhlwNc0gucIx0FIpMral5rThII+b2vKfKKkjoe7DJgl5M/7RcM1RLXXzgSROqaqgHrhZgmck9cT/akBzlhynDRCOSEvwB9Qvhj2DfUl0n9WdW8x7w7BdByQg6FVKceeQ8yqBdkt4RGh6hmoa9EnrChJ/GVolz8yueON7crUYjXqV7LAlFeVuY2/PHKuS6GG9IvneU143vOH4nemOj1ejwKtU9ZPGjV3lKMB6D2tWvqvqgdFg+/+79cioei9r4VdbfUvv1hew/UXrJ42C3yz8V4CGpft6bujVq17+KP1t8X4+GovX1N3TW1b3vc3gu1ZxYPvUW+kxe/96+pu6T2b7z2/f/UPmfxkFvkbcX40dL4DxKdxtXprpbn9irU0xy7tlFFnvqiLSI8dqyYYaExQoKjBwUGRIvq4e7bV/Hp5urDxdm7k6ODN687tu+9157btu6xZfPum3bOs9uuK5avvdaay5auUZYsXn3RwgWrrTpj+txzzTlt6hxTJs8+aeKE2Wa1MLdty6aZqQ0TY+tGxdDAmlUNdd26dKqp6lDRrnTaotq0jhg+9lhjDhs6xpDBow8aOGC0USWKuGxZMsVEZaQ4fHqdgilSS/0iVTutzsnGyoOFOZWkVBVS29qje9999Vm6de2jS+feO3Xs0FuvFOS0adEkI6VBQkydiJCAGtVTCNxZr4mGigOlIGNHQkTAdumNOmxYMMFAYYAAQwc63V5okEVs3nZbbTZr2kaTxq03algatNZqzTrWLEVNNWtKUpNVTWA1c9c0lz8BWNjO1HA9GV8AAAABb3JOVAHPoneaAAACTklEQVR42u3avW7FMAgFYN7/KTMheUBiYe+VbpdKzY2NbQztOUPmT7Eh8Q9dRUKAAgoooIACCiiggAIKKKCAAgoooIACCiiggC4IN1FVs9dDGmeFtpfwZ7Tlg7LYrxFOBWW12yjngYp9jCSBsj2GM0CbdaSdh4p1RU5D1TqjZ6HdzmkpRYz7itGn7XW0qKJob19a16VmoDacM1AZh8oJKJsjfACqHqjGQ10vdOKVUuAMnZqlFFfyc4VPMb1+vutTZCnNlBMFj7x77Cm05ifqnoKnqHuSUmhzmmhQFFxL7moCNAnULLo//XUo5ui/hZZp+GU+oWV+Ssr85tX5cS6zFCmzuKuzXC6zAVFmS6fOJlmZbcc6G7l1tsbLHDbUOb6pcyBW54ixzqFtnWPwOhcLrjJXNa46l1+uMteJ3lVV4oLW93stceVtbwAFFFBAAQUUUEABDYPy+/+zZ22v71/UA9uOL6Nvb9z5Q+2Dskwchpp6FlIeaJtReldT49Bma9L2Qlcxh6ljUFZbmZG9iSGo2OrIDijbjvByqNieyGKo2q7oUug+Z6eUTlS7p/opgbNLSqfHvXf0KYWzQ0o5nM9SOtY/B/spnfkejX+jHqEWlymoBEJlAsoWGfZDNRSqbmiz2DQv1KLjhLZwaPNBzfK8Ukr1Qj+8UkpT8g+FT1l66FMvpRwfpefPE+Ua+fuxp2Qjfzv2lKrmP9Q9JZuit5OUMnX7Tz2fsk3Ru0laH9qOQdsYVI5BZQyqx6AKKKBdUDsXQAEFFFBAAQUUUED/D/QLm016EoW110UAAAAldEVYdGRhdGU6Y3JlYXRlADIwMjMtMTItMTVUMDg6MDI6MjMrMDA6MDD08/7gAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDIzLTEyLTE1VDA4OjAyOjE1KzAwOjAwaPF0hQAAACh0RVh0ZGF0ZTp0aW1lc3RhbXAAMjAyMy0xMi0xNVQwODowMjoyNCswMDowMBccWQ0AAAAASUVORK5CYII=`,alt:`${e.nickname} 프로필`}),(0,G.jsx)(`div`,{className:`absolute right-0 bottom-0 w-4 h-4 rounded-full border-2 border-white ${e.is_online?`bg-green-500`:`bg-gray-400`}`})]}),(0,G.jsxs)(`div`,{className:`flex flex-col gap-1 text-sm`,children:[(0,G.jsx)(`div`,{className:`line-clamp-1`,children:e.nickname}),(0,G.jsxs)(`div`,{children:[{student:`학생`,teacher:`선생님`,parent:`학부모`}[e.role]||`알 수 없음`,e.role===`student`&&`, ${m}`,` `,e.role===`teacher`&&`, ${e.major}`]})]})]}),(0,G.jsx)(`div`,{className:`space-x-2 text-xs`,children:e.auth_id===r?(0,G.jsx)(L,{to:`/profile/me`,className:`block px-2 py-1 rounded bg-violet-500 text-white hover:bg-violet-600`,children:`프로필 보기`}):(0,G.jsxs)(G.Fragment,{children:[(0,G.jsx)(`button`,{className:`cursor-pointer px-2 py-1 rounded ${f?`bg-violet-500 text-white hover:bg-violet-600`:`bg-white border border-violet-500 text-violet-500 hover:bg-violet-100`}`,onClick:async n=>{if(n.stopPropagation(),n.preventDefault(),!r)return;let i=r===t;if(f){if(await o(r,e.auth_id),s(e.auth_id,!1),c(t=>t.filter(t=>t.users?.auth_id!==e.auth_id)),i){let n=K.getState().friendsByProfileId[t]||[];l(t,n.filter(t=>t.users?.auth_id!==e.auth_id))}}else{await a(r,e.auth_id),s(e.auth_id,!0);let n={users:{auth_id:e.auth_id,nickname:e.nickname,profile_image_url:e.profile_image_url??null,is_online:e.is_online??!1,last_seen:e.last_seen??``},created_at:new Date().toISOString(),follower_id:r,following_id:e.auth_id,id:crypto.randomUUID()};if(c(e=>[...e,n]),i){let e=K.getState().friendsByProfileId[t]||[];l(t,[...e,n])}}},children:f?`팔로잉`:`팔로우`}),(0,G.jsx)(`button`,{className:`cursor-pointer px-2 py-1 rounded ${d?`bg-gray-300 cursor-not-allowed`:`bg-gray-200 hover:bg-gray-300`}`,onClick:async t=>{if(t.stopPropagation(),t.preventDefault(),!(!r||d))try{let t=await u(e.auth_id);t&&t.id&&n(`/msg/${t.id}`)}catch(e){console.error(`채팅방 생성 실패:`,e)}},disabled:d,children:`메시지`})]})})]})})})}var Kc=u(S());function qc(){let e=(0,Kc.c)(5),t;e[0]===Symbol.for(`react.memo_cache_sentinel`)?(t=[],e[0]=t):t=e[0];let[n,r]=(0,b.useState)(t),i,a;e[1]===Symbol.for(`react.memo_cache_sentinel`)?(i=()=>{(async()=>{let{data:e,error:t}=await U.from(`users`).select(`*`);if(t)console.error(`유저 목록 불러오기 실패:`,t);else{let t=(e||[]).sort(Yc);r(t)}})();let e=U.channel(`public:users`).on(`postgres_changes`,{event:`UPDATE`,schema:`public`,table:`users`},e=>{let t=e.new;r(e=>e.map(e=>e.auth_id===t.auth_id?{...e,is_online:t.is_online}:e).sort(Jc))}).subscribe();return()=>{U.removeChannel(e)}},a=[],e[1]=i,e[2]=a):(i=e[1],a=e[2]),(0,b.useEffect)(i,a);let o;return e[3]===n?o=e[4]:(o={userList:n},e[3]=n,e[4]=o),o}function Jc(e,t){return e.is_online===t.is_online?e.nickname.localeCompare(t.nickname,`ko`):e.is_online?-1:1}function Yc(e,t){return e.is_online===t.is_online?0:e.is_online?-1:1}var Xc=u(S());function Zc(e){let t=(0,Xc.c)(24),{currentUserId:n}=e,[r,i]=(0,b.useState)(!1),a=Ge(),{userList:o}=qc(),s;t[0]===Symbol.for(`react.memo_cache_sentinel`)?(s=()=>{i(!1)},t[0]=s):s=t[0];let c;t[1]===a.pathname?c=t[2]:(c=[a.pathname],t[1]=a.pathname,t[2]=c),(0,b.useEffect)(s,c);let l;t[3]===r?l=t[4]:(l=()=>i(!r),t[3]=r,t[4]=l);let u;t[5]===Symbol.for(`react.memo_cache_sentinel`)?(u=(0,G.jsx)(`h3`,{className:`text-lg text-white font-bold`,children:`가입자 목록`}),t[5]=u):u=t[5];let d=`text-white transition-transform duration-300 ${r?`rotate-0`:`rotate-180`}`,f;t[6]===d?f=t[7]:(f=(0,G.jsx)(Gs,{className:d,size:28,strokeWidth:3}),t[6]=d,t[7]=f);let p;t[8]!==l||t[9]!==f?(p=(0,G.jsxs)(`div`,{className:`cursor-pointer flex flex-row justify-between items-center px-5 py-3 w-full bg-violet-500 rounded-t-xl`,onClick:l,children:[u,f]}),t[8]=l,t[9]=f,t[10]=p):p=t[10];let m=` transition-all duration-500 ease-in-out ${r?`h-160 overflow-y-auto`:`h-0 overflow-y-hidden`}`,h;if(t[11]!==n||t[12]!==o){let e;t[14]===n?e=t[15]:(e=e=>(0,G.jsx)(Gc,{user:e,profileBeingViewedId:n||``},e.auth_id),t[14]=n,t[15]=e),h=o.map(e),t[11]=n,t[12]=o,t[13]=h}else h=t[13];let g;t[16]===h?g=t[17]:(g=(0,G.jsx)(`div`,{className:`flex flex-col`,children:h}),t[16]=h,t[17]=g);let _;t[18]!==g||t[19]!==m?(_=(0,G.jsx)(`div`,{className:m,children:g}),t[18]=g,t[19]=m,t[20]=_):_=t[20];let v;return t[21]!==_||t[22]!==p?(v=(0,G.jsxs)(`div`,{className:`fixed left-10 bottom-0 w-90 bg-white rounded-t-xl flex flex-col z-50`,children:[p,_]}),t[21]=_,t[22]=p,t[23]=v):v=t[23],v}var Qc=u(S());function $c(){let e=(0,Qc.c)(4),t=W(el),n;e[0]===Symbol.for(`react.memo_cache_sentinel`)?(n=(0,G.jsx)(Nc,{}),e[0]=n):n=e[0];let r;e[1]===Symbol.for(`react.memo_cache_sentinel`)?(r=(0,G.jsxs)(`div`,{className:`min-h-[calc(100%)]`,children:[(0,G.jsx)(`div`,{className:`min-h-[calc(100%-90px)] pt-10`,children:(0,G.jsx)(bt,{})}),(0,G.jsx)(Ic,{})]}),e[1]=r):r=e[1];let i;return e[2]===t?i=e[3]:(i=(0,G.jsx)(G.Fragment,{children:(0,G.jsxs)(`div`,{className:`min-h-screen flex flex-col`,children:[n,(0,G.jsxs)(`main`,{className:`relative overflow-y-auto bg-[#F3F4F6] flex flex-col items-center h-[calc(100vh-70px)]`,children:[r,(0,G.jsx)(Zc,{currentUserId:t})]})]})}),e[2]=t,e[3]=i),i}function el(e){return e.currentUserId}var tl=u(S());function nl(){let e=(0,tl.c)(1),t;return e[0]===Symbol.for(`react.memo_cache_sentinel`)?(t=(0,G.jsx)(G.Fragment,{children:(0,G.jsx)(`div`,{className:`min-h-screen flex items-center justify-center bg-[#F3F4F6]`,children:(0,G.jsx)(`div`,{className:`rounded-xl bg-white p-10 w-[400px] shadow-[0_12px_24px_rgba(0,0,0,0.1)]`,children:(0,G.jsx)(bt,{})})})}),e[0]=t):t=e[0],t}const rl=jn(e=>({groups:[],currentGroup:null,loading:!1,error:null,fetchUserGroups:async t=>{try{e({loading:!0,error:null});let{data:n,error:r}=await U.from(`group_members`).select(`
          group_id,
          groups (
            id,
            name,
            bio,
            profile_image_url,
            created_at,
            last_activity_at
          )
        `).eq(`user_id`,t);if(r)throw r;let i=[];for(let e of n||[]){let t=e.groups;if(!t?.id)continue;let{count:n}=await U.from(`group_members`).select(`*`,{count:`exact`,head:!0}).eq(`group_id`,t.id);i.push({id:t.id,name:t.name,bio:t.bio,profile_image_url:t.profile_image_url,created_at:t.created_at,member_count:n||0,last_activity:t.last_activity_at})}e({groups:i,currentGroup:i.length>0?i[0]:null,loading:!1})}catch(t){console.error(`[fetchUserGroups error]`,t),e({error:t instanceof Error?t.message:`그룹을 불러오는데 실패했습니다.`,loading:!1})}},setCurrentGroup:t=>{e({currentGroup:t})},clearGroups:()=>{e({groups:[],currentGroup:null,error:null})}}));var il=u(S());function al(e){let t=(0,il.c)(5),n=(0,b.useRef)(null),r,i;t[0]===e?(r=t[1],i=t[2]):(r=()=>{if(!e)return;let t=async()=>{await U.from(`users`).update({is_online:!0,last_seen:new Date}).eq(`auth_id`,e)},r=async()=>{await U.from(`users`).update({is_online:!1}).eq(`auth_id`,e)};t();let i=()=>{n.current&&clearTimeout(n.current),n.current=setTimeout(()=>r(),3e5)};return window.addEventListener(`mousemove`,i),window.addEventListener(`keydown`,i),i(),window.addEventListener(`beforeunload`,r),window.addEventListener(`offline`,r),()=>{n.current&&clearTimeout(n.current),window.removeEventListener(`mousemove`,i),window.removeEventListener(`keydown`,i),window.removeEventListener(`beforeunload`,r),window.removeEventListener(`offline`,r)}},i=[e],t[0]=e,t[1]=r,t[2]=i),(0,b.useEffect)(r,i);let a;return t[3]===e?a=t[4]:(a={logoutOffline:async()=>{e&&await U.from(`users`).update({is_online:!1}).eq(`auth_id`,e)}},t[3]=e,t[4]=a),a}var ol=u(S());function sl(){let e=(0,ol.c)(4),t,n;e[0]===Symbol.for(`react.memo_cache_sentinel`)?(t=(0,G.jsx)(`div`,{className:`w-140 h-16 rounded-xl skeleton-40 mb-7`}),n=(0,G.jsx)(`div`,{className:`w-120 h-14 rounded-xl skeleton-40 mb-10`}),e[0]=t,e[1]=n):(t=e[0],n=e[1]);let r;e[2]===Symbol.for(`react.memo_cache_sentinel`)?(r=(0,G.jsxs)(`div`,{className:`flex flex-col items-center justify-center mb-30`,children:[t,n,(0,G.jsx)(`div`,{className:`flex flex-row gap-4`,children:(0,G.jsx)(`div`,{className:`w-30 h-14 rounded-xl skeleton-40`})})]}),e[2]=r):r=e[2];let i;return e[3]===Symbol.for(`react.memo_cache_sentinel`)?(i=(0,G.jsx)(G.Fragment,{children:(0,G.jsxs)(`div`,{className:`mt-30 flex flex-col items-center`,children:[r,(0,G.jsx)(`div`,{className:`flex flex-row gap-5`,children:Array.from({length:3}).map(cl)})]})}),e[3]=i):i=e[3],i}function cl(e,t){return(0,G.jsxs)(`div`,{className:`w-80 h-48 rounded-xl bg-white px-6 py-7 shadow-md`,children:[(0,G.jsx)(`div`,{className:`w-18 h-7 mb-4 rounded-xl skeleton-40`}),(0,G.jsx)(`div`,{className:`w-68 h-5 mb-2 rounded-xl skeleton-40`}),(0,G.jsx)(`div`,{className:`w-68 h-4 mb-2 rounded-xl skeleton-40`}),(0,G.jsxs)(`div`,{className:`flex flex-row gap-2`,children:[(0,G.jsx)(`div`,{className:`w-11 h-6 rounded-full skeleton-40`}),(0,G.jsx)(`div`,{className:`w-11 h-6 rounded-full skeleton-40`})]})]},t)}var ll=u(S());function q(e){let t=(0,ll.c)(8),n,r,i;t[0]===e?(n=t[1],r=t[2],i=t[3]):({children:n,className:r,...i}=e,t[0]=e,t[1]=n,t[2]=r,t[3]=i);let a=`cursor-pointer ${r}`,o;return t[4]!==n||t[5]!==i||t[6]!==a?(o=(0,G.jsx)(G.Fragment,{children:(0,G.jsx)(`button`,{className:a,...i,children:n})}),t[4]=n,t[5]=i,t[6]=a,t[7]=o):o=t[7],o}const ul=jn()(Er(e=>({posts:[],isLoading:!0,fetchPosts:async t=>{if(e(e=>{e.isLoading=!0}),t===`all`)try{let{data:t,error:n}=await U.from(`posts`).select(`*, users(nickname), likes:post_likes(id), comments:comments!comments_post_id_fkey(id)`).is(`group_id`,null).order(`created_at`,{ascending:!1});if(n)throw n;e(e=>{e.posts=t})}catch(e){console.error(e)}finally{e(e=>{e.isLoading=!1})}else try{let{data:n,error:r}=await U.from(`posts`).select(`*, users(nickname), likes:post_likes(id), comments:comments!comments_post_id_fkey(id)`).eq(`board_type`,t).order(`created_at`,{ascending:!1});if(r)throw r;e(e=>{e.posts=n})}catch(e){console.error(e)}finally{e(e=>{e.isLoading=!1})}}})));var dl=u(S());function fl(){let e=(0,dl.c)(45),t=W(vl),n=W(_l),r=W(gl),i=ul(hl),a=ul(ml),{groups:o,currentGroup:s,loading:c,fetchUserGroups:l,setCurrentGroup:u}=rl(),[d,f]=(0,b.useState)(0),p,m;e[0]!==d||e[1]!==o||e[2]!==u?(p=()=>{o.length>0&&u(o[d])},m=[o,d,u],e[0]=d,e[1]=o,e[2]=u,e[3]=p,e[4]=m):(p=e[3],m=e[4]),(0,b.useEffect)(p,m);let h;e[5]!==d||e[6]!==o.length?(h=e=>{if(e.preventDefault(),e.stopPropagation(),o.length>0){let e=(d+1)%o.length;f(e)}},e[5]=d,e[6]=o.length,e[7]=h):h=e[7];let g=h,_,v;e[8]===a?(_=e[9],v=e[10]):(_=()=>{a(`all`)},v=[a],e[8]=a,e[9]=_,e[10]=v),(0,b.useEffect)(_,v);let y=pl,{logout:x}=W(),{logoutOffline:S}=al(t||``),C,w;e[11]!==t||e[12]!==r?(C=()=>{t||r()},w=[t,r],e[11]=t,e[12]=r,e[13]=C,e[14]=w):(C=e[13],w=e[14]),(0,b.useEffect)(C,w);let T,E;if(e[15]!==t||e[16]!==l?(T=()=>{t&&l(t)},E=[t,l],e[15]=t,e[16]=l,e[17]=T,e[18]=E):(T=e[17],E=e[18]),(0,b.useEffect)(T,E),n||c){let t;return e[19]===Symbol.for(`react.memo_cache_sentinel`)?(t=(0,G.jsx)(sl,{}),e[19]=t):t=e[19],t}let D;e[20]===Symbol.for(`react.memo_cache_sentinel`)?(D=(0,G.jsx)(`h2`,{className:`mb-7 font-bold text-[46px] bg-gradient-to-r from-[#8B5CF6] to-[#EA489A] bg-clip-text text-transparent`,children:`함께 배우고 성장하는 커뮤니티`}),e[20]=D):D=e[20];let O;e[21]===Symbol.for(`react.memo_cache_sentinel`)?(O=(0,G.jsxs)(`p`,{className:`text-[#6B7280] text-[18px] mb-10`,children:[`학생·선생님·학부모가 모여 질문하고 답하며 성장하는 공간,`,(0,G.jsx)(`br`,{}),(0,G.jsx)(`strong`,{children:`StudyHub`}),`에 오신 것을 환영합니다.`]}),e[21]=O):O=e[21];let k;e[22]!==t||e[23]!==x||e[24]!==S?(k=(0,G.jsxs)(`div`,{className:`text-center mb-[120px] `,children:[D,O,(0,G.jsx)(`div`,{className:`space-x-4`,children:t?(0,G.jsx)(q,{onClick:async()=>{await S(),x()},className:`cursor-pointer inline-block px-6 py-4 bg-white rounded-xl font-bold text-[#8B5CF6] shadow-[inset_0_0_0_2px_#8B5CF6]`,children:`로그아웃`}):(0,G.jsxs)(G.Fragment,{children:[(0,G.jsx)(L,{to:`/register`,className:`inline-block px-6 py-4 bg-[#8B5CF6] rounded-xl font-bold text-white`,children:`회원가입`}),(0,G.jsx)(L,{to:`/login`,className:`inline-block px-6 py-4 bg-white rounded-xl font-bold text-[#8B5CF6] shadow-[inset_0_0_0_2px_#8B5CF6]`,children:`로그인`})]})})]}),e[22]=t,e[23]=x,e[24]=S,e[25]=k):k=e[25];let A;e[26]===Symbol.for(`react.memo_cache_sentinel`)?(A=(0,G.jsxs)(`div`,{className:`flex items-center gap-2 mb-4`,children:[(0,G.jsx)(Qs,{size:18}),(0,G.jsx)(`h3`,{className:`font-bold text-xl text-[#8B5CF6]`,children:`게시판`})]}),e[26]=A):A=e[26];let j;e[27]===Symbol.for(`react.memo_cache_sentinel`)?(j=(0,G.jsx)(`p`,{className:`text-sm`,children:`질문과 답변, 학습 팁, 경험담을 나누는 공간`}),e[27]=j):j=e[27];let ee;e[28]===i.length?ee=e[29]:(ee=(0,G.jsxs)(`div`,{className:`text-[#6B7280] space-y-2 mb-3`,children:[j,(0,G.jsxs)(`p`,{className:`text-xs`,children:[`게시글 `,i.length,` 개`]})]}),e[28]=i.length,e[29]=ee);let te;e[30]===Symbol.for(`react.memo_cache_sentinel`)?(te=(0,G.jsxs)(`div`,{className:`flex flex-row gap-2 text-xs text-[#8B5CF6]`,children:[(0,G.jsx)(`span`,{className:`px-2 py-1 bg-[#ede9fe] rounded-xl`,children:`#수학`}),(0,G.jsx)(`span`,{className:`px-2 py-1 bg-[#ede9fe] rounded-xl`,children:`#스터디`}),(0,G.jsx)(`span`,{className:`px-2 py-1 bg-[#ede9fe] rounded-xl`,children:`#중학생`})]}),e[30]=te):te=e[30];let ne;e[31]===ee?ne=e[32]:(ne=(0,G.jsxs)(L,{to:`/posts`,className:`w-[320px] h-full px-6 py-7 bg-white rounded-xl shadow-md transition-all duration-300 hover:-translate-y-1 hover:shadow-lg`,children:[A,ee,te]}),e[31]=ee,e[32]=ne);let M;e[33]!==s||e[34]!==d||e[35]!==g||e[36]!==o?(M=s?(0,G.jsxs)(`div`,{className:`relative w-[320px] h-full`,children:[(0,G.jsxs)(L,{to:`/groups/${s.id}/posts`,className:`block w-full h-full px-6 py-7 bg-white rounded-xl shadow-md transition-all duration-300 hover:-translate-y-1 hover:shadow-lg`,children:[(0,G.jsxs)(`div`,{className:`flex items-center gap-2 mb-4`,children:[(0,G.jsx)(ac,{size:18}),(0,G.jsx)(`h3`,{className:`font-bold text-xl text-[#8B5CF6]`,children:s.name})]}),(0,G.jsxs)(`div`,{className:`text-[#6B7280] space-y-2 mb-3`,children:[(0,G.jsx)(`p`,{className:`text-sm`,children:s.bio||`함께 학습하는 그룹`}),(0,G.jsxs)(`p`,{className:`text-xs`,children:[`멤버 `,s.member_count||0,`명 ·`,` `,s.last_activity?y(s.last_activity):`활동 없음`]})]}),o.length>1&&(0,G.jsx)(`div`,{className:`absolute bottom-2 left-1/2 transform -translate-x-1/2 flex gap-1`,children:o.map((e,t)=>(0,G.jsx)(`div`,{className:`w-2 h-2 rounded-full transition-colors ${t===d?`bg-[#8B5CF6]`:`bg-gray-300`}`},t))})]}),o.length>1&&(0,G.jsx)(q,{onClick:g,className:`absolute top-1/2 -right-4 transform -translate-y-1/2 w-8 h-8 bg-[#8B5CF6] text-white rounded-full shadow-lg hover:bg-[#B08DFF] transition-colors flex items-center justify-center z-10`,title:`다음 그룹 보기`,children:(0,G.jsx)(Ks,{size:16})})]}):(0,G.jsx)(`div`,{className:`w-[320px] h-full flex-grow py-7 px-6 border-2 border-dashed border-[#8B5CF6] bg-white rounded-xl shadow-md text-center transition-all duration-300 hover:-translate-y-1 hover:shadow-lg`,children:(0,G.jsxs)(`div`,{className:`flex flex-col items-center gap-3`,children:[(0,G.jsxs)(`div`,{className:`flex items-center gap-2`,children:[(0,G.jsx)(ac,{size:18}),(0,G.jsx)(`h3`,{className:`font-bold text-xl text-[#8B5CF6]`,children:`가입한 그룹이 없습니다`})]}),(0,G.jsxs)(`p`,{className:`text-[#6B7280] text-sm mb-0.5`,children:[`아직 참여 중인 그룹이 없습니다.`,(0,G.jsx)(`br`,{}),`관심 있는 그룹을 찾아 가입해보세요!`]}),(0,G.jsx)(L,{to:`/groups`,className:`inline-block px-5 py-3 bg-[#8B5CF6] text-sm text-white font-bold rounded-xl`,children:`그룹 목록 보기`})]})}),e[33]=s,e[34]=d,e[35]=g,e[36]=o,e[37]=M):M=e[37];let N;e[38]===Symbol.for(`react.memo_cache_sentinel`)?(N=(0,G.jsxs)(L,{to:`/msg/1`,className:`w-[320px] h-full px-6 py-7 bg-white rounded-xl shadow-md transition-all duration-300 hover:-translate-y-1 hover:shadow-lg`,children:[(0,G.jsxs)(`div`,{className:`flex items-center gap-2 mb-4`,children:[(0,G.jsx)(Xs,{size:18}),(0,G.jsx)(`h3`,{className:`font-bold text-xl text-[#8B5CF6]`,children:`메시지`})]}),(0,G.jsx)(`p`,{className:`text-[#6B7280] space-y-2 mb-3 text-sm`,children:`1:1 대화 메시지로 소통하세요`})]}),e[38]=N):N=e[38];let P;e[39]!==ne||e[40]!==M?(P=(0,G.jsxs)(`div`,{className:`h-[193px] flex items-center flex-nowrap gap-5`,children:[ne,M,N]}),e[39]=ne,e[40]=M,e[41]=P):P=e[41];let re;return e[42]!==k||e[43]!==P?(re=(0,G.jsx)(G.Fragment,{children:(0,G.jsxs)(`div`,{className:`mt-30 flex flex-col items-center`,children:[k,P]})}),e[42]=k,e[43]=P,e[44]=re):re=e[44],re}function pl(e){let t=new Date,n=new Date(e),r=Math.floor((t.getTime()-n.getTime())/1e3);if(r<60)return`방금 전`;let i=Math.floor(r/60);if(i<60)return`${i}분 전`;let a=Math.floor(i/60);if(a<24)return`${a}시간 전`;let o=Math.floor(a/24);if(o<7)return`${o}일 전`;let s=Math.floor(o/7);if(s<4)return`${s}주 전`;let c=Math.floor(o/30);return c<12?`${c}개월 전`:`${Math.floor(o/365)}년 전`}function ml(e){return e.fetchPosts}function hl(e){return e.posts}function gl(e){return e.fetchProfile}function _l(e){return e.loading}function vl(e){return e.currentUserId}async function yl(e){return await U.auth.signInWithOAuth({provider:e,options:{redirectTo:`${window.location.origin}/`}})}var bl=u(S());function xl(){let e=(0,bl.c)(7),t;e[0]===Symbol.for(`react.memo_cache_sentinel`)?(t=(0,G.jsx)(`h1`,{className:`text-[28px] font-black mb-6 text-[#8b5cf6] text-center`,children:`회원가입`}),e[0]=t):t=e[0];let n;e[1]===Symbol.for(`react.memo_cache_sentinel`)?(n=(0,G.jsx)(L,{to:`/registerEmail`,className:`w-full h-11 rounded-xl font-bold text-white flex items-center justify-center bg-[#8b5cf6] hover:bg-violet-600 active:bg-violet-700`,children:`이메일로 가입하기`}),e[1]=n):n=e[1];let r;e[2]===Symbol.for(`react.memo_cache_sentinel`)?(r=(0,G.jsxs)(`div`,{className:` text-center text-slate-500 text-xs`,children:[`또는 소셜 계정으로 `,(0,G.jsx)(`strong`,{children:`회원가입`})]}),e[2]=r):r=e[2];let i;e[3]===Symbol.for(`react.memo_cache_sentinel`)?(i=(0,G.jsxs)(`g`,{"clip-path":`url(#clip0_803_56)`,children:[(0,G.jsx)(`path`,{"fill-rule":`evenodd`,"clip-rule":`evenodd`,d:`M14.4 7.66549C14.4 7.1558 14.3542 6.66574 14.2693 6.19531H7.5V8.97555H11.3682C11.2016 9.87399 10.6952 10.6352 9.93394 11.1449V12.9483H12.2568C13.6159 11.697 14.4 9.85443 14.4 7.66549Z`,fill:`#4285F4`}),(0,G.jsx)(`path`,{"fill-rule":`evenodd`,"clip-rule":`evenodd`,d:`M7.50116 14.6891C9.44179 14.6891 11.0687 14.0454 12.258 12.9477L9.9351 11.1443C9.29148 11.5756 8.46816 11.8304 7.50116 11.8304C5.62913 11.8304 4.04461 10.5661 3.47941 8.86719H1.07812V10.7294C2.2608 13.0784 4.69148 14.6891 7.50116 14.6891Z`,fill:`#34A853`}),(0,G.jsx)(`path`,{"fill-rule":`evenodd`,"clip-rule":`evenodd`,d:`M3.47827 8.86693C3.33452 8.43568 3.25284 7.97499 3.25284 7.50131C3.25284 7.02756 3.33452 6.56693 3.47827 6.13566V4.27344H1.07699C0.590199 5.24375 0.3125 6.34149 0.3125 7.50131C0.3125 8.66106 0.590199 9.75881 1.07699 10.7291L3.47827 8.86693Z`,fill:`#FBBC05`}),(0,G.jsx)(`path`,{"fill-rule":`evenodd`,"clip-rule":`evenodd`,d:`M7.50116 3.17116C8.55641 3.17116 9.50385 3.53381 10.2487 4.24603L12.3102 2.18452C11.0655 1.02472 9.43847 0.3125 7.50116 0.3125C4.69148 0.3125 2.2608 1.92316 1.07812 4.27216L3.47941 6.13437C4.04461 4.43551 5.62913 3.17116 7.50116 3.17116Z`,fill:`#EA4335`})]}),e[3]=i):i=e[3];let a;e[4]===Symbol.for(`react.memo_cache_sentinel`)?(a=(0,G.jsxs)(`button`,{type:`button`,className:`cursor-pointer flex flex-row items-center justify-center gap-2 w-full h-11 rounded-xl bg-white border border-[#6B7280] hover:bg-gray-100 text-[#191919]`,onClick:Cl,children:[(0,G.jsxs)(`svg`,{width:`15`,height:`15`,viewBox:`0 0 15 15`,fill:`none`,xmlns:`http://www.w3.org/2000/svg`,children:[i,(0,G.jsx)(`defs`,{children:(0,G.jsx)(`clipPath`,{id:`clip0_803_56`,children:(0,G.jsx)(`rect`,{width:`15`,height:`15`,fill:`white`})})})]}),(0,G.jsx)(`span`,{children:`Google로 가입하기`})]}),e[4]=a):a=e[4];let o;e[5]===Symbol.for(`react.memo_cache_sentinel`)?(o=(0,G.jsxs)(`button`,{type:`button`,className:`cursor-pointer flex flex-row items-center justify-center gap-2 w-full h-11 rounded-xl bg-[#FEE500] hover:bg-yellow-400 text-[#191919]`,onClick:Sl,children:[(0,G.jsx)(`svg`,{width:`15`,height:`14`,viewBox:`0 0 15 14`,fill:`none`,xmlns:`http://www.w3.org/2000/svg`,children:(0,G.jsx)(`path`,{d:`M7.49461 0C3.34583 0 0 2.70269 0 5.98378C0 8.11355 1.39186 9.97844 3.47966 11.0432L2.77302 13.7082C2.7597 13.7481 2.75766 13.791 2.76711 13.832C2.77657 13.873 2.79714 13.9107 2.82656 13.9406C2.86945 13.9787 2.92463 13.9999 2.98181 14C3.02921 13.9962 3.07419 13.9772 3.11028 13.946L6.15097 11.8758C6.59982 11.9383 7.05227 11.9707 7.50541 11.973C11.6489 11.973 15 9.27032 15 5.98378C15 2.69729 11.6381 0 7.49461 0Z`,fill:`#392020`})}),(0,G.jsx)(`span`,{className:``,children:`카카오로 시작하기`})]}),e[5]=o):o=e[5];let s;return e[6]===Symbol.for(`react.memo_cache_sentinel`)?(s=(0,G.jsxs)(G.Fragment,{children:[t,(0,G.jsxs)(`div`,{className:`flex flex-col gap-4 items-center justify-center`,children:[n,r,a,o,(0,G.jsxs)(L,{to:`/login`,className:`text-[#8B5CF6] text-sm hover:underline`,children:[`이미 계정이 있나요? `,(0,G.jsx)(`strong`,{children:`로그인`})]})]})]}),e[6]=s):s=e[6],s}function Sl(){return yl(`kakao`)}function Cl(){return yl(`google`)}function wl(){let e=Je(),[t,n]=(0,b.useState)(``),[r,i]=(0,b.useState)(``),[a,o]=(0,b.useState)(!1),[s,c]=(0,b.useState)({});return(0,G.jsxs)(G.Fragment,{children:[(0,G.jsx)(`h4`,{className:`text-[28px] font-black mb-6 text-[#8b5cf6] text-center`,children:`로그인`}),(0,G.jsxs)(`form`,{className:`w-full flex flex-col gap-4 mb-7`,onSubmit:async n=>{n.preventDefault(),o(!0),c({});try{if(!t){c({email:`이메일을 입력해주세요`}),o(!1);return}if(!r){c({password:`비밀번호를 입력해주세요`}),o(!1);return}let{data:n,error:i}=await U.auth.signInWithPassword({email:t,password:r});if(i){console.log(i),i.message.includes(`Invalid login credentials`)?c({email:`이메일을 확인해주세요`,password:`비밀번호를 확인해주세요`}):c({email:`로그인 중 오류가 발생했습니다.`});return}n?.user&&e(`/`)}catch(e){console.error(e),c({email:`예상치 못한 오류가 발생했습니다.`})}finally{o(!1)}},children:[(0,G.jsxs)(`div`,{children:[(0,G.jsx)(`input`,{id:`login-email`,type:`email`,placeholder:`이메일`,value:t,onChange:e=>n(e.target.value),className:`w-full h-11 rounded-xl border px-4 outline-none ${s.email?`border-[#EF4444]`:`border-[#D1D5DB]`}`}),s.email&&(0,G.jsx)(`p`,{className:`text-xs text-[#EF4444] mt-1`,children:s.email})]}),(0,G.jsxs)(`div`,{children:[(0,G.jsx)(`input`,{id:`login-password`,type:`password`,placeholder:`비밀번호`,value:r,onChange:e=>i(e.target.value),className:`w-full h-11 rounded-xl border px-4 outline-none ${s.password?`border-[#EF4444]`:`border-[#D1D5DB]`}`}),s.password&&(0,G.jsx)(`p`,{className:`text-xs text-[#EF4444] mt-1`,children:s.password})]}),(0,G.jsx)(`button`,{type:`submit`,disabled:a,className:`cursor-pointer w-full h-11 text-white font-semibold rounded-xl bg-[#8B5CF6] disabled:opacity-60`,children:a?`로그인 중`:`로그인`})]}),(0,G.jsxs)(`div`,{className:`flex flex-col gap-4 items-center mb-3`,children:[(0,G.jsx)(`div`,{className:`text-xs text-[#6B7280]`,children:`또는 소셜 계정으로 로그인`}),(0,G.jsxs)(`button`,{type:`button`,className:`cursor-pointer flex flex-row items-center justify-center gap-2 w-full h-11 rounded-xl bg-white border border-[#6B7280] hover:bg-gray-100 text-[#191919]`,onClick:()=>yl(`google`),children:[(0,G.jsxs)(`svg`,{width:`15`,height:`15`,viewBox:`0 0 15 15`,fill:`none`,xmlns:`http://www.w3.org/2000/svg`,children:[(0,G.jsxs)(`g`,{"clip-path":`url(#clip0_803_56)`,children:[(0,G.jsx)(`path`,{"fill-rule":`evenodd`,"clip-rule":`evenodd`,d:`M14.4 7.66549C14.4 7.1558 14.3542 6.66574 14.2693 6.19531H7.5V8.97555H11.3682C11.2016 9.87399 10.6952 10.6352 9.93394 11.1449V12.9483H12.2568C13.6159 11.697 14.4 9.85443 14.4 7.66549Z`,fill:`#4285F4`}),(0,G.jsx)(`path`,{"fill-rule":`evenodd`,"clip-rule":`evenodd`,d:`M7.50116 14.6891C9.44179 14.6891 11.0687 14.0454 12.258 12.9477L9.9351 11.1443C9.29148 11.5756 8.46816 11.8304 7.50116 11.8304C5.62913 11.8304 4.04461 10.5661 3.47941 8.86719H1.07812V10.7294C2.2608 13.0784 4.69148 14.6891 7.50116 14.6891Z`,fill:`#34A853`}),(0,G.jsx)(`path`,{"fill-rule":`evenodd`,"clip-rule":`evenodd`,d:`M3.47827 8.86693C3.33452 8.43568 3.25284 7.97499 3.25284 7.50131C3.25284 7.02756 3.33452 6.56693 3.47827 6.13566V4.27344H1.07699C0.590199 5.24375 0.3125 6.34149 0.3125 7.50131C0.3125 8.66106 0.590199 9.75881 1.07699 10.7291L3.47827 8.86693Z`,fill:`#FBBC05`}),(0,G.jsx)(`path`,{"fill-rule":`evenodd`,"clip-rule":`evenodd`,d:`M7.50116 3.17116C8.55641 3.17116 9.50385 3.53381 10.2487 4.24603L12.3102 2.18452C11.0655 1.02472 9.43847 0.3125 7.50116 0.3125C4.69148 0.3125 2.2608 1.92316 1.07812 4.27216L3.47941 6.13437C4.04461 4.43551 5.62913 3.17116 7.50116 3.17116Z`,fill:`#EA4335`})]}),(0,G.jsx)(`defs`,{children:(0,G.jsx)(`clipPath`,{id:`clip0_803_56`,children:(0,G.jsx)(`rect`,{width:`15`,height:`15`,fill:`white`})})})]}),(0,G.jsx)(`span`,{children:`Google 로그인`})]}),(0,G.jsxs)(`button`,{type:`button`,className:`cursor-pointer flex flex-row items-center justify-center gap-2 w-full h-11 rounded-xl bg-[#FEE500] hover:bg-yellow-400 text-[#191919]`,onClick:()=>yl(`kakao`),children:[(0,G.jsx)(`svg`,{width:`15`,height:`14`,viewBox:`0 0 15 14`,fill:`none`,xmlns:`http://www.w3.org/2000/svg`,children:(0,G.jsx)(`path`,{d:`M7.49461 0C3.34583 0 0 2.70269 0 5.98378C0 8.11355 1.39186 9.97844 3.47966 11.0432L2.77302 13.7082C2.7597 13.7481 2.75766 13.791 2.76711 13.832C2.77657 13.873 2.79714 13.9107 2.82656 13.9406C2.86945 13.9787 2.92463 13.9999 2.98181 14C3.02921 13.9962 3.07419 13.9772 3.11028 13.946L6.15097 11.8758C6.59982 11.9383 7.05227 11.9707 7.50541 11.973C11.6489 11.973 15 9.27032 15 5.98378C15 2.69729 11.6381 0 7.49461 0Z`,fill:`#392020`})}),(0,G.jsx)(`span`,{className:``,children:`카카오 로그인`})]})]}),(0,G.jsx)(`div`,{className:`text-sm text-[#8B5CF6] text-center`,children:(0,G.jsxs)(L,{to:`/register`,children:[`계정이 없나요? `,(0,G.jsx)(`strong`,{children:`회원가입`})]})})]})}const Tl=async e=>{if(!e.trim())return{exists:!1,error:`닉네임을 입력해주세요.`};try{let{data:t,error:n}=await U.functions.invoke(`checkNicknameExists`,{body:{nickname:e.trim()}});if(n)throw n;return t?.exists?{exists:!0,error:`이미 사용 중인 닉네임입니다.`}:{exists:!1}}catch(e){return console.error(`닉네임 중복 검사 오류:`,e),{exists:!1,error:`닉네임 중복 검사 실패`}}},El=async e=>{if(!e.trim())return{exists:!1,error:`자녀코드를 입력해주세요.`};try{let{data:t,error:n}=await U.functions.invoke(`getUserIdForChildCode`,{body:{childLinkCode:e.trim()}});if(n)throw n;return t?.exists?{exists:!0,childId:t.childId}:{exists:!1,error:`존재하지 않는 자녀 코드입니다.`}}catch(e){return console.error(`자녀 코드 확인 오류:`,e),{exists:!1,error:`자녀 코드 확인 중 오류가 발생했습니다.`}}},Dl=e=>/\S+@\S+\.\S+/.test(e),Ol=e=>e.length>=8&&/[a-zA-Z]/.test(e)&&/[0-9]/.test(e),kl=e=>{let t={},n=!0;return e.email!==void 0&&(e.email.trim()?Dl(e.email)||(t.email=`올바른 이메일 형식이 아닙니다.`,n=!1):(t.email=`이메일을 입력해주세요.`,n=!1)),e.password!==void 0&&(e.password.trim()?Ol(e.password)||(t.password=`비밀번호는 최소 8자, 영문/숫자 각 1개 이상 포함해야 합니다.`,n=!1):(t.password=`비밀번호를 입력해주세요.`,n=!1)),e.confirmPassword!==void 0&&(e.confirmPassword.trim()?e.password&&e.password!==e.confirmPassword&&(t.confirmPassword=`비밀번호가 다릅니다.`,n=!1):(t.confirmPassword=`비밀번호 확인을 입력해주세요.`,n=!1)),e.nickname!==void 0&&(e.nickname.trim()||(t.nickname=`닉네임을 입력해주세요.`,n=!1)),e.role!==void 0&&(e.role||(t.role=`소속 구분을 선택해주세요.`,n=!1)),e.role!==void 0&&e.role!==``&&e.year!==void 0&&e.month!==void 0&&e.day!==void 0&&(!e.year.trim()||!e.month.trim()||!e.day.trim())&&(t.birthDate=`생년월일을 모두 선택해주세요.`,n=!1),e.major!==void 0&&e.role===`teacher`&&(e.major.trim()||(t.major=`주 과목을 입력해주세요.`,n=!1)),e.childLinkCode!==void 0&&e.role===`parent`&&(e.childLinkCode.trim()||(t.childLinkCode=`자녀코드를 입력해주세요.`,n=!1)),{isValid:n,errors:t}};var Al=u(S());const jl=e=>{let t=(0,Al.c)(2),{message:n}=e;if(!n)return null;let r;return t[0]===n?r=t[1]:(r=(0,G.jsx)(`p`,{className:`text-[#EF4444] text-xs mt-1 px-1 transition-opacity duration-300`,children:n}),t[0]=n,t[1]=r),r};var Ml={email:``,password:``,confirmPassword:``,nickname:``,role:``,birthDate:``,major:``,childLinkCode:``};function Nl(){let e=Je(),[t,n]=(0,b.useState)(``),[r,i]=(0,b.useState)(``),[a,o]=(0,b.useState)(``),[s,c]=(0,b.useState)(``),[l,u]=(0,b.useState)(``),[d,f]=(0,b.useState)(``),[p,m]=(0,b.useState)(``),[h,g]=(0,b.useState)(``),[_,v]=(0,b.useState)(``),[y,x]=(0,b.useState)(``),[S,C]=(0,b.useState)(null),[w,T]=(0,b.useState)(!1),[E,D]=(0,b.useState)(``),[O,k]=(0,b.useState)(Ml),A=Array.from({length:20},(e,t)=>String(new Date().getFullYear()-t)),j=Array.from({length:65},(e,t)=>String(new Date().getFullYear()-t)),ee=Array.from({length:12},(e,t)=>String(t+1)),te=Array.from({length:31},(e,t)=>String(t+1)),ne=t===`student`?A:j;(0,b.useEffect)(()=>{if(t===``){f(``),m(``),g(``),v(``);return}t!==`teacher`&&v(``)},[t]);let M=(0,b.useCallback)(()=>{let e=kl({email:r,password:a,confirmPassword:s,nickname:l,role:t,year:d,month:p,day:h,major:_,childLinkCode:y}),n={email:e.errors.email,password:e.errors.password,confirmPassword:e.errors.confirmPassword,nickname:e.errors.nickname,role:e.errors.role,birthDate:e.errors.birthDate,major:e.errors.major,childLinkCode:e.errors.childLinkCode};return k(n),e.isValid},[r,a,s,l,t,d,p,h,_,y]),N=(0,b.useCallback)(async()=>{let e=await Tl(l);return e.error?(k(t=>({...t,nickname:e.error})),!0):e.exists?(k(e=>({...e,nickname:`이미 사용 중인 닉네임입니다.`})),!0):(k(e=>({...e,nickname:``})),!1)},[l]),P=(0,b.useCallback)(async()=>{let e=await El(y);return e.error?(k(t=>({...t,childLinkCode:e.error})),{exists:!1}):e.exists?(k(e=>({...e,childLinkCode:``})),{exists:!0,childId:e.childId}):(k(e=>({...e,childLinkCode:`존재하지 않는 자녀 코드입니다.`})),{exists:!1})},[y]);return(0,G.jsxs)(G.Fragment,{children:[(0,G.jsx)(`h4`,{className:`text-[28px] font-black mb-6 text-[#8b5cf6] text-center`,children:`회원가입`}),(0,G.jsxs)(`form`,{className:`w-full flex flex-col gap-4 mb-4`,onSubmit:async n=>{if(n.preventDefault(),D(``),T(!0),await N()){T(!1);return}if(t===`parent`){let{exists:e,childId:t}=await P();if(!e||!t){T(!1);return}}if(!M()){T(!1);return}try{let{data:n,error:i}=await U.auth.signUp({email:r,password:a});if(i){i.message===`User already registered`?k(e=>({...e,email:`이미 사용 중인 이메일입니다.`})):D(`회원가입 실패: ${i.message}`),T(!1);return}let o=n&&`user`in n?n.user:n;if(!o||!o.id){D(`회원가입은 성공했으나 사용자 정보를 가져올 수 없습니다.`),T(!1);return}let s=o.id,c=`${d}-${p.padStart(2,`0`)}-${h.padStart(2,`0`)}`,u={auth_id:s,nickname:l.trim(),role:t,birth_date:c,is_profile_completed:!0};t===`teacher`&&(u.major=_.trim());let{error:f}=await U.from(`users`).update(u).eq(`auth_id`,s).select();if(t===`parent`&&y.trim()){let{data:e,error:t}=await U.from(`users`).select(`auth_id`).eq(`child_link_code`,y.trim()).single();!e||t?console.warn(`자녀 코드 검색 실패`,t):await U.from(`child_parent_links`).insert([{parent_id:s,child_id:e.auth_id}])}f?(D(`회원가입 성공, 하지만 프로필 업데이트 실패: ${f.message}`),console.error(`Profile update error:`,f)):e(`/`)}catch(e){console.error(`Registration Error:`,e),D(`예상치 못한 오류가 발생했습니다.`)}finally{T(!1)}},children:[(0,G.jsxs)(`div`,{children:[(0,G.jsx)(`input`,{id:`login-email`,type:`email`,placeholder:`이메일`,value:r,onChange:e=>{i(e.target.value),k(e=>({...e,email:``}))},onBlur:()=>M(),className:`w-full h-11 rounded-xl border px-4 outline-none transition-all ${O.email?`border-[#EF4444] focus:border-[#EF4444]`:`border-[#D1D5DB] focus:border-[#8B5CF6] focus:ring-2 focus:ring-[#8B5CF6]/50`}`}),(0,G.jsx)(jl,{message:O.email||``})]}),(0,G.jsxs)(`div`,{children:[(0,G.jsx)(`input`,{id:`login-password`,type:`password`,placeholder:`비밀번호 (최소 8자, 영문/숫자 필수)`,value:a,onChange:e=>{o(e.target.value),k(e=>({...e,password:``}))},onBlur:()=>M(),className:`w-full h-11 rounded-xl border px-4 outline-none transition-all ${O.password?`border-[#EF4444] focus:border-[#EF4444]`:`border-[#D1D5DB] focus:border-[#8B5CF6] focus:ring-2 focus:ring-[#8B5CF6]/50`}`}),(0,G.jsx)(jl,{message:O.password||``})]}),(0,G.jsxs)(`div`,{children:[(0,G.jsx)(`input`,{id:`confirm-password`,type:`password`,placeholder:`비밀번호 확인`,value:s,onChange:e=>{c(e.target.value),k(e=>({...e,confirmPassword:``}))},onBlur:()=>M(),className:`w-full h-11 rounded-xl border px-4 outline-none transition-all ${O.confirmPassword?`border-[#EF4444] focus:border-[#EF4444]`:`border-[#D1D5DB] focus:border-[#8B5CF6] focus:ring-2 focus:ring-[#8B5CF6]/50`}`}),(0,G.jsx)(jl,{message:O.confirmPassword||``})]}),(0,G.jsxs)(`div`,{children:[(0,G.jsx)(`input`,{id:`login-name`,type:`text`,placeholder:`닉네임`,value:l,onChange:e=>{u(e.target.value),k(e=>({...e,nickname:``}))},onBlur:()=>{N(),M()},className:`w-full h-11 rounded-xl border px-4 outline-none transition-all ${O.nickname?`border-[#EF4444] focus:border-[#EF4444]`:`border-[#D1D5DB] focus:border-[#8B5CF6] focus:ring-2 focus:ring-[#8B5CF6]/50`}`}),(0,G.jsx)(jl,{message:O.nickname||``})]}),(0,G.jsxs)(`div`,{children:[(0,G.jsxs)(`div`,{className:`relative`,children:[(0,G.jsxs)(`select`,{value:t,onChange:e=>{n(e.target.value),k(e=>({...e,role:``}))},onBlur:()=>M(),className:`w-full h-11 rounded-xl border px-4 pr-10 outline-none bg-white ${O.role?`border-[#EF4444] focus:border-[#EF4444]`:`border-[#D1D5DB] focus:border-[#8B5CF6] focus:ring-2 focus:ring-[#8B5CF6]/50`} appearance-none`,children:[(0,G.jsx)(`option`,{value:``,disabled:!0,children:`소속 구분`}),(0,G.jsx)(`option`,{value:`student`,children:`학생`}),(0,G.jsx)(`option`,{value:`teacher`,children:`선생님`}),(0,G.jsx)(`option`,{value:`parent`,children:`학부모`})]}),(0,G.jsx)(Gs,{size:18,className:`absolute right-3 top-1/2 -translate-y-1/2 text-gray-500 pointer-events-none`})]}),(0,G.jsx)(jl,{message:O.role||``})]}),t!==``&&(0,G.jsxs)(`div`,{children:[(0,G.jsxs)(`div`,{className:`grid grid-cols-[1.3fr_1fr_1fr] gap-3`,onBlur:()=>M(),children:[(0,G.jsxs)(`div`,{className:`relative`,children:[(0,G.jsxs)(`select`,{value:d,onChange:e=>f(e.target.value),className:`w-full h-11 rounded-xl border border-[#D1D5DB] px-4 pr-10 outline-none appearance-none transition-all ${O.birthDate?`border-[#EF4444] focus:border-[#EF4444]`:`border-[#D1D5DB] focus:border-[#8B5CF6] focus:ring-2 focus:ring-[#8B5CF6]/50`}`,children:[(0,G.jsx)(`option`,{value:``,disabled:!0,children:`출생연도`}),ne.map(e=>(0,G.jsx)(`option`,{value:e,children:e},e))]}),(0,G.jsx)(Gs,{size:18,className:`absolute right-3 top-1/2 -translate-y-1/2 text-gray-500 pointer-events-none`})]}),(0,G.jsxs)(`div`,{className:`relative`,children:[(0,G.jsxs)(`select`,{value:p,onChange:e=>m(e.target.value),className:`w-full h-11 rounded-xl border border-[#D1D5DB] px-4 pr-10 outline-none appearance-none transition-all ${O.birthDate?`border-[#EF4444] focus:border-[#EF4444]`:`border-[#D1D5DB] focus:border-[#8B5CF6] focus:ring-2 focus:ring-[#8B5CF6]/50`}`,children:[(0,G.jsx)(`option`,{value:``,disabled:!0,children:`월`}),ee.map(e=>(0,G.jsx)(`option`,{value:e,children:e},e))]}),(0,G.jsx)(Gs,{size:18,className:`absolute right-3 top-1/2 -translate-y-1/2 text-gray-500 pointer-events-none`})]}),(0,G.jsxs)(`div`,{className:`relative`,children:[(0,G.jsxs)(`select`,{value:h,onChange:e=>g(e.target.value),className:`w-full h-11 rounded-xl border border-[#D1D5DB] px-4 pr-10 outline-none appearance-none transition-all ${O.birthDate?`border-[#EF4444] focus:border-[#EF4444]`:`border-[#D1D5DB] focus:border-[#8B5CF6] focus:ring-2 focus:ring-[#8B5CF6]/50`}`,children:[(0,G.jsx)(`option`,{value:``,disabled:!0,children:`일`}),te.map(e=>(0,G.jsx)(`option`,{value:e,children:e},e))]}),(0,G.jsx)(Gs,{size:18,className:`absolute right-3 top-1/2 -translate-y-1/2 text-gray-500 pointer-events-none`})]})]}),(0,G.jsx)(jl,{message:O.birthDate||``})]}),t===`teacher`&&(0,G.jsxs)(`div`,{children:[(0,G.jsx)(`input`,{type:`text`,placeholder:`주 과목 (예: 수학, 과학)`,value:_,onChange:e=>{v(e.target.value),k(e=>({...e,major:``}))},onBlur:()=>M(),className:`w-full h-11 rounded-xl border px-4 outline-none transition-all ${O.major?`border-[#EF4444] focus:border-[#EF4444]`:`border-[#D1D5DB] focus:border-[#8B5CF6] focus:ring-2 focus:ring-[#8B5CF6]/50`}`}),(0,G.jsx)(jl,{message:O.major||``})]}),t===`parent`&&(0,G.jsxs)(`div`,{children:[(0,G.jsx)(`input`,{type:`text`,placeholder:`자녀 코드 입력`,value:y,onChange:e=>{x(e.target.value),C(null),k(e=>({...e,childLinkCode:``}))},onBlur:()=>{M(),P()},className:`w-full h-11 rounded-xl border px-4 outline-none transition-all ${S===!1||O.childLinkCode?`border-[#EF4444] focus:border-[#EF4444]`:`border-[#D1D5DB] focus:border-[#8B5CF6] focus:ring-2 focus:ring-[#8B5CF6]/50`}`}),(0,G.jsx)(jl,{message:O.childLinkCode||``})]}),(0,G.jsx)(`button`,{type:`submit`,disabled:w,className:`cursor-pointer w-full h-11 text-white font-semibold rounded-xl bg-[#8B5CF6] disabled:opacity-60`,children:`회원가입`}),(0,G.jsx)(`button`,{type:`button`,onClick:()=>e(-1),className:`cursor-pointer w-full h-11 text-white font-semibold rounded-xl bg-[#6B7280]`,children:`뒤로가기`})]}),(0,G.jsx)(jl,{message:E}),(0,G.jsx)(`div`,{className:`flex justify-center items-center`,children:(0,G.jsxs)(L,{to:`/login`,className:`text-[#8B5CF6] text-sm hover:underline`,children:[`이미 계정이 있나요? `,(0,G.jsx)(`strong`,{children:`로그인`})]})})]})}var Pl=u(S()),Fl=e=>new Date(e).toLocaleTimeString(`ko-KR`,{hour:`2-digit`,minute:`2-digit`});function Il(e){let t=(0,Pl.c)(14),{message:n,currentUserId:r}=e,i=n.sender_id===r,a;t[0]===n.message?a=t[1]:(a=n.message.startsWith(`data:image/`),t[0]=n.message,t[1]=a);let o=a,s=`flex flex-row ${i?`flex-row-reverse`:``} items-end gap-1 mb-4`,c;t[2]!==i||t[3]!==o||t[4]!==n.message?(c=(0,G.jsx)(`div`,{className:`flex flex-col gap-1 w-[500px]`,children:o?(0,G.jsx)(`div`,{className:`rounded-xl px-4 py-2 ${i?`bg-[#8B5CF6]`:`bg-[#E5E7EB]`}`,children:(0,G.jsx)(`img`,{src:n.message,alt:`메시지 이미지`,className:`max-w-xs rounded-xl`})}):(0,G.jsx)(`p`,{className:`rounded-xl px-4 py-2 ${i?`bg-[#8B5CF6] text-white`:`bg-[#E5E7EB]`}`,children:n.message})}),t[2]=i,t[3]=o,t[4]=n.message,t[5]=c):c=t[5];let l;t[6]===n.created_at?l=t[7]:(l=Fl(n.created_at),t[6]=n.created_at,t[7]=l);let u;t[8]===l?u=t[9]:(u=(0,G.jsx)(`span`,{className:`text-xs text-gray-500`,children:l}),t[8]=l,t[9]=u);let d;return t[10]!==s||t[11]!==c||t[12]!==u?(d=(0,G.jsxs)(`div`,{className:s,children:[c,u]}),t[10]=s,t[11]=c,t[12]=u,t[13]=d):d=t[13],d}var Ll=u(S()),Rl=e=>{let t={};return e.forEach(e=>{let n=new Date(e.created_at).toLocaleDateString(`ko-KR`,{year:`numeric`,month:`long`,day:`numeric`,weekday:`long`});t[n]||(t[n]=[]),t[n].push(e)}),t};function zl(e){let t=(0,Ll.c)(5),{messages:n,currentUserId:r}=e,i=(0,b.useRef)(null),a=Rl(n),o;t[0]===Symbol.for(`react.memo_cache_sentinel`)?(o=()=>{if(i.current){let e=i.current;e.scrollTo({top:e.scrollHeight,behavior:`smooth`})}},t[0]=o):o=t[0];let s;t[1]===n?s=t[2]:(s=[n],t[1]=n,t[2]=s),(0,b.useEffect)(o,s);let c=Object.entries(a).map(e=>{let[t,n]=e;return(0,G.jsxs)(`div`,{children:[(0,G.jsx)(`div`,{className:`flex justify-center mb-6`,children:(0,G.jsx)(`span`,{className:`inline-block px-4 py-2 bg-[#E5E7EB] rounded-full text-sm font-light`,children:t})}),(0,G.jsx)(`div`,{className:`w-full space-y-4`,children:n.map(e=>(0,G.jsx)(Il,{message:e,currentUserId:r},e.id))})]},t)}),l;return t[3]===c?l=t[4]:(l=(0,G.jsx)(`div`,{ref:i,className:`flex-1 overflow-y-auto scrollbar-custom p-6`,children:c}),t[3]=c,t[4]=l),l}var Bl=u(S());function Vl(e){let t=(0,Bl.c)(25),{room:n,currentUserId:r,onSelect:i,isSelected:a}=e,o=n.user1_id===r?n.user2:n.user1,s=Hl,c=n.user1_id===r?!n.is_read_user1:!n.is_read_user2,l=`cursor-pointer flex flex-row p-4 items-center gap-3 hover:bg-[rgba(139,92,246,0.1)] transition-colors ${a?`bg-[rgba(139,92,246,0.1)]`:``}`,u;t[0]!==i||t[1]!==n.id?(u=()=>i(n.id),t[0]=i,t[1]=n.id,t[2]=u):u=t[2];let d;t[3]===o?d=t[4]:(d=(0,G.jsx)(`div`,{className:`w-10 h-10 bg-[#D9D9D9] rounded-full overflow-hidden`,children:o?.profile_image_url?(0,G.jsx)(`img`,{src:o.profile_image_url,alt:o.nickname,className:`w-full h-full object-cover`}):(0,G.jsx)(`div`,{className:`w-full h-full bg-gray-300 flex items-center justify-center text-gray-600 text-sm font-medium`,children:o?.nickname?.charAt(0)||`?`})}),t[3]=o,t[4]=d);let f=o?.nickname||`알 수 없음`,p;t[5]===f?p=t[6]:(p=(0,G.jsx)(`span`,{className:`font-medium text-gray-900 truncate`,children:f}),t[5]=f,t[6]=p);let m;t[7]===c?m=t[8]:(m=c&&(0,G.jsx)(`div`,{className:`bg-red-500 rounded-full w-2 h-2 animate-pulse flex-shrink-0`}),t[7]=c,t[8]=m);let h;t[9]!==p||t[10]!==m?(h=(0,G.jsxs)(`div`,{className:`flex items-center gap-2`,children:[p,m]}),t[9]=p,t[10]=m,t[11]=h):h=t[11];let g;t[12]===n.last_message?g=t[13]:(g=n.last_message&&(0,G.jsx)(`p`,{className:`text-sm text-gray-600 truncate mt-1`,children:n.last_message.message.startsWith(`data:image/`)?(0,G.jsx)(`span`,{className:`font-bold`,children:`사진을 보냈습니다.`}):n.last_message.message}),t[12]=n.last_message,t[13]=g);let _;t[14]===n.last_message_at?_=t[15]:(_=n.last_message_at&&(0,G.jsx)(`span`,{className:`text-xs text-gray-500 mt-1 block`,children:s(n.last_message_at)}),t[14]=n.last_message_at,t[15]=_);let v;t[16]!==h||t[17]!==g||t[18]!==_?(v=(0,G.jsxs)(`div`,{className:`flex-1 min-w-0`,children:[h,g,_]}),t[16]=h,t[17]=g,t[18]=_,t[19]=v):v=t[19];let y;return t[20]!==l||t[21]!==v||t[22]!==u||t[23]!==d?(y=(0,G.jsxs)(`div`,{className:l,onClick:u,children:[d,v]}),t[20]=l,t[21]=v,t[22]=u,t[23]=d,t[24]=y):y=t[24],y}function Hl(e){if(!e)return``;let t=new Date(e);return(new Date().getTime()-t.getTime())/36e5<24?t.toLocaleTimeString(`ko-KR`,{hour:`2-digit`,minute:`2-digit`}):t.toLocaleDateString(`ko-KR`,{month:`short`,day:`numeric`})}var Ul=u(S());function Wl(){let e=(0,Ul.c)(1),t;return e[0]===Symbol.for(`react.memo_cache_sentinel`)?(t=(0,G.jsx)(`div`,{className:`flex-1 overflow-y-auto`,children:Array.from({length:6}).map(Gl)}),e[0]=t):t=e[0],t}function Gl(e,t){return(0,G.jsxs)(`div`,{className:`cursor-pointer flex flex-row p-4 items-center gap-3 animate-pulse`,children:[(0,G.jsx)(`div`,{className:`w-10 h-10 bg-gray-200 rounded-full`}),(0,G.jsxs)(`div`,{className:`flex-1 min-w-0`,children:[(0,G.jsxs)(`div`,{className:`flex items-center gap-2`,children:[(0,G.jsx)(`div`,{className:`h-4 bg-gray-200 rounded w-20`}),t%2==0&&(0,G.jsx)(`div`,{className:`w-2 h-2 bg-gray-300 rounded-full`})]}),(0,G.jsx)(`div`,{className:`h-3 bg-gray-100 rounded w-32 mt-1`}),(0,G.jsx)(`div`,{className:`h-3 bg-gray-100 rounded w-16 mt-1`})]})]},t)}var Kl=u(S());function ql(e){let t=(0,Kl.c)(13),{chatRooms:n,currentUserId:r,selectedRoomId:i,onRoomSelect:a,isLoading:o}=e;if(o){let e;return t[0]===Symbol.for(`react.memo_cache_sentinel`)?(e=(0,G.jsx)(Wl,{}),t[0]=e):e=t[0],e}if(n.length===0){let e;return t[1]===Symbol.for(`react.memo_cache_sentinel`)?(e=(0,G.jsx)(`div`,{className:`flex-1 overflow-y-auto scrollbar-custom`,children:(0,G.jsx)(`div`,{className:`flex items-center justify-center h-32`,children:(0,G.jsxs)(`div`,{className:`text-gray-500 text-center`,children:[(0,G.jsx)(`div`,{className:`text-lg mb-2`,children:`💬`}),(0,G.jsx)(`div`,{children:`아직 채팅방이 없습니다`})]})})}),t[1]=e):e=t[1],e}let s;if(t[2]!==n||t[3]!==r||t[4]!==a||t[5]!==i){let e;t[7]!==r||t[8]!==a||t[9]!==i?(e=e=>(0,G.jsx)(Vl,{room:e,currentUserId:r,onSelect:a,isSelected:i===e.id},e.id),t[7]=r,t[8]=a,t[9]=i,t[10]=e):e=t[10],s=n.map(e),t[2]=n,t[3]=r,t[4]=a,t[5]=i,t[6]=s}else s=t[6];let c;return t[11]===s?c=t[12]:(c=(0,G.jsx)(`div`,{className:`flex-1 overflow-y-auto scrollbar-custom`,children:s}),t[11]=s,t[12]=c),c}var Jl=u(S());function Yl(){let e=(0,Jl.c)(1),t;return e[0]===Symbol.for(`react.memo_cache_sentinel`)?(t=(0,G.jsx)(`div`,{className:`flex-1 overflow-y-auto p-6`,children:Array.from({length:2}).map(J)}),e[0]=t):t=e[0],t}function J(e,t){return(0,G.jsxs)(`div`,{children:[(0,G.jsx)(`div`,{className:`flex justify-center mb-6`,children:(0,G.jsx)(`div`,{className:`h-8 rounded-full w-45 skeleton-40`})}),(0,G.jsx)(`div`,{className:`w-full space-y-4`,children:Array.from({length:4}).map(Xl)})]},t)}function Xl(e,t){let n=t%2==0;return(0,G.jsxs)(`div`,{className:`flex flex-row ${n?`flex-row-reverse`:``} items-end gap-1 mb-4`,children:[(0,G.jsx)(`div`,{className:`flex flex-col gap-1 w-[500px]`,children:(0,G.jsx)(`div`,{className:`rounded-xl px-4 py-2 ${n?`skeleton-50`:`skeleton-40`}`,style:{width:`500px`,height:`40px`}})}),(0,G.jsx)(`div`,{className:`h-3 rounded w-12 skeleton-30`})]},t)}var Y=u(S());function X(){let e=(0,Y.c)(94),{id:t}=Qe(),n=Je(),[r,i]=(0,b.useState)(t||null),[a,o]=(0,b.useState)(``),[s,c]=(0,b.useState)(!1),[l,u]=(0,b.useState)(null),[d,f]=(0,b.useState)(!1),p=(0,b.useRef)(null),m=(0,b.useRef)(null),h=W(Zl),{messages:g,isLoading:_}=Bc(r),{chatRooms:v,isLoading:y,refetch:x}=Vc(),{sendMessage:S,isLoading:C}=zc(),{deleteRoom:w,isLoading:T}=Uc(),E,D;e[0]===t?(E=e[1],D=e[2]):(E=()=>{i(t||null)},D=[t],e[0]=t,e[1]=E,e[2]=D),(0,b.useEffect)(E,D);let O,k;e[3]!==v||e[4]!==y||e[5]!==n||e[6]!==t?(O=()=>{t&&v.length>0&&!y&&(v.some(e=>e.id===t)?i(t):n(`/msg`))},k=[t,v,y,n],e[3]=v,e[4]=y,e[5]=n,e[6]=t,e[7]=O,e[8]=k):(O=e[7],k=e[8]),(0,b.useEffect)(O,k);let A;e[9]===n?A=e[10]:(A=e=>{i(e),n(`/msg/${e}`)},e[9]=n,e[10]=A);let j=A,ee;e[11]!==C||e[12]!==a||e[13]!==r||e[14]!==S?(ee=async e=>{if(e.preventDefault(),!(!a.trim()||!r||C))try{await S(r,a.trim())?(o(``),setTimeout(()=>{p.current?.focus()},0)):console.error(`메시지 전송 실패`)}catch(e){let t=e;console.error(`메시지 전송 중 오류:`,t)}},e[11]=C,e[12]=a,e[13]=r,e[14]=S,e[15]=ee):ee=e[15];let te=ee,ne=Z,M;e[16]===Symbol.for(`react.memo_cache_sentinel`)?(M=e=>{let t=e.target.files&&e.target.files[0];if(t){if(!ne(t)){alert(`이미지 파일만 전송할 수 있습니다. (JPG, PNG, GIF, WebP, SVG)`),e.target.value=``;return}if(t.size>10485760){alert(`파일 크기는 10MB 이하여야 합니다.`),e.target.value=``;return}let n=new FileReader;n.onload=e=>{u(e.target?.result),f(!0)},n.readAsDataURL(t)}},e[16]=M):M=e[16];let N=M,P;e[17]!==C||e[18]!==l||e[19]!==r||e[20]!==S?(P=async()=>{if(!(!l||!r||C))try{await S(r,l)?(u(null),f(!1),m.current&&(m.current.value=``)):console.error(`이미지 전송 실패`)}catch(e){let t=e;console.error(`이미지 전송 중 오류:`,t)}},e[17]=C,e[18]=l,e[19]=r,e[20]=S,e[21]=P):P=e[21];let re=P,ie;e[22]!==w||e[23]!==T||e[24]!==n||e[25]!==x||e[26]!==r?(ie=async()=>{if(!(!r||T))try{await w(r)?(i(null),c(!1),await x(),n(`/msg`)):console.error(`채팅방 삭제 실패`)}catch(e){let t=e;console.error(`채팅방 삭제 중 오류:`,t)}},e[22]=w,e[23]=T,e[24]=n,e[25]=x,e[26]=r,e[27]=ie):ie=e[27];let ae=ie,oe;if(e[28]!==v||e[29]!==r){let t;e[31]===r?t=e[32]:(t=e=>e.id===r,e[31]=r,e[32]=t),oe=v.find(t),e[28]=v,e[29]=r,e[30]=oe}else oe=e[30];let se=oe,F=se?se.user1_id===h?se.user2:se.user1:null,ce=t||null,le;e[33]===Symbol.for(`react.memo_cache_sentinel`)?(le=(0,G.jsx)(`div`,{className:`h-[60px] border-b border-[#E5E7EB] rounded-t-xl p-4`,children:(0,G.jsx)(`h2`,{className:`font-bold text-lg text-[#8B5CF6]`,children:`채팅`})}),e[33]=le):le=e[33];let ue=h||``,de;e[34]!==v||e[35]!==y||e[36]!==j||e[37]!==r||e[38]!==ue?(de=(0,G.jsxs)(`div`,{className:`w-[250px] border-r border-[#E5E7EB] bg-[#F9FAFB] rounded-l-xl flex flex-col`,children:[le,(0,G.jsx)(ql,{chatRooms:v,currentUserId:ue,selectedRoomId:r,onRoomSelect:j,isLoading:y})]}),e[34]=v,e[35]=y,e[36]=j,e[37]=r,e[38]=ue,e[39]=de):de=e[39];let fe=F?.nickname||`채팅방을 선택해주세요`,pe;e[40]===fe?pe=e[41]:(pe=(0,G.jsx)(`h3`,{className:`text-xl font-medium`,children:fe}),e[40]=fe,e[41]=pe);let me;e[42]!==T||e[43]!==r?(me=r&&(0,G.jsx)(`button`,{className:`w-[30px] h-[30px] cursor-pointer rounded flex items-center justify-center hover:bg-red-500 hover:text-white transition-colors`,onClick:()=>c(!0),disabled:T,children:(0,G.jsxs)(`svg`,{width:`30`,height:`30`,viewBox:`0 0 24 24`,fill:`none`,stroke:`#6B7280`,strokeWidth:`2`,strokeLinecap:`round`,strokeLinejoin:`round`,children:[(0,G.jsx)(`polyline`,{points:`3,6 5,6 21,6`}),(0,G.jsx)(`path`,{d:`m19,6v14a2,2 0 0,1 -2,2H7a2,2 0 0,1 -2,-2V6m3,0V4a2,2 0 0,1 2,-2h4a2,2 0 0,1 2,2v2`}),(0,G.jsx)(`line`,{x1:`10`,y1:`11`,x2:`10`,y2:`17`}),(0,G.jsx)(`line`,{x1:`14`,y1:`11`,x2:`14`,y2:`17`})]})}),e[42]=T,e[43]=r,e[44]=me):me=e[44];let he;e[45]!==pe||e[46]!==me?(he=(0,G.jsxs)(`div`,{className:`h-[60px] border-b border-[#E5E7EB] bg-[#F9FAFB] flex justify-between items-center px-6`,children:[pe,me]}),e[45]=pe,e[46]=me,e[47]=he):he=e[47];let ge;e[48]!==h||e[49]!==_||e[50]!==g||e[51]!==r?(ge=r&&h?_?(0,G.jsx)(Yl,{}):(0,G.jsx)(zl,{messages:g,currentUserId:h}):(0,G.jsx)(`div`,{className:`flex-1 flex items-center justify-center`,children:(0,G.jsx)(`div`,{className:`text-gray-500`,children:`채팅방을 선택해주세요`})}),e[48]=h,e[49]=_,e[50]=g,e[51]=r,e[52]=ge):ge=e[52];let _e;e[53]===Symbol.for(`react.memo_cache_sentinel`)?(_e=e=>o(e.target.value),e[53]=_e):_e=e[53];let ve;e[54]!==C||e[55]!==a?(ve=(0,G.jsx)(`input`,{type:`text`,placeholder:`메시지를 입력하세요`,value:a,onChange:_e,className:`flex-1 h-11 border border-[#E5E7EB] rounded-xl p-2`,disabled:C,ref:p}),e[54]=C,e[55]=a,e[56]=ve):ve=e[56];let ye;e[57]===Symbol.for(`react.memo_cache_sentinel`)?(ye=(0,G.jsx)(`input`,{type:`file`,className:`hidden`,id:`file-upload`,accept:`image/*`,onChange:N,ref:m}),e[57]=ye):ye=e[57];let be;e[58]===Symbol.for(`react.memo_cache_sentinel`)?(be=(0,G.jsx)(`label`,{htmlFor:`file-upload`,className:`w-11 h-11 border border-[#E5E7EB] rounded-lg flex justify-center items-center cursor-pointer hover:bg-gray-50 transition-colors`,children:(0,G.jsxs)(`svg`,{width:`20`,height:`20`,viewBox:`0 0 24 24`,fill:`none`,stroke:`#6B7280`,strokeWidth:`2`,strokeLinecap:`round`,strokeLinejoin:`round`,children:[(0,G.jsx)(`rect`,{x:`3`,y:`3`,width:`18`,height:`18`,rx:`2`,ry:`2`}),(0,G.jsx)(`circle`,{cx:`8.5`,cy:`8.5`,r:`1.5`}),(0,G.jsx)(`polyline`,{points:`21,15 16,10 5,21`})]})}),e[58]=be):be=e[58];let xe;e[59]!==C||e[60]!==a||e[61]!==r?(xe=C||!a.trim()||!r,e[59]=C,e[60]=a,e[61]=r,e[62]=xe):xe=e[62];let Se=`cursor-pointer text-sm text-white font-medium rounded-lg px-4 py-3 ${C||!a.trim()||!r?`bg-gray-400 cursor-not-allowed`:`bg-[#8B5CF6] hover:bg-[#7C3AED]`}`,Ce;e[63]!==xe||e[64]!==Se?(Ce=(0,G.jsx)(`button`,{type:`submit`,disabled:xe,className:Se,children:`전송`}),e[63]=xe,e[64]=Se,e[65]=Ce):Ce=e[65];let we;e[66]!==te||e[67]!==ve||e[68]!==Ce?(we=(0,G.jsxs)(`form`,{onSubmit:te,className:`w-full p-4 border-t border-[#E5E7EB] flex items-center gap-2 bg-white`,children:[ve,ye,be,Ce]}),e[66]=te,e[67]=ve,e[68]=Ce,e[69]=we):we=e[69];let Te;e[70]!==ge||e[71]!==we?(Te=(0,G.jsxs)(`div`,{className:`flex-1 flex flex-col overflow-hidden`,children:[ge,we]}),e[70]=ge,e[71]=we,e[72]=Te):Te=e[72];let Ee;e[73]!==he||e[74]!==Te?(Ee=(0,G.jsxs)(`div`,{className:`flex-1 flex flex-col`,children:[he,Te]}),e[73]=he,e[74]=Te,e[75]=Ee):Ee=e[75];let De;e[76]!==ce||e[77]!==de||e[78]!==Ee?(De=(0,G.jsxs)(`div`,{className:`w-[1000px] h-[790px] bg-white rounded-xl flex flex-row overflow-hidden`,children:[de,Ee]},ce),e[76]=ce,e[77]=de,e[78]=Ee,e[79]=De):De=e[79];let Oe;e[80]!==ae||e[81]!==T||e[82]!==F?.nickname||e[83]!==s?(Oe=s&&(0,G.jsx)(`div`,{className:`fixed inset-0 bg-gray-900/60 bg-opacity-50 flex items-center justify-center z-50`,children:(0,G.jsxs)(`div`,{className:`bg-white rounded-xl p-6 max-w-md w-full mx-4`,children:[(0,G.jsxs)(`h3`,{className:`text-lg font-semibold mb-4`,children:[F?.nickname,`님과의 채팅방 삭제`]}),(0,G.jsxs)(`p`,{className:`text-gray-600 mb-6`,children:[`정말로 이 채팅방을 삭제하시겠습니까?`,(0,G.jsx)(`br`,{}),`삭제된 채팅방과 메시지는 복구할 수 없습니다.`,(0,G.jsx)(`br`,{}),`상대방의 채팅방도 삭제됩니다!`]}),(0,G.jsxs)(`div`,{className:`flex gap-3 justify-end`,children:[(0,G.jsx)(`button`,{onClick:()=>c(!1),className:`px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors`,disabled:T,children:`취소`}),(0,G.jsx)(`button`,{onClick:ae,disabled:T,className:`px-4 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600 transition-colors disabled:opacity-50`,children:`삭제`})]})]})}),e[80]=ae,e[81]=T,e[82]=F?.nickname,e[83]=s,e[84]=Oe):Oe=e[84];let ke;e[85]!==re||e[86]!==C||e[87]!==l||e[88]!==d?(ke=d&&l&&(0,G.jsx)(`div`,{className:`fixed inset-0 bg-gray-900/60 flex items-center justify-center z-50`,children:(0,G.jsxs)(`div`,{className:`bg-white rounded-xl p-6 max-w-md w-full mx-4`,children:[(0,G.jsx)(`h3`,{className:`text-lg font-semibold mb-4`,children:`이미지 전송`}),(0,G.jsx)(`div`,{className:`mb-4`,children:(0,G.jsx)(`img`,{src:l,alt:`전송할 이미지`,className:`w-full max-h-64 object-contain rounded-lg`})}),(0,G.jsx)(`p`,{className:`text-gray-600 mb-6`,children:`이 이미지를 전송하시겠습니까?`}),(0,G.jsxs)(`div`,{className:`flex gap-3 justify-end`,children:[(0,G.jsx)(`button`,{onClick:()=>{f(!1),u(null)},className:`px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors`,disabled:C,children:`취소`}),(0,G.jsx)(`button`,{onClick:re,disabled:C,className:`px-4 py-2 bg-[#8B5CF6] text-white rounded-lg hover:bg-[#7C3AED] transition-colors disabled:opacity-50`,children:`전송`})]})]})}),e[85]=re,e[86]=C,e[87]=l,e[88]=d,e[89]=ke):ke=e[89];let Ae;return e[90]!==De||e[91]!==Oe||e[92]!==ke?(Ae=(0,G.jsxs)(G.Fragment,{children:[De,Oe,ke]}),e[90]=De,e[91]=Oe,e[92]=ke,e[93]=Ae):Ae=e[93],Ae}function Z(e){return[`image/jpeg`,`image/jpg`,`image/png`,`image/gif`,`image/webp`,`image/svg+xml`].includes(e.type)}function Zl(e){return e.currentUserId}var Ql=u(S());function $l(e){let t=(0,Ql.c)(12),{isOpen:n,onClose:r,title:i,children:a,width:o}=e,s=o===void 0?`350px`:o;if(!n)return null;let c;t[0]===s?c=t[1]:(c={width:s},t[0]=s,t[1]=c);let l;t[2]===Symbol.for(`react.memo_cache_sentinel`)?(l=(0,G.jsx)(oc,{size:20}),t[2]=l):l=t[2];let u;t[3]===r?u=t[4]:(u=(0,G.jsx)(q,{onClick:r,className:`absolute top-3 right-3 text-gray-400 hover:text-gray-600`,children:l}),t[3]=r,t[4]=u);let d;t[5]===i?d=t[6]:(d=i&&(0,G.jsx)(`h2`,{className:`text-xl font-bold text-gray-800 mb-3`,children:i}),t[5]=i,t[6]=d);let f;return t[7]!==a||t[8]!==c||t[9]!==u||t[10]!==d?(f=(0,G.jsx)(`div`,{className:`fixed inset-0 bg-black/40 flex items-center justify-center z-50`,children:(0,G.jsxs)(`div`,{className:`text-center bg-white rounded-xl shadow-lg p-6 relative animate-fadeIn`,style:c,children:[u,d,a]})}),t[7]=a,t[8]=c,t[9]=u,t[10]=d,t[11]=f):f=t[11],f}const eu=jn()(Er(e=>({userPosts:[],userComments:[],fetchUserPosts:async t=>{let{data:n,error:r}=await U.from(`posts`).select(`*, post_likes(id), comments:comments!comments_post_id_fkey(id)`).eq(`user_id`,t).order(`created_at`,{ascending:!1});if(r){console.error(`유저 게시글 불러오기 실패:`,r.message);return}e(e=>{e.userPosts=n||[]})},fetchUserCommentsWithPosts:async t=>{try{let{data:n,error:r}=await U.from(`comments`).select(`*, comment_likes(id)`).eq(`user_id`,t).order(`created_at`,{ascending:!1});if(r){console.error(`유저 댓글 불러오기 실패:`,r.message);return}if(!n||n.length===0){e(e=>{e.userComments=[]});return}let i=Array.from(new Set(n.map(e=>e.post_id))),{data:a,error:o}=await U.from(`posts`).select(`id, title, board_type`).in(`id`,i);if(o){console.error(`댓글 게시글 불러오기 실패:`,o.message);return}let s=n.map(e=>e.id),{data:c,error:l}=await U.from(`comments`).select(`parent_comment_id`).in(`parent_comment_id`,s);l&&console.error(`대댓글 불러오기 실패:`,l.message);let u=c?.reduce((e,t)=>(t.parent_comment_id&&(e[t.parent_comment_id]=(e[t.parent_comment_id]||0)+1),e),{}),d=n.filter(e=>e.parent_comment_id).map(e=>e.parent_comment_id).filter(Boolean),f={};if(d.length>0){let{data:e,error:t}=await U.from(`comments`).select(`id, user_id`).in(`id`,d);if(t)console.error(`부모 댓글 불러오기 실패:`,t.message);else if(e&&e.length>0){let t=Array.from(new Set(e.map(e=>e.user_id)));if(t.length>0){let{data:n,error:r}=await U.from(`users`).select(`auth_id, nickname`).in(`auth_id`,t);r?console.error(`부모 유저 정보 불러오기 실패:`,r.message):n&&n.length>0&&e.forEach(e=>{let t=n.find(t=>t.auth_id===e.user_id);t&&(f[e.id]=t)})}}}let p=n.map(e=>{let t=a?.find(t=>t.id===e.post_id),n=e.parent_comment_id&&f[e.parent_comment_id]?f[e.parent_comment_id]:void 0;return{...e,post:t||null,user:n||null,reply_count:u?.[e.id]||0}});e(e=>{e.userComments=p})}catch(e){console.error(`fetchUserCommentsWithPosts 실행 중 오류:`,e)}}}))),tu=jn(e=>({badges:[],representativeBadge:null,loading:!1,recentlyGranted:null,setRecentlyGranted:t=>e({recentlyGranted:t}),fetchUserBadges:async t=>{if(!t)return;e({loading:!0});let{data:n,error:r}=await U.from(`badge_logs`).select(`*,
				badges!inner (
					id,
					name,
					description,
					icon_url
				)
			`).eq(`user_id`,t);if(r){console.error(`Failed to fetch badge logs:`,r),e({loading:!1});return}let i=(n||[]).map(e=>({id:e.id,user_id:e.user_id,badge_id:e.badge_id,created_at:e.created_at,badges:e.badges?{id:e.badges.id,name:e.badges.name??``,description:e.badges.description??``,icon_url:e.badges.icon_url??``,created_at:e.created_at}:void 0})),a=null,{data:o,error:s}=await U.from(`users`).select(`representative_badge_id`).eq(`auth_id`,t).single();if(!s&&o?.representative_badge_id){let{data:e,error:t}=await U.from(`badge_logs`).select(`
				id,
				user_id,
				badge_id,
				created_at,
				badges (
					id,
					name,
					description,
					icon_url
				)
			`).eq(`id`,o.representative_badge_id).single();!t&&e&&(a={id:e.id,user_id:e.user_id,badge_id:e.badge_id,created_at:e.created_at,badges:e.badges})}e({badges:i,representativeBadge:a,loading:!1})},setRepresentativeBadge:async(e,t)=>{let{error:n}=await U.from(`users`).update({representative_badge_id:t}).eq(`auth_id`,e);if(n){console.error(`Failed to set representative badge:`,n);return}await tu.getState().fetchUserBadges(e)}}));function nu(e){let t=document.createElement(`textarea`);return t.innerHTML=e,t.value}const ru=async(e,t,n)=>{try{let{data:r,error:i}=await U.from(`users`).select(`current_point`).eq(`auth_id`,e).single();if(i)throw i;let a=r?.current_point||0;if(a<t)return{success:!1,message:`포인트가 부족합니다. (현재: ${a}포인트, 필요: ${t}포인트)`};let o=a-t,{error:s}=await U.from(`users`).update({current_point:o}).eq(`auth_id`,e);if(s)throw s;let{error:c}=await U.from(`point_logs`).insert([{user_id:e,point:-t,description:n}]);if(c)throw c;return{success:!0,message:`${t}포인트가 차감되었습니다.`}}catch(e){return console.error(`포인트 차감 실패:`,e),{success:!1,message:`포인트 차감 중 오류가 발생했습니다.`}}},iu=async e=>{try{let{data:t,error:n}=await U.from(`point_logs`).select(`*`).eq(`user_id`,e).order(`created_at`,{ascending:!1});if(n)throw n;return t||[]}catch(e){return console.error(`포인트 기록 조회 실패:`,e),[]}};var au=u(S());function ou(){let e=(0,au.c)(1),t;return e[0]===Symbol.for(`react.memo_cache_sentinel`)?(t=(0,G.jsx)(`div`,{className:`space-y-2`,children:[...[,,,,,]].map(su)}),e[0]=t):t=e[0],t}function su(e,t){return(0,G.jsxs)(`div`,{className:`flex items-center justify-between p-3 bg-gray-50 bg-opacity-80 rounded-lg animate-pulse`,children:[(0,G.jsxs)(`div`,{className:`flex-1`,children:[(0,G.jsx)(`div`,{className:`h-4 bg-gray-300 rounded mb-2 w-3/4`}),(0,G.jsx)(`div`,{className:`h-3 bg-gray-300 rounded w-1/2`})]}),(0,G.jsx)(`div`,{className:`h-4 bg-gray-300 rounded w-16`})]},t)}function cu({isOpen:e,onClose:t,userId:n}){let[r,i]=(0,b.useState)([]),[a,o]=(0,b.useState)(!1);(0,b.useEffect)(()=>{e&&n&&s()},[e,n]);let s=async()=>{o(!0);try{let e=await iu(n);i(e)}catch(e){console.error(`포인트 기록 조회 실패:`,e)}finally{o(!1)}},c=e=>new Date(e).toLocaleDateString(`ko-KR`,{year:`numeric`,month:`2-digit`,day:`2-digit`,hour:`2-digit`,minute:`2-digit`});return e?(0,G.jsx)(`div`,{className:`fixed inset-0 bg-gray-900/60 bg-opacity-30 flex items-center justify-center z-50`,onClick:t,children:(0,G.jsxs)(`div`,{className:`bg-white bg-opacity-95 backdrop-blur-sm rounded-xl p-4 w-full max-w-lg max-h-[60vh] overflow-hidden`,onClick:e=>e.stopPropagation(),children:[(0,G.jsxs)(`div`,{className:`flex items-center justify-between mb-4`,children:[(0,G.jsx)(`h2`,{className:`text-lg font-bold text-[#8B5CF6]`,children:`포인트 기록`}),(0,G.jsx)(`button`,{onClick:t,className:`p-1 hover:bg-gray-100 rounded-lg transition-colors`,children:(0,G.jsx)(oc,{size:20})})]}),(0,G.jsx)(`div`,{className:`overflow-y-auto max-h-[45vh]`,children:a?(0,G.jsx)(ou,{}):r.length===0?(0,G.jsx)(`div`,{className:`text-center py-8 text-gray-500`,children:`포인트 기록이 없습니다.`}):(0,G.jsx)(`div`,{className:`space-y-2`,children:r.map(e=>(0,G.jsxs)(`div`,{className:`flex items-center justify-between p-3 bg-gray-50 bg-opacity-80 rounded-lg`,children:[(0,G.jsxs)(`div`,{children:[(0,G.jsx)(`p`,{className:`text-sm font-medium text-gray-900`,children:e.description}),(0,G.jsx)(`p`,{className:`text-xs text-gray-500`,children:c(e.created_at)})]}),(0,G.jsxs)(`div`,{className:`text-sm font-bold ${e.point>0?`text-green-600`:`text-red-600`}`,children:[e.point>0?`+`:``,e.point.toLocaleString(),`포인트`]})]},e.id))})})]})}):null}function lu({profile:e}){let t=Je(),{updateProfile:n,deleteProfile:r,currentUserId:i}=W(),{followStatus:a,followedUserFnc:o,unFollowUserFnc:s,setFollowStatus:c,setUserFollowed:l,setFriends:u}=K(),{createRoom:d,isLoading:f}=Hc(),p=K(e=>e.userFollowed),{userPosts:m,userComments:h}=eu(),{representativeBadge:g}=tu(),_=a[e?.auth_id??``]||!1,[v,y]=(0,b.useState)(!1),[x,S]=(0,b.useState)(!1),[C,w]=(0,b.useState)(!1),[T,E]=(0,b.useState)(!1),[D,O]=(0,b.useState)(!1),[k,A]=(0,b.useState)(null);if(!e)return null;let j=(0,b.useMemo)(()=>e.auth_id===i,[e,i]),ee=e.birth_date?Lc(e.birth_date):0,te=e.role===`student`&&Rc(ee);return(0,G.jsxs)(G.Fragment,{children:[(0,G.jsxs)(`div`,{className:`flex flex-col items-center relative`,children:[(0,G.jsx)(`div`,{className:`z-10 w-30 h-30`,children:(0,G.jsxs)(`div`,{className:`relative w-full h-full rounded-xl`,children:[(0,G.jsx)(`img`,{className:`img w-full h-full rounded-xl object-cover`,src:e.profile_image_url??`data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAKgAAACoCAAAAABRIPpoAAAAIGNIUk0AAHomAACAhAAA+gAAAIDoAAB1MAAA6mAAADqYAAAXcJy6UTwAAAACYktHRADgCofBSgAAAAlwSFlzAAAAyAAAAMgAY/rnrQAAAAd0SU1FB+cMDwgCGHVP16EAAANFelRYdFJhdyBwcm9maWxlIHR5cGUgZ2lmOnhtcCBkYXRheG1wAABYw+1YS5IbNwzd8xQ+AgmAAJHbgCSQyiJVWWSR4weURhmPHU9m7FQiudxdUreID997ILvUKD//Ej/98etvH7b9bnktH/IAlVYwZEjlxsiTuxBUBu4srOy4QTzmnAGS48p0Rrpgp42VtlTC9B2sNIqYZGBHMfJOnNdMiJhBIBjo1XDJQJPBGZgf4gb1/OLFLngsJ31JLMRxUKBdDenSL+4XHM9JcmyeENL0aIk5I9Cop1WZSz9pghdUbAjgSFgTyxUJ5CSM1oGI+BMcV1sm5iEkVKSi5dwhlwNc0gucIx0FIpMral5rThII+b2vKfKKkjoe7DJgl5M/7RcM1RLXXzgSROqaqgHrhZgmck9cT/akBzlhynDRCOSEvwB9Qvhj2DfUl0n9WdW8x7w7BdByQg6FVKceeQ8yqBdkt4RGh6hmoa9EnrChJ/GVolz8yueON7crUYjXqV7LAlFeVuY2/PHKuS6GG9IvneU143vOH4nemOj1ejwKtU9ZPGjV3lKMB6D2tWvqvqgdFg+/+79cioei9r4VdbfUvv1hew/UXrJ42C3yz8V4CGpft6bujVq17+KP1t8X4+GovX1N3TW1b3vc3gu1ZxYPvUW+kxe/96+pu6T2b7z2/f/UPmfxkFvkbcX40dL4DxKdxtXprpbn9irU0xy7tlFFnvqiLSI8dqyYYaExQoKjBwUGRIvq4e7bV/Hp5urDxdm7k6ODN687tu+9157btu6xZfPum3bOs9uuK5avvdaay5auUZYsXn3RwgWrrTpj+txzzTlt6hxTJs8+aeKE2Wa1MLdty6aZqQ0TY+tGxdDAmlUNdd26dKqp6lDRrnTaotq0jhg+9lhjDhs6xpDBow8aOGC0USWKuGxZMsVEZaQ4fHqdgilSS/0iVTutzsnGyoOFOZWkVBVS29qje9999Vm6de2jS+feO3Xs0FuvFOS0adEkI6VBQkydiJCAGtVTCNxZr4mGigOlIGNHQkTAdumNOmxYMMFAYYAAQwc63V5okEVs3nZbbTZr2kaTxq03algatNZqzTrWLEVNNWtKUpNVTWA1c9c0lz8BWNjO1HA9GV8AAAABb3JOVAHPoneaAAACTklEQVR42u3avW7FMAgFYN7/KTMheUBiYe+VbpdKzY2NbQztOUPmT7Eh8Q9dRUKAAgoooIACCiiggAIKKKCAAgoooIACCiiggC4IN1FVs9dDGmeFtpfwZ7Tlg7LYrxFOBWW12yjngYp9jCSBsj2GM0CbdaSdh4p1RU5D1TqjZ6HdzmkpRYz7itGn7XW0qKJob19a16VmoDacM1AZh8oJKJsjfACqHqjGQ10vdOKVUuAMnZqlFFfyc4VPMb1+vutTZCnNlBMFj7x77Cm05ifqnoKnqHuSUmhzmmhQFFxL7moCNAnULLo//XUo5ui/hZZp+GU+oWV+Ssr85tX5cS6zFCmzuKuzXC6zAVFmS6fOJlmZbcc6G7l1tsbLHDbUOb6pcyBW54ixzqFtnWPwOhcLrjJXNa46l1+uMteJ3lVV4oLW93stceVtbwAFFFBAAQUUUEABDYPy+/+zZ22v71/UA9uOL6Nvb9z5Q+2Dskwchpp6FlIeaJtReldT49Bma9L2Qlcxh6ljUFZbmZG9iSGo2OrIDijbjvByqNieyGKo2q7oUug+Z6eUTlS7p/opgbNLSqfHvXf0KYWzQ0o5nM9SOtY/B/spnfkejX+jHqEWlymoBEJlAsoWGfZDNRSqbmiz2DQv1KLjhLZwaPNBzfK8Ukr1Qj+8UkpT8g+FT1l66FMvpRwfpefPE+Ua+fuxp2Qjfzv2lKrmP9Q9JZuit5OUMnX7Tz2fsk3Ru0laH9qOQdsYVI5BZQyqx6AKKKBdUDsXQAEFFFBAAQUUUED/D/QLm016EoW110UAAAAldEVYdGRhdGU6Y3JlYXRlADIwMjMtMTItMTVUMDg6MDI6MjMrMDA6MDD08/7gAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDIzLTEyLTE1VDA4OjAyOjE1KzAwOjAwaPF0hQAAACh0RVh0ZGF0ZTp0aW1lc3RhbXAAMjAyMy0xMi0xNVQwODowMjoyNCswMDowMBccWQ0AAAAASUVORK5CYII=`,alt:`profile`}),j&&(0,G.jsxs)(G.Fragment,{children:[(0,G.jsx)(q,{onClick:()=>S(!0),className:`cursor-pointer absolute top-0 left-0 w-full h-full rounded-xl bg-[rgba(0,0,0,0.4)] bg-opacity-40 opacity-0 hover:opacity-100 flex items-center justify-center text-white font-medium transition-opacity`,children:(0,G.jsx)(tc,{size:24})}),(0,G.jsx)($l,{isOpen:x,onClose:()=>S(!1),title:`프로필 수정`,children:(0,G.jsxs)(`form`,{method:`post`,onSubmit:async e=>{if(e.preventDefault(),!k?.trim()){alert(`수정한 이미지를 선택하세요.`);return}O(!0);try{await n({profile_image_url:k}),alert(`프로필 이미지가 업데이트되었습니다!`),S(!1)}catch(e){console.error(`이미지 수정 실패:`,e),alert(`이미지 수정 중 오류가 발생했습니다.`)}finally{O(!1)}},children:[(0,G.jsxs)(`div`,{className:`mb-4`,children:[!k&&(0,G.jsxs)(`div`,{className:`flex flex-col gap-2 items-center px-6 py-4 rounded-xl bg-white border-2 border-[#E5E7EB] border-dashed`,children:[(0,G.jsx)(`input`,{id:`imgFile`,accept:`image/*`,className:`hidden`,type:`file`,name:`imgFile`,onChange:async e=>{let t=e.target.files&&e.target.files[0];if(t){let e=new FileReader;e.onload=e=>{A(e.target?.result)},e.readAsDataURL(t)}}}),(0,G.jsx)(`p`,{className:`text-[#6B7280]`,children:`Upload image`}),(0,G.jsx)(`label`,{htmlFor:`imgFile`,className:`px-6 py-4 rounded-xl text-[#6B7280] bg-[#E5E7EB] cursor-pointer`,children:`Choose Img File`})]}),k&&(0,G.jsxs)(`div`,{className:`relative flex flex-col items-center px-6 py-4 rounded-xl bg-white border-1 border-[#E5E7EB]`,children:[(0,G.jsx)(`div`,{className:`relative py-2`,children:(0,G.jsx)(`img`,{src:k,alt:`image0`,className:`relative z-1 max-h-50 min-h-30 object-cover bg-white`})}),(0,G.jsx)(q,{type:`button`,className:`absolute z-9 top-1.5 right-1.5 p-1 rounded-full text-red-500 border-1 border-[#E5E7EB] bg-white`,onClick:()=>{A(null)},children:(0,G.jsx)(oc,{className:`z-99`,size:14})})]})]}),(0,G.jsxs)(`div`,{className:`flex justify-center gap-3`,children:[D?``:(0,G.jsx)(G.Fragment,{children:(0,G.jsx)(q,{onClick:()=>S(!1),className:`px-8 py-3 rounded-md bg-gray-200 text-gray-700 hover:bg-gray-300 transition-colors`,children:`취소`})}),(0,G.jsx)(q,{disabled:D,className:`px-8 py-3 rounded-md bg-violet-500 text-white hover:bg-violet-600 transition-colors`,children:D?`수정 중...`:`수정`})]})]})})]})]})}),(0,G.jsxs)(`div`,{className:`flex flex-col items-center absolute w-full bg-white top-15 rounded-xl shadow-xl pt-21 pb-10 px-10`,children:[(0,G.jsxs)(`div`,{className:`flex flex-col items-center text-center`,children:[(0,G.jsx)(`div`,{className:`text-sm font-medium text-gray-800 mb-1`,children:g?.badges?(0,G.jsxs)(G.Fragment,{children:[nu(g.badges?.icon_url??``),` `,g.badges?.name]}):(0,G.jsx)(`span`,{children:`뱃지 없음`})}),(0,G.jsx)(`div`,{className:`text-3xl font-bold text-gray-800 mb-2.5`,children:e.nickname}),(0,G.jsxs)(`div`,{className:`text-base font-normal text-gray-500 mb-5`,children:[{student:`학생`,teacher:`선생님`,parent:`학부모`}[e.role]||`알 수 없음`,e.role===`parent`?``:` · `,te&&`${te}`,e.role===`teacher`&&`${e.major}`]})]}),j?(0,G.jsx)(L,{to:`/profile/me/edit`,className:`bg-violet-500 rounded-xl text-center px-4 py-2 cursor-pointer text-base font-normal text-white`,children:`프로필 수정`}):(0,G.jsxs)(`div`,{className:`flex flex-row gap-2`,children:[(0,G.jsx)(q,{onClick:async()=>{if(!(!i||!e))if(a[e.auth_id]){if(await s(i,e.auth_id),c(e.auth_id,!1),l(t=>t.filter(t=>t.users?.auth_id!==e.auth_id)),j){let t=K.getState().friendsByProfileId[e.auth_id]||[];u(e.auth_id,t.filter(t=>t.users?.auth_id!==e.auth_id))}}else{await o(i,e.auth_id),c(e.auth_id,!0);let t={users:{auth_id:e.auth_id,nickname:e.nickname,profile_image_url:e.profile_image_url??null,is_online:e.is_online??!1,last_seen:e.last_seen??Date()},created_at:new Date().toISOString(),follower_id:i,following_id:e.auth_id,id:crypto.randomUUID()};if(l(e=>[...e,t]),j){let n=K.getState().friendsByProfileId[e.auth_id]||[];u(e.auth_id,[...n,t])}}},className:`w-20 rounded-xl text-center px-4 py-2 text-base font-normal ${_?` text-white bg-violet-500`:`border border-violet-500 text-violet-500 hover:bg-violet-100`}`,children:_?`팔로잉`:`팔로우`}),(0,G.jsx)(q,{onClick:async()=>{if(!(!i||!e||f))try{let n=await d(e.auth_id);n&&n.id&&t(`/msg/${n.id}`)}catch(e){console.error(`채팅방 생성 실패:`,e)}},disabled:f,className:`w-20 rounded-xl text-center px-4 py-2 text-base font-normal ${f?`bg-gray-400 cursor-not-allowed`:`bg-violet-500 hover:bg-violet-600`} text-white`,children:`메시지`})]}),(0,G.jsxs)(`div`,{className:`flex justify-between gap-12 pt-6`,children:[(0,G.jsxs)(`div`,{className:`flex flex-col items-center`,children:[(0,G.jsx)(`div`,{className:`text-xl font-medium text-violet-500`,children:p.length}),(0,G.jsx)(`div`,{className:`text-sm font-medium text-gray-500`,children:`친구`})]}),(0,G.jsxs)(`div`,{className:`flex flex-col items-center`,children:[(0,G.jsx)(`div`,{className:`text-xl font-medium text-violet-500`,children:m.length}),(0,G.jsx)(`div`,{className:`text-sm font-medium text-gray-500`,children:`게시글`})]}),(0,G.jsxs)(`div`,{className:`flex flex-col items-center`,children:[(0,G.jsx)(`div`,{className:`text-xl font-medium text-violet-500`,children:h.length}),(0,G.jsx)(`div`,{className:`text-sm font-medium text-gray-500`,children:`댓글`})]})]}),e.role===`teacher`?(0,G.jsxs)(`div`,{className:`w-full rounded-xl mt-6 px-6 py-4 bg-violet-500 text-white ${j?`cursor-pointer hover:bg-violet-600 transition-colors`:``}`,onClick:()=>{j&&w(!0)},children:[(0,G.jsx)(`p`,{className:`text-sm mb-1`,children:`보유 포인트`}),(0,G.jsxs)(`div`,{className:`flex items-end justify-between`,children:[(0,G.jsxs)(`span`,{className:`text-xl font-medium`,children:[e.current_point,`p`]}),j&&(0,G.jsx)(`span`,{className:`text-[12px] underline`,children:`내역보기`})]})]}):``,j&&(0,G.jsx)(q,{className:`absolute left-10 bottom-[-70px] px-4 py-2 bg-red-400 text-white rounded hover:bg-red-600`,onClick:()=>y(!0),children:(0,G.jsx)(rc,{})})]})]}),(0,G.jsxs)($l,{isOpen:v,onClose:()=>y(!1),title:`회원 탈퇴`,children:[(0,G.jsxs)(`p`,{className:`text-gray-600 mb-5`,children:[`정말로 이 계정를 삭제하시겠습니까?`,(0,G.jsx)(`br`,{}),`이 작업은 되돌릴 수 없습니다.`]}),(0,G.jsxs)(`div`,{className:`flex justify-center gap-3`,children:[T?``:(0,G.jsx)(G.Fragment,{children:(0,G.jsx)(q,{onClick:()=>y(!1),className:`px-8 py-3 rounded-md bg-gray-200 text-gray-700 hover:bg-gray-300 transition-colors`,children:`취소`})}),(0,G.jsx)(q,{onClick:async()=>{E(!0);try{await r(),y(!1),t(`/`)}catch(e){console.error(`탈퇴 실패:`,e)}finally{E(!1)}},disabled:T,className:`px-8 py-3 rounded-md bg-red-500 text-white hover:bg-red-600 transition-colors`,children:T?`삭제 중...`:`삭제`})]})]}),(0,G.jsx)(cu,{isOpen:C,onClose:()=>w(!1),userId:e.auth_id})]})}var uu=u(S());function du(e){let t=(0,uu.c)(27),{activeTab:n,setActiveTab:r}=e,i=n===`posts`?`#8B5CF6`:`transparent`,a;t[0]===i?a=t[1]:(a={borderColor:i},t[0]=i,t[1]=a);let o;t[2]===r?o=t[3]:(o=()=>r(`posts`),t[2]=r,t[3]=o);let s=`font-bold ${n===`posts`?`text-violet-500`:`text-gray-500`}`,c;t[4]===s?c=t[5]:(c=(0,G.jsx)(`div`,{className:`flex flex-row items-center justify-center gap-1`,children:(0,G.jsx)(`p`,{className:s,children:`내가 작성한 게시글`})}),t[4]=s,t[5]=c);let l;t[6]!==o||t[7]!==c?(l=(0,G.jsx)(`button`,{className:`w-full cursor-pointer pb-4`,onClick:o,children:c}),t[6]=o,t[7]=c,t[8]=l):l=t[8];let u;t[9]!==a||t[10]!==l?(u=(0,G.jsx)(`div`,{className:`flex-1 border-b-2`,style:a,children:l}),t[9]=a,t[10]=l,t[11]=u):u=t[11];let d=n===`comments`?`#8B5CF6`:`transparent`,f;t[12]===d?f=t[13]:(f={borderColor:d},t[12]=d,t[13]=f);let p;t[14]===r?p=t[15]:(p=()=>r(`comments`),t[14]=r,t[15]=p);let m=`font-bold ${n===`comments`?`text-violet-500`:`text-gray-500`}`,h;t[16]===m?h=t[17]:(h=(0,G.jsx)(`div`,{className:`flex flex-row items-center justify-center gap-1`,children:(0,G.jsx)(`p`,{className:m,children:`내가 작성한 댓글`})}),t[16]=m,t[17]=h);let g;t[18]!==p||t[19]!==h?(g=(0,G.jsx)(`button`,{className:`w-full cursor-pointer pb-4`,onClick:p,children:h}),t[18]=p,t[19]=h,t[20]=g):g=t[20];let _;t[21]!==g||t[22]!==f?(_=(0,G.jsx)(`div`,{className:`flex-1 border-b-2`,style:f,children:g}),t[21]=g,t[22]=f,t[23]=_):_=t[23];let v;return t[24]!==_||t[25]!==u?(v=(0,G.jsx)(`div`,{className:`flex flex-col w-full`,children:(0,G.jsxs)(`div`,{className:`flex flex-row w-full border-b-2 border-[#D9D9D9]`,children:[u,_]})}),t[24]=_,t[25]=u,t[26]=v):v=t[26],v}var fu=u(S());function pu(e){let t=(0,fu.c)(7),{currentPage:n,totalPages:r,onPageChange:i}=e;if(r<=1)return null;let a;if(t[0]!==n||t[1]!==i||t[2]!==r){let e;t[4]!==n||t[5]!==i?(e=(e,t)=>(0,G.jsx)(`button`,{onClick:()=>i(t+1),className:`px-3 py-1 rounded-md border cursor-pointer ${n===t+1?`bg-violet-500 text-white border-violet-500`:`bg-white text-gray-700 border-gray-300`}`,children:t+1},t+1),t[4]=n,t[5]=i,t[6]=e):e=t[6],a=(0,G.jsx)(`div`,{className:`flex justify-center gap-2 mt-4`,children:Array.from({length:r},e)}),t[0]=n,t[1]=i,t[2]=r,t[3]=a}else a=t[3];return a}function mu(){let{userPosts:e}=eu();if(!e)return(0,G.jsx)(`p`,{children:`작성한 게시글이 없습니다.`});let[t,n]=(0,b.useState)(1),r=Math.ceil(e.length/4),i=e.slice((t-1)*4,t*4);return(0,G.jsxs)(`div`,{children:[i.map((e,t)=>(0,G.jsx)(L,{to:`/posts/${e.id}`,children:(0,G.jsxs)(`div`,{className:`p-4 flex flex-row justify-between ${t>0?`border-t border-[#E5E7EB]`:``}`,children:[(0,G.jsxs)(`div`,{className:`flex-1 flex flex-col gap-1`,children:[(0,G.jsx)(`p`,{className:`font-bold text-lg line-clamp-1`,children:e.title}),(0,G.jsx)(`p`,{className:`text-gray-500 line-clamp-2`,children:e.content}),(0,G.jsx)(`div`,{className:`mt-1.5 flex flex-row items-center gap-1`,children:e.hash_tag.map((e,t)=>(0,G.jsxs)(`span`,{className:`px-2 py-1 bg-[#F291C2] rounded-full text-white text-xs`,children:[`#`,e]},t))})]}),(0,G.jsxs)(`div`,{className:`text-sm text-[#9CA3AF] flex flex-row items-start gap-1`,children:[(0,G.jsx)(`div`,{children:e.created_at.slice(0,10)}),(0,G.jsx)(`span`,{children:`·`}),(0,G.jsxs)(`div`,{className:`flex flex-row gap-1 items-center`,children:[(0,G.jsx)(Ys,{color:`red`,size:15}),(0,G.jsx)(`span`,{children:e.post_likes?e.post_likes.length:`0`})]}),(0,G.jsx)(`span`,{children:`·`}),(0,G.jsxs)(`div`,{className:`flex flex-row gap-1 items-center`,children:[(0,G.jsx)(Zs,{color:`#8B5CF6`,size:15}),(0,G.jsx)(`span`,{children:e.comments?e.comments.length:`0`})]})]})]},e.id)})),(0,G.jsx)(pu,{currentPage:t,totalPages:r,onPageChange:n})]})}var hu=u(S());function gu(){let e=(0,hu.c)(13),{userComments:t}=eu(),n;e[0]===Symbol.for(`react.memo_cache_sentinel`)?(n=[{key:`all`,label:`전체게시판`},{key:`free`,label:`자유게시판`},{key:`elementary`,label:`초등학생 게시판`},{key:`middle`,label:`중학교 게시판`},{key:`high`,label:`고등학교 게시판`},{key:`resources`,label:`자료 공유 게시판`},{key:`group`,label:`그룹게시판`}],e[0]=n):n=e[0];let r=n,[i,a]=(0,b.useState)(1),o=Math.ceil(t.length/5),s,c;if(e[1]!==i||e[2]!==t){c=Symbol.for(`react.early_return_sentinel`);bb0:{let n=t.slice((i-1)*5,i*5);if(!t.length){let t;e[5]===Symbol.for(`react.memo_cache_sentinel`)?(t=(0,G.jsx)(`p`,{children:`작성한 댓글이 없습니다.`}),e[5]=t):t=e[5],c=t;break bb0}let a;e[6]===Symbol.for(`react.memo_cache_sentinel`)?(a=(e,t)=>{let n=e.post?r.find(t=>t.key===e.post?.board_type)?.label??`알 수 없음`:`알 수 없음`;return(0,G.jsx)(L,{to:`/posts/${e.post_id}`,children:(0,G.jsxs)(`div`,{className:`p-4 flex flex-row justify-between ${t>0?`border-t border-[#E5E7EB]`:``}`,children:[(0,G.jsxs)(`div`,{className:`flex-1 flex flex-col gap-1`,children:[(0,G.jsxs)(`p`,{className:`font-bold text-lg line-clamp-1`,children:[n,`: "`,e.post?.title??`제목 없음`,`"`]}),(0,G.jsx)(`p`,{className:`text-gray-500 line-clamp-2`,children:e.parent_comment_id?(0,G.jsxs)(`div`,{className:`space-x-2`,children:[(0,G.jsxs)(`span`,{className:`text-[#8B5CF6] font-medium`,children:[`@`,e.user?.nickname]}),(0,G.jsx)(`span`,{children:e.content})]}):e.content})]}),(0,G.jsxs)(`div`,{className:`text-sm text-[#9CA3AF] flex flex-row items-start gap-1`,children:[(0,G.jsx)(`div`,{children:e.created_at.slice(0,10)}),(0,G.jsx)(`span`,{children:`·`}),(0,G.jsxs)(`div`,{className:`flex flex-row gap-1 items-center`,children:[(0,G.jsx)(Ys,{color:`red`,size:15}),(0,G.jsx)(`span`,{children:e.comment_likes?.length??0})]}),!e.parent_comment_id&&(0,G.jsxs)(G.Fragment,{children:[(0,G.jsx)(`span`,{children:`·`}),(0,G.jsxs)(`div`,{className:`flex flex-row gap-1 items-center`,children:[(0,G.jsx)(Zs,{color:`#8B5CF6`,size:15}),(0,G.jsx)(`span`,{children:e.reply_count??0})]})]})]})]},e.id)})},e[6]=a):a=e[6],s=n.map(a)}e[1]=i,e[2]=t,e[3]=s,e[4]=c}else s=e[3],c=e[4];if(c!==Symbol.for(`react.early_return_sentinel`))return c;let l;e[7]!==i||e[8]!==o?(l=(0,G.jsx)(pu,{currentPage:i,totalPages:o,onPageChange:a}),e[7]=i,e[8]=o,e[9]=l):l=e[9];let u;return e[10]!==s||e[11]!==l?(u=(0,G.jsxs)(`div`,{children:[s,l]}),e[10]=s,e[11]=l,e[12]=u):u=e[12],u}var _u=u(S());function vu(e){let t=(0,_u.c)(11),{userId:n}=e,[r,i]=(0,b.useState)(`posts`),a;t[0]===Symbol.for(`react.memo_cache_sentinel`)?(a=(0,G.jsx)(`h3`,{className:`text-xl font-bold text-violet-500 pb-2`,children:`활동 내역`}),t[0]=a):a=t[0];let o;t[1]!==r||t[2]!==n?(o=(0,G.jsx)(du,{activeTab:r,setActiveTab:i},n),t[1]=r,t[2]=n,t[3]=o):o=t[3];let s;t[4]!==r||t[5]!==n?(s=(0,G.jsx)(`div`,{className:`mt-4`,children:r===`posts`?(0,G.jsx)(mu,{},n):(0,G.jsx)(gu,{},n)}),t[4]=r,t[5]=n,t[6]=s):s=t[6];let c;return t[7]!==o||t[8]!==s||t[9]!==n?(c=(0,G.jsxs)(`div`,{children:[a,o,s]},n),t[7]=o,t[8]=s,t[9]=n,t[10]=c):c=t[10],c}function yu(e){let t=new Date(e),n=new Date().getTime()-t.getTime(),r=new Intl.RelativeTimeFormat(`ko`,{numeric:`auto`}),i=Math.floor(n/1e3);if(i<60)return r.format(-i,`seconds`);let a=Math.floor(i/60);if(a<60)return r.format(-a,`minutes`);let o=Math.floor(a/60);if(o<24)return r.format(-o,`hours`);let s=Math.floor(o/24);return r.format(-s,`days`)}function bu({friend:e,userId:t,onUnfollow:n}){let{followStatus:r}=K(),{currentUserId:i}=W(),{createRoom:a,isLoading:o}=Hc(),s=Je(),c=r[e.users?.auth_id??``]||!1,[l,u]=(0,b.useState)(null);console.log(e.users?.last_seen);let d=yu(e.users?.last_seen?e.users?.last_seen:new Date);return(0,b.useEffect)(()=>{function e(e){let t=e.target;!t.closest(`.friend-dropdown`)&&!t.closest(`.friend-button`)&&u(null)}return document.addEventListener(`mousedown`,e),()=>document.removeEventListener(`mousedown`,e)},[]),(0,b.useEffect)(()=>{(async()=>{if(i)try{(await K.getState().fetchUserFollowings(i)).forEach(e=>{e.users?.auth_id&&K.getState().setFollowStatus(e.users.auth_id,!0)})}catch(e){console.error(`팔로우 상태 초기화 실패:`,e)}})()},[i]),(0,G.jsx)(G.Fragment,{children:(0,G.jsxs)(`div`,{className:`w-auto flex items-center gap-3 p-4 rounded-xl transition-colors duration-200 hover:bg-violet-100`,children:[(0,G.jsxs)(`div`,{className:`relative w-15 h-15`,children:[(0,G.jsx)(`img`,{className:`w-full h-full rounded-full object-cover`,src:e.users?.profile_image_url||`data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAKgAAACoCAAAAABRIPpoAAAAIGNIUk0AAHomAACAhAAA+gAAAIDoAAB1MAAA6mAAADqYAAAXcJy6UTwAAAACYktHRADgCofBSgAAAAlwSFlzAAAAyAAAAMgAY/rnrQAAAAd0SU1FB+cMDwgCGHVP16EAAANFelRYdFJhdyBwcm9maWxlIHR5cGUgZ2lmOnhtcCBkYXRheG1wAABYw+1YS5IbNwzd8xQ+AgmAAJHbgCSQyiJVWWSR4weURhmPHU9m7FQiudxdUreID997ILvUKD//Ej/98etvH7b9bnktH/IAlVYwZEjlxsiTuxBUBu4srOy4QTzmnAGS48p0Rrpgp42VtlTC9B2sNIqYZGBHMfJOnNdMiJhBIBjo1XDJQJPBGZgf4gb1/OLFLngsJ31JLMRxUKBdDenSL+4XHM9JcmyeENL0aIk5I9Cop1WZSz9pghdUbAjgSFgTyxUJ5CSM1oGI+BMcV1sm5iEkVKSi5dwhlwNc0gucIx0FIpMral5rThII+b2vKfKKkjoe7DJgl5M/7RcM1RLXXzgSROqaqgHrhZgmck9cT/akBzlhynDRCOSEvwB9Qvhj2DfUl0n9WdW8x7w7BdByQg6FVKceeQ8yqBdkt4RGh6hmoa9EnrChJ/GVolz8yueON7crUYjXqV7LAlFeVuY2/PHKuS6GG9IvneU143vOH4nemOj1ejwKtU9ZPGjV3lKMB6D2tWvqvqgdFg+/+79cioei9r4VdbfUvv1hew/UXrJ42C3yz8V4CGpft6bujVq17+KP1t8X4+GovX1N3TW1b3vc3gu1ZxYPvUW+kxe/96+pu6T2b7z2/f/UPmfxkFvkbcX40dL4DxKdxtXprpbn9irU0xy7tlFFnvqiLSI8dqyYYaExQoKjBwUGRIvq4e7bV/Hp5urDxdm7k6ODN687tu+9157btu6xZfPum3bOs9uuK5avvdaay5auUZYsXn3RwgWrrTpj+txzzTlt6hxTJs8+aeKE2Wa1MLdty6aZqQ0TY+tGxdDAmlUNdd26dKqp6lDRrnTaotq0jhg+9lhjDhs6xpDBow8aOGC0USWKuGxZMsVEZaQ4fHqdgilSS/0iVTutzsnGyoOFOZWkVBVS29qje9999Vm6de2jS+feO3Xs0FuvFOS0adEkI6VBQkydiJCAGtVTCNxZr4mGigOlIGNHQkTAdumNOmxYMMFAYYAAQwc63V5okEVs3nZbbTZr2kaTxq03algatNZqzTrWLEVNNWtKUpNVTWA1c9c0lz8BWNjO1HA9GV8AAAABb3JOVAHPoneaAAACTklEQVR42u3avW7FMAgFYN7/KTMheUBiYe+VbpdKzY2NbQztOUPmT7Eh8Q9dRUKAAgoooIACCiiggAIKKKCAAgoooIACCiiggC4IN1FVs9dDGmeFtpfwZ7Tlg7LYrxFOBWW12yjngYp9jCSBsj2GM0CbdaSdh4p1RU5D1TqjZ6HdzmkpRYz7itGn7XW0qKJob19a16VmoDacM1AZh8oJKJsjfACqHqjGQ10vdOKVUuAMnZqlFFfyc4VPMb1+vutTZCnNlBMFj7x77Cm05ifqnoKnqHuSUmhzmmhQFFxL7moCNAnULLo//XUo5ui/hZZp+GU+oWV+Ssr85tX5cS6zFCmzuKuzXC6zAVFmS6fOJlmZbcc6G7l1tsbLHDbUOb6pcyBW54ixzqFtnWPwOhcLrjJXNa46l1+uMteJ3lVV4oLW93stceVtbwAFFFBAAQUUUEABDYPy+/+zZ22v71/UA9uOL6Nvb9z5Q+2Dskwchpp6FlIeaJtReldT49Bma9L2Qlcxh6ljUFZbmZG9iSGo2OrIDijbjvByqNieyGKo2q7oUug+Z6eUTlS7p/opgbNLSqfHvXf0KYWzQ0o5nM9SOtY/B/spnfkejX+jHqEWlymoBEJlAsoWGfZDNRSqbmiz2DQv1KLjhLZwaPNBzfK8Ukr1Qj+8UkpT8g+FT1l66FMvpRwfpefPE+Ua+fuxp2Qjfzv2lKrmP9Q9JZuit5OUMnX7Tz2fsk3Ru0laH9qOQdsYVI5BZQyqx6AKKKBdUDsXQAEFFFBAAQUUUED/D/QLm016EoW110UAAAAldEVYdGRhdGU6Y3JlYXRlADIwMjMtMTItMTVUMDg6MDI6MjMrMDA6MDD08/7gAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDIzLTEyLTE1VDA4OjAyOjE1KzAwOjAwaPF0hQAAACh0RVh0ZGF0ZTp0aW1lc3RhbXAAMjAyMy0xMi0xNVQwODowMjoyNCswMDowMBccWQ0AAAAASUVORK5CYII=`,alt:`${e.users?.nickname} 프로필`}),(0,G.jsx)(`div`,{className:`absolute right-0 bottom-0 w-4 h-4 bg-${e.users?.is_online?`green`:`red`}-500 rounded-full border-2 border-white`})]}),(0,G.jsxs)(`div`,{className:`flex-1 space-y-2`,children:[(0,G.jsx)(`p`,{className:`line-clamp-1`,children:e.users?.nickname}),(0,G.jsx)(`p`,{className:`text-xs text-gray-500`,children:e.users?.is_online?`현재 활동 중`:`마지막 활동: ${d}`})]}),(0,G.jsxs)(`div`,{className:`relative ml-auto`,children:[c?(0,G.jsxs)(q,{onClick:()=>u(t=>t===e.users.auth_id?null:e.users.auth_id),className:`friend-button text-xs flex items-center gap-2 w-27 px-6 py-2 bg-[#EA489A] text-white rounded-lg hover:bg-[#d63f8b] transition-colors`,children:[(0,G.jsx)(`span`,{children:`팔로잉`}),(0,G.jsx)(Gs,{size:16,className:`transition-transform duration-200 ${l===e.users?.auth_id?`rotate-180`:``}`})]}):(0,G.jsx)(q,{onClick:async()=>{if(!(!e.users?.auth_id||!i)){K.getState().setFollowStatus(e.users.auth_id,!0);try{await K.getState().followedUserFnc(i,e.users.auth_id)}catch{K.getState().setFollowStatus(e.users.auth_id,!1),alert(`팔로우에 실패했습니다. 다시 시도해주세요.`)}u(null)}},className:`friend-button text-xs flex items-center gap-2 px-6 py-2 border border-[#EA489A] bg-white rounded-lg hover:bg-[#EA489A] hover:text-white transition-colors`,children:(0,G.jsx)(`span`,{children:`팔로우하기`})}),(0,G.jsxs)(`div`,{className:`friend-dropdown z-50 absolute right-0 mt-1 p-1 w-27 bg-white rounded-md shadow-lg overflow-hidden transform transition-all duration-200 origin-top ${l===e.users?.auth_id?`opacity-100 scale-100 translate-y-0`:`opacity-0 scale-95 -translate-y-2 pointer-events-none`}`,children:[(0,G.jsx)(L,{to:`/profile/${e.users?.auth_id}`,className:`block w-full text-left p-2 hover:bg-gray-100 text-gray-800 text-xs`,children:`프로필 보기`}),(0,G.jsx)(q,{onClick:async()=>{if(!(!e.users?.auth_id||!i))try{let t=await a(e.users.auth_id);t&&(s(`/msg/${t.id}`),u(null))}catch(e){console.error(`채팅방 생성 실패:`,e),alert(`메시지 전송에 실패했습니다.`)}},disabled:o,className:`block w-full text-left p-2 hover:bg-gray-100 text-gray-800 text-xs disabled:opacity-50 disabled:cursor-not-allowed`,children:`메시지 보내기`}),t===i?(0,G.jsx)(q,{onClick:async()=>{if(!(!e.users?.auth_id||!i)){K.getState().setFollowStatus(e.users.auth_id,!1);try{await K.getState().unFollowUserFnc(i,e.users.auth_id),n?.(e.users.auth_id)}catch{K.getState().setFollowStatus(e.users.auth_id,!0),alert(`팔로우 취소에 실패했습니다. 다시 시도해주세요.`)}u(null)}},className:`block w-full text-left p-2 hover:bg-gray-100 text-red-700 text-xs`,children:`팔로우 취소`}):``]})]})]},e.users?.auth_id)})}var xu=u(S());function Su(e){let t=(0,xu.c)(28),{friends:n,userId:r}=e,{unFollowUserFnc:i,removeFriend:a}=K(),o;t[0]!==a||t[1]!==i||t[2]!==r?(o=async e=>{await i(r,e),a(r,e)},t[0]=a,t[1]=i,t[2]=r,t[3]=o):o=t[3];let s=o,[c,l]=(0,b.useState)(1),u=Math.ceil(n.length/10),d,f,p,m;if(t[4]!==c||t[5]!==n||t[6]!==s||t[7]!==r){let e=n.slice((c-1)*10,c*10);t[12]===n.length?m=t[13]:(m=(0,G.jsxs)(`h3`,{className:`text-xl font-bold text-violet-500`,children:[`친구 목록 `,(0,G.jsxs)(`span`,{children:[`(`,n.length,`명)`]})]}),t[12]=n.length,t[13]=m),d=`w-full grid grid-cols-2 gap-2`,f=e.length===0&&(0,G.jsx)(`p`,{children:`현재 팔로우 중인 친구가 없습니다.`});let i;t[14]!==s||t[15]!==r?(i=e=>(0,G.jsx)(bu,{friend:e,userId:r,onUnfollow:()=>s(e.users.auth_id)},e.users?.auth_id),t[14]=s,t[15]=r,t[16]=i):i=t[16],p=e.map(i),t[4]=c,t[5]=n,t[6]=s,t[7]=r,t[8]=d,t[9]=f,t[10]=p,t[11]=m}else d=t[8],f=t[9],p=t[10],m=t[11];let h;t[17]!==d||t[18]!==f||t[19]!==p?(h=(0,G.jsxs)(`div`,{className:d,children:[f,p]}),t[17]=d,t[18]=f,t[19]=p,t[20]=h):h=t[20];let g;t[21]!==c||t[22]!==u?(g=(0,G.jsx)(pu,{currentPage:c,totalPages:u,onPageChange:l}),t[21]=c,t[22]=u,t[23]=g):g=t[23];let _;return t[24]!==m||t[25]!==h||t[26]!==g?(_=(0,G.jsxs)(G.Fragment,{children:[m,h,g]}),t[24]=m,t[25]=h,t[26]=g,t[27]=_):_=t[27],_}var Cu=u(S());function wu(e){let t=(0,Cu.c)(17),{title:n,content:r,childList:i,tags:a,badges:o,isFullWidth:s}=e,c=`flex flex-col ${s!==void 0&&s?`lg:col-span-2`:``}`,l;t[0]===n?l=t[1]:(l=(0,G.jsx)(`div`,{className:`text-xs font-medium text-gray-500 mb-1`,children:n}),t[0]=n,t[1]=l);let u;t[2]===r?u=t[3]:(u=r&&(0,G.jsx)(`div`,{className:`font-medium text-gray-800 leading-snug whitespace-pre-wrap`,children:r}),t[2]=r,t[3]=u);let d;t[4]===i?d=t[5]:(d=i&&i.length>0&&(0,G.jsx)(`div`,{className:`font-medium text-gray-800 leading-snug whitespace-pre-wrap`,children:i.map(Du).join(`, `)}),t[4]=i,t[5]=d);let f;t[6]===a?f=t[7]:(f=a&&(0,G.jsx)(`div`,{className:`flex flex-wrap gap-1 mt-1`,children:a.map(Eu)}),t[6]=a,t[7]=f);let p;t[8]===o?p=t[9]:(p=o&&(0,G.jsx)(`div`,{className:`flex flex-col space-y-1 mt-1`,children:o.map(Tu)}),t[8]=o,t[9]=p);let m;return t[10]!==c||t[11]!==l||t[12]!==u||t[13]!==d||t[14]!==f||t[15]!==p?(m=(0,G.jsxs)(`div`,{className:c,children:[l,u,d,f,p]}),t[10]=c,t[11]=l,t[12]=u,t[13]=d,t[14]=f,t[15]=p,t[16]=m):m=t[16],m}function Tu(e){return(0,G.jsxs)(`span`,{className:`font-medium text-gray-800 whitespace-nowrap`,children:[nu(e.badges?.icon_url??``),e.badges?.name]},e.id)}function Eu(e,t){return(0,G.jsx)(`div`,{className:`px-3 py-1 text-xs font-medium text-white rounded-md ${t%2==0?`bg-violet-500`:`bg-[#ea489a]`}`,children:e},e)}function Du(e){return e.nickname}var Ou=u(S());function ku(e){let t=(0,Ou.c)(29),{profile:n,childInfos:r}=e,{fetchUserBadges:i,badges:a}=tu(),o=Qe().id===`me`,s,c;t[0]!==n.birth_date||t[1]!==n.role?(s=n.birth_date?Lc(n.birth_date):0,c=n.role===`student`?Rc(s):``,t[0]=n.birth_date,t[1]=n.role,t[2]=s,t[3]=c):(s=t[2],c=t[3]);let l=c,u;t[4]!==i||t[5]!==n.auth_id?(u=()=>{i(n.auth_id)},t[4]=i,t[5]=n.auth_id,t[6]=u):u=t[6];let d;t[7]===Symbol.for(`react.memo_cache_sentinel`)?(d=[],t[7]=d):d=t[7],(0,b.useEffect)(u,d);let f;t[8]===Symbol.for(`react.memo_cache_sentinel`)?(f=(0,G.jsx)(`h3`,{className:`text-xl font-bold text-violet-500 pb-2`,children:`개인 정보`}),t[8]=f):f=t[8];let p;t[9]===n.bio?p=t[10]:(p=(0,G.jsxs)(`div`,{children:[f,(0,G.jsx)(`p`,{className:`font-medium text-sm`,children:n.bio})]}),t[9]=n.bio,t[10]=p);let m;t[11]!==s||t[12]!==a||t[13]!==r||t[14]!==l||t[15]!==o||t[16]!==n.child_link_code||t[17]!==n.created_at||t[18]!==n.experience||t[19]!==n.gender||t[20]!==n.habits||t[21]!==n.interests||t[22]!==n.major||t[23]!==n.region||t[24]!==n.role?(m=(0,G.jsx)(`div`,{className:`flex-1 grid grid-cols-1 sm:grid-cols-2 gap-x-8 gap-y-6`,children:n.role===`student`?(0,G.jsxs)(G.Fragment,{children:[(0,G.jsx)(wu,{title:`성별`,content:n.gender}),(0,G.jsx)(wu,{title:`나이`,content:s}),(0,G.jsx)(wu,{title:`학년`,content:l}),(0,G.jsx)(wu,{title:`지역`,content:n.region}),(0,G.jsx)(wu,{title:`취미`,content:n.habits?.join(``).split(`,`).join(`, `)}),(0,G.jsx)(wu,{title:`활동 뱃지`,badges:a}),(0,G.jsx)(wu,{title:`관심 분야`,tags:n.interests}),(0,G.jsx)(wu,{title:`가입일`,content:n.created_at.toString().slice(0,10)}),o&&(0,G.jsx)(wu,{title:`자녀 코드`,content:n.child_link_code})]}):(0,G.jsxs)(G.Fragment,{children:[(0,G.jsx)(wu,{title:`성별`,content:n.gender}),r?(0,G.jsx)(wu,{title:`자녀`,childList:r}):(0,G.jsx)(wu,{title:`자녀`,content:`자녀 없음`}),(0,G.jsx)(wu,{title:`지역`,content:n.region}),n.role===`teacher`&&(0,G.jsxs)(G.Fragment,{children:[(0,G.jsx)(wu,{title:`전공 과목`,content:n.major}),(0,G.jsx)(wu,{title:`경력`,content:n.experience}),(0,G.jsx)(wu,{title:`활동 뱃지`,badges:[`🏆 초보 수학 마스터`]})]}),(0,G.jsx)(wu,{title:`관심 분야`,tags:n.interests}),(0,G.jsx)(wu,{title:`가입일`,content:n.created_at.toString().slice(0,10)})]})}),t[11]=s,t[12]=a,t[13]=r,t[14]=l,t[15]=o,t[16]=n.child_link_code,t[17]=n.created_at,t[18]=n.experience,t[19]=n.gender,t[20]=n.habits,t[21]=n.interests,t[22]=n.major,t[23]=n.region,t[24]=n.role,t[25]=m):m=t[25];let h;return t[26]!==p||t[27]!==m?(h=(0,G.jsxs)(G.Fragment,{children:[p,m]}),t[26]=p,t[27]=m,t[28]=h):h=t[28],h}var Au=u(S());function ju(e){let t=(0,Au.c)(9),{tabs:n,activeTab:r,setActiveTab:i}=e,a;if(t[0]!==r||t[1]!==i||t[2]!==n){let e;t[4]!==r||t[5]!==i?(e=e=>(0,G.jsx)(`button`,{onClick:()=>i(e.key),className:`relative px-4 py-2 cursor-pointer text-base font-normal text-center rounded-md transition-colors duration-200 ${r===e.key?`bg-violet-500 text-white`:`text-violet-500 hover:bg-violet-100`}`,children:e.label},e.key),t[4]=r,t[5]=i,t[6]=e):e=t[6],a=n.map(e),t[0]=r,t[1]=i,t[2]=n,t[3]=a}else a=t[3];let o;return t[7]===a?o=t[8]:(o=(0,G.jsx)(`div`,{className:`relative flex flex-row justify-between w-full`,children:(0,G.jsx)(`div`,{className:`relative flex bg-white rounded-md`,children:a})}),t[7]=a,t[8]=o),o}function Mu(){let[e,t]=(0,b.useState)(`info`),{profile:n,childInfos:r}=W(),{currentUserId:i}=W(),{fetchUserFollowings:a,setFriends:o}=K(),s=n?.auth_id===i,c=(0,b.useMemo)(()=>{let e=[{key:`info`,label:`개인 프로필`}];return s&&e.push({key:`activities`,label:`활동 내역`}),e.push({key:`friends`,label:`팔로잉`}),e},[s]);if(!n||!r)return null;let l=K(e=>e.friendsByProfileId)[n.auth_id]??[];return(0,b.useEffect)(()=>{if(!n?.auth_id)return;let e=!0;async function t(){if(!n?.auth_id)return;let t=await a(n.auth_id);e&&o(n.auth_id,t)}return t(),()=>{e=!1}},[n?.auth_id,a,o]),!n||!r?(0,G.jsx)(`p`,{children:`Loading profile...`}):(0,G.jsxs)(G.Fragment,{children:[(0,G.jsx)(ju,{tabs:c,activeTab:e,setActiveTab:t}),(0,G.jsxs)(`div`,{className:`flex flex-col bg-white rounded-xl shadow-xl p-6 space-y-6`,children:[e===`info`&&(0,G.jsx)(ku,{profile:n,childInfos:r},n.auth_id),e===`activities`&&n.auth_id===i&&(0,G.jsx)(vu,{userId:n.auth_id},n.auth_id),e===`friends`&&(0,G.jsx)(Su,{friends:l,userId:n.auth_id},n.auth_id)]})]})}var Nu=u(S());function Pu(e){let t=(0,Nu.c)(12),{profile:n}=e,r;t[0]===Symbol.for(`react.memo_cache_sentinel`)?(r=(0,G.jsx)(`div`,{className:`z-99 w-30 h-30 rounded-xl skeleton-40`}),t[0]=r):r=t[0];let i,a,o,s;t[1]===Symbol.for(`react.memo_cache_sentinel`)?(i=(0,G.jsx)(`div`,{className:`w-30 h-5 skeleton-40 rounded-lg mb-1`}),a=(0,G.jsx)(`div`,{className:`w-14 h-9 skeleton-40 rounded-lg mb-2.5`}),o=(0,G.jsx)(`div`,{className:`w-36 h-6 skeleton-40 rounded-lg mb-5`}),s=(0,G.jsx)(`div`,{className:`w-full h-10 skeleton-40 rounded-xl`}),t[1]=i,t[2]=a,t[3]=o,t[4]=s):(i=t[1],a=t[2],o=t[3],s=t[4]);let c;t[5]===Symbol.for(`react.memo_cache_sentinel`)?(c=(0,G.jsxs)(`div`,{className:`flex flex-col items-center`,children:[(0,G.jsx)(`div`,{className:`w-8 h-7 skeleton-40 rounded-sm mb-0.5`}),(0,G.jsx)(`div`,{className:`w-10 h-5 skeleton-40 rounded-sm`})]}),t[5]=c):c=t[5];let l;t[6]===Symbol.for(`react.memo_cache_sentinel`)?(l=(0,G.jsxs)(`div`,{className:`flex flex-col items-center`,children:[(0,G.jsx)(`div`,{className:`w-8 h-7 skeleton-40 rounded-sm mb-0.5`}),(0,G.jsx)(`div`,{className:`w-10 h-5 skeleton-40 rounded-sm`})]}),t[6]=l):l=t[6];let u;t[7]===Symbol.for(`react.memo_cache_sentinel`)?(u=(0,G.jsxs)(`div`,{className:`flex flex-rol justify-between gap-10 pt-6`,children:[c,l,(0,G.jsxs)(`div`,{className:`flex flex-col items-center`,children:[(0,G.jsx)(`div`,{className:`w-8 h-7 skeleton-40 rounded-sm mb-0.5`}),(0,G.jsx)(`div`,{className:`w-10 h-5 skeleton-40 rounded-sm`})]})]}),t[7]=u):u=t[7];let d;t[8]===n?.role?d=t[9]:(d=n?.role===`teacher`?(0,G.jsx)(`div`,{className:`w-full mt-6 px-6 py-4 skeleton-40 rounded-xl `}):``,t[8]=n?.role,t[9]=d);let f;return t[10]===d?f=t[11]:(f=(0,G.jsx)(G.Fragment,{children:(0,G.jsxs)(`div`,{className:`flex flex-col items-center relative`,children:[r,(0,G.jsxs)(`div`,{className:`w-full flex flex-col items-center absolute top-15 bg-white rounded-xl shadow-xl pt-22 pb-10 px-10`,children:[i,a,o,s,u,d]})]})}),t[10]=d,t[11]=f),f}var Fu=u(S());function Iu(){let e=(0,Fu.c)(4),t;e[0]===Symbol.for(`react.memo_cache_sentinel`)?(t=(0,G.jsxs)(`div`,{className:`w-71 h-10 bg-white rounded-lg mb-[21px] flex flex-row px-4 py-2 gap-4`,children:[(0,G.jsx)(`div`,{className:`skeleton-50 rounded-sm w-1/3`}),(0,G.jsx)(`div`,{className:`skeleton-50 rounded-sm w-1/3`}),(0,G.jsx)(`div`,{className:`skeleton-50 rounded-sm w-1/3`})]}),e[0]=t):t=e[0];let n,r;e[1]===Symbol.for(`react.memo_cache_sentinel`)?(n=(0,G.jsx)(`div`,{className:`w-20 h-7 skeleton-50 rounded-sm mb-2`}),r=(0,G.jsx)(`div`,{className:`w-166 h-5 skeleton-50 rounded-sm mb-1`}),e[1]=n,e[2]=r):(n=e[1],r=e[2]);let i;return e[3]===Symbol.for(`react.memo_cache_sentinel`)?(i=(0,G.jsxs)(G.Fragment,{children:[t,(0,G.jsx)(`div`,{className:`w-178 h-102 bg-white rounded-xl p-6`,children:(0,G.jsxs)(`div`,{children:[n,r,(0,G.jsxs)(`div`,{className:`mt-6 grid grid-cols-1 sm:grid-cols-2 gap-x-8 gap-y-8`,children:[(0,G.jsxs)(`div`,{children:[(0,G.jsx)(`div`,{className:`w-6 h-3 skeleton-40 rounded-sm mb-1`}),(0,G.jsx)(`div`,{className:`w-8 h-5 skeleton-30 rounded-sm`})]}),(0,G.jsxs)(`div`,{children:[(0,G.jsx)(`div`,{className:`w-6 h-3 skeleton-40 rounded-sm mb-1`}),(0,G.jsx)(`div`,{className:`w-8 h-5 skeleton-30 rounded-sm`})]}),(0,G.jsxs)(`div`,{children:[(0,G.jsx)(`div`,{className:`w-6 h-3 skeleton-40 rounded-sm mb-1`}),(0,G.jsx)(`div`,{className:`w-8 h-5 skeleton-30 rounded-sm`})]}),(0,G.jsxs)(`div`,{children:[(0,G.jsx)(`div`,{className:`w-6 h-3 skeleton-40 rounded-sm mb-1`}),(0,G.jsx)(`div`,{className:`w-8 h-5 skeleton-30 rounded-sm`})]}),(0,G.jsxs)(`div`,{children:[(0,G.jsx)(`div`,{className:`w-6 h-3 skeleton-40 rounded-sm mb-1`}),(0,G.jsx)(`div`,{className:`w-8 h-5 skeleton-30 rounded-sm`})]}),(0,G.jsxs)(`div`,{children:[(0,G.jsx)(`div`,{className:`w-6 h-3 skeleton-40 rounded-sm mb-1`}),(0,G.jsx)(`div`,{className:`w-8 h-5 skeleton-30 rounded-sm`})]}),(0,G.jsxs)(`div`,{children:[(0,G.jsx)(`div`,{className:`w-6 h-3 skeleton-40 rounded-sm mb-1`}),(0,G.jsx)(`div`,{className:`w-8 h-5 skeleton-30 rounded-sm`})]}),(0,G.jsxs)(`div`,{children:[(0,G.jsx)(`div`,{className:`w-6 h-3 skeleton-40 rounded-sm mb-1`}),(0,G.jsx)(`div`,{className:`w-8 h-5 skeleton-30 rounded-sm`})]})]})]})})]}),e[3]=i):i=e[3],i}var Lu=u(S());function Ru(){let e=(0,Lu.c)(34),{profile:t,currentUserId:n,fetchProfile:r,fetchCurrentUserId:i,loading:a,error:o}=W(),{fetchUserPosts:s,fetchUserCommentsWithPosts:c}=eu(),{badges:l,fetchUserBadges:u}=tu(),{id:d}=Qe(),[f,p]=(0,b.useState)(!1),m,h;e[0]!==n||e[1]!==i?(m=()=>{n?p(!0):i().finally(()=>p(!0))},h=[n,i],e[0]=n,e[1]=i,e[2]=m,e[3]=h):(m=e[2],h=e[3]),(0,b.useEffect)(m,h);let g;e[4]!==n||e[5]!==r||e[6]!==u||e[7]!==c||e[8]!==s||e[9]!==d||e[10]!==f?(g=()=>{if(!f||!n)return;let e=d===`me`?n:d;r(e),s(e),c(e),u(e)},e[4]=n,e[5]=r,e[6]=u,e[7]=c,e[8]=s,e[9]=d,e[10]=f,e[11]=g):g=e[11];let _;if(e[12]!==n||e[13]!==r||e[14]!==c||e[15]!==s||e[16]!==d||e[17]!==f?(_=[f,d,n,r,s,c],e[12]=n,e[13]=r,e[14]=c,e[15]=s,e[16]=d,e[17]=f,e[18]=_):_=e[18],(0,b.useEffect)(g,_),a||!t){let n;e[19]===t?n=e[20]:(n=(0,G.jsx)(`div`,{className:`w-[270px]`,children:(0,G.jsx)(Pu,{profile:t})}),e[19]=t,e[20]=n);let r;e[21]===Symbol.for(`react.memo_cache_sentinel`)?(r=(0,G.jsx)(`div`,{className:`flex-1 space-y-[21px]`,children:(0,G.jsx)(Iu,{})}),e[21]=r):r=e[21];let i;return e[22]===n?i=e[23]:(i=(0,G.jsx)(`div`,{className:`mx-auto w-[1024px]`,children:(0,G.jsxs)(`div`,{className:`flex flex-row gap-10 w-full`,children:[n,r]})}),e[22]=n,e[23]=i),i}if(o){let t;return e[24]===o?t=e[25]:(t=(0,G.jsxs)(`p`,{children:[`오류: `,o]}),e[24]=o,e[25]=t),t}let v;e[26]!==l||e[27]!==t?(v=(0,G.jsx)(`div`,{className:`w-[270px]`,children:(0,G.jsx)(lu,{profile:t,badges:l},t.auth_id)}),e[26]=l,e[27]=t,e[28]=v):v=e[28];let y;e[29]===t.auth_id?y=e[30]:(y=(0,G.jsx)(`div`,{className:`flex-1 space-y-[21px]`,children:(0,G.jsx)(Mu,{},t.auth_id)}),e[29]=t.auth_id,e[30]=y);let x;return e[31]!==v||e[32]!==y?(x=(0,G.jsx)(`div`,{className:`mx-auto w-[1024px]`,children:(0,G.jsxs)(`div`,{className:`flex flex-row gap-10 w-full`,children:[v,y]})}),e[31]=v,e[32]=y,e[33]=x):x=e[33],x}var zu=u(S());function Bu(e){let t=(0,zu.c)(21),{activeTab:n,setActiveTab:r,title:i,tabs:a}=e,o=W(Vu),s=i===`게시판`,c=i===`그룹 게시판`&&(n===`information`||n===`activity`),l;t[0]===i?l=t[1]:(l=(0,G.jsx)(`h1`,{className:`font-bold text-[28px] mb-3`,children:i}),t[0]=i,t[1]=l);let u;if(t[2]!==n||t[3]!==r||t[4]!==a){let e;t[6]!==n||t[7]!==r?(e=e=>(0,G.jsx)(q,{onClick:()=>r(e.key),className:`px-4 py-2 rounded-xl text-xs font-medium transition-colors cursor-pointer
								${n===e.key?`bg-[#8B5CF6] text-white`:`bg-white text-gray-700 hover:bg-[#B08DFF] hover:text-white`}`,children:e.label},e.key),t[6]=n,t[7]=r,t[8]=e):e=t[8],u=a.map(e),t[2]=n,t[3]=r,t[4]=a,t[5]=u}else u=t[5];let d;t[9]===u?d=t[10]:(d=(0,G.jsx)(`div`,{className:`inline-flex gap-2`,children:u}),t[9]=u,t[10]=d);let f;t[11]!==o||t[12]!==c||t[13]!==s?(f=(s||c)&&(0,G.jsxs)(`div`,{className:`inline-flex gap-2`,children:[s&&(0,G.jsx)(G.Fragment,{children:o&&(0,G.jsx)(L,{to:`create`,className:`px-4 py-2 rounded-xl bg-[#8B5CF6] text-white text-xs hover:bg-[#B08DFF] transition-colors`,children:`글 작성`})}),c&&(0,G.jsx)(L,{to:`create`,className:`px-4 py-2 rounded-xl bg-[#8B5CF6] text-white text-xs hover:bg-[#B08DFF] transition-colors`,children:`그룹 생성`})]}),t[11]=o,t[12]=c,t[13]=s,t[14]=f):f=t[14];let p;t[15]!==d||t[16]!==f?(p=(0,G.jsxs)(`div`,{className:`flex justify-between items-center`,children:[d,f]}),t[15]=d,t[16]=f,t[17]=p):p=t[17];let m;return t[18]!==l||t[19]!==p?(m=(0,G.jsxs)(G.Fragment,{children:[l,p]}),t[18]=l,t[19]=p,t[20]=m):m=t[20],m}function Vu(e){return e.currentUserId}var Hu=u(S());function Uu(e){let t=(0,Hu.c)(39),{post:n,groupId:r}=e,i=n.board_type===`group`&&n.group_id&&r?`/groups/${r}/posts/${n.id}`:`/posts/${n.id}`,a;t[0]===n.title?a=t[1]:(a=(0,G.jsx)(`h2`,{className:`text-[18px] font-bold text-[#8B5CF6]`,children:n.title}),t[0]=n.title,t[1]=a);let o=n.users?.nickname?n.users.nickname:`unknown`,s;t[2]===o?s=t[3]:(s=(0,G.jsxs)(`p`,{className:`text-[14px] font-Regular text-[#1F2937]`,children:[`작성자:`,` `,o]}),t[2]=o,t[3]=s);let c;t[4]!==a||t[5]!==s?(c=(0,G.jsxs)(`div`,{children:[a,s]}),t[4]=a,t[5]=s,t[6]=c):c=t[6];let l;t[7]===Symbol.for(`react.memo_cache_sentinel`)?(l=(0,G.jsx)(Ys,{color:`red`,size:15}),t[7]=l):l=t[7];let u=n.likes?n.likes.length:`0`,d;t[8]===u?d=t[9]:(d=(0,G.jsxs)(`div`,{className:`flex gap-1 items-center`,children:[l,(0,G.jsx)(`p`,{className:`text-[14px]`,children:u})]}),t[8]=u,t[9]=d);let f;t[10]===Symbol.for(`react.memo_cache_sentinel`)?(f=(0,G.jsx)(Zs,{color:`#8B5CF6`,size:15}),t[10]=f):f=t[10];let p=n.comments?n.comments.length:`0`,m;t[11]===p?m=t[12]:(m=(0,G.jsxs)(`div`,{className:`flex gap-1 items-center`,children:[f,(0,G.jsx)(`p`,{className:`text-[14px]`,children:p})]}),t[11]=p,t[12]=m);let h;t[13]!==m||t[14]!==d?(h=(0,G.jsxs)(`div`,{className:`flex gap-3`,children:[d,m]}),t[13]=m,t[14]=d,t[15]=h):h=t[15];let g;t[16]!==h||t[17]!==c?(g=(0,G.jsxs)(`div`,{className:`flex justify-between items-start mb-1`,children:[c,h]}),t[16]=h,t[17]=c,t[18]=g):g=t[18];let _;t[19]===n.content?_=t[20]:(_=(0,G.jsx)(`p`,{className:`text-xs font-Regular text-[#6B7280] line-clamp-2 mb-3`,children:n.content}),t[19]=n.content,t[20]=_);let v;t[21]===n.hash_tag?v=t[22]:(v=n.hash_tag?.map(Wu),t[21]=n.hash_tag,t[22]=v);let y;t[23]===v?y=t[24]:(y=(0,G.jsx)(`div`,{className:`flex flex-wrap gap-2`,children:v}),t[23]=v,t[24]=y);let b;t[25]===n.created_at?b=t[26]:(b=n.created_at.slice(0,10),t[25]=n.created_at,t[26]=b);let x;t[27]===b?x=t[28]:(x=(0,G.jsx)(`p`,{className:`text-[14px] text-[#6B7280]`,children:b}),t[27]=b,t[28]=x);let S;t[29]!==y||t[30]!==x?(S=(0,G.jsxs)(`div`,{className:`flex justify-between items-end`,children:[y,x]}),t[29]=y,t[30]=x,t[31]=S):S=t[31];let C;t[32]!==g||t[33]!==_||t[34]!==S?(C=(0,G.jsxs)(`div`,{className:`w-full mb-2 px-6 py-4 rounded-xl bg-white shadow-[0_4px_20px_rgba(0,0,0,0.05)] cursor-pointer hover:shadow-[0_4px_30px_rgba(0,0,0,0.08)] transition-shadow`,children:[g,_,S]}),t[32]=g,t[33]=_,t[34]=S,t[35]=C):C=t[35];let w;return t[36]!==i||t[37]!==C?(w=(0,G.jsx)(L,{to:i,children:C}),t[36]=i,t[37]=C,t[38]=w):w=t[38],w}function Wu(e,t){return(0,G.jsxs)(`div`,{className:`px-2 py-1 rounded-lg bg-[#EDE9FE] font-Regular text-xs text-[#8B5CF6]`,children:[`#`,e]},t)}function Gu(e){let t=(0,Hu.c)(8),{posts:n,groupId:r}=e;if(n.length===0){let e;return t[0]===Symbol.for(`react.memo_cache_sentinel`)?(e=(0,G.jsx)(`div`,{className:`text-center text-gray-500 py-12`,children:`게시글이 없습니다.`}),t[0]=e):e=t[0],e}let i;if(t[1]!==r||t[2]!==n){let e;t[4]===r?e=t[5]:(e=e=>(0,G.jsx)(Uu,{post:e,groupId:r},e.id),t[4]=r,t[5]=e),i=n.map(e),t[1]=r,t[2]=n,t[3]=i}else i=t[3];let a;return t[6]===i?a=t[7]:(a=(0,G.jsx)(`div`,{className:`w-full`,children:i}),t[6]=i,t[7]=a),a}var Ku=u(S());function qu(){let e=(0,Ku.c)(3),t;e[0]===Symbol.for(`react.memo_cache_sentinel`)?(t=(0,G.jsx)(`div`,{className:`w-[160px] h-[40px] rounded-xl skeleton-40 mb-4`}),e[0]=t):t=e[0];let n;e[1]===Symbol.for(`react.memo_cache_sentinel`)?(n=(0,G.jsxs)(`div`,{className:`w-full`,children:[t,(0,G.jsxs)(`div`,{className:`flex flex-row justify-between pb-1`,children:[(0,G.jsx)(`div`,{className:`flex flex-row gap-2`,children:Array.from({length:4}).map(Yu)}),(0,G.jsx)(`div`,{className:`w-17 h-8 rounded-xl skeleton-40`})]})]}),e[1]=n):n=e[1];let r;return e[2]===Symbol.for(`react.memo_cache_sentinel`)?(r=(0,G.jsxs)(G.Fragment,{children:[n,(0,G.jsx)(`div`,{className:`border-t border-gray-200 mt-2 pt-6 space-y-2`,children:Array.from({length:3}).map(Ju)})]}),e[2]=r):r=e[2],r}function Ju(e,t){return(0,G.jsxs)(`div`,{className:`w-full px-6 py-6 rounded-xl bg-white shadow-[0_4px_20px_rgba(0,0,0,0.05)]`,children:[(0,G.jsxs)(`div`,{className:`flex flex-row justify-between items-start mb-2`,children:[(0,G.jsx)(`div`,{className:`w-50 h-5 rounded-sm skeleton-50`}),(0,G.jsxs)(`div`,{className:`flex flex-row gap-3`,children:[(0,G.jsx)(`div`,{className:`w-6 h-5 rounded-sm skeleton-40`}),(0,G.jsx)(`div`,{className:`w-6 h-5 rounded-sm skeleton-40`})]})]}),(0,G.jsx)(`div`,{className:`w-25 h-4 rounded-sm skeleton-40 mb-3`}),(0,G.jsx)(`div`,{className:`space-y-2 mb-4`,children:(0,G.jsx)(`div`,{className:`w-80 h-3 rounded-sm skeleton-30`})}),(0,G.jsxs)(`div`,{className:`flex flex-row justify-between`,children:[(0,G.jsx)(`div`,{}),(0,G.jsx)(`div`,{className:`w-18 h-4 rounded-sm skeleton-40`})]})]},t)}function Yu(e,t){return(0,G.jsx)(`div`,{className:`w-[88px] h-[32px] rounded-xl skeleton-40`},t)}var Xu=u(S());function Zu(){let e=(0,Xu.c)(28),[t,n]=(0,b.useState)(`all`),r=W(td),i,a,o,s,c;e[0]===Symbol.for(`react.memo_cache_sentinel`)?(i={key:`all`,label:`전체게시판`},a={key:`free`,label:`자유게시판`},o={key:`elementary`,label:`초등학생 게시판`},s={key:`middle`,label:`중학교 게시판`},c={key:`high`,label:`고등학교 게시판`},e[0]=i,e[1]=a,e[2]=o,e[3]=s,e[4]=c):(i=e[0],a=e[1],o=e[2],s=e[3],c=e[4]);let l;if(e[5]!==r){if(l=[i,a,o,s,c],r&&r.role===`teacher`){let t;e[7]===Symbol.for(`react.memo_cache_sentinel`)?(t={key:`resources`,label:`자료 공유 게시판`},e[7]=t):t=e[7],l.push(t)}e[5]=r,e[6]=l}else l=e[6];let u=ul(ed),d=ul($u),f=ul(Qu),p;e[8]!==t||e[9]!==f?(p=()=>{f(t)},e[8]=t,e[9]=f,e[10]=p):p=e[10];let m;e[11]===t?m=e[12]:(m=[t],e[11]=t,e[12]=m),(0,b.useEffect)(p,m);let[h,g]=(0,b.useState)(1),_=Math.ceil(u.length/4),v;e[13]!==h||e[14]!==u?(v=u.slice((h-1)*4,h*4),e[13]=h,e[14]=u,e[15]=v):v=e[15];let y=v;if(d){let t;return e[16]===Symbol.for(`react.memo_cache_sentinel`)?(t=(0,G.jsx)(`div`,{className:`w-250 px-10`,children:(0,G.jsx)(qu,{})}),e[16]=t):t=e[16],t}let x;e[17]!==t||e[18]!==l?(x=(0,G.jsx)(Bu,{activeTab:t,setActiveTab:n,title:`게시판`,tabs:l}),e[17]=t,e[18]=l,e[19]=x):x=e[19];let S;e[20]!==h||e[21]!==y||e[22]!==d||e[23]!==_?(S=!d&&(0,G.jsxs)(G.Fragment,{children:[(0,G.jsx)(`div`,{className:`border-t border-gray-300 mt-2 pt-6`,children:(0,G.jsx)(Gu,{posts:y})}),(0,G.jsx)(pu,{currentPage:h,totalPages:_,onPageChange:g})]}),e[20]=h,e[21]=y,e[22]=d,e[23]=_,e[24]=S):S=e[24];let C;return e[25]!==x||e[26]!==S?(C=(0,G.jsx)(G.Fragment,{children:(0,G.jsxs)(`div`,{className:`w-[920px]`,children:[x,S]})}),e[25]=x,e[26]=S,e[27]=C):C=e[27],C}function Qu(e){return e.fetchPosts}function $u(e){return e.isLoading}function ed(e){return e.posts}function td(e){return e.profile}function nd(){let[e,t]=(0,b.useState)(``),[n,r]=(0,b.useState)(!1),[i,a]=(0,b.useState)([]),[o,s]=(0,b.useState)([]),c=async t=>{t.preventDefault(),r(!0);let n=e.trim();if(!n||n===` `){s([]),a([]),r(!1);return}try{if(r(!0),n[0]===`@`){let{data:e,error:t}=await U.from(`users`).select(`*`).ilike(`nickname`,`%`+n.slice(1)+`%`).order(`is_online`,{ascending:!1});if(t)throw t;if(e&&e.length>0){s(e);let t=e.map(e=>`user_id.eq.${e.auth_id}`).join(`,`),{data:n,error:i}=await U.from(`posts`).select(`*, users(nickname), likes:post_likes(id), comments:comments!comments_post_id_fkey(id)`).is(`group_id`,null).or(t).order(`created_at`,{ascending:!1});if(i)throw i;n&&(a(n),r(!1))}else r(!1)}else if(n[0]===`#`){let{data:e,error:t}=await U.from(`posts`).select(`*, users(nickname), likes:post_likes(id), comments:comments!comments_post_id_fkey(id)`).is(`group_id`,null).contains(`hash_tag`,[n.slice(1)]).order(`created_at`,{ascending:!1});if(t)throw t;e&&(a(e),s([]),r(!1))}else{let{data:e,error:t}=await U.from(`posts`).select(`*, users(nickname), likes:post_likes(id), comments:comments!comments_post_id_fkey(id)`).is(`group_id`,null).ilike(`title`,`%`+n+`%`).order(`created_at`,{ascending:!1});if(t)throw t;e&&(a(e),s([]),r(!1))}}catch(e){console.error(e)}},l=o.map(e=>({id:crypto.randomUUID(),created_at:new Date().toISOString(),follower_id:``,following_id:e.auth_id,users:{auth_id:e.auth_id,nickname:e.nickname,profile_image_url:e.profile_image_url??null,is_online:e.is_online,last_seen:e.last_seen}})),[u,d]=(0,b.useState)(1),f=Math.ceil(((l.length??0)+(i.length??0))/4),p=[],m=[],h=Math.ceil(l.length/4);return u>h?m=i.slice((u-1)*4-l.length,u*4-l.length):u===h?(p=l.slice((u-1)*4),m=i.slice(((u===0?2:u)-1)*4-l.length+l.length%4,(u===0?1:u)*4-l.length)):p=l.slice((u-1)*4,u*4),(0,G.jsx)(G.Fragment,{children:(0,G.jsxs)(`div`,{className:`max-w-[920px] mx-auto`,children:[(0,G.jsx)(`h1`,{className:`font-bold text-[24px] text-[#8B5CF6] mb-[15px] `,children:`검색`}),(0,G.jsxs)(`form`,{className:`flex rounded-xl shadow-[0_3px_6px_rgba(0,0,0,0.05)] `,onSubmit:c,children:[(0,G.jsx)(`input`,{type:`textarea`,id:`serchBar`,value:e,onChange:e=>t(e.target.value),placeholder:`게시글 제목, @이름, #해시태그 검색 가능...`,className:`w-[862px] text-[14px] px-6 py-4 focus:outline-none rounded-l-xl bg-white`}),(0,G.jsx)(`button`,{type:`submit`,className:`p-4 rounded-r-xl bg-[#8B5CF6]
                        text-white font-Medium text-[14px] hover:bg-[#B08DFF] cursor-pointer`,children:`검색`})]}),n&&(0,G.jsx)(`div`,{className:`border-t border-gray-300 mt-2 pt-6`,children:`로딩중...`}),!n&&(0,G.jsxs)(`div`,{className:`border-t border-gray-300 mt-2 pt-6`,children:[l.length===0&&i.length===0&&(0,G.jsx)(`div`,{className:`text-center text-gray-500 py-12`,children:`검색 결과가 없습니다.`}),p.length>0&&p.map(e=>(0,G.jsx)(`div`,{className:`bg-white rounded-xl mb-2`,children:(0,G.jsx)(bu,{friend:e,onUnfollow:()=>{}})},e.id)),m.length>0&&(0,G.jsx)(Gu,{posts:m}),(0,G.jsx)(pu,{currentPage:u,totalPages:f,onPageChange:d})]})]})})}function Q(e){let t=new Date().getFullYear()-e;return new Date(t,0,1).toISOString().split(`T`)[0]}var rd=u(S());function id(){let e=(0,rd.c)(6),t;e[0]===Symbol.for(`react.memo_cache_sentinel`)?(t=(0,G.jsx)(`h1`,{className:`h-8 w-1/7 skeleton-40 rounded mb-6`}),e[0]=t):t=e[0];let n;e[1]===Symbol.for(`react.memo_cache_sentinel`)?(n=(0,G.jsxs)(`div`,{className:`space-y-3`,children:[(0,G.jsxs)(`div`,{children:[(0,G.jsx)(`div`,{className:`h-5 w-1/10 skeleton-40 rounded mb-1`}),(0,G.jsx)(`div`,{className:`h-10 w-full skeleton-40 rounded`})]}),(0,G.jsxs)(`div`,{children:[(0,G.jsx)(`div`,{className:`h-5 w-1/10 skeleton-40 rounded mb-1`}),(0,G.jsx)(`div`,{className:`h-10 w-full skeleton-40 rounded`})]}),(0,G.jsxs)(`div`,{children:[(0,G.jsx)(`div`,{className:`h-5 w-1/10 skeleton-40 rounded mb-1`}),(0,G.jsx)(`div`,{className:`h-10 w-full skeleton-40 rounded`})]}),(0,G.jsxs)(`div`,{children:[(0,G.jsx)(`div`,{className:`h-5 w-1/10 skeleton-40 rounded mb-1`}),(0,G.jsx)(`div`,{className:`h-10 w-full skeleton-40 rounded`})]}),(0,G.jsxs)(`div`,{children:[(0,G.jsx)(`div`,{className:`h-5 w-1/10 skeleton-40 rounded mb-1`}),(0,G.jsx)(`div`,{className:`h-10 w-full skeleton-40 rounded`})]}),(0,G.jsxs)(`div`,{children:[(0,G.jsx)(`div`,{className:`h-5 w-1/10 skeleton-40 rounded mb-1`}),(0,G.jsx)(`div`,{className:`h-10 w-full skeleton-40 rounded`})]})]}),e[1]=n):n=e[1];let r,i;e[2]===Symbol.for(`react.memo_cache_sentinel`)?(r=(0,G.jsxs)(`div`,{children:[(0,G.jsx)(`div`,{className:`h-5 w-1/10 skeleton-40 rounded mb-1`}),(0,G.jsx)(`div`,{className:`h-[264px] w-full skeleton-40 rounded`})]}),i=(0,G.jsx)(`div`,{className:`h-5 w-1/10 skeleton-40 rounded mb-1`}),e[2]=r,e[3]=i):(r=e[2],i=e[3]);let a;e[4]===Symbol.for(`react.memo_cache_sentinel`)?(a=(0,G.jsxs)(`div`,{className:`grid grid-cols-[334px_468px] gap-8`,children:[n,(0,G.jsxs)(`div`,{className:`space-y-3`,children:[r,(0,G.jsxs)(`div`,{children:[i,(0,G.jsx)(`div`,{className:`flex flex-wrap gap-2`,children:Array.from({length:27}).map(ad)})]})]})]}),e[4]=a):a=e[4];let o;return e[5]===Symbol.for(`react.memo_cache_sentinel`)?(o=(0,G.jsxs)(`div`,{className:`bg-white rounded-2xl p-6 shadow-[0_8px_20px_rgba(0,0,0,0.05)] animate-pulse`,children:[t,a,(0,G.jsxs)(`div`,{className:`mt-6 flex justify-end gap-3`,children:[(0,G.jsx)(`div`,{className:`h-10 w-15 skeleton-40 rounded`}),(0,G.jsx)(`div`,{className:`h-10 w-15 skeleton-40 rounded`})]})]}),e[5]=o):o=e[5],o}function ad(e,t){return(0,G.jsx)(`div`,{className:`h-7 w-11 skeleton-40 rounded`},t)}var od=[`국어`,`수학`,`영어`,`경제`,`정치`,`법학`,`통계학`,`역사`,`한국사`,`물리`,`화학`,`생명과학`,`지구과학`,`코딩`,`AI`,`웹개발`,`앱개발`,`미술`,`음악`,`사진`,`글쓰기`,`진로탐색`,`봉사활동`,`동아리활동`];function sd(e){let t=document.createElement(`textarea`);return t.innerHTML=e,t.value}function cd(){let e=Je(),{profile:t,updateProfile:n,loading:r,error:i,childInfos:a}=W(),{badges:o,representativeBadge:s,loading:c,fetchUserBadges:l,setRepresentativeBadge:u}=tu(),[d,f]=(0,b.useState)({}),[p,m]=(0,b.useState)([]);if((0,b.useEffect)(()=>{t&&(f(e=>Object.keys(e).length?e:{...t,representative_badge_id:s?.id??void 0}),l(t.auth_id),a.length&&p.length===0&&m(a))},[t]),r||!t)return(0,G.jsx)(id,{});if(i)return(0,G.jsxs)(`p`,{children:[`❌ 오류: `,i]});let h=e=>t=>f(n=>({...n,[e]:t.target.value})),g=d.birth_date?Lc(d.birth_date):void 0,_=e=>{let t=Number(e.target.value);if(t>19)return alert(`20 미만으로 입력하세요.`);console.log(Q(t)),f(e=>({...e,birth_date:isNaN(t)?void 0:Q(t)}))},v=e=>{let t=e.target.value.split(/\s+/).filter(Boolean);f(e=>({...e,habits:t}))},y=e=>{f(t=>{let n=t.interests??[];return{...t,interests:n.includes(e)?n.filter(t=>t!==e):[...n,e]}})},x=()=>m(e=>[...e,{auth_id:``,nickname:``,child_link_code:``}]),S=(e,t)=>m(n=>n.map((n,r)=>r===e?{...n,child_link_code:t}:n)),C=e=>m(t=>t.filter((t,n)=>n!==e));return(0,G.jsxs)(`form`,{onSubmit:async r=>{r.preventDefault();try{t.role===`parent`||t.role===`teacher`?await n(d,p.map(e=>e.child_link_code||``)):await n(d),u(d.auth_id,d.representative_badge_id),alert(`수정이 완료되었습니다!`),e(`/profile/me`)}catch(e){alert(e.message)}},className:`bg-white rounded-2xl p-6 shadow-[0_8px_20px_rgba(0,0,0,0.05)]`,children:[(0,G.jsx)(`h1`,{className:`text-2xl font-bold text-[#8b5cf6] mb-4`,children:`프로필 수정`}),(0,G.jsxs)(`div`,{className:`grid grid-cols-[334px_468px] gap-8`,children:[(0,G.jsxs)(`div`,{className:`space-y-3`,children:[(0,G.jsxs)(`div`,{children:[(0,G.jsx)(`label`,{className:`block mb-1 text-gray-600 text-sm`,children:`이름`}),(0,G.jsx)(`input`,{value:d.nickname??``,onChange:h(`nickname`),className:`w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:border-2 focus:border-violet-400`})]}),(0,G.jsxs)(`div`,{children:[(0,G.jsx)(`label`,{className:`block mb-1 text-gray-600 text-sm`,children:`성별`}),(0,G.jsxs)(`div`,{className:`relative`,children:[(0,G.jsxs)(`select`,{value:d.gender||``,onChange:h(`gender`),className:`w-full border border-gray-300 rounded-lg px-3 py-2 appearance-none focus:outline-none focus:border-2 focus:border-violet-400`,children:[(0,G.jsx)(`option`,{value:``,disabled:!0,children:`선택해주세요`}),(0,G.jsx)(`option`,{value:`남`,children:`남`}),(0,G.jsx)(`option`,{value:`여`,children:`여`})]}),(0,G.jsx)(Gs,{size:18,className:`absolute right-3 top-1/2 -translate-y-1/2 text-gray-500 pointer-events-none`})]})]}),t.role===`student`&&(0,G.jsx)(G.Fragment,{children:(0,G.jsxs)(`div`,{children:[(0,G.jsx)(`label`,{className:`block mb-1 text-gray-600 text-sm`,children:`나이`}),(0,G.jsx)(`input`,{type:`number`,value:g,onChange:_,className:`w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:border-2 focus:border-violet-400`})]})}),(t.role===`student`||t.role===`teacher`||t.role===`parent`)&&(0,G.jsxs)(`div`,{children:[(0,G.jsx)(`label`,{className:`block mb-1 text-gray-600 text-sm`,children:`지역`}),(0,G.jsx)(`input`,{value:d.region??``,onChange:h(`region`),className:`w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:border-2 focus:border-violet-400`})]}),t.role===`student`&&(0,G.jsxs)(`div`,{children:[(0,G.jsx)(`label`,{className:`block mb-1 text-gray-600 text-sm`,children:`취미`}),(0,G.jsx)(`input`,{value:(d.habits??[]).join(` `),onChange:v,className:`w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:border-2 focus:border-violet-400`})]}),t.role===`teacher`&&(0,G.jsxs)(G.Fragment,{children:[(0,G.jsxs)(`div`,{children:[(0,G.jsx)(`label`,{className:`block mb-1 text-gray-600 text-sm`,children:`전공`}),(0,G.jsx)(`input`,{value:d.major??``,onChange:h(`major`),className:`w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:border-2 focus:border-violet-400`})]}),(0,G.jsxs)(`div`,{children:[(0,G.jsx)(`label`,{className:`block mb-1 text-gray-600 text-sm`,children:`경력`}),(0,G.jsx)(`input`,{value:d.experience??``,onChange:h(`experience`),className:`w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:border-2 focus:border-violet-400`})]})]}),(t.role===`parent`||t.role===`teacher`)&&(0,G.jsxs)(`div`,{children:[(0,G.jsx)(`label`,{className:`block mb-1 text-gray-600 text-sm`,children:`자녀 코드`}),p.map((e,t)=>(0,G.jsxs)(`div`,{className:`relative flex items-center gap-2 mb-1`,children:[(0,G.jsx)(`input`,{type:`text`,value:e.child_link_code,onChange:e=>S(t,e.target.value),className:`flex-1 border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:border-2 focus:border-violet-400`}),(0,G.jsx)(oc,{className:`absolute right-2 cursor-pointer hover:text-gray-300`,onClick:()=>C(t)})]},t)),(0,G.jsx)(`div`,{onClick:x,className:`w-full border border-gray-300 rounded-lg px-3 py-2 hover:bg-violet-100 cursor-pointer`,children:`자녀 코드 추가`})]}),(0,G.jsxs)(`div`,{children:[(0,G.jsx)(`label`,{className:`block mb-1 text-gray-600 text-sm`,children:`내가 획득한 뱃지`}),c?(0,G.jsx)(`p`,{children:`불러오는 중...`}):o.length===0?(0,G.jsx)(`p`,{children:`아직 획득한 뱃지가 없습니다.`}):(0,G.jsxs)(`div`,{className:`relative`,children:[(0,G.jsxs)(`select`,{value:d.representative_badge_id??s?.id??``,onChange:h(`representative_badge_id`),className:`w-full border border-gray-300 rounded-lg px-3 py-2 appearance-none focus:outline-none focus:border-2 focus:border-violet-400`,children:[(0,G.jsx)(`option`,{value:``,disabled:!0,children:`선택해주세요`}),o.map(e=>(0,G.jsxs)(`option`,{value:e.id,children:[sd(e.badges?.icon_url??``),` `,e.badges?.name]},e.id))]}),(0,G.jsx)(Gs,{size:18,className:`absolute right-3 top-1/2 -translate-y-1/2 text-gray-500 pointer-events-none`})]})]})]}),(0,G.jsxs)(`div`,{className:`space-y-3`,children:[(0,G.jsxs)(`div`,{children:[(0,G.jsx)(`label`,{className:`block mb-1 text-gray-600 text-sm`,children:`자기소개`}),(0,G.jsx)(`textarea`,{value:d.bio??``,onChange:h(`bio`),className:`w-full h-[264px] border border-gray-300 rounded-lg px-3 py-2 resize-none focus:outline-none focus:border-2 focus:border-violet-400`})]}),(0,G.jsxs)(`div`,{children:[(0,G.jsx)(`span`,{className:`block mb-1 text-gray-600 text-sm`,children:`관심 분야`}),(0,G.jsx)(`div`,{className:`flex flex-wrap gap-2`,children:od.map(e=>{let t=(d.interests??[]).includes(e);return(0,G.jsx)(`button`,{type:`button`,onClick:()=>y(e),className:`px-2 py-1 rounded-lg text-sm ${t?`bg-violet-500 text-white`:`bg-gray-100 text-gray-700 hover:bg-gray-200`}`,children:e},e)})})]})]})]}),(0,G.jsxs)(`div`,{className:`mt-6 flex justify-end gap-3`,children:[(0,G.jsx)(L,{to:`..`,relative:`path`,className:`px-4 py-2 rounded-lg border border-violet-300 text-violet-600 bg-white hover:bg-violet-50`,children:`취소`}),(0,G.jsx)(`button`,{type:`submit`,className:`px-4 py-2 rounded-lg bg-violet-500 text-white hover:bg-violet-600`,children:`저장`})]})]})}const ld=async e=>{try{await U.from(`groups`).update({last_activity_at:new Date().toISOString()}).eq(`id`,e)}catch(e){console.error(`[updateGroupActivity error]`,e)}},ud=async e=>{try{let{data:t,error:n}=await U.from(`posts`).select(`group_id`).eq(`id`,e).single();if(n){console.error(`[updateGroupActivityFromPost post error]`,n);return}t?.group_id&&await ld(t.group_id)}catch(e){console.error(`[updateGroupActivityFromPost error]`,e)}};var dd=[{type:`comment`,count:1,badgeId:`2e8302e6-a11d-48a6-ae69-216dc46c27de`,badgeName:`소통자`},{type:`comment`,count:10,badgeId:`92c07455-cb6a-47f6-9cff-d35adecf8a65`,badgeName:`배움의 등불`},{type:`post`,count:1,badgeId:`9d16d331-2d26-4c0b-bff7-72dfe2762905`,badgeName:`개척자`}];const fd=async e=>{let{count:t}=await U.from(`comments`).select(`*`,{count:`exact`,head:!0}).eq(`user_id`,e),{count:n}=await U.from(`posts`).select(`*`,{count:`exact`,head:!0}).eq(`user_id`,e),{data:r}=await U.from(`badge_logs`).select(`id, badge_id`).eq(`user_id`,e),i=r?.map(e=>e.badge_id)||[],a=dd.filter(e=>e.type===`comment`?t>=e.count:e.type===`post`?n>=e.count:!1).filter(e=>!i.includes(e.badgeId));for(let t of a){let{data:n,error:r}=await U.from(`badge_logs`).insert([{user_id:e,badge_id:t.badgeId}]).select().single();r?console.error(`Failed to grant badge:`,r):n&&(alert(`🎉 새 뱃지 획득! ${t.badgeName}`),tu.getState().setRecentlyGranted(n))}await tu.getState().fetchUserBadges(e)};var pd=u(S());function md(e){let t=(0,pd.c)(5),{role:n,className:r}=e,i=r===void 0?``:r,a=hd,o;t[0]===n?o=t[1]:(o=a(n),t[0]=n,t[1]=o);let s=o;if(!s)return null;let c=`inline-flex items-center px-2 py-0.5 text-xs font-medium rounded-full border ${s.color} ${s.bgColor} ${s.borderColor} ${i}`,l;return t[2]!==s.text||t[3]!==c?(l=(0,G.jsx)(`span`,{className:c,children:s.text}),t[2]=s.text,t[3]=c,t[4]=l):l=t[4],l}function hd(e){switch(e){case`student`:return{text:`학생`,color:`text-[#4285F4]`,bgColor:`bg-blue-50`,borderColor:`border-blue-200`};case`teacher`:return{text:`선생님`,color:`text-[#03C75A]`,bgColor:`bg-green-50`,borderColor:`border-green-200`};case`parent`:return{text:`학부모`,color:`text-[#F59E0B]`,bgColor:`bg-orange-50`,borderColor:`border-orange-200`};default:return null}}function gd(e){let t=Je(),[n,r]=(0,b.useState)(``),[i,a]=(0,b.useState)({nickname:``,userId:``,commentId:``}),o=W(e=>e.currentUserId),[s,c]=(0,b.useState)(!1),l=(0,b.useRef)(null),u=[`😀`,`😃`,`😄`,`😁`,`😆`,`😅`,`😂`,`🤣`,`😊`,`😇`,`🙂`,`🙃`,`😉`,`😌`,`😍`],d=e=>{r(n+e),c(!1)};(0,b.useEffect)(()=>{let e=e=>{l.current&&!l.current.contains(e.target)&&c(!1)};return s?document.addEventListener(`mousedown`,e):document.removeEventListener(`mousedown`,e),()=>{document.removeEventListener(`mousedown`,e)}},[s]);let f=async a=>{if(a.preventDefault(),!o){alert(`로그인이 필요합니다.`),t(`/login`);return}if(n.trim()!==``)try{if(i.userId){let{data:t,error:a}=await U.from(`comments`).insert([{post_id:e.postId,user_id:o,content:n,parent_comment_id:i.commentId}]).select();if(a)throw a;t&&(e.postId&&await ud(e.postId),alert(`댓글이 등록되었습니다.`),r(``),await fd(o),e.onCommentAdded?.())}else{let{data:t,error:i}=await U.from(`comments`).insert([{post_id:e.postId,user_id:o,content:n}]).select();if(i)throw i;t&&(e.postId&&await ud(e.postId),alert(`댓글이 등록되었습니다.`),r(``),await fd(o),e.onCommentAdded?.())}}catch(e){console.error(e)}},p={};e.comments?.forEach(e=>{e.parent_comment_id&&(p[e.parent_comment_id]||(p[e.parent_comment_id]=[]),p[e.parent_comment_id].push(e.id))});let m=async e=>{if(!o){alert(`로그인이 필요합니다.`),t(`/login`);return}if(o&&e?.comment_likes?.some(e=>e.user_id===o)){alert(`이미 좋아요를 눌렀습니다.`);return}try{let{data:t,error:n}=await U.from(`comment_likes`).insert([{user_id:o,comment_id:e?.id}]).select();if(n)throw n;t&&(alert(`좋아요 완료`),location.reload())}catch(e){console.error(e)}},h=e=>{e.user?.nickname&&a({nickname:e.user.nickname,userId:e.user.auth_id,commentId:e.id})},g=e=>{e.key===`Backspace`&&!n&&a({nickname:``,userId:``,commentId:``})},_=async t=>{try{let{data:n,error:r}=await U.from(`posts`).update({adopted_comment_id:t.id}).eq(`id`,e.postId).select();if(r)throw r;n&&(alert(`채택되었습니다.`),location.reload())}catch(e){console.error(e)}};function v({comment:t}){let n=e.adopted_comment_id===t.id&&`border-1 border-[#EA489A]`;return(0,G.jsxs)(`div`,{className:`relative z-10 group w-full px-4 py-3 mt-4 rounded-xl bg-white shadow-[0_4px_20px_rgba(0,0,0,0.05)] `+n,children:[o!==t.user_id&&o===e.writerId&&!e.adopted_comment_id&&(0,G.jsx)(q,{type:`button`,onClick:()=>_(t),className:`absolute -top-4 right-4 z-10 opacity-0 translate-y-[-10px] group-hover:opacity-100 group-hover:translate-y-0 transition-all duration-200 hover:bg-[#8B5CF6] hover:text-white px-3 py-1 text-xs border-1 border-[#8B5CF6] rounded-2xl bg-white`,children:`채택`}),e.adopted_comment_id===t.id&&(0,G.jsxs)(`span`,{className:`flex items-center absolute -top-4 left-4 z-10 px-3 py-1 text-xs rounded-2xl bg-linear-to-r text-white from-[#EA489A] to-[#FF84C2]`,children:[`채택된 댓글`,(0,G.jsx)(`img`,{src:`/src/assets/fire.png`,className:`ml-0.5 mb-0.5`})]}),(0,G.jsxs)(`div`,{className:`flex justify-between items-start mb-1`,children:[(0,G.jsxs)(`div`,{className:`flex gap-1 items-center`,children:[(0,G.jsx)(`div`,{className:`w-[35px] h-[35px] object-cover`,children:(0,G.jsx)(`img`,{className:`w-full h-full rounded-full`,src:t.user?.profile_image_url??`data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAKgAAACoCAAAAABRIPpoAAAAIGNIUk0AAHomAACAhAAA+gAAAIDoAAB1MAAA6mAAADqYAAAXcJy6UTwAAAACYktHRADgCofBSgAAAAlwSFlzAAAAyAAAAMgAY/rnrQAAAAd0SU1FB+cMDwgCGHVP16EAAANFelRYdFJhdyBwcm9maWxlIHR5cGUgZ2lmOnhtcCBkYXRheG1wAABYw+1YS5IbNwzd8xQ+AgmAAJHbgCSQyiJVWWSR4weURhmPHU9m7FQiudxdUreID997ILvUKD//Ej/98etvH7b9bnktH/IAlVYwZEjlxsiTuxBUBu4srOy4QTzmnAGS48p0Rrpgp42VtlTC9B2sNIqYZGBHMfJOnNdMiJhBIBjo1XDJQJPBGZgf4gb1/OLFLngsJ31JLMRxUKBdDenSL+4XHM9JcmyeENL0aIk5I9Cop1WZSz9pghdUbAjgSFgTyxUJ5CSM1oGI+BMcV1sm5iEkVKSi5dwhlwNc0gucIx0FIpMral5rThII+b2vKfKKkjoe7DJgl5M/7RcM1RLXXzgSROqaqgHrhZgmck9cT/akBzlhynDRCOSEvwB9Qvhj2DfUl0n9WdW8x7w7BdByQg6FVKceeQ8yqBdkt4RGh6hmoa9EnrChJ/GVolz8yueON7crUYjXqV7LAlFeVuY2/PHKuS6GG9IvneU143vOH4nemOj1ejwKtU9ZPGjV3lKMB6D2tWvqvqgdFg+/+79cioei9r4VdbfUvv1hew/UXrJ42C3yz8V4CGpft6bujVq17+KP1t8X4+GovX1N3TW1b3vc3gu1ZxYPvUW+kxe/96+pu6T2b7z2/f/UPmfxkFvkbcX40dL4DxKdxtXprpbn9irU0xy7tlFFnvqiLSI8dqyYYaExQoKjBwUGRIvq4e7bV/Hp5urDxdm7k6ODN687tu+9157btu6xZfPum3bOs9uuK5avvdaay5auUZYsXn3RwgWrrTpj+txzzTlt6hxTJs8+aeKE2Wa1MLdty6aZqQ0TY+tGxdDAmlUNdd26dKqp6lDRrnTaotq0jhg+9lhjDhs6xpDBow8aOGC0USWKuGxZMsVEZaQ4fHqdgilSS/0iVTutzsnGyoOFOZWkVBVS29qje9999Vm6de2jS+feO3Xs0FuvFOS0adEkI6VBQkydiJCAGtVTCNxZr4mGigOlIGNHQkTAdumNOmxYMMFAYYAAQwc63V5okEVs3nZbbTZr2kaTxq03algatNZqzTrWLEVNNWtKUpNVTWA1c9c0lz8BWNjO1HA9GV8AAAABb3JOVAHPoneaAAACTklEQVR42u3avW7FMAgFYN7/KTMheUBiYe+VbpdKzY2NbQztOUPmT7Eh8Q9dRUKAAgoooIACCiiggAIKKKCAAgoooIACCiiggC4IN1FVs9dDGmeFtpfwZ7Tlg7LYrxFOBWW12yjngYp9jCSBsj2GM0CbdaSdh4p1RU5D1TqjZ6HdzmkpRYz7itGn7XW0qKJob19a16VmoDacM1AZh8oJKJsjfACqHqjGQ10vdOKVUuAMnZqlFFfyc4VPMb1+vutTZCnNlBMFj7x77Cm05ifqnoKnqHuSUmhzmmhQFFxL7moCNAnULLo//XUo5ui/hZZp+GU+oWV+Ssr85tX5cS6zFCmzuKuzXC6zAVFmS6fOJlmZbcc6G7l1tsbLHDbUOb6pcyBW54ixzqFtnWPwOhcLrjJXNa46l1+uMteJ3lVV4oLW93stceVtbwAFFFBAAQUUUEABDYPy+/+zZ22v71/UA9uOL6Nvb9z5Q+2Dskwchpp6FlIeaJtReldT49Bma9L2Qlcxh6ljUFZbmZG9iSGo2OrIDijbjvByqNieyGKo2q7oUug+Z6eUTlS7p/opgbNLSqfHvXf0KYWzQ0o5nM9SOtY/B/spnfkejX+jHqEWlymoBEJlAsoWGfZDNRSqbmiz2DQv1KLjhLZwaPNBzfK8Ukr1Qj+8UkpT8g+FT1l66FMvpRwfpefPE+Ua+fuxp2Qjfzv2lKrmP9Q9JZuit5OUMnX7Tz2fsk3Ru0laH9qOQdsYVI5BZQyqx6AKKKBdUDsXQAEFFFBAAQUUUED/D/QLm016EoW110UAAAAldEVYdGRhdGU6Y3JlYXRlADIwMjMtMTItMTVUMDg6MDI6MjMrMDA6MDD08/7gAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDIzLTEyLTE1VDA4OjAyOjE1KzAwOjAwaPF0hQAAACh0RVh0ZGF0ZTp0aW1lc3RhbXAAMjAyMy0xMi0xNVQwODowMjoyNCswMDowMBccWQ0AAAAASUVORK5CYII=`,alt:`userImg`})}),(0,G.jsxs)(`div`,{children:[t.user?.representative_badge_id&&(0,G.jsxs)(`p`,{className:`text-xs font-medium`,children:[nu(t.user.representative_badge_id.badges.icon_url),t.user.representative_badge_id.badges.name??``]}),(0,G.jsxs)(`p`,{className:`text-sm`,children:[t.user?.nickname,t.user?.role&&(0,G.jsx)(md,{role:t.user.role,className:`ml-1`}),(0,G.jsx)(`span`,{className:`text-xs text-[#6B7280] ml-1`,children:Rc(Lc(t.user?.birth_date))})]})]})]}),(0,G.jsxs)(`div`,{className:`flex gap-3`,children:[(0,G.jsxs)(`button`,{type:`button`,onClick:()=>m(t),className:`flex gap-1 items-start cursor-pointer`,children:[(0,G.jsx)(Ys,{color:`red`,size:15,className:`mt-0.5 `}),(0,G.jsx)(`p`,{className:`text-[14px]`,children:t.comment_likes?.length})]}),!t.parent_comment_id&&(0,G.jsxs)(`button`,{type:`button`,onClick:()=>h(t),className:`flex gap-1 items-start cursor-pointer`,children:[(0,G.jsx)(Zs,{color:`#8B5CF6`,size:15,className:`mt-0.5`}),(0,G.jsx)(`p`,{className:`text-[14px]`,children:p[t.id]?.length??0})]})]})]}),(0,G.jsxs)(`p`,{className:`mt-3 mb-2 text-sm font-Regular text-[#6B7280]`,children:[t.parent_comment_id&&(0,G.jsxs)(`span`,{className:`text-[#8B5CF6] text-sm mr-1 font-medium`,children:[`@`,t.parentNickname]}),t.content]}),(0,G.jsx)(`div`,{className:`flex justify-end`,children:(0,G.jsx)(`p`,{className:`text-xs text-[#6B7280]`,children:t.created_at.slice(0,10)})})]})}function y({comments:e}){return(0,G.jsx)(G.Fragment,{children:e.map(t=>(0,G.jsxs)(`div`,{className:`flex flex-col`,children:[!t.parent_comment_id&&(0,G.jsx)(v,{comment:t}),p[t.id]?.map(t=>{let n=e.find(e=>e.id===t);return n?(0,G.jsx)(v,{comment:n},n.id):null})]},t.id))})}let x=e.comments?.filter(t=>t.id===e.adopted_comment_id);return(0,G.jsx)(G.Fragment,{children:(0,G.jsxs)(`div`,{className:`h-full flex flex-col justify-between`,children:[!e.comments||e.comments.length===0?(0,G.jsx)(`div`,{className:`text-center text-gray-500 py-12`,children:`현재 게시물에 등록된 댓글이 없습니다.`}):(0,G.jsxs)(`div`,{className:`flex flex-col pr-2 overflow-y-auto scrollbar-custom`,children:[x&&x[0]&&(0,G.jsx)(v,{comment:x[0]}),x?.length===0&&(0,G.jsx)(`div`,{className:`text-center text-gray-500 py-10`,children:`채택된 댓글이 없습니다.`}),(0,G.jsx)(`div`,{className:`border-t border-gray-300 mt-3.5`}),(0,G.jsx)(y,{comments:e.comments})]}),(0,G.jsxs)(`form`,{className:`flex gap-2 mt-4 w-full`,onSubmit:f,children:[(0,G.jsxs)(`div`,{className:`relative flex-1 text-sm px-6 py-3 border-1 border-[#E5E7EB] rounded-xl bg-white`,children:[i.nickname&&(0,G.jsxs)(`span`,{className:`text-[#8B5CF6] text-sm mr-1 font-medium`,children:[`@`,i.nickname]}),(0,G.jsx)(`input`,{placeholder:`댓글을 작성해주세요.`,value:n,onChange:e=>r(e.target.value),onKeyDown:g,className:`w-full focus:outline-none`}),(0,G.jsx)(q,{type:`button`,className:`absolute right-2 top-1/2 -translate-y-1/2 text-gray-400 hover:text-[#8B5CF6]`,onClick:()=>c(e=>!e),children:(0,G.jsx)(ec,{size:20})}),s&&(0,G.jsx)(`div`,{ref:l,className:`absolute z-30 bottom-full right-0 mb-2 bg-white border rounded-lg shadow-md p-2 grid grid-cols-10 gap-1`,children:u.map(e=>(0,G.jsx)(q,{type:`button`,onClick:()=>d(e),className:`text-lg hover:bg-gray-100 rounded p-1`,children:e},e))})]}),(0,G.jsx)(q,{type:`submit`,className:`px-4 py-2 text-sm text-white rounded-xl bg-[#8B5CF6]`,children:`등록`})]})]})})}const _d=jn()(Er(e=>({post:null,isLoading:!0,isLiked:!1,comments:null,fetchPost:async(t,n)=>{try{e(e=>{e.post=null,e.isLoading=!0,e.isLiked=!0,e.comments=null});let{data:r,error:i}=await U.from(`posts`).select(`*, user:users(nickname, representative_badge_id(badges(name,icon_url))), files(file_path, file_name), post_likes(user_id)`).eq(`id`,t).single();if(i)throw i;let{data:a,error:o}=await U.from(`comments`).select(`*, user:users(auth_id,nickname, profile_image_url, birth_date, role, representative_badge_id(badges(name,icon_url))), comment_likes(user_id)`).eq(`post_id`,t).order(`created_at`);if(o)throw o;let s={};a.forEach(e=>{e.parent_comment_id||(s[e.id]=e.user.nickname??``)});let c=a.map(e=>({...e,parentNickname:e.parent_comment_id?s[e.parent_comment_id]:null}));r.post_likes.some(e=>e.user_id===n)?e(e=>{e.isLiked=!0}):e(e=>{e.isLiked=!1}),e(e=>{e.post={...r},e.comments=c})}catch(e){console.error(e)}finally{e(e=>{e.isLoading=!1})}},deletePost:async e=>{try{if(e){let{error:t}=await U.from(`posts`).delete().eq(`id`,e);if(t)throw t;alert(`삭제 완료`)}else alert(`postId 찾을 수 없음`)}catch(e){console.error(e)}},updateLike:async(t,n)=>{try{let{error:r}=await U.from(`post_likes`).insert([{user_id:n,post_id:t}]).select();if(r)throw r;e(e=>{e.isLiked=!0})}catch(e){console.error(e)}},resetPostStore:()=>e({post:null,comments:[],isLoading:!0,isLiked:!1})})));var vd=u(S());function yd(){let e=(0,vd.c)(5),t;e[0]===Symbol.for(`react.memo_cache_sentinel`)?(t=(0,G.jsxs)(`div`,{className:`max-w-[800px] w-[760px] space-y-4`,children:[(0,G.jsx)(`div`,{className:`w-14 h-10 rounded-xl skeleton-40`}),(0,G.jsx)(`div`,{className:`w-60 h-12 rounded-xl skeleton-40`}),(0,G.jsx)(`div`,{className:`w-40 h-5 rounded-xl skeleton-40`}),(0,G.jsx)(`div`,{className:`w-110 h-6 rounded-xl skeleton-40`}),(0,G.jsx)(`div`,{className:`mt-20 w-11 h-6 rounded-xl skeleton-40`})]}),e[0]=t):t=e[0];let n,r;e[1]===Symbol.for(`react.memo_cache_sentinel`)?(n=(0,G.jsx)(`div`,{className:`mx-auto my-10 w-30 h-6 rounded-md skeleton-40`}),r=(0,G.jsx)(`div`,{className:`border-t border-gray-300 m-4`}),e[1]=n,e[2]=r):(n=e[1],r=e[2]);let i;e[3]===Symbol.for(`react.memo_cache_sentinel`)?(i=(0,G.jsxs)(`div`,{className:`flex flex-row justify-center items-center gap-1`,children:[(0,G.jsx)(`div`,{className:`w-9 h-9 rounded-full skeleton-40`}),(0,G.jsx)(`div`,{className:`w-20 h-5 rounded-md skeleton-40`}),(0,G.jsx)(`div`,{className:`w-18 h-3 rounded-md skeleton-40`})]}),e[3]=i):i=e[3];let a;return e[4]===Symbol.for(`react.memo_cache_sentinel`)?(a=(0,G.jsx)(G.Fragment,{children:(0,G.jsxs)(`div`,{className:`max-w-[1200px] h-[750px] flex flex-row gap-15`,children:[t,(0,G.jsxs)(`div`,{className:`w-[500px]`,children:[n,r,(0,G.jsxs)(`div`,{className:`bg-white w-111 rounded-xl px-6 py-3 space-y-3`,children:[(0,G.jsxs)(`div`,{className:`flex flex-row justify-between items-start`,children:[i,(0,G.jsxs)(`div`,{className:`flex flex-row gap-2`,children:[(0,G.jsx)(`div`,{className:`w-7 h-4 rounded-sm skeleton-40`}),(0,G.jsx)(`div`,{className:`w-7 h-4 rounded-sm skeleton-40`})]})]}),(0,G.jsx)(`div`,{className:`w-25 h-5 rounded-md skeleton-30`}),(0,G.jsx)(`div`,{className:`relative left-83.5 w-16 h-4 rounded-sm skeleton-50`})]})]})]})}),e[4]=a):a=e[4],a}const bd=async(e,t)=>{try{let{data:n,error:r}=await U.storage.from(`files`).download(e);if(r)throw console.error(`파일 다운로드 실패:`,r),r;let i=URL.createObjectURL(n),a=document.createElement(`a`);a.href=i,a.download=t,document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL(i)}catch(e){console.error(`파일 다운로드 중 오류:`,e),alert(`파일 다운로드에 실패했습니다.`)}},xd=(e,t=`files`)=>{let{data:n}=U.storage.from(t).getPublicUrl(e);return n.publicUrl};function Sd(){let e=Je(),{id:t}=Qe(),n=W(e=>e.currentUserId),r=W(e=>e.profile),i=_d(e=>e.isLoading),[a,o]=(0,b.useState)(!0),s=_d(e=>e.post),c=_d(e=>e.isLiked),l=_d(e=>e.comments),u=_d(e=>e.fetchPost),d=_d(e=>e.updateLike),f=_d(e=>e.deletePost),p=_d(e=>e.resetPostStore),m=async(e,t)=>{if(!n){alert(`로그인이 필요합니다.`);return}if(r?.role!==`teacher`){alert(`선생님만 파일을 다운로드할 수 있습니다.`);return}try{let i=await ru(n,30,`파일 다운로드: ${t}`);if(!i.success){alert(i.message);return}if(await bd(e,t),alert(i.message),r?.auth_id){let{fetchProfile:e}=W.getState();await e()}}catch(e){console.error(`다운로드 실패:`,e),alert(`다운로드 중 오류가 발생했습니다.`)}};(0,b.useEffect)(()=>{(async()=>{let{data:{session:n}}=await U.auth.getSession();if(!n){alert(`로그인이 필요합니다.`),e(`/login`);return}o(!1),t&&await u(t,n.user.id)})()},[t,e,u]);let h=()=>{if(!n){alert(`로그인이 필요합니다.`),e(`/login`);return}if(s?.post_likes?.some(e=>e.user_id===n)||c===!0){alert(`이미 좋아요를 눌렀습니다.`);return}t&&(d(t,n),alert(`좋아요 완료`),window.location.reload())};return(0,G.jsx)(G.Fragment,{children:i||a?(0,G.jsx)(yd,{}):(0,G.jsx)(G.Fragment,{children:(0,G.jsxs)(`div`,{className:`max-w-[1200px] h-[750px] flex flex-row gap-15 overflow-hidden`,children:[(0,G.jsxs)(`div`,{className:`max-w-[800px] w-[760px]`,children:[(0,G.jsxs)(`div`,{className:`flex flex-row justify-between`,children:[(0,G.jsxs)(L,{to:`/posts`,className:`flex flex-row relative group px-4 py-2.5 text-sm text-white rounded-xl bg-[#8B5CF6] cursor-pointer overflow-hidden`,children:[(0,G.jsx)($s,{size:20}),(0,G.jsx)(`span`,{className:`ml-1 inline-block transition-all duration-300 ease-in-out max-w-0 overflow-hidden align-middle group-hover:max-w-xs whitespace-nowrap`,children:`게시판으로 돌아가기`})]}),s?.user_id===n&&(0,G.jsxs)(`div`,{className:`flex gap-2`,children:[(0,G.jsx)(L,{to:`/posts/create/`+t,className:`px-4 py-2.5 text-sm text-white rounded-xl bg-[#8B5CF6] cursor-pointer`,children:`수정`}),(0,G.jsx)(`button`,{type:`button`,onClick:()=>{f(s.id),e(`/posts`)},className:`px-4 py-2.5 text-sm text-[#8B5CF6] rounded-xl bg-white border-1 border-[#8B5CF6] cursor-pointer`,children:`삭제`})]})]}),(0,G.jsxs)(`div`,{className:`group mt-5 h-[700px] overflow-y-auto scrollbar-custom`,children:[(0,G.jsxs)(`div`,{className:`flex flex-row items-center justify-between`,children:[(0,G.jsx)(`h1`,{className:`font-bold text-[32px] text-[#8B5CF6]`,children:s?.title}),(0,G.jsx)(q,{className:`opacity-0 group-hover:opacity-100 transition-opacity duration-300 transform`,type:`button`,onClick:()=>{h(),p()},children:c?(0,G.jsx)(Ys,{color:`white`,size:40,className:`p-2 bg-[#EA489A] border-1 border-[#EA489A] rounded-4xl`}):(0,G.jsx)(Ys,{color:`#EA489A`,size:40,className:`p-2 bg-white border-1 border-[#EA489A] rounded-4xl`})})]}),(0,G.jsxs)(`p`,{className:`mt-2 text-sm text-[#6B7280]`,children:[`작성자: `,s?.user?.nickname,` |`,` `,s?.created_at.slice(0,10)]}),(0,G.jsxs)(`div`,{className:`my-8`,children:[(0,G.jsx)(`div`,{className:`max-w-xl`,children:(0,G.jsx)(`pre`,{className:`w-full break-words whitespace-pre-wrap`,children:s?.content})}),(0,G.jsx)(`div`,{className:`mt-2`,children:s?.files?.filter(e=>e.file_path.startsWith(`data:image`)&&e.file_name.match(/\.(jpg|jpeg|png|gif)$/i))?.map(e=>(0,G.jsx)(`img`,{src:e.file_path,alt:e.file_name,className:`max-h-80`},e.file_path))}),s?.files&&s.files.filter(e=>e.file_path.startsWith(`posts/`)).length>0&&(0,G.jsxs)(`div`,{className:`mt-6`,children:[(0,G.jsx)(`h3`,{className:`text-lg font-semibold text-[#8B5CF6] mb-3`,children:`첨부파일`}),(0,G.jsx)(`div`,{className:`space-y-2`,children:s.files.filter(e=>e.file_path.startsWith(`posts/`)).map((e,t)=>{let n=e.file_name.match(/\.(jpg|jpeg|png|gif)$/i);return(0,G.jsxs)(`div`,{className:`flex items-center justify-between p-4 rounded-xl bg-white border-1 border-[#E5E7EB] shadow-[0_2px_8px_rgba(0,0,0,0.05)]`,children:[(0,G.jsxs)(`div`,{className:`flex items-center space-x-3`,children:[n?(0,G.jsx)(`img`,{src:xd(e.file_path),alt:e.file_name,className:`w-12 h-12 object-cover rounded-lg`,onError:e=>{e.currentTarget.style.display=`none`,e.currentTarget.nextElementSibling?.classList.remove(`hidden`)}}):null,(0,G.jsx)(`div`,{className:`w-12 h-12 bg-[#EDE9FE] rounded-lg flex items-center justify-center ${n?`hidden`:``}`,children:(0,G.jsx)(Js,{size:20,className:`text-[#8B5CF6]`})}),(0,G.jsxs)(`div`,{children:[(0,G.jsx)(`p`,{className:`text-sm font-medium text-gray-900`,children:e.file_name}),(0,G.jsx)(`p`,{className:`text-xs text-[#6B7280]`,children:`첨부파일`})]})]}),r?.role===`teacher`?(0,G.jsxs)(`button`,{type:`button`,onClick:()=>m(e.file_path,e.file_name),className:`flex items-center space-x-2 px-4 py-2 text-sm text-white bg-[#8B5CF6] hover:bg-[#B08DFF] rounded-xl transition-colors cursor-pointer`,children:[(0,G.jsx)(qs,{size:16}),(0,G.jsx)(`span`,{children:`다운로드`})]}):(0,G.jsxs)(`div`,{className:`flex items-center space-x-2 px-4 py-2 text-sm text-[#6B7280] bg-[#EDE9FE] rounded-xl`,children:[(0,G.jsx)(qs,{size:16}),(0,G.jsx)(`span`,{children:`선생님만 다운로드 가능`})]})]},t)})})]})]}),(0,G.jsx)(`div`,{className:`flex gap-2`,children:s?.hash_tag?.map((e,t)=>(0,G.jsxs)(`div`,{className:`px-2 py-1 rounded-lg bg-[#EDE9FE] font-Regular text-xs text-[#8B5CF6]`,children:[`#`,e]},t))})]})]}),(0,G.jsx)(`div`,{className:`w-[500px]`,children:(0,G.jsx)(gd,{comments:l,postId:t,adopted_comment_id:s?.adopted_comment_id??null,writerId:s?.user_id,onCommentAdded:()=>{t&&n&&u(t,n)}})})]})})})}var Cd=u(S());function wd(e){let t=(0,Cd.c)(35),{group:n,onJoinToggle:r,joined:i}=e,a=`/groups/${n.group_id}/posts`,o=`${n.title} 게시판으로 이동`,s;t[0]!==n.groups_img_url||t[1]!==n.title?(s=n.groups_img_url?(0,G.jsx)(`img`,{src:n.groups_img_url,alt:n.title,className:`w-full h-35 object-cover`}):(0,G.jsx)(`div`,{className:`h-35 w-full bg-gray-200/80`}),t[0]=n.groups_img_url,t[1]=n.title,t[2]=s):s=t[2];let c;t[3]===n.title?c=t[4]:(c=(0,G.jsx)(`h3`,{className:`text-base font-semibold text-[#6D28D9] hover:text-[#7C3AED] line-clamp-1`,children:n.title}),t[3]=n.title,t[4]=c);let l;t[5]===n.recent_act?l=t[6]:(l=(0,G.jsx)(`span`,{className:`shrink-0 text-xs text-gray-500`,children:n.recent_act}),t[5]=n.recent_act,t[6]=l);let u;t[7]!==c||t[8]!==l?(u=(0,G.jsxs)(`div`,{className:`flex items-center justify-between`,children:[c,l]}),t[7]=c,t[8]=l,t[9]=u):u=t[9];let d;t[10]===n.bio?d=t[11]:(d=(0,G.jsx)(`p`,{className:`h-8 mt-1 text-xs text-gray-600 line-clamp-2`,children:n.bio}),t[10]=n.bio,t[11]=d);let f;t[12]===Symbol.for(`react.memo_cache_sentinel`)?(f=(0,G.jsxs)(`svg`,{className:`h-4 w-4`,viewBox:`0 0 24 24`,fill:`none`,stroke:`currentColor`,"aria-hidden":!0,children:[(0,G.jsx)(`path`,{d:`M17 21v-2a4 4 0 0 0-4-4H7a4 4 0 0 0-4 4v2`}),(0,G.jsx)(`circle`,{cx:`9`,cy:`7`,r:`4`}),(0,G.jsx)(`path`,{d:`M23 21v-2a4 4 0 0 0-3-3.87`}),(0,G.jsx)(`path`,{d:`M16 3.13a4 4 0 0 1 0 7.75`})]}),t[12]=f):f=t[12];let p;t[13]===n.members?p=t[14]:(p=(0,G.jsxs)(`div`,{className:`flex items-center gap-1.5 text-xs text-gray-500`,children:[f,(0,G.jsx)(`span`,{children:n.members})]}),t[13]=n.members,t[14]=p);let m=`rounded-lg px-3 py-1 text-xs font-medium text-white ${i?`bg-gray-500 hover:bg-gray-600`:`bg-[#8B5CF6] hover:bg-[#7C3AED]`}`,h;t[15]===r?h=t[16]:(h=e=>{e.preventDefault(),e.stopPropagation(),r?.()},t[15]=r,t[16]=h);let g=i?`탈퇴하기`:`참여하기`,_;t[17]!==m||t[18]!==h||t[19]!==g?(_=(0,G.jsx)(`button`,{className:m,onClick:h,children:g}),t[17]=m,t[18]=h,t[19]=g,t[20]=_):_=t[20];let v;t[21]!==_||t[22]!==p?(v=(0,G.jsxs)(`div`,{className:`mt-3 flex items-center justify-between`,children:[p,_]}),t[21]=_,t[22]=p,t[23]=v):v=t[23];let y;t[24]!==v||t[25]!==u||t[26]!==d?(y=(0,G.jsxs)(`div`,{className:`py-4 px-5`,children:[u,d,v]}),t[24]=v,t[25]=u,t[26]=d,t[27]=y):y=t[27];let b;t[28]!==y||t[29]!==s?(b=(0,G.jsxs)(`article`,{className:`w-60 overflow-hidden rounded-2xl border border-gray-100 bg-white shadow-sm transition-all duration-200 hover:-translate-y-0.5 hover:border-gray-200 hover:shadow-md`,"aria-label":`그룹 카드`,children:[s,y]}),t[28]=y,t[29]=s,t[30]=b):b=t[30];let x;return t[31]!==a||t[32]!==b||t[33]!==o?(x=(0,G.jsx)(L,{to:a,"aria-label":o,children:b}),t[31]=a,t[32]=b,t[33]=o,t[34]=x):x=t[34],x}var Td=u(S());function Ed(e){let t=(0,Td.c)(2),{num:n}=e,r;return t[0]===n?r=t[1]:(r=(0,G.jsx)(G.Fragment,{children:(0,G.jsx)(`div`,{className:`flex flex-row gap-5`,children:Array.from({length:n}).map(Dd)})}),t[0]=n,t[1]=r),r}function Dd(e,t){return(0,G.jsxs)(`div`,{children:[(0,G.jsx)(`div`,{className:`mt-5 w-60 h-34 rounded-t-2xl skeleton-50`}),(0,G.jsxs)(`div`,{className:`w-60 h-34 rounded-b-2xl bg-white px-5 py-4`,children:[(0,G.jsxs)(`div`,{className:`flex flex-row justify-between items-start`,children:[(0,G.jsx)(`div`,{className:`w-8 h-6 rounded-md skeleton-50`}),(0,G.jsx)(`div`,{className:`w-8 h-4 rounded-md skeleton-50`})]}),(0,G.jsx)(`div`,{className:`w-40 h-4 mt-2 rounded-md skeleton-30`}),(0,G.jsxs)(`div`,{className:`mt-7 flex flex-row justify-between items-end`,children:[(0,G.jsx)(`div`,{className:`w-7 h-4 rounded-md skeleton-50`}),(0,G.jsx)(`div`,{className:`w-17 h-6 rounded-md skeleton-50`})]})]})]},t)}function Od(e){let t=new Date(e).getTime();if(Number.isNaN(t))return`방금`;let n=Date.now()-t,r=Math.floor(n/36e5);return r<1?`방금`:r<24?`${r}시간 전`:`${Math.floor(r/24)}일 전`}async function kd(){let{data:e,error:t}=await U.auth.getUser();return t&&(t.message?.includes(`Auth session missing`)||t.status===400)?null:e.user??null}async function Ad(){let e=(await kd())?.id??null,{data:t,error:n}=await U.from(`groups`).select(`*`).order(`created_at`,{ascending:!1});if(n)throw n;let r=(t??[]).map(e=>e.id);if(r.length===0)return[];let{data:i,error:a}=await U.from(`group_members`).select(`group_id, user_id`).in(`group_id`,r);if(a)throw a;let o=new Map,s=new Set;for(let t of i??[])o.set(t.group_id,(o.get(t.group_id)??0)+1),t.user_id===e&&s.add(t.group_id);return(t??[]).map(e=>({...e,member_count:o.get(e.id)??0,joined:s.has(e.id)}))}async function jd(){let e=await kd();if(!e)return[];let{data:t,error:n}=await U.from(`group_members`).select(`group_id`).eq(`user_id`,e.id);if(n)throw n;let r=(t??[]).map(e=>e.group_id);if(r.length===0)return[];let{data:i,error:a}=await U.from(`groups`).select(`*`).in(`id`,r);if(a)throw a;let{data:o,error:s}=await U.from(`group_members`).select(`group_id`).in(`group_id`,r);if(s)throw s;let c=new Map;for(let e of o??[])c.set(e.group_id,(c.get(e.group_id)??0)+1);return(i??[]).map(e=>({...e,member_count:c.get(e.id)??0,joined:!0}))}async function Md(e){let t=await kd();if(!t)throw Error(`로그인이 필요합니다.`);let{error:n}=await U.from(`group_members`).insert({group_id:e,user_id:t.id});if(n&&n.code!==`23505`)throw n}async function Nd(e){let t=await kd();if(!t)throw Error(`로그인이 필요합니다.`);let{error:n}=await U.from(`group_members`).delete().eq(`group_id`,e).eq(`user_id`,t.id);if(n)throw n}function $(){let[e,t]=(0,b.useState)(!0),[n,r]=(0,b.useState)(null),[i,a]=(0,b.useState)([]),[o,s]=(0,b.useState)([]);(0,b.useEffect)(()=>{let e=!0;return(async()=>{try{t(!0),r(null);let[n,i]=await Promise.all([Ad(),jd()]);if(!e)return;a(n),s(i)}catch(t){if(!e)return;String(t?.message??``).includes(`Auth session missing`)||t?.status===400?r(null):r(`그룹을 불러오지 못했어요. 잠시 후 다시 시도해 주세요.`)}finally{e&&t(!1)}})(),()=>{e=!1}},[]);let c=async(e,t)=>{a(n=>n.map(n=>n.id===e.id?{...n,member_count:n.member_count+(t?1:-1),joined:t}:n)),s(n=>t?n.some(t=>t.id===e.id)?n:[...n,{...e,joined:!0,member_count:e.member_count+1}]:n.filter(t=>t.id!==e.id));try{t?await Md(e.id):await Nd(e.id)}catch{let[e,t]=await Promise.all([Ad(),jd()]);a(e),s(t),alert(`요청이 실패했어요. 다시 시도해주세요.`)}},l=e=>({group_id:e.id,title:e.name??`이름 없음`,bio:e.bio??`소개가 없습니다.`,recent_act:e.created_at?Od(e.created_at):`방금`,members:e.member_count,groups_img_url:e.profile_image_url??``}),u=(0,b.useMemo)(()=>o,[o]);return(0,G.jsxs)(`div`,{className:`max-w-[1280px] min-w-250 mx-auto px-6 md:px-8`,children:[(0,G.jsxs)(`section`,{className:`mt-8 md:mt-10`,children:[(0,G.jsxs)(`div`,{className:`flex items-center justify-between`,children:[(0,G.jsx)(`h2`,{className:`text-xl md:text-2xl font-semibold tracking-tight`,children:`내가 활동 중인 그룹`}),(0,G.jsx)(L,{to:`/groups/create`,className:`inline-flex h-9 items-center rounded-xl bg-[#8B5CF6] px-4 text-sm font-medium text-white hover:bg-[#7C3AED] focus:outline-none focus:ring-2 focus:ring-violet-300`,children:`그룹 만들기`})]}),e?(0,G.jsx)(Ed,{num:1}):u.length===0?(0,G.jsx)(`div`,{className:`mt-5`,children:(0,G.jsx)(`p`,{children:`참여한 그룹이 없습니다.`})}):(0,G.jsx)(`div`,{className:`mt-5 grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-5`,children:u.map(e=>{let t=l(e);return(0,G.jsx)(`div`,{className:`space-y-2`,children:(0,G.jsx)(wd,{group:t,onJoinToggle:()=>c(e,!1),joined:!0})},e.id)})})]}),(0,G.jsxs)(`section`,{className:`mt-12 md:mt-16`,children:[(0,G.jsx)(`h2`,{className:`text-xl md:text-2xl font-semibold tracking-tight`,children:`전체 그룹`}),n&&(0,G.jsx)(`p`,{className:`mt-3 text-sm text-red-600`,children:n}),e?(0,G.jsx)(Ed,{num:4}):(0,G.jsx)(`div`,{className:`mt-5 grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-5`,children:i.map(e=>{let t=l(e);return(0,G.jsx)(`div`,{className:`space-y-2`,children:(0,G.jsx)(wd,{group:t,onJoinToggle:()=>c(e,!e.joined),joined:e.joined})},e.id)})})]})]})}var Pd=u(S());function Fd(e){let t=(0,Pd.c)(19),n,r,i;t[0]===e?(n=t[1],r=t[2],i=t[3]):({validationText:i,children:n,...r}=e,t[0]=e,t[1]=n,t[2]=r,t[3]=i);let a=`peer w-full resize-none outline-none align-middle `+(r.readOnly&&`text-[#C8C8C8]`),o;t[4]!==r||t[5]!==a?(o=(0,G.jsx)(`input`,{className:a,...r}),t[4]=r,t[5]=a,t[6]=o):o=t[6];let s=`absolute left-6 top-4 text-[#C8C8C8] transition-all duration-100 ease-in-out peer-focus:text-sm peer-focus:text-[#8B5CF6] peer-focus:-translate-y-6 peer-focus:bg-white `+(r.required&&`peer-valid:-translate-y-6 peer-valid:text-sm peer-valid:bg-white peer-valid:text-[#8B5CF6]`),c;t[7]!==n||t[8]!==r.id||t[9]!==s?(c=(0,G.jsx)(`label`,{htmlFor:r.id,className:s,children:n}),t[7]=n,t[8]=r.id,t[9]=s,t[10]=c):c=t[10];let l;t[11]!==r.id||t[12]!==r.required||t[13]!==i?(l=r.required&&(0,G.jsx)(`label`,{htmlFor:r.id,className:`absolute hidden left-6 -top-2 bg-white text-sm text-red-500 peer-user-invalid:block `,children:i}),t[11]=r.id,t[12]=r.required,t[13]=i,t[14]=l):l=t[14];let u;return t[15]!==o||t[16]!==c||t[17]!==l?(u=(0,G.jsxs)(G.Fragment,{children:[o,c,l]}),t[15]=o,t[16]=c,t[17]=l,t[18]=u):u=t[18],u}function Id(){let e=Je(),t=W(e=>e.profile),[n,r]=(0,b.useState)(``),[i,a]=(0,b.useState)(``),[o,s]=(0,b.useState)([]),[c,l]=(0,b.useState)(!1);return(0,G.jsxs)(`div`,{className:`min-w-250 px-4`,children:[(0,G.jsx)(`h2`,{className:`mb-6 text-[32px] font-bold`,children:`그룹 생성하기`}),(0,G.jsxs)(`form`,{method:`post`,onSubmit:async r=>{if(r.preventDefault(),!t?.auth_id){alert(`로그인이 필요합니다.`);return}if(!n.trim()||!i.trim()){alert(`그룹 이름과 소개를 입력하세요.`);return}try{l(!0);let{data:r,error:a}=await U.from(`groups`).insert([{name:n.trim(),bio:i.trim(),profile_image_url:o[0]?.file??null}]).select();if(a)throw a;let s=r?.[0]?.id;if(!s)throw Error(`그룹 생성에 실패했어요.`);let{error:c}=await U.from(`group_members`).insert([{group_id:s,user_id:t.auth_id}]);if(c)throw c;alert(`그룹이 생성되었습니다.`),e(`/groups`)}catch(e){console.error(e),alert(`그룹 생성에 실패했어요. 잠시 후 다시 시도해 주세요.`)}finally{l(!1)}},children:[(0,G.jsxs)(`div`,{className:`flex flex-col gap-5.5 px-6 py-4 rounded-xl bg-white shadow-[0_4px_20px_rgba(0,0,0,0.05)]`,children:[(0,G.jsx)(`div`,{className:`relative w-full px-6 py-4 rounded-xl bg-white border-1 border-[#E5E7EB] outline-none user-invalid:border-red-500`,children:(0,G.jsx)(Fd,{id:`groupName`,required:!0,value:n,onChange:e=>r(e.target.value),validationText:`그룹 이름을 입력하세요`,children:`그룹 이름`})}),o[0]?(0,G.jsxs)(`div`,{className:`relative flex flex-col items-center px-6 py-4 rounded-xl bg-white border-1 border-[#E5E7EB]`,children:[(0,G.jsxs)(`div`,{className:`relative pb-2`,children:[(0,G.jsx)(`img`,{src:o[0].file,alt:`group-cover`,className:`relative z-2 max-h-50 min-h-30 object-cover bg-white`}),o.length>1&&(0,G.jsxs)(`div`,{children:[(0,G.jsx)(`img`,{src:o[0].file,alt:`group-cover-shadow`,className:`absolute top-2 left-2 z-1 max-h-50 min-h-30 object-cover opacity-50`}),(0,G.jsx)(`div`,{className:`absolute z-2 -bottom-2 -right-4 px-3.5 py-1.5 text-xm text-[#6B7280] font-bold bg-white border-1 border-[#E5E7EB] rounded-3xl`,children:o.length})]})]}),(0,G.jsx)(`button`,{type:`button`,className:`absolute top-1.5 right-1.5 p-1 rounded-xl text-red-500 border-1 border-[#E5E7EB] cursor-pointer`,onClick:()=>s([]),title:`이미지 삭제`,children:(0,G.jsx)(oc,{size:18})})]}):(0,G.jsxs)(`div`,{className:`flex flex-col items-center px-6 py-4 rounded-xl bg-white border-2 border-[#E5E7EB] border-dashed`,children:[(0,G.jsx)(`input`,{id:`imgFile`,accept:`image/*`,className:`hidden`,type:`file`,name:`imgFile`,onChange:e=>{let t=e.target.files;t&&Array.from(t).map(e=>{let t=new FileReader;t.onload=t=>{s(n=>[...n,{file:t.target?.result,fileName:e.name}])},t.readAsDataURL(e)})},multiple:!0}),(0,G.jsx)(`p`,{className:`text-[#6B7280]`,children:`Upload image`}),(0,G.jsx)(`label`,{htmlFor:`imgFile`,className:`px-6 py-4 rounded-xl text-[#6B7280] bg-[#E5E7EB] cursor-pointer`,children:`Choose Img File`})]}),(0,G.jsxs)(`div`,{className:`relative w-full px-6 py-4 rounded-xl bg-white border-1 border-[#E5E7EB] outline-none user-invalid:border-red-500`,children:[(0,G.jsx)(`textarea`,{id:`groupBio`,rows:12,className:`peer w-full resize-none outline-none align-middle`,required:!0,wrap:`hard`,value:i,onChange:e=>a(e.target.value)}),(0,G.jsx)(`label`,{htmlFor:`groupBio`,className:`absolute left-6 top-4 text-[#C8C8C8] transition-all duration-100 ease-in-out 
                peer-focus:text-sm peer-focus:-translate-y-6 peer-focus:bg-white peer-focus:text-[#8B5CF6]
                peer-valid:-translate-y-6 peer-valid:text-sm peer-valid:bg-white peer-valid:text-[#8B5CF6]`,children:`그룹 소개`}),(0,G.jsx)(`label`,{htmlFor:`groupBio`,className:`absolute hidden left-6 -top-2 bg-white text-sm text-red-500 peer-user-invalid:block `,children:`그룹 소개를 입력하세요.`})]})]}),(0,G.jsxs)(`div`,{className:`flex justify-end mt-7 gap-2`,children:[(0,G.jsx)(L,{to:`/groups`,className:`px-4 py-2.5 text-sm rounded-xl bg-white text-[#8B5CF6]
              font-Regular hover:bg-[#B08DFF] hover:text-white cursor-pointer border-1 border-[#8B5CF6]`,children:`삭제`}),(0,G.jsx)(`button`,{type:`submit`,disabled:c,className:`px-4 py-2.5 text-sm text-white rounded-xl bg-[#8B5CF6]  hover:bg-[#B08DFF] cursor-pointer disabled:opacity-60`,children:c?`등록 중…`:`등록`})]})]})]})}var Ld=u(S());function Rd(e){let t=(0,Ld.c)(15),n;t[0]===e?n=t[1]:(n=t=>{let n=t.target.files;n&&Array.from(n).map(t=>{let n=t.name.split(`.`).pop();if(n&&[`png`,`jpeg`,`jpg`].includes(n)){let n=new FileReader;n.onload=n=>{e.setImgFiles(e=>[...e,{file:n.target?.result,fileName:t.name}])},n.readAsDataURL(t)}else alert(`이미지 파일만 선택 가능합니다.`)})},t[0]=e,t[1]=n);let r=n,i;t[2]===e?i=t[3]:(i=()=>{e.setImgFiles([])},t[2]=e,t[3]=i);let a=i,o;t[4]!==e.imgFiles[0]||t[5]!==e.imgFiles.length||t[6]!==a?(o=e.imgFiles[0]&&(0,G.jsxs)(`div`,{className:`relative flex flex-col items-center px-6 py-4 rounded-xl bg-white border-1 border-[#E5E7EB]`,children:[(0,G.jsxs)(`div`,{className:`relative pb-2`,children:[(0,G.jsx)(`img`,{src:e.imgFiles[0].file,alt:`image`,className:`relative z-2 max-h-50 min-h-30 object-cover bg-white`}),e.imgFiles.length>1&&(0,G.jsxs)(`div`,{children:[(0,G.jsx)(`img`,{src:e.imgFiles[0].file,alt:`image`,className:`absolute top-2 left-2 z-1 max-h-50 min-h-30 object-cover opacity-50`}),(0,G.jsx)(`div`,{className:`absolute z-2 -bottom-2 -right-4 px-3.5 py-1.5 text-xm text-[#6B7280] font-bold bg-white border-1 border-[#E5E7EB] rounded-3xl`,children:e.imgFiles.length})]})]}),(0,G.jsx)(`button`,{type:`button`,className:`absolute top-1.5 right-1.5 p-1 rounded-xl text-red-500 border-1 border-[#E5E7EB] cursor-pointer`,onClick:a,children:(0,G.jsx)(oc,{size:18})})]}),t[4]=e.imgFiles[0],t[5]=e.imgFiles.length,t[6]=a,t[7]=o):o=t[7];let s;t[8]!==r||t[9]!==e.imgFiles[0]||t[10]!==e.isMulti?(s=!e.imgFiles[0]&&(0,G.jsxs)(`div`,{className:`flex flex-col items-center px-6 py-4 rounded-xl bg-white border-2 border-[#E5E7EB] border-dashed`,children:[(0,G.jsx)(`input`,{id:`imgFile`,accept:`image/*`,className:`hidden`,type:`file`,name:`imgFile`,onChange:r,multiple:e.isMulti}),(0,G.jsx)(`p`,{className:`text-[#6B7280]`,children:`Upload image`}),(0,G.jsx)(`label`,{htmlFor:`imgFile`,className:`px-6 py-4 rounded-xl text-[#6B7280] bg-[#E5E7EB] cursor-pointer`,children:`Choose Img File`})]}),t[8]=r,t[9]=e.imgFiles[0],t[10]=e.isMulti,t[11]=s):s=t[11];let c;return t[12]!==o||t[13]!==s?(c=(0,G.jsxs)(G.Fragment,{children:[o,s]}),t[12]=o,t[13]=s,t[14]=c):c=t[14],c}var zd=e=>{let t=e.lastIndexOf(`.`),n=t>0?e.substring(0,t):e,r=t>0?e.substring(t):``;return n.replace(/[^a-zA-Z0-9]/g,`_`).replace(/_+/g,`_`).replace(/^_|_$/g,``)+r};const Bd=async(e,t,n=`files`)=>{try{let r=Date.now(),i=e.name,a=zd(i),o=`${r}_${a}`,s=`posts/${t}/${o}`,{data:c,error:l}=await U.storage.from(n).upload(s,e);if(l)throw console.error(`파일 업로드 실패:`,l),l;return{filePath:c.path,fileName:i}}catch(e){return console.error(`파일 업로드 중 오류:`,e),null}},Vd=(e,t=10)=>{let n=t*1024*1024;return e.size<=n},Hd=(e,t=[])=>{if(t.length===0)return!0;let n=e.name.split(`.`).pop()?.toLowerCase();return n?t.includes(n):!1};var Ud=u(S());function Wd(e){let t=(0,Ud.c)(15),n;t[0]===e?n=t[1]:(n=t=>{let n=t.target.files;n&&Array.from(n).forEach(t=>{if(!Vd(t,e.maxFileSizeMB||10)){alert(`파일 크기는 ${e.maxFileSizeMB||10}MB 이하여야 합니다.`);return}let n=e.allowedTypes||[`pdf`,`doc`,`docx`,`ppt`,`pptx`,`xls`,`xlsx`,`txt`,`zip`,`rar`,`png`,`jpg`,`jpeg`,`gif`];if(!Hd(t,n)){alert(`허용되지 않는 파일 형식입니다. 허용 형식: ${n.join(`, `)}`);return}e.setUploadedFiles(e=>[...e,t])})},t[0]=e,t[1]=n);let r=n,i;t[2]===e?i=t[3]:(i=()=>{e.setUploadedFiles([])},t[2]=e,t[3]=i);let a=i,o=Gd,s;t[4]!==e.uploadedFiles||t[5]!==a?(s=e.uploadedFiles[0]&&(0,G.jsxs)(`div`,{className:`relative flex flex-col items-center px-6 py-4 rounded-xl bg-white border-1 border-[#E5E7EB]`,children:[(0,G.jsxs)(`div`,{className:`relative pb-2`,children:[(0,G.jsx)(`div`,{className:`relative z-2 max-h-50 min-h-30 object-cover bg-white flex items-center justify-center`,children:(0,G.jsx)(Js,{size:40,className:`text-gray-500`})}),e.uploadedFiles.length>1&&(0,G.jsxs)(`div`,{children:[(0,G.jsx)(`div`,{className:`absolute top-2 left-2 z-1 max-h-50 min-h-30 object-cover opacity-50 flex items-center justify-center`,children:(0,G.jsx)(Js,{size:40,className:`text-gray-500`})}),(0,G.jsx)(`div`,{className:`absolute z-2 -bottom-2 -right-4 px-3.5 py-1.5 text-xm text-[#6B7280] font-bold bg-white border-1 border-[#E5E7EB] rounded-3xl`,children:e.uploadedFiles.length})]})]}),(0,G.jsx)(`div`,{className:`w-full mt-2 space-y-1`,children:e.uploadedFiles.map((e,t)=>(0,G.jsxs)(`div`,{className:`flex items-center justify-between text-xs`,children:[(0,G.jsx)(`span`,{className:`text-gray-700 font-medium truncate flex-1 mr-2`,children:e.name}),(0,G.jsx)(`span`,{className:`text-gray-500 flex-shrink-0`,children:o(e.size)})]},t))}),(0,G.jsx)(`button`,{type:`button`,className:`absolute top-1.5 right-1.5 p-1 rounded-xl text-red-500 border-1 border-[#E5E7EB] cursor-pointer`,onClick:a,children:(0,G.jsx)(oc,{size:18})})]}),t[4]=e.uploadedFiles,t[5]=a,t[6]=s):s=t[6];let c;t[7]!==r||t[8]!==e.isMulti||t[9]!==e.label||t[10]!==e.uploadedFiles[0]?(c=!e.uploadedFiles[0]&&(0,G.jsxs)(`div`,{className:`flex flex-col items-center px-6 py-4 rounded-xl bg-white border-2 border-[#E5E7EB] border-dashed`,children:[(0,G.jsx)(`input`,{id:`fileUpload`,accept:`*`,className:`hidden`,type:`file`,name:`fileUpload`,onChange:r,multiple:e.isMulti||!1}),(0,G.jsx)(`p`,{className:`text-[#6B7280]`,children:e.label||`Upload file`}),(0,G.jsx)(`label`,{htmlFor:`fileUpload`,className:`px-6 py-4 rounded-xl text-[#6B7280] bg-[#E5E7EB] cursor-pointer`,children:`Choose File`})]}),t[7]=r,t[8]=e.isMulti,t[9]=e.label,t[10]=e.uploadedFiles[0],t[11]=c):c=t[11];let l;return t[12]!==s||t[13]!==c?(l=(0,G.jsxs)(G.Fragment,{children:[s,c]}),t[12]=s,t[13]=c,t[14]=l):l=t[14],l}function Gd(e){if(e===0)return`0 Bytes`;let t=[`Bytes`,`KB`,`MB`,`GB`],n=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/1024**n).toFixed(2))+` `+t[n]}function Kd(){let e=Je(),{id:t}=Qe(),n=W(e=>e.profile),[r,i]=(0,b.useState)(``),[a,o]=(0,b.useState)(``),[s,c]=(0,b.useState)(``),[l,u]=(0,b.useState)(``),[d,f]=(0,b.useState)([]),[p,m]=(0,b.useState)([]),[h,g]=(0,b.useState)([]),_=[{key:`free`,label:`자유게시판`},{key:`elementary`,label:`초등학생 게시판`},{key:`middle`,label:`중학교 게시판`},{key:`high`,label:`고등학교 게시판`}];n&&n.role===`teacher`&&_.push({key:`resources`,label:`자료 공유 게시판`});let v=async i=>{if(i.preventDefault(),!r||!a||!s||!n?.auth_id){alert(`필수 항목을 작성해주세요`);return}try{if(t){let{data:i,error:o}=await U.from(`posts`).update({board_type:r,title:a,content:s,hash_tag:d}).eq(`id`,t).eq(`user_id`,n?.auth_id).select(),{error:c}=await U.from(`files`).delete().eq(`post_id`,t);if(c)throw c;for(let e of p){let{data:n,error:r}=await U.from(`files`).insert([{post_id:t,file_path:e.file,file_name:e.fileName}]).select();if(r)throw r;n||alert(`이미지 파일 등록 실패`)}for(let e of h){let n=await Bd(e,t);if(n){let{data:e,error:r}=await U.from(`files`).insert([{post_id:t,file_path:n.filePath,file_name:n.fileName}]).select();if(r)throw r;e||alert(`파일 등록 실패`)}}if(o)throw o;i&&(r===`group`&&i[0]?.group_id&&await ld(i[0].group_id),alert(`게시글이 수정되었습니다.`),e(`/posts/`+t))}else{let{data:t,error:i}=await U.from(`posts`).insert([{board_type:r,title:a,content:s,hash_tag:d,user_id:n?.auth_id}]).select().single();r===`group`&&t?.group_id&&await ld(t.group_id);for(let e of p){let{data:n,error:r}=await U.from(`files`).insert([{post_id:t?.id,file_path:e.file,file_name:e.fileName}]).select();if(r)throw r;n||alert(`이미지 파일 등록 실패`)}for(let e of h){let n=await Bd(e,t.id);if(n){let{data:e,error:r}=await U.from(`files`).insert([{post_id:t.id,file_path:n.filePath,file_name:n.fileName}]).select();if(r)throw r;e||alert(`파일 등록 실패`)}}if(i)throw i;t&&(alert(`게시글이 등록되었습니다.`),console.log(t),await fd(n.auth_id),e(`/posts/`+t.id))}}catch(e){console.error(e)}};(0,b.useEffect)(()=>{t?(async()=>{try{let{data:e,error:n}=await U.from(`posts`).select(`*`).eq(`id`,t).single();if(n)throw n;e&&(o(e.title),i(e.board_type),c(e.content),f(e.hash_tag));let{data:r,error:a}=await U.from(`files`).select(`file_path, file_name`).eq(`post_id`,t);if(a)throw a;console.log(r)}catch(e){console.error(e)}})():(o(``),i(``),c(``),f([]))},[t]);let y=e=>{let t=[...d.slice(0,e),...d.slice(e+1)];f(t)},x=e=>{let t=l.trim();if(t&&e.key===`Enter`&&!e.nativeEvent.isComposing)if(e.preventDefault(),d&&!d.includes(t)){let e=[...d,t.replace(/ /g,``)];f(e),u(``)}else alert(`중복된 태그입니다.`)};return(0,G.jsx)(G.Fragment,{children:(0,G.jsxs)(`div`,{className:`min-w-250 px-4`,children:[(0,G.jsx)(`h2`,{className:`mb-6 text-[32px] font-bold`,children:`글 작성하기`}),(0,G.jsxs)(`form`,{method:`post`,onSubmit:v,children:[(0,G.jsxs)(`div`,{className:`flex flex-col gap-5.5 px-6 py-4 rounded-xl bg-white shadow-[0_4px_20px_rgba(0,0,0,0.05)]`,children:[(0,G.jsxs)(`div`,{className:`relative px-6 py-4 rounded-xl bg-white border-1 border-[#E5E7EB]`,children:[(0,G.jsxs)(`select`,{className:`w-full peer outline-none user-invalid:border-red-500`,name:`board`,id:`board`,required:!0,value:r,onChange:e=>i(e.target.value),children:[(0,G.jsx)(`option`,{value:``,disabled:!0}),_.map(e=>(0,G.jsx)(`option`,{value:e.key,children:e.label},e.key))]}),(0,G.jsx)(`label`,{htmlFor:`board`,className:`absolute left-6 top-4 text-[#C8C8C8] transition-all duration-100 ease-in-out 
								peer-focus:text-sm peer-focus:-translate-y-6 peer-focus:bg-white peer-focus:text-[#8B5CF6] 
								peer-valid:-translate-y-6 peer-valid:text-sm peer-valid:bg-white peer-valid:text-[#8B5CF6]
							    `,children:`게시판`}),(0,G.jsx)(`label`,{htmlFor:`board`,className:`absolute hidden left-6 -top-2 text-sm bg-white text-red-500 peer-user-invalid:block`,children:`게시판을 선택하세요.`})]}),(0,G.jsx)(`div`,{className:`relative w-full px-6 py-4 rounded-xl bg-white border-1 border-[#E5E7EB] outline-none user-invalid:border-red-500`,children:(0,G.jsx)(Fd,{id:`title`,required:!0,value:a,onChange:e=>o(e.target.value),validationText:`제목을 입력하세요`,children:`제목`})}),(0,G.jsx)(Rd,{imgFiles:p,setImgFiles:m,isMulti:!0}),r===`resources`&&(0,G.jsxs)(`div`,{children:[(0,G.jsx)(`h3`,{className:`text-lg font-semibold text-gray-800 mb-3`,children:`파일 첨부`}),(0,G.jsx)(Wd,{uploadedFiles:h,setUploadedFiles:g,isMulti:!0,maxFileSizeMB:10,label:`자료 파일을 업로드하세요`})]}),(0,G.jsxs)(`div`,{className:`relative w-full px-6 py-4 rounded-xl bg-white border-1 border-[#E5E7EB] outline-none user-invalid:border-red-500`,children:[(0,G.jsx)(`textarea`,{id:`content`,rows:15,className:`peer w-full resize-none outline-none align-middle`,required:!0,wrap:`hard`,value:s,onChange:e=>c(e.target.value)}),(0,G.jsx)(`label`,{htmlFor:`content`,className:`absolute left-6 top-4 text-[#C8C8C8] transition-all duration-100 ease-in-out 
								peer-focus:text-sm peer-focus:-translate-y-6 peer-focus:bg-white peer-focus:text-[#8B5CF6]
								peer-valid:-translate-y-6 peer-valid:text-sm peer-valid:bg-white peer-valid:text-[#8B5CF6]`,children:`내용`}),(0,G.jsx)(`label`,{htmlFor:`content`,className:`absolute hidden left-6 -top-2 bg-white text-sm text-red-500 peer-user-invalid:block `,children:`내용을 입력하세요.`})]}),(0,G.jsxs)(`div`,{className:`flex flex-col`,children:[(0,G.jsxs)(`div`,{className:`relative w-full px-6 py-4 rounded-xl bg-white border-1 border-[#E5E7EB] outline-none user-invalid:border-red-500`,children:[d.length<10&&(0,G.jsx)(`div`,{children:(0,G.jsx)(Fd,{id:`hashTag`,type:`text`,value:l,onChange:e=>u(e.target.value),onKeyDown:e=>x(e),children:`해시태그`})}),d.length>=10&&(0,G.jsx)(`div`,{children:(0,G.jsx)(Fd,{id:`hashTag`,type:`text`,readOnly:!0,value:`해시태그는 10개까지 입력이 가능합니다.`,onChange:e=>u(e.target.value),onKeyDown:e=>x(e)})})]}),(0,G.jsx)(`p`,{className:`mt-2 text-xs text-[#C8C8C8]`,children:`예: 수학, AI, 공부법 (각각 태그 입력 후 Enter)`}),(0,G.jsx)(`div`,{className:`flex flex-wrap gap-2 mt-2 max-w-[920px]`,children:d&&d.map((e,t)=>(0,G.jsx)(`div`,{children:(0,G.jsxs)(`button`,{id:`tag`,type:`button`,className:`px-3 py-2 bg-[#EDE9FE] text-[#8B5CF6] text-sm rounded-lg text-left break-all cursor-pointer`,onClick:()=>y(t),children:[`#`+e,` x`]})},e))})]})]}),(0,G.jsxs)(`div`,{className:`flex justify-end mt-7 gap-2`,children:[(0,G.jsx)(L,{to:`/posts`,className:`px-4 py-2.5 text-sm rounded-xl bg-white text-[#8B5CF6]
						font-Regular hover:bg-[#B08DFF] hover:text-white cursor-pointer border-1 border-[#8B5CF6]`,children:`취소`}),(0,G.jsx)(`button`,{type:`submit`,className:`px-4 py-2.5 text-sm text-white rounded-xl bg-[#8B5CF6]  hover:bg-[#B08DFF] cursor-pointer`,children:t?`수정`:`등록`})]})]})]})})}var qd=e=>/^[0-9a-fA-F-]{36}$/.test(e)&&(e.match(/-/g)?.length??0)===4,Jd=e=>`${e.getFullYear()}년 ${e.getMonth()+1}월 ${e.getDate()}일 ${[`일`,`월`,`화`,`수`,`목`,`금`,`토`][e.getDay()]}요일`,Yd=e=>e.toISOString().slice(0,10);function Xd(){let e=Je(),{groupId:t=``}=Qe(),n=W(e=>e.currentUserId),r=W(e=>e.isLoggedIn),i=W(e=>e.profile),[a,o]=(0,b.useState)(null),[s,c]=(0,b.useState)(``),[l,u]=(0,b.useState)([]),[d,f]=(0,b.useState)(``),[p,m]=(0,b.useState)(!1),h=(0,b.useMemo)(()=>new Date,[]),g=(0,b.useMemo)(()=>Yd(h),[h]),_=(0,b.useMemo)(()=>Jd(h),[h]),v=async e=>{let t=decodeURIComponent(e);if(qd(t)){let{data:e,error:n}=await U.from(`groups`).select(`id,name`).eq(`id`,t).maybeSingle();if(n)throw n;if(e)return e}let{data:n,error:r}=await U.from(`groups`).select(`id,name`).eq(`name`,t).maybeSingle();if(r)throw r;if(!n)throw Error(`그룹을 찾을 수 없습니다.`);return n},y=async(e,t,n)=>{let r=`${t} 출석`,i=`${Jd(new Date(t))} 출석`,{data:a,error:o}=await U.from(`posts`).select(`id`).eq(`group_id`,e).eq(`board_type`,`group`).eq(`group_board_type`,`attendance`).eq(`title`,r).order(`created_at`,{ascending:!1}).limit(1);if(o)throw o;if(a&&a.length>0&&a[0]?.id)return a[0].id;let{data:s,error:c}=await U.from(`posts`).insert([{board_type:`group`,group_board_type:`attendance`,group_id:e,title:r,content:i,user_id:n,hash_tag:[]}]).select(`id`).limit(1);if(c)throw c;let l=s?.[0]?.id;if(!l)throw Error(`출석 게시글 생성 실패`);return l},x=async e=>{let{data:t,error:r}=await U.from(`comments`).select(`
        id, content, created_at, user_id,
        users(
          nickname,
          profile_image_url,
          representative_badge_id,
          major
        )
      `).eq(`post_id`,e).order(`created_at`,{ascending:!0});if(r)throw r;let a=(t??[]).map(e=>({id:e.id,content:e.content,created_at:e.created_at,user_id:e.user_id,user:{nickname:e.users?.nickname??`unknown`,profile_image_url:e.users?.profile_image_url??null,representative_badge_id:e.users?.representative_badge_id??null,major:e.users?.major??(e.user_id===n?i?.major??null:null),badge:null}})),o=Array.from(new Set(a.map(e=>e.user.representative_badge_id).filter(Boolean))),s=new Map;if(o.length>0){let{data:e,error:t}=await U.from(`badge_logs`).select(`id, badge_id`).in(`id`,o);if(t)throw t;for(let t of e??[])t?.id&&t?.badge_id&&s.set(t.id,t.badge_id)}let c=new Set(a.filter(e=>!e.user.representative_badge_id).map(e=>e.user_id)),l=new Map;if(c.size>0){let{data:e,error:t}=await U.from(`badge_logs`).select(`user_id,badge_id,created_at`).in(`user_id`,Array.from(c)).order(`created_at`,{ascending:!1});if(t)throw t;for(let t of e??[]){let e=t.user_id;!l.has(e)&&t.badge_id&&l.set(e,t.badge_id)}}let u=new Set;for(let e of a){let t=e.user.representative_badge_id;t&&s.has(t)&&u.add(s.get(t))}for(let[,e]of l)u.add(e);let d=new Map;if(u.size>0){let{data:e,error:t}=await U.from(`badges`).select(`id, name, icon_url`).in(`id`,Array.from(u));if(t)throw t;for(let t of e??[])d.set(t.id,{id:t.id,name:t.name,icon_url:t.icon_url??null})}for(let e of a){let t=e.user.representative_badge_id,n;t&&s.has(t)&&(n=s.get(t)),!n&&l.has(e.user_id)&&(n=l.get(e.user_id)),n&&(e.user.badge=d.get(n)??null)}return a},S=async()=>{let e=d.trim();if(e&&!(!s||!a?.id)){if(!r||!n){alert(`로그인이 필요합니다.`);return}try{m(!0);let{data:t,error:r}=await U.from(`comments`).select(`id`).eq(`post_id`,s).eq(`user_id`,n).maybeSingle();if(r)throw r;if(t){alert(`이미 출석하셨습니다.`);return}let a={id:`tmp_${Date.now()}`,content:e,created_at:new Date().toISOString(),user_id:n,user:{nickname:i?.nickname??`me`,profile_image_url:i?.profile_image_url??null,representative_badge_id:i?.representative_badge_id??null,major:i?.major??null,badge:null}};u(e=>[...e,a]),f(``);let{error:o}=await U.from(`comments`).insert([{post_id:s,user_id:n,content:e}]);if(o)throw o;let c=await x(s);u(c)}catch(e){if(console.error(`[attendance submit error]`,e),alert(`출석 등록에 실패했습니다.`),s)try{let e=await x(s);u(e)}catch{}}finally{m(!1)}}},C=async(e,t)=>{let{data:n,error:r}=await U.from(`group_members`).select(`id`).eq(`group_id`,e).eq(`user_id`,t).maybeSingle();if(r)throw r;return!!n};return(0,b.useEffect)(()=>{let i=!0;return(async()=>{try{if(!r||!n){alert(`로그인 후 이용할 수 있습니다.`),e(`/groups`,{replace:!0});return}let a=await v(t);if(!i)return;if(o(a),!await C(a.id,n)){alert(`이 그룹의 멤버만 출석을 볼 수 있어요.`),e(`/groups`,{replace:!0});return}let s=await y(a.id,g,n);if(!i)return;c(s);let l=await x(s);if(!i)return;u(l)}catch(t){console.error(`[attendance init error]`,t),alert(`출석 데이터를 불러오지 못했습니다.`),e(`/groups`,{replace:!0})}})(),()=>{i=!1}},[t,e,r,n,g]),(0,G.jsxs)(`div`,{className:`w-[920px] mx-auto`,children:[(0,G.jsx)(`div`,{className:`mt-6 mb-4 border-b border-gray-200 pb-3`,children:(0,G.jsxs)(`h3`,{className:`text-[20px] font-semibold`,children:[_,` 출석 현황`]})}),l.length===0?(0,G.jsx)(`p`,{className:`text-center text-gray-500 py-16`,children:`아직 아무도 출석하지 않았습니다…`}):(0,G.jsx)(`ul`,{className:`space-y-3`,children:l.map(e=>(0,G.jsx)(`li`,{className:`rounded-xl bg-white border border-gray-200 px-4 py-3 shadow-sm`,children:(0,G.jsxs)(`div`,{className:`flex items-start justify-between`,children:[(0,G.jsxs)(`div`,{className:`flex items-center gap-3`,children:[(0,G.jsx)(`div`,{className:`h-8 w-8 rounded-full bg-gray-200 overflow-hidden`,children:e.user.profile_image_url?(0,G.jsx)(`img`,{src:e.user.profile_image_url,alt:e.user.nickname,className:`h-8 w-8 object-cover`}):null}),(0,G.jsxs)(`div`,{children:[(0,G.jsxs)(`div`,{className:`flex items-center gap-2`,children:[(0,G.jsx)(`span`,{className:`text-sm font-medium`,children:e.user.nickname}),e.user.badge?(0,G.jsxs)(`span`,{className:`inline-flex items-center gap-1 text-[11px] px-1.5 py-0.5 rounded `,children:[e.user.badge.icon_url?(0,G.jsx)(`img`,{src:e.user.badge.icon_url,alt:e.user.badge.name,className:`h-3 w-3 object-contain`}):null,e.user.badge.name]}):null,e.user.major?(0,G.jsx)(`span`,{className:`text-[12px] text-gray-500`,children:e.user.major}):null]}),(0,G.jsx)(`p`,{className:`text-[13px] text-gray-600 mt-1 break-words`,children:e.content})]})]}),(0,G.jsx)(`span`,{className:`text-[12px] text-gray-400 mt-1`,children:new Date(e.created_at).toLocaleDateString(`ko-KR`)})]})},e.id))}),(0,G.jsxs)(`div`,{className:`flex items-center gap-2 mt-6`,children:[(0,G.jsx)(`input`,{type:`text`,placeholder:`댓글을 작성해주세요.`,className:`flex-1 h-10 rounded-xl border border-gray-300 px-3 text-sm outline-none focus:ring-2 focus:ring-violet-300`,value:d,onChange:e=>f(e.target.value),onKeyDown:e=>{e.key===`Enter`&&!e.nativeEvent.isComposing&&S()}}),(0,G.jsx)(`button`,{type:`button`,onClick:S,disabled:p||!d.trim(),className:`h-10 px-4 rounded-xl bg-[#8B5CF6] text-white text-sm hover:bg-[#7C3AED] disabled:opacity-60`,children:p?`등록 중…`:`등록`})]})]})}var Zd=u(S());function Qd(e){let t=(0,Zd.c)(20),{members:n,userId:r}=e,{unFollowUserFnc:i,removeFriend:a}=K(),o;t[0]!==a||t[1]!==i||t[2]!==r?(o=async e=>{await i(r,e),a(r,e)},t[0]=a,t[1]=i,t[2]=r,t[3]=o):o=t[3];let s=o,[c,l]=(0,b.useState)(1),u=Math.ceil(n.length/12),d,f;if(t[4]!==c||t[5]!==s||t[6]!==n){let e=n.slice((c-1)*12,c*12);d=`w-full grid grid-cols-2 gap-2`;let r;t[9]===s?r=t[10]:(r=e=>(0,G.jsx)(`div`,{className:`bg-white rounded-xl`,children:(0,G.jsx)(bu,{friend:e,onUnfollow:()=>s(e.users.auth_id)},e.users?.auth_id)}),t[9]=s,t[10]=r),f=e.map(r),t[4]=c,t[5]=s,t[6]=n,t[7]=d,t[8]=f}else d=t[7],f=t[8];let p;t[11]!==d||t[12]!==f?(p=(0,G.jsx)(`div`,{className:d,children:f}),t[11]=d,t[12]=f,t[13]=p):p=t[13];let m;t[14]!==c||t[15]!==u?(m=(0,G.jsx)(pu,{currentPage:c,totalPages:u,onPageChange:l}),t[14]=c,t[15]=u,t[16]=m):m=t[16];let h;return t[17]!==p||t[18]!==m?(h=(0,G.jsxs)(G.Fragment,{children:[p,m]}),t[17]=p,t[18]=m,t[19]=h):h=t[19],h}var $d=u(S());function ef(){let e=(0,$d.c)(3),t;e[0]===Symbol.for(`react.memo_cache_sentinel`)?(t=(0,G.jsx)(`div`,{className:`w-[160px] h-[40px] rounded-xl skeleton-40 mb-4`}),e[0]=t):t=e[0];let n;e[1]===Symbol.for(`react.memo_cache_sentinel`)?(n=(0,G.jsxs)(`div`,{className:`w-full`,children:[t,(0,G.jsxs)(`div`,{className:`flex flex-row justify-between pb-1`,children:[(0,G.jsx)(`div`,{className:`flex flex-row gap-2`,children:Array.from({length:4}).map(nf)}),(0,G.jsx)(`div`,{className:`w-17 h-8 rounded-xl skeleton-40`})]})]}),e[1]=n):n=e[1];let r;return e[2]===Symbol.for(`react.memo_cache_sentinel`)?(r=(0,G.jsxs)(G.Fragment,{children:[n,(0,G.jsx)(`div`,{className:`w-full grid grid-cols-2 gap-2 border-t border-gray-200 mt-2 pt-6 `,children:Array.from({length:4}).map(tf)})]}),e[2]=r):r=e[2],r}function tf(e,t){return(0,G.jsxs)(`div`,{className:`bg-white rounded-xl flex flex-row items-center justify-between p-4`,children:[(0,G.jsx)(`div`,{className:`w-15 h-15 rounded-full skeleton-40`}),(0,G.jsxs)(`div`,{className:`w-50 space-y-3`,children:[(0,G.jsx)(`div`,{className:`w-18 h-6 rounded-md skeleton-40`}),(0,G.jsx)(`div`,{className:`w-15 h-4 rounded-md skeleton-40`})]}),(0,G.jsx)(`div`,{className:`w-25 h-8 rounded-lg skeleton-40`})]},t)}function nf(e,t){return(0,G.jsx)(`div`,{className:`w-[88px] h-[32px] rounded-xl skeleton-40`},t)}var rf=u(S());function af(){let e=(0,rf.c)(4),t;e[0]===Symbol.for(`react.memo_cache_sentinel`)?(t=(0,G.jsx)(`div`,{className:`w-[160px] h-[40px] rounded-xl skeleton-40 mb-4`}),e[0]=t):t=e[0];let n;e[1]===Symbol.for(`react.memo_cache_sentinel`)?(n=(0,G.jsxs)(`div`,{className:`w-full`,children:[t,(0,G.jsxs)(`div`,{className:`flex flex-row justify-between pb-1`,children:[(0,G.jsx)(`div`,{className:`flex flex-row gap-2`,children:Array.from({length:4}).map(sf)}),(0,G.jsx)(`div`,{className:`w-17 h-8 rounded-xl skeleton-40`})]})]}),e[1]=n):n=e[1];let r;e[2]===Symbol.for(`react.memo_cache_sentinel`)?(r=(0,G.jsx)(`div`,{className:`w-full my-6 border-b border-gray-200 pb-3`,children:(0,G.jsx)(`div`,{className:`w-80 h-7 rounded-xl skeleton-40`})}),e[2]=r):r=e[2];let i;return e[3]===Symbol.for(`react.memo_cache_sentinel`)?(i=(0,G.jsxs)(G.Fragment,{children:[n,(0,G.jsxs)(`div`,{children:[r,(0,G.jsxs)(`div`,{className:`space-y-3`,children:[(0,G.jsx)(`div`,{className:`w-full h-17 rounded-xl skeleton-40`}),(0,G.jsx)(`div`,{className:`w-full h-17 rounded-xl skeleton-40`}),(0,G.jsx)(`div`,{className:`w-full h-17 rounded-xl skeleton-40`})]})]})]}),e[3]=i):i=e[3],i}function sf(e,t){return(0,G.jsx)(`div`,{className:`w-[88px] h-[32px] rounded-xl skeleton-40`},t)}var cf=[{key:`notice`,label:`공지사항`},{key:`activity`,label:`활동게시판`},{key:`attendance`,label:`출석`},{key:`members`,label:`멤버`}],lf=e=>/^[0-9a-fA-F-]{36}$/.test(e)&&(e.match(/-/g)?.length??0)===4;function uf(){let e=Je(),{groupId:t=``}=Qe(),[n,r]=(0,b.useState)(cf[0].key),[i,a]=(0,b.useState)(null),[o,s]=(0,b.useState)([]),[c,l]=(0,b.useState)([]),[u,d]=(0,b.useState)(!0),{currentUserId:f,isLoggedIn:p}=W(),{fetchUserFollowings:m}=K(),[h,g]=(0,b.useState)(1),_=Array.isArray(c)?c:[],v=(0,b.useMemo)(()=>Math.max(1,Math.ceil(_.length/4)),[_.length]),y=(0,b.useMemo)(()=>_.slice((h-1)*4,h*4),[_,h,4]),x=async e=>{let t=decodeURIComponent(e);if(lf(t)){let{data:e,error:n}=await U.from(`groups`).select(`id,name`).eq(`id`,t).maybeSingle();if(n)throw n;if(e)return e}let{data:n,error:r}=await U.from(`groups`).select(`id,name`).eq(`name`,t).maybeSingle();if(r)throw r;if(!n)throw Error(`그룹을 찾을 수 없습니다.`);return n},S=async(e,t)=>{if(t===`attendance`||t===`members`)return[];let n=U.from(`posts`).select(`
        id, user_id, board_type, title, content, created_at,
        adopted_comment_id, hash_tag, group_id, group_board_type,
        users(nickname),
        likes:post_likes(id),
        comments:comments!comments_post_id_fkey(id)
        `).eq(`group_id`,e).eq(`board_type`,`group`).order(`created_at`,{ascending:!1});t===`notice`&&(n=n.eq(`group_board_type`,`notice`)),t===`activity`&&(n=n.eq(`group_board_type`,`activity`));let{data:r,error:i}=await n;if(i)throw i;return r??[]};return(0,b.useEffect)(()=>{let r=!0;return(async()=>{try{if(d(!0),g(1),!p||!f)return;let i=await x(t);if(!r)return;a(i);let{data:o,error:c}=await U.from(`group_members`).select(`*`).eq(`group_id`,i.id).eq(`user_id`,f).maybeSingle();if(c)throw c;if(!o){alert(`이 그룹의 멤버만 접근할 수 있어요.`),e(`/groups`,{replace:!0});return}if(n===`members`){let e=await m(f,i.id);if(!r)return;s(Array.isArray(e)?e:[])}let u=await S(i.id,n);if(!r)return;l(Array.isArray(u)?u:[])}catch(t){console.error(`[group list error]`,t),r&&(a(null),l([]),alert(`그룹 게시글을 불러오지 못했어요.`),e(`/groups`,{replace:!0}))}finally{r&&d(!1)}})(),()=>{r=!1}},[t,n,p,f,e,m]),u||!p||!f?(0,G.jsx)(`div`,{className:`w-[920px]`,children:n===`notice`||n===`activity`?(0,G.jsx)(qu,{}):n===`attendance`?(0,G.jsx)(af,{}):(0,G.jsx)(ef,{})}):(0,G.jsxs)(`div`,{className:`w-[920px]`,children:[(0,G.jsxs)(`div`,{className:`flex items-center justify-between`,children:[(0,G.jsx)(`h2`,{className:`text-[28px] md:text-[32px] font-semibold tracking-tight`,children:i?.name??`그룹`}),n!==`attendance`&&n!==`members`&&i?.id&&(0,G.jsx)(`button`,{type:`button`,onClick:()=>e(`/groups/${i.id}/posts/create`),className:`inline-flex h-9 items-center rounded-xl bg-[#8B5CF6] px-4 text-sm font-medium text-white hover:bg-[#7C3AED] focus:outline-none focus:ring-2 focus:ring-violet-300`,children:`새 글 작성`})]}),(0,G.jsx)(`div`,{className:`mt-4`,children:(0,G.jsx)(Bu,{activeTab:n,setActiveTab:r,title:``,tabs:cf})}),(0,G.jsxs)(`div`,{className:`border-t border-gray-300 mt-2 pt-6`,children:[(n===`notice`||n===`activity`)&&(0,G.jsxs)(`div`,{children:[_.length===0?(0,G.jsx)(`p`,{className:`mt-12 text-center text-sm text-gray-500`,children:`게시글이 없습니다.`}):(0,G.jsx)(Gu,{posts:y,groupId:i?.id}),(0,G.jsx)(pu,{currentPage:h,totalPages:v,onPageChange:g})]}),n===`attendance`&&(0,G.jsx)(Xd,{}),n===`members`&&(0,G.jsx)(Qd,{members:Array.isArray(o)?o:[],userId:f})]})]})}function df({comments:e=[],postId:t,adopted_comment_id:n,writerId:r,onReload:i}){let a=Je(),[o,s]=(0,b.useState)(``),[c,l]=(0,b.useState)({nickname:``,userId:``,commentId:``}),u=W(e=>e.currentUserId),[d,f]=(0,b.useState)(!1),p=(0,b.useRef)(null),m=[`😀`,`😃`,`😄`,`😁`,`😆`,`😅`,`😂`,`🤣`,`😊`,`😇`,`🙂`,`🙃`,`😉`,`😌`,`😍`],h=e=>{s(t=>t+e),f(!1)};(0,b.useEffect)(()=>{let e=e=>{p.current&&!p.current.contains(e.target)&&f(!1)};return d&&document.addEventListener(`mousedown`,e),()=>document.removeEventListener(`mousedown`,e)},[d]);let g=(0,b.useMemo)(()=>{let t={};return(Array.isArray(e)?e:[]).forEach(e=>{e?.parent_comment_id&&(t[e.parent_comment_id]||(t[e.parent_comment_id]=[]),t[e.parent_comment_id].push(e.id))}),t},[e]),_=async e=>{if(e.preventDefault(),!u){alert(`로그인이 필요합니다.`),a(`/login`);return}let n=o.trim();if(n)try{if(c.userId){let{error:e}=await U.from(`comments`).insert([{post_id:t,user_id:u,content:n,parent_comment_id:c.commentId}]);if(e)throw e;l({nickname:``,userId:``,commentId:``})}else{let{error:e}=await U.from(`comments`).insert([{post_id:t,user_id:u,content:n}]);if(e)throw e}s(``),await i(),alert(`댓글이 등록되었습니다.`)}catch(e){console.error(e),alert(`댓글 등록에 실패했습니다.`)}},v=async e=>{if(!u){alert(`로그인이 필요합니다.`),a(`/login`);return}if(e.comment_likes?.some(e=>e.user_id===u)){alert(`이미 좋아요를 눌렀습니다.`);return}try{let{error:t}=await U.from(`comment_likes`).insert([{user_id:u,comment_id:e.id}]);if(t)throw t;await i(),alert(`좋아요 완료`)}catch(e){console.error(e),alert(`좋아요 실패`)}},y=e=>{e.user.nickname&&l({nickname:e.user.nickname,userId:e.user.auth_id,commentId:e.id})},x=e=>{e.key===`Backspace`&&!o&&l({nickname:``,userId:``,commentId:``})},S=async e=>{try{let{error:n}=await U.from(`posts`).update({adopted_comment_id:e.id}).eq(`id`,t);if(n)throw n;await i(),alert(`채택되었습니다.`)}catch(e){console.error(e),alert(`채택 실패`)}};function C({comment:e}){let t=n===e.id?`border-1 border-[#EA489A]`:``,i=!!r&&!!u&&u===r&&u!==e.user_id&&!n;return(0,G.jsxs)(`div`,{className:`relative z-10 group w-full px-4 py-3 mt-4 rounded-xl bg-white shadow-[0_4px_20px_rgba(0,0,0,0.05)] `+t,children:[i&&(0,G.jsx)(q,{type:`button`,onClick:()=>S(e),className:`absolute -top-4 right-4 z-10 opacity-0 translate-y-[-10px] group-hover:opacity-100 group-hover:translate-y-0 transition-all duration-200 hover:bg-[#8B5CF6] hover:text-white px-3 py-1 text-xs border-1 border-[#8B5CF6] rounded-2xl bg-white`,children:`채택`}),n===e.id&&(0,G.jsxs)(`span`,{className:`flex items-center absolute -top-4 left-4 z-10 px-3 py-1 text-xs rounded-2xl bg-linear-to-r text-white from-[#EA489A] to-[#FF84C2]`,children:[`채택된 댓글`,(0,G.jsx)(`img`,{src:`/src/assets/fire.png`,className:`ml-0.5 mb-0.5`})]}),(0,G.jsxs)(`div`,{className:`flex justify-between items-start mb-1`,children:[(0,G.jsxs)(`div`,{className:`flex gap-1 items-center`,children:[(0,G.jsx)(`div`,{className:`w-[35px] h-[35px]`,children:(0,G.jsx)(`img`,{className:`w-full h-full rounded-full object-cover`,src:Wc,alt:`userImg`})}),(0,G.jsx)(`div`,{children:(0,G.jsxs)(`p`,{className:`text-sm`,children:[e.user.nickname??`unknown`,(0,G.jsx)(`span`,{className:`text-xs text-[#6B7280] ml-1`,children:e.user.birth_date?Rc(Lc(e.user.birth_date)):``})]})})]}),(0,G.jsxs)(`div`,{className:`flex gap-3`,children:[(0,G.jsxs)(`button`,{type:`button`,onClick:()=>v(e),className:`flex gap-1 items-start cursor-pointer`,children:[(0,G.jsx)(Ys,{color:`red`,size:15,className:`mt-0.5`}),(0,G.jsx)(`p`,{className:`text-[14px]`,children:e.comment_likes?.length??0})]}),!e.parent_comment_id&&(0,G.jsxs)(`button`,{type:`button`,onClick:()=>y(e),className:`flex gap-1 items-start cursor-pointer`,children:[(0,G.jsx)(Zs,{color:`#8B5CF6`,size:15,className:`mt-0.5`}),(0,G.jsx)(`p`,{className:`text-[14px]`,children:g[e.id]?.length??0})]})]})]}),(0,G.jsxs)(`p`,{className:`mt-3 mb-2 text-sm font-Regular text-[#6B7280]`,children:[e.parent_comment_id&&e.parentNickname&&(0,G.jsxs)(`span`,{className:`text-[#8B5CF6] text-sm mr-1 font-medium`,children:[`@`,e.parentNickname]}),e.content]}),(0,G.jsx)(`div`,{className:`flex justify-end`,children:(0,G.jsx)(`p`,{className:`text-xs text-[#6B7280]`,children:(e.created_at??``).slice(0,10)})})]})}function w({items:e}){let t=Array.isArray(e)?e:[];return(0,G.jsx)(G.Fragment,{children:t.map(e=>(0,G.jsxs)(`div`,{className:`flex flex-col`,children:[!e.parent_comment_id&&(0,G.jsx)(C,{comment:e}),g[e.id]?.map(e=>{let n=t.find(t=>t.id===e);return n?(0,G.jsx)(C,{comment:n},n.id):null})]},e.id))})}let T=(0,b.useMemo)(()=>(Array.isArray(e)?e:[]).find(e=>e.id===n)??null,[e,n]);return(0,G.jsxs)(`div`,{className:`h-full flex flex-col`,children:[!Array.isArray(e)||e.length===0?(0,G.jsx)(`div`,{className:`text-center text-gray-500 py-12`,children:`현재 게시물에 등록된 댓글이 없습니다.`}):(0,G.jsxs)(`div`,{className:`flex-1 flex flex-col pr-2 overflow-y-auto scrollbar-custom`,children:[T?(0,G.jsx)(C,{comment:T}):(0,G.jsx)(`div`,{className:`text-center text-gray-500 py-10`,children:`채택된 댓글이 없습니다.`}),(0,G.jsx)(`div`,{className:`border-t border-gray-300 mt-3.5`}),(0,G.jsx)(w,{items:e})]}),(0,G.jsxs)(`form`,{className:`flex gap-2 mt-4 w-full`,onSubmit:_,children:[(0,G.jsxs)(`div`,{className:`relative flex-1 text-sm px-6 py-3 border-1 border-[#E5E7EB] rounded-xl bg-white`,onKeyDown:x,children:[c.nickname&&(0,G.jsxs)(`span`,{className:`text-[#8B5CF6] text-sm mr-1 font-medium`,children:[`@`,c.nickname]}),(0,G.jsx)(`input`,{placeholder:`댓글을 작성해주세요.`,value:o,onChange:e=>s(e.target.value),className:`w-full focus:outline-none`}),(0,G.jsx)(q,{type:`button`,className:`absolute right-2 top-1/2 -translate-y-1/2 text-gray-400 hover:text-[#8B5CF6]`,onClick:()=>f(e=>!e),children:(0,G.jsx)(ec,{size:20})}),d&&(0,G.jsx)(`div`,{ref:p,className:`absolute z-30 bottom-full right-0 mb-2 bg-white border rounded-lg shadow-md p-2 grid grid-cols-10 gap-1`,children:m.map(e=>(0,G.jsx)(q,{type:`button`,onClick:()=>h(e),className:`text-lg hover:bg-gray-100 rounded p-1`,children:e},e))})]}),(0,G.jsx)(q,{type:`submit`,className:`px-4 py-2 text-sm text-white rounded-xl bg-[#8B5CF6]`,children:`등록`})]})]})}function ff(){let e=Je(),{groupId:t=``,postId:n=``}=Qe(),r=W(e=>e.currentUserId),[i,a]=(0,b.useState)(!0),[o,s]=(0,b.useState)(null),[c,l]=(0,b.useState)(!1),[u,d]=(0,b.useState)([]);(0,b.useEffect)(()=>{let i=!0;return(async()=>{try{if(a(!0),!t||!n){e(`/groups`,{replace:!0});return}let{data:o,error:c}=await U.from(`posts`).select(`
            id, title, content, created_at, user_id, group_id, group_board_type, adopted_comment_id,
            users(nickname),
            files:files(file_path, file_name)
          `).eq(`id`,n).eq(`group_id`,t).maybeSingle();if(c)throw c;if(!o){alert(`게시글을 찾을 수 없습니다.`),e(`/groups/${t}/posts`,{replace:!0});return}let u=!1;if(r){let{data:e,error:t}=await U.from(`post_likes`).select(`id`).eq(`post_id`,n).eq(`user_id`,r).maybeSingle();!t&&e&&(u=!0)}let{data:f,error:p}=await U.from(`comments`).select(`
            id, post_id, user_id, content, created_at, parent_comment_id,
            users:users(auth_id, nickname, birth_date, representative_badge_id),
            comment_likes(id, user_id)
          `).eq(`post_id`,n).order(`created_at`,{ascending:!0});if(p)throw p;let m=(f??[]).map(e=>({id:e.id,post_id:e.post_id,user_id:e.user_id,content:e.content??``,created_at:e.created_at??``,parent_comment_id:e.parent_comment_id??null,user:{auth_id:e.users?.auth_id??``,nickname:e.users?.nickname??null,birth_date:e.users?.birth_date??null,representative_badge_id:e.users?.representative_badge_id??null},comment_likes:e.comment_likes??[]})),h=new Map(m.map(e=>[e.id,e.user.nickname??`unknown`])),g=m.map(e=>e.parent_comment_id?{...e,parentNickname:h.get(e.parent_comment_id)??``}:e);if(!i)return;s(o),l(u),d(g)}catch(n){console.error(`[group detail load error]`,n),alert(`게시글을 불러오지 못했습니다.`),e(`/groups/${t}/posts`,{replace:!0})}finally{i&&a(!1)}})(),()=>{i=!1}},[t,n,r,e]);let f=async()=>{if(!r){alert(`로그인이 필요합니다.`),e(`/login`);return}if(o)try{let{data:e,error:t}=await U.from(`post_likes`).select(`id`).eq(`post_id`,o.id).eq(`user_id`,r).maybeSingle();if(t)throw t;if(e){alert(`이미 좋아요를 눌렀습니다.`),l(!0);return}let{error:n}=await U.from(`post_likes`).insert([{post_id:o.id,user_id:r}]);if(n)throw n;l(!0),alert(`좋아요 완료`)}catch(e){console.error(`[like error]`,e),alert(`좋아요 처리에 실패했습니다.`)}};if(i)return(0,G.jsx)(`p`,{className:`mt-5 text-sm text-gray-500`,children:`불러오는 중…`});if(!o)return null;let p=o.user_id??``;return(0,G.jsxs)(`div`,{className:`max-w-[1200px] h-[750px] flex flex-row gap-15 overflow-hidden`,children:[(0,G.jsxs)(`div`,{className:`max-w-[800px] w-[760px]`,children:[(0,G.jsxs)(`div`,{className:`flex flex-row justify-between`,children:[(0,G.jsxs)(L,{to:`/groups/${t}/posts`,className:`flex flex-row relative group px-4 py-2.5 text-sm text-white rounded-xl bg-[#8B5CF6] cursor-pointer overflow-hidden`,children:[(0,G.jsx)(`span`,{className:`mr-1`,children:`←`}),(0,G.jsx)(`span`,{className:`inline-block transition-all duration-300 ease-in-out max-w-0 overflow-hidden align-middle group-hover:max-w-xs whitespace-nowrap`,children:`그룹으로 돌아가기`})]}),o.user_id===r&&(0,G.jsxs)(`div`,{className:`flex gap-2`,children:[(0,G.jsx)(L,{to:`/posts/create/${o.id}`,className:`px-4 py-2.5 text-sm text-white rounded-xl bg-[#8B5CF6]`,children:`수정`}),(0,G.jsx)(`button`,{type:`button`,onClick:async()=>{if(confirm(`정말 삭제하시겠어요?`))try{let{error:n}=await U.from(`posts`).delete().eq(`id`,o.id);if(n)throw n;alert(`삭제되었습니다.`),e(`/groups/${t}/posts`)}catch(e){console.error(e),alert(`삭제에 실패했습니다.`)}},className:`px-4 py-2.5 text-sm text-[#8B5CF6] rounded-xl bg-white border-1 border-[#8B5CF6]`,children:`삭제`})]})]}),(0,G.jsxs)(`div`,{className:`group mt-5 h-[700px] overflow-y-auto scrollbar-custom`,children:[(0,G.jsxs)(`div`,{className:`flex flex-row items-center justify-between`,children:[(0,G.jsx)(`h1`,{className:`font-bold text-[32px] text-[#8B5CF6]`,children:o.title??`(제목 없음)`}),(0,G.jsx)(`button`,{type:`button`,onClick:f,className:`opacity-0 group-hover:opacity-100 transition-opacity duration-300`,"aria-label":`좋아요`,children:c?(0,G.jsx)(Ys,{color:`white`,size:40,className:`p-2 bg-[#EA489A] border-1 border-[#EA489A] rounded-4xl align-middle`}):(0,G.jsx)(Ys,{color:`#EA489A`,size:40,className:`p-2 bg-white border-1 border-[#EA489A] rounded-4xl align-middle`})})]}),(0,G.jsxs)(`p`,{className:`mt-2 text-sm text-[#6B7280]`,children:[`작성자: `,o.users?.nickname??`unknown`,` | `,(o.created_at??``).slice(0,10)]}),(0,G.jsxs)(`div`,{className:`my-8`,children:[o.content&&(0,G.jsx)(`pre`,{className:`whitespace-pre-wrap`,children:o.content}),(0,G.jsx)(`div`,{className:`mt-2 space-y-3`,children:(o.files??[]).map(e=>(0,G.jsx)(`img`,{src:e.file_path,alt:e.file_name??``,className:`max-h-80 rounded-xl border border-gray-100 object-contain`},e.file_path))})]})]})]}),(0,G.jsx)(`div`,{className:`w-[500px] h-[700px] flex flex-col`,children:(0,G.jsx)(df,{comments:u??[],postId:o.id,adopted_comment_id:o.adopted_comment_id??null,writerId:p,onReload:async()=>{let{data:e,error:t}=await U.from(`comments`).select(`
                id, post_id, user_id, content, created_at, parent_comment_id,
                users:users(auth_id, nickname, birth_date, representative_badge_id),
                comment_likes(id, user_id)
              `).eq(`post_id`,n).order(`created_at`,{ascending:!0});if(t)return;let r=(e??[]).map(e=>({id:e.id,post_id:e.post_id,user_id:e.user_id,content:e.content??``,created_at:e.created_at??``,parent_comment_id:e.parent_comment_id??null,user:{auth_id:e.users?.auth_id??``,nickname:e.users?.nickname??null,birth_date:e.users?.birth_date??null,representative_badge_id:e.users?.representative_badge_id??null},comment_likes:e.comment_likes??[]})),i=new Map(r.map(e=>[e.id,e.user.nickname??`unknown`])),a=r.map(e=>e.parent_comment_id?{...e,parentNickname:i.get(e.parent_comment_id)??``}:e);d(a)}})})]})}var pf=[{key:`notice`,label:`그룹-공지사항`},{key:`activity`,label:`그룹-활동게시판`}],mf=e=>/^[0-9a-fA-F-]{36}$/.test(e)&&(e.match(/-/g)?.length??0)===4;function hf(){let e=Je(),{groupId:t=``}=Qe(),n=W(e=>e.profile),[r,i]=(0,b.useState)(`notice`),[a,o]=(0,b.useState)(``),[s,c]=(0,b.useState)(``),[l,u]=(0,b.useState)(``),[d,f]=(0,b.useState)([]),[p,m]=(0,b.useState)([]),[h,g]=(0,b.useState)(null),[_,v]=(0,b.useState)(!0),[y,x]=(0,b.useState)(!1),S=async e=>{let t=decodeURIComponent(e);if(mf(t)){let{data:e,error:n}=await U.from(`groups`).select(`id,name`).eq(`id`,t).maybeSingle();if(n)throw n;if(e)return e}let{data:n,error:r}=await U.from(`groups`).select(`id,name`).eq(`name`,t).maybeSingle();if(r)throw r;if(!n)throw Error(`그룹을 찾을 수 없습니다.`);return n};(0,b.useEffect)(()=>{let n=!0;return(async()=>{try{v(!0);let e=await S(t);if(!n)return;g(e)}catch(t){console.error(t),alert(`그룹 정보를 불러오지 못했어요.`),e(`/groups`)}finally{n&&v(!1)}})(),()=>{n=!1}},[t,e]);let C=()=>{let e=l.trim();if(e&&!(d.length>=10)){if(d.includes(e)){u(``);return}f(t=>[...t,e]),u(``)}},w=e=>{e.key===`Enter`&&!e.nativeEvent.isComposing&&(e.preventDefault(),C())},T=e=>f(t=>[...t.slice(0,e),...t.slice(e+1)]);return _?(0,G.jsxs)(`div`,{className:`min-w-250 px-4`,children:[(0,G.jsx)(`h2`,{className:`mb-6 text-[32px] font-bold`,children:`그룹 게시판 작성하기`}),(0,G.jsx)(`p`,{className:`text-sm text-gray-500`,children:`불러오는 중…`})]}):(0,G.jsxs)(`div`,{className:`min-w-250 px-4`,children:[(0,G.jsx)(`h2`,{className:`mb-6 text-[32px] font-bold`,children:`그룹 게시판 작성하기`}),(0,G.jsxs)(`form`,{method:`post`,onSubmit:async t=>{if(t.preventDefault(),!h?.id){alert(`그룹 정보가 없습니다.`);return}if(!a.trim()||!s.trim()){alert(`제목/내용을 입력하세요.`);return}if(!n?.auth_id){alert(`로그인이 필요합니다.`);return}try{x(!0);let{data:t,error:i}=await U.from(`posts`).insert([{board_type:`group`,group_id:h.id,group_board_type:r,title:a,content:s,hash_tag:d,user_id:n.auth_id}]).select(`id`).limit(1);if(i)throw i;let o=t?.[0]?.id;if(!o)throw Error(`게시글 ID를 가져오지 못했습니다.`);if(await ld(h.id),p.length>0){let e=p.map(e=>({post_id:o,file_path:e.file,file_name:e.fileName})),{error:t}=await U.from(`files`).insert(e);if(t)throw t}alert(`게시글이 등록되었습니다.`),e(`/groups/${h.id}/posts`,{replace:!0})}catch(e){console.error(e),alert(`등록에 실패했어요. 권한/RLS 정책을 확인해 주세요.`)}finally{x(!1)}},children:[(0,G.jsxs)(`div`,{className:`flex flex-col gap-5.5 px-6 py-4 rounded-xl bg-white shadow-[0_4px_20px_rgba(0,0,0,0.05)]`,children:[(0,G.jsxs)(`div`,{className:`relative px-6 py-4 rounded-xl bg-white border-1 border-[#E5E7EB]`,children:[(0,G.jsx)(`select`,{className:`w-full peer outline-none user-invalid:border-red-500`,name:`board`,id:`board`,required:!0,value:r,onChange:e=>i(e.target.value),children:pf.map(e=>(0,G.jsx)(`option`,{value:e.key,children:e.label},e.key))}),(0,G.jsx)(`label`,{htmlFor:`board`,className:`absolute left-6 top-4 text-[#C8C8C8] transition-all duration-100 ease-in-out 
              peer-focus:text-sm peer-focus:-translate-y-6 peer-focus:bg-white peer-focus:text-[#8B5CF6] 
              peer-valid:-translate-y-6 peer-valid:text-sm peer-valid:bg-white peer-valid:text-[#8B5CF6]`,children:`게시판`}),(0,G.jsx)(`label`,{htmlFor:`board`,className:`absolute hidden left-6 -top-2 text-sm bg-white text-red-500 peer-user-invalid:block`,children:`게시판을 선택하세요.`})]}),(0,G.jsx)(`div`,{className:`relative w-full px-6 py-4 rounded-xl bg-white border-1 border-[#E5E7EB] outline-none user-invalid:border-red-500`,children:(0,G.jsx)(Fd,{id:`title`,required:!0,value:a,onChange:e=>o(e.target.value),validationText:`제목을 입력하세요`,children:`제목`})}),(0,G.jsx)(Rd,{imgFiles:p,setImgFiles:m,isMulti:!0}),(0,G.jsxs)(`div`,{className:`relative w-full px-6 py-4 rounded-xl bg-white border-1 border-[#E5E7EB] outline-none user-invalid:border-red-500`,children:[(0,G.jsx)(`textarea`,{id:`content`,rows:15,className:`peer w-full resize-none outline-none align-middle`,required:!0,wrap:`hard`,value:s,onChange:e=>c(e.target.value)}),(0,G.jsx)(`label`,{htmlFor:`content`,className:`absolute left-6 top-4 text-[#C8C8C8] transition-all duration-100 ease-in-out 
              peer-focus:text-sm peer-focus:-translate-y-6 peer-focus:bg-white peer-focus:text-[#8B5CF6]
              peer-valid:-translate-y-6 peer-valid:text-sm peer-valid:bg-white peer-valid:text-[#8B5CF6]`,children:`내용`}),(0,G.jsx)(`label`,{htmlFor:`content`,className:`absolute hidden left-6 -top-2 bg-white text-sm text-red-500 peer-user-invalid:block `,children:`내용을 입력하세요.`})]}),(0,G.jsxs)(`div`,{className:`flex flex-col`,children:[(0,G.jsx)(`div`,{className:`relative w-full px-6 py-4 rounded-xl bg-white border-1 border-[#E5E7EB] outline-none user-invalid:border-red-500`,children:d.length<10?(0,G.jsx)(Fd,{id:`hashTag`,type:`text`,value:l,onChange:e=>u(e.target.value),onKeyDown:w,children:`해시태그`}):(0,G.jsx)(Fd,{id:`hashTag`,type:`text`,readOnly:!0,value:`해시태그는 10개까지 입력이 가능합니다.`})}),(0,G.jsx)(`p`,{className:`mt-2 text-xs text-[#C8C8C8]`,children:`예: 수학, AI, 공부법 (각각 태그 입력 후 Enter)`}),(0,G.jsx)(`div`,{className:`flex flex-wrap gap-2 mt-2 max-w-[920px]`,children:d.map((e,t)=>(0,G.jsx)(`div`,{children:(0,G.jsxs)(`button`,{id:`tag`,type:`button`,className:`px-3 py-2 bg-[#EDE9FE] text-[#8B5CF6] text-sm rounded-lg text-left break-all cursor-pointer`,onClick:()=>T(t),children:[`#`,e,` x`]})},`${e}-${t}`))})]})]}),(0,G.jsxs)(`div`,{className:`flex justify-end mt-7 gap-2`,children:[(0,G.jsx)(`button`,{type:`button`,onClick:()=>e(`/groups/${h?.id}/posts`),className:`px-4 py-2.5 text-sm rounded-xl bg-white text-[#8B5CF6]
            font-Regular hover:bg-[#B08DFF] hover:text-white cursor-pointer border-1 border-[#8B5CF6]`,children:`삭제`}),(0,G.jsx)(`button`,{type:`submit`,disabled:y,className:`px-4 py-2.5 text-sm text-white rounded-xl bg-[#8B5CF6] hover:bg-[#B08DFF] cursor-pointer disabled:opacity-60`,children:y?`등록 중…`:`등록`})]})]})]})}function gf(){let e=Je(),{profile:t,fetchProfile:n}=W(),[r,i]=(0,b.useState)(``),[a,o]=(0,b.useState)(``),[s,c]=(0,b.useState)(``),[l,u]=(0,b.useState)(``),[d,f]=(0,b.useState)(``),[p,m]=(0,b.useState)(``),[h,g]=(0,b.useState)(``),[_,v]=(0,b.useState)(!1),[y,x]=(0,b.useState)({}),S=async()=>{if(!a.trim())return!1;let e=await Tl(a);return e.error?(x(t=>({...t,nickname:e.error})),!0):e.exists?(x(e=>({...e,nickname:`이미 사용 중인 닉네임입니다.`})),!0):(x(e=>({...e,nickname:``})),!1)},C=async()=>{if(!h.trim())return{exists:!1};let e=await El(h);return e.error?(x(t=>({...t,childLinkCode:e.error})),{exists:!1}):e.exists?(x(e=>({...e,childLinkCode:``})),{exists:!0,childId:e.childId}):(x(e=>({...e,childLinkCode:`존재하지 않는 자녀 코드입니다.`})),{exists:!1})},w=(0,b.useCallback)(()=>{let e=kl({nickname:a,role:r,year:s,month:l,day:d,major:p,childLinkCode:h});return e.isValid?!0:(x(e.errors),!1)},[a,r,s,l,d,p,h]),T=Array.from({length:20},(e,t)=>String(new Date().getFullYear()-t)),E=Array.from({length:65},(e,t)=>String(new Date().getFullYear()-t)),D=Array.from({length:12},(e,t)=>String(t+1)),O=Array.from({length:31},(e,t)=>String(t+1)),k=r===`student`?T:E;return(0,b.useEffect)(()=>{if(r===``){c(``),u(``),f(``),m(``),g(``);return}r!==`teacher`&&m(``),r!==`teacher`&&r!==`parent`&&g(``)},[r]),(0,G.jsxs)(G.Fragment,{children:[(0,G.jsx)(`h4`,{className:`text-[28px] font-black mb-6 text-[#8b5cf6] text-center`,children:`회원 정보 입력`}),(0,G.jsxs)(`form`,{className:`w-full flex flex-col gap-4`,onSubmit:async i=>{i.preventDefault(),v(!0),x({});try{let i=kl({nickname:a,role:r,year:s,month:l,day:d,major:p,childLinkCode:h});if(!i.isValid){x(i.errors);return}if(await S()||r===`parent`&&!(await C()).exists)return;let o=`${s}-${l.padStart(2,`0`)}-${d.padStart(2,`0`)}`,c={nickname:a.trim(),role:r,birth_date:o,is_profile_completed:!0};r===`teacher`&&p.trim()&&(c.major=p.trim());let{error:u}=await U.from(`users`).update(c).eq(`auth_id`,t?.auth_id);if(u){console.error(`프로필 업데이트 오류:`,u),x({general:`프로필 저장 중 오류가 발생했습니다.`});return}if(r===`parent`&&h.trim()){let{data:e,error:n}=await U.from(`users`).select(`auth_id`).eq(`child_link_code`,h.trim()).single();!e||n?console.warn(`자녀 코드 검색 실패`,n):await U.from(`child_parent_links`).insert([{parent_id:t?.auth_id,child_id:e.auth_id}])}await n(),e(`/`,{replace:!0})}catch(e){console.error(`프로필 완성 처리 오류:`,e),x({general:`예상치 못한 오류가 발생했습니다.`})}finally{v(!1)}},children:[(0,G.jsxs)(`div`,{children:[(0,G.jsx)(`input`,{id:`login-name`,type:`text`,placeholder:`닉네임`,value:a,onChange:e=>{o(e.target.value),x(e=>({...e,nickname:``}))},onBlur:()=>{S(),w()},className:`w-full h-11 rounded-xl border px-4 outline-none transition-all ${y.nickname?`border-[#EF4444] focus:border-[#EF4444]`:`border-[#D1D5DB] focus:border-[#8B5CF6] focus:ring-2 focus:ring-[#8B5CF6]/50`}`}),y.nickname&&(0,G.jsx)(jl,{message:y.nickname})]}),(0,G.jsxs)(`div`,{children:[(0,G.jsxs)(`div`,{className:`relative`,children:[(0,G.jsxs)(`select`,{value:r,onChange:e=>{i(e.target.value),x(e=>({...e,role:``}))},onBlur:()=>w(),className:`w-full h-11 rounded-xl border px-4 pr-10 outline-none bg-white ${y.role?`border-[#EF4444] focus:border-[#EF4444]`:`border-[#D1D5DB] focus:border-[#8B5CF6] focus:ring-2 focus:ring-[#8B5CF6]/50`} appearance-none`,children:[(0,G.jsx)(`option`,{value:``,disabled:!0,children:`소속 구분`}),(0,G.jsx)(`option`,{value:`student`,children:`학생`}),(0,G.jsx)(`option`,{value:`teacher`,children:`선생님`}),(0,G.jsx)(`option`,{value:`parent`,children:`학부모`})]}),(0,G.jsx)(Gs,{size:18,className:`absolute right-3 top-1/2 -translate-y-1/2 text-gray-500 pointer-events-none`})]}),(0,G.jsx)(jl,{message:y.role||``})]}),r!==``&&(0,G.jsxs)(`div`,{children:[(0,G.jsxs)(`div`,{className:`grid grid-cols-[1.3fr_1fr_1fr] gap-3`,onBlur:()=>w(),children:[(0,G.jsxs)(`div`,{className:`relative`,children:[(0,G.jsxs)(`select`,{value:s,onChange:e=>{c(e.target.value),x(e=>({...e,birthDate:``}))},className:`w-full h-11 rounded-xl border border-[#D1D5DB] px-4 pr-10 outline-none appearance-none transition-all ${y.birthDate?`border-[#EF4444] focus:border-[#EF4444]`:`border-[#D1D5DB] focus:border-[#8B5CF6] focus:ring-2 focus:ring-[#8B5CF6]/50`}`,children:[(0,G.jsx)(`option`,{value:``,disabled:!0,children:`출생연도`}),k.map(e=>(0,G.jsx)(`option`,{value:e,children:e},e))]}),(0,G.jsx)(Gs,{size:18,className:`absolute right-3 top-1/2 -translate-y-1/2 text-gray-500 pointer-events-none`})]}),(0,G.jsxs)(`div`,{className:`relative`,children:[(0,G.jsxs)(`select`,{value:l,onChange:e=>{u(e.target.value),x(e=>({...e,birthDate:``}))},className:`w-full h-11 rounded-xl border border-[#D1D5DB] px-4 pr-10 outline-none appearance-none transition-all ${y.birthDate?`border-[#EF4444] focus:border-[#EF4444]`:`border-[#D1D5DB] focus:border-[#8B5CF6] focus:ring-2 focus:ring-[#8B5CF6]/50`}`,children:[(0,G.jsx)(`option`,{value:``,disabled:!0,children:`월`}),D.map(e=>(0,G.jsx)(`option`,{value:e,children:e},e))]}),(0,G.jsx)(Gs,{size:18,className:`absolute right-3 top-1/2 -translate-y-1/2 text-gray-500 pointer-events-none`})]}),(0,G.jsxs)(`div`,{className:`relative`,children:[(0,G.jsxs)(`select`,{value:d,onChange:e=>{f(e.target.value),x(e=>({...e,birthDate:``}))},className:`w-full h-11 rounded-xl border border-[#D1D5DB] px-4 pr-10 outline-none appearance-none transition-all ${y.birthDate?`border-[#EF4444] focus:border-[#EF4444]`:`border-[#D1D5DB] focus:border-[#8B5CF6] focus:ring-2 focus:ring-[#8B5CF6]/50`}`,children:[(0,G.jsx)(`option`,{value:``,disabled:!0,children:`일`}),O.map(e=>(0,G.jsx)(`option`,{value:e,children:e},e))]}),(0,G.jsx)(Gs,{size:18,className:`absolute right-3 top-1/2 -translate-y-1/2 text-gray-500 pointer-events-none`})]})]}),(0,G.jsx)(jl,{message:y.birthDate||``})]}),r===`teacher`&&(0,G.jsx)(G.Fragment,{children:(0,G.jsx)(`input`,{type:`text`,placeholder:`전공 과목`,value:p,onChange:e=>m(e.target.value),className:`w-full h-11 rounded-xl border border-[#D1D5DB] px-4 outline-none`})}),r===`parent`&&(0,G.jsxs)(`div`,{children:[(0,G.jsx)(`input`,{type:`text`,placeholder:`자녀코드`,value:h,onChange:e=>{g(e.target.value),x(e=>({...e,childLinkCode:``}))},onBlur:()=>{C(),w()},className:`w-full h-11 rounded-xl border px-4 outline-none transition-all ${y.childLinkCode?`border-[#EF4444] focus:border-[#EF4444]`:`border-[#D1D5DB] focus:border-[#8B5CF6] focus:ring-2 focus:ring-[#8B5CF6]/50`}`}),y.childLinkCode&&(0,G.jsx)(jl,{message:y.childLinkCode})]}),y.general&&(0,G.jsx)(jl,{message:y.general}),(0,G.jsx)(`button`,{type:`submit`,disabled:_,className:`cursor-pointer w-full h-11 text-white font-semibold rounded-xl bg-[#8B5CF6] disabled:opacity-60`,children:_?`저장 중...`:`회원가입 완료`})]})]})}const _f=()=>{let e=Je(),{profile:t,isLoggedIn:n,loading:r,currentUserId:i}=W(),[a,o]=(0,b.useState)(!1);return(0,b.useEffect)(()=>{(async()=>{if(!(!n||r||a)&&t&&!t.is_profile_completed&&window.location.pathname!==`/register/socialSignup`&&![`/login`,`/register`,`/register/email`,`/register/socialSignup`].some(e=>window.location.pathname.startsWith(e))){o(!0);try{let{data:n,error:r}=await U.from(`users`).select(`is_profile_completed`).eq(`auth_id`,t.auth_id).single();if(r){console.error(`프로필 완성 여부 확인 오류:`,r);return}n.is_profile_completed||e(`/register/socialSignup`,{replace:!0})}catch(e){console.error(`프로필 완성 여부 확인 중 오류:`,e)}finally{o(!1)}}})()},[n,r,t,e,a,i]),{isChecking:a}};var vf=u(S());function yf(){let e=(0,vf.c)(4),t,n;e[0]===Symbol.for(`react.memo_cache_sentinel`)?(t=(0,G.jsx)(`h2`,{className:`font-extrabold text-[84px] bg-gradient-to-r from-[#8B5CF6] to-[#EA489A] bg-clip-text text-transparent`,children:`404`}),n=(0,G.jsx)(`p`,{className:`font-bold text-[28px] bg-gradient-to-r from-[#8B5CF6] to-[#EA489A] bg-clip-text text-transparent`,children:`페이지를 찾을 수 없습니다`}),e[0]=t,e[1]=n):(t=e[0],n=e[1]);let r;e[2]===Symbol.for(`react.memo_cache_sentinel`)?(r=(0,G.jsxs)(`p`,{className:`text-center text-[#6B7280] mt-5`,children:[`요청하신 페이지가 존재하지 않거나, 이동되었을 수 있습니다.`,(0,G.jsx)(`br`,{}),`홈으로 돌아가거나 다른 기능을 이용해보세요.`]}),e[2]=r):r=e[2];let i;return e[3]===Symbol.for(`react.memo_cache_sentinel`)?(i=(0,G.jsx)(G.Fragment,{children:(0,G.jsxs)(`div`,{className:`w-screen h-screen flex flex-col items-center justify-center bg-[#F3F4F6]`,children:[(0,G.jsxs)(`div`,{className:`flex flex-col items-center min-w-[500px] h-auto px-10 py-15 bg-white rounded-2xl shadow-[0_10px_25px_rgba(139,92,246,0.1)]`,children:[t,n,r,(0,G.jsxs)(`div`,{className:`space-x-4 mt-10`,children:[(0,G.jsx)(q,{className:`px-5 py-3 rounded-xl font-bold bg-gradient-to-r from-[#8B5CF6] to-[#EA489A] text-white transition-transform duration-300 ease-out hover:-translate-y-1 hover:shadow-lg`,children:`홈으로 이동`}),(0,G.jsx)(q,{className:`px-5 py-3 rounded-xl font-bold shadow-[inset_0_0_0_1px_#8B5CF6] text-[#8B5CF6] hover:text-white hover:bg-[#8B5CF6]`,children:`게시판 보러가기`}),(0,G.jsx)(q,{className:`px-5 py-3 rounded-xl font-bold shadow-[inset_0_0_0_1px_#8B5CF6] text-[#8B5CF6] hover:text-white hover:bg-[#8B5CF6]`,children:`그룹 보러가기`})]})]}),(0,G.jsx)(Ic,{})]})}),e[3]=i):i=e[3],i}var bf=u(S());function xf(){let e=(0,bf.c)(27);_f();let{currentUserId:t,fetchProfile:n}=W(),r=Ge();al(t||``);let i,a;e[0]!==n||e[1]!==r.pathname?(i=()=>{(async()=>{let{data:e}=await U.auth.getSession(),t=e.session?.user;t&&W.setState(e=>{e.currentUserId=t.id,e.isLoggedIn=!0});let i=r.pathname.match(/^\/profile\/([^/]+)/);if(i){let e=i[1];e===`me`&&t?await n(t.id):await n(e)}else t&&await n(t.id)})()},a=[n,r.pathname],e[0]=n,e[1]=r.pathname,e[2]=i,e[3]=a):(i=e[2],a=e[3]),(0,b.useEffect)(i,a);let o;e[4]===Symbol.for(`react.memo_cache_sentinel`)?(o=(0,G.jsx)($c,{}),e[4]=o):o=e[4];let s;e[5]===Symbol.for(`react.memo_cache_sentinel`)?(s=(0,G.jsx)(I,{index:!0,element:(0,G.jsx)(fl,{})}),e[5]=s):s=e[5];let c;e[6]===Symbol.for(`react.memo_cache_sentinel`)?(c=(0,G.jsx)(I,{path:`profile/:id`,element:(0,G.jsx)(Ru,{})}),e[6]=c):c=e[6];let l;e[7]===Symbol.for(`react.memo_cache_sentinel`)?(l=(0,G.jsx)(I,{path:`profile/me/edit`,element:(0,G.jsx)(cd,{})}),e[7]=l):l=e[7];let u;e[8]===Symbol.for(`react.memo_cache_sentinel`)?(u=(0,G.jsx)(I,{index:!0,element:(0,G.jsx)($,{})}),e[8]=u):u=e[8];let d;e[9]===Symbol.for(`react.memo_cache_sentinel`)?(d=(0,G.jsx)(I,{path:`create`,element:(0,G.jsx)(Id,{})}),e[9]=d):d=e[9];let f;e[10]===Symbol.for(`react.memo_cache_sentinel`)?(f=(0,G.jsx)(I,{index:!0,element:(0,G.jsx)(uf,{})}),e[10]=f):f=e[10];let p;e[11]===Symbol.for(`react.memo_cache_sentinel`)?(p=(0,G.jsx)(I,{path:`:postId`,element:(0,G.jsx)(ff,{})}),e[11]=p):p=e[11];let m;e[12]===Symbol.for(`react.memo_cache_sentinel`)?(m=(0,G.jsxs)(I,{path:`posts`,children:[f,p,(0,G.jsx)(I,{path:`create`,element:(0,G.jsx)(hf,{})})]}),e[12]=m):m=e[12];let h;e[13]===Symbol.for(`react.memo_cache_sentinel`)?(h=(0,G.jsxs)(I,{path:`groups`,children:[u,d,(0,G.jsxs)(I,{path:`:groupId`,children:[m,(0,G.jsx)(I,{path:`attendance`,element:(0,G.jsx)(Xd,{})})]})]}),e[13]=h):h=e[13];let g;e[14]===Symbol.for(`react.memo_cache_sentinel`)?(g=(0,G.jsx)(I,{index:!0,element:(0,G.jsx)(Zu,{})}),e[14]=g):g=e[14];let _;e[15]===Symbol.for(`react.memo_cache_sentinel`)?(_=(0,G.jsx)(I,{path:`:id`,element:(0,G.jsx)(Sd,{})}),e[15]=_):_=e[15];let v;e[16]===Symbol.for(`react.memo_cache_sentinel`)?(v=(0,G.jsx)(Kd,{}),e[16]=v):v=e[16];let y;e[17]===Symbol.for(`react.memo_cache_sentinel`)?(y=(0,G.jsxs)(I,{path:`posts`,children:[g,_,(0,G.jsx)(I,{path:`create`,element:v,children:(0,G.jsx)(I,{path:`:id`,element:(0,G.jsx)(Kd,{})})})]}),e[17]=y):y=e[17];let x;e[18]===Symbol.for(`react.memo_cache_sentinel`)?(x=(0,G.jsx)(I,{path:`msg`,element:(0,G.jsx)(X,{})}),e[18]=x):x=e[18];let S;e[19]===Symbol.for(`react.memo_cache_sentinel`)?(S=(0,G.jsx)(I,{path:`msg/:id`,element:(0,G.jsx)(X,{})}),e[19]=S):S=e[19];let C;e[20]===Symbol.for(`react.memo_cache_sentinel`)?(C=(0,G.jsxs)(I,{element:o,children:[s,c,l,h,y,x,S,(0,G.jsx)(I,{path:`search`,element:(0,G.jsx)(nd,{})})]}),e[20]=C):C=e[20];let w;e[21]===Symbol.for(`react.memo_cache_sentinel`)?(w=(0,G.jsx)(nl,{}),e[21]=w):w=e[21];let T;e[22]===Symbol.for(`react.memo_cache_sentinel`)?(T=(0,G.jsx)(I,{path:`login`,element:(0,G.jsx)(wl,{})}),e[22]=T):T=e[22];let E;e[23]===Symbol.for(`react.memo_cache_sentinel`)?(E=(0,G.jsx)(I,{index:!0,element:(0,G.jsx)(xl,{})}),e[23]=E):E=e[23];let D;e[24]===Symbol.for(`react.memo_cache_sentinel`)?(D=(0,G.jsxs)(I,{path:`register`,children:[E,(0,G.jsx)(I,{path:`socialSignup`,element:(0,G.jsx)(gf,{})})]}),e[24]=D):D=e[24];let O;e[25]===Symbol.for(`react.memo_cache_sentinel`)?(O=(0,G.jsxs)(I,{element:w,children:[T,D,(0,G.jsx)(I,{path:`registerEmail`,element:(0,G.jsx)(Nl,{})})]}),e[25]=O):O=e[25];let k;return e[26]===Symbol.for(`react.memo_cache_sentinel`)?(k=(0,G.jsx)(G.Fragment,{children:(0,G.jsxs)(St,{children:[C,O,(0,G.jsx)(I,{path:`*`,element:(0,G.jsx)(yf,{})})]})}),e[26]=k):k=e[26],k}(0,y.createRoot)(document.getElementById(`root`)).render((0,G.jsx)(b.StrictMode,{children:(0,G.jsx)(on,{children:(0,G.jsx)(xf,{})})}));export{Rr as a,zr as i,Vr as n,Ur as o,Hr as r,Br as t};